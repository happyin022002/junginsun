<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ReplanManageDBDAOMergeActTmlIfDtlCSQL">
			<desc><![CDATA[terminal change 결과를 SCE_ACT_TML_IF_DTL 에 관리한다.]]></desc>
			<sql><![CDATA[
MERGE
INTO SCE_ACT_TML_IF_DTL S USING (
    SELECT @[act_rcv_dt] ACT_RCV_DT,
      @[act_rcv_no] ACT_RCV_NO,
      @[cop_no] COP_NO,
      @[tml_if_dtl_sts_cd] TML_IF_DTL_STS_CD,
      @[err_msg] ERR_MSG,
      SYSDATE CRE_DT,
      SYSDATE UPD_DT
    FROM DUAL) A ON (S.ACT_RCV_DT = A.ACT_RCV_DT
      AND S.ACT_RCV_NO = A.ACT_RCV_NO
      AND S.COP_NO = A.COP_NO) WHEN MATCHED THEN
UPDATE
SET TML_IF_DTL_STS_CD = A.TML_IF_DTL_STS_CD,
  ERR_MSG = A.ERR_MSG,
  CRE_DT = SYSDATE,
  UPD_DT = SYSDATE WHEN NOT MATCHED THEN
INSERT (S.ACT_RCV_DT,
      S.ACT_RCV_NO,
      S.COP_NO,
      S.TML_IF_DTL_STS_CD,
      S.ERR_MSG,
      S.CRE_DT,
      S.UPD_DT,
      S.CRE_USR_ID,
      S.UPD_USR_ID)
VALUES (A.ACT_RCV_DT,
      A.ACT_RCV_NO,
      A.COP_NO,
      A.TML_IF_DTL_STS_CD,
      A.ERR_MSG,
      A.CRE_DT,
      A.UPD_DT,
      'tmlChg',
      'tmlChg')			]]></sql>
			<params>
				<param name="act_rcv_dt" type="12" value="" out="N"/>
				<param name="act_rcv_no" type="12" value="" out="N"/>
				<param name="cop_no" type="12" value="" out="N"/>
				<param name="tml_if_dtl_sts_cd" type="12" value="" out="N"/>
				<param name="err_msg" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
