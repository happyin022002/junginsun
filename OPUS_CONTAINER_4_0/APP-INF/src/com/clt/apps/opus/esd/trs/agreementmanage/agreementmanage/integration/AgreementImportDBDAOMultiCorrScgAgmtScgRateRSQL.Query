<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AgreementImportDBDAOMultiCorrScgAgmtScgRateRSQL">
			<desc><![CDATA[Surcharge Rate 조회]]></desc>
			<sql><![CDATA[
SELECT X.TRSP_AGMT_OFC_CTY_CD,
       X.TRSP_AGMT_SEQ,
       TO_CHAR(NVL(X.EFF_FM_DT, TO_DATE('19000101', 'YYYYMMDD')), 'YYYYMMDDHH24MISS') AS EFF_FM_DT,
       TO_CHAR(NVL(X.EFF_TO_DT, TO_DATE('99991231', 'YYYYMMDD')), 'YYYYMMDDHH24MISS') AS EFF_TO_DT,
       X.TO_WGT,
       X.WGT_MEAS_UT_CD,
       X.CURR_CD,
       X.TRSP_ONE_WY_RT,
       X.TRSP_RND_RT,
       NVL(X.TRSP_AGMT_EQ_TP_CD, 'XX') || NVL(X.TRSP_AGMT_EQ_SZ_CD, '') AS TRSP_AGMT_EQ_TP_SZ_CD,
       X.EQ_KND_CD,
       USR_DEF_RMK,
       AFT_USR_DEF_RMK,
       X.DELT_FLG,
       X.AGMT_SCG_RT_DIV_CD,
              (
                SELECT /*+ INDEX_DESC(A XPKTRS_AGMT_RT_TP) */
                       A.TRSP_AGMT_RT_TP_SER_NO
                  FROM TRS_AGMT_RT_TP A
                 WHERE A.TRSP_AGMT_OFC_CTY_CD          = X.TRSP_AGMT_OFC_CTY_CD
                   AND A.TRSP_AGMT_SEQ                 = X.TRSP_AGMT_SEQ
                   AND A.TRSP_AGMT_RT_TP_CD            = X.TRSP_AGMT_RT_TP_CD
                   AND A.TRSP_COST_MOD_CD              = X.TRSP_COST_MOD_CD
                   AND A.AGMT_TRSP_TP_CD               = X.AGMT_TRSP_TP_CD
                   AND NVL(A.TRSP_BND_CD, 'N')         = NVL(X.TRSP_BND_CD, 'N')
                   AND A.CGO_TP_CD                     = X.CGO_TP_CD
                   AND NVL(A.SPCL_CGO_CNTR_TP_CD, 'N') = NVL(X.SPCL_CGO_CNTR_TP_CD, 'N')
                   AND A.CUST_NOMI_TRKR_FLG            = X.CUST_NOMI_TRKR_FLG
                   AND A.CUST_CNT_CD                   = X.CUST_CNT_CD
                   AND A.CUST_SEQ                      = X.CUST_SEQ
                   AND A.CMDT_GRP_CD                   = X.CMDT_GRP_CD
                   AND A.RAIL_SVC_TP_CD                = X.RAIL_SVC_TP_CD
                   AND ROWNUM = 1
               ) TRSP_AGMT_RT_TP_SER_NO,
              (
                SELECT /*+ INDEX_DESC(B XPKTRS_AGMT_SCG_NOD) */
                       B.TRSP_AGMT_SCG_NOD_SEQ
                  FROM TRS_AGMT_RT_TP A
                      ,TRS_AGMT_SCG_NOD   B
                 WHERE A.TRSP_AGMT_OFC_CTY_CD          = B.TRSP_AGMT_OFC_CTY_CD
                   AND A.TRSP_AGMT_SEQ                 = B.TRSP_AGMT_SEQ
                   AND A.TRSP_AGMT_RT_TP_SER_NO        = B.TRSP_AGMT_RT_TP_SER_NO
                   AND A.TRSP_AGMT_OFC_CTY_CD          = X.TRSP_AGMT_OFC_CTY_CD
                   AND A.TRSP_AGMT_SEQ                 = X.TRSP_AGMT_SEQ
                   AND A.TRSP_AGMT_RT_TP_CD            = X.TRSP_AGMT_RT_TP_CD
                   AND A.TRSP_COST_MOD_CD              = X.TRSP_COST_MOD_CD
                   AND A.AGMT_TRSP_TP_CD               = X.AGMT_TRSP_TP_CD
                   AND NVL(A.TRSP_BND_CD, 'N')         = NVL(X.TRSP_BND_CD, 'N')
                   AND A.CGO_TP_CD                     = X.CGO_TP_CD
                   AND NVL(A.SPCL_CGO_CNTR_TP_CD, 'N') = NVL(X.SPCL_CGO_CNTR_TP_CD, 'N')
                   AND A.CUST_NOMI_TRKR_FLG            = X.CUST_NOMI_TRKR_FLG
                   AND A.CUST_CNT_CD                   = X.CUST_CNT_CD
                   AND A.CUST_SEQ                      = X.CUST_SEQ
                   AND A.CMDT_GRP_CD                   = X.CMDT_GRP_CD
                   AND A.RAIL_SVC_TP_CD                = X.RAIL_SVC_TP_CD
                   AND B.FM_NOD_CD                     = X.FM_NOD_CD
                   AND B.VIA_NOD_CD                    = X.VIA_NOD_CD
                   AND B.DOR_NOD_CD                    = X.DOR_NOD_CD
                   AND B.TO_NOD_CD                     = X.TO_NOD_CD
                   AND B.TRSP_SCG_CD                   = X.TRSP_SCG_CD
                   AND B.AGMT_ROUT_ALL_FLG             = X.AGMT_ROUT_ALL_FLG
                   AND ROWNUM = 1
               ) TRSP_AGMT_SCG_NOD_SEQ,
       X.TRSP_AGMT_RT_SEQ TRSP_AGMT_SCG_RT_SEQ,
       X.COM_SCG_APLY_FLG,
       X.WO_APLY_FLG,
       X.AGMT_COST_FLG
  FROM TRS_AGMT_TMP X
 WHERE X.TRSP_TMP_SEQ = @[trsp_tmp_seq]
   AND X.DELT_FLG = @[chk_delt]
   AND X.ROW_NO IS NOT NULL
   AND X.TRSP_AGMT_RT_SEQ IS NULL			]]></sql>
			<params>
				<param name="trsp_tmp_seq" type="12" value="" out="N"/>
				<param name="chk_delt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
