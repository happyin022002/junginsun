<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RailBillingReqCreateDBDAOSearchReqCreationTargetEmptyCntrRSQL">
			<desc><![CDATA[Request Creation Target List (Empty Cntr) 조회]]></desc>
			<sql><![CDATA[
SELECT @[trsp_so_ofc_cty_cd] trsp_so_ofc_cty_cd                                                                                           
               ,trs_trsp_svc_ord_seq1.NEXTVAL  trsp_so_seq                                                                     
               ,TRIM(a.repo_pln_id)||'-'||TRIM(a.pln_yrwk)||'-'||TRIM(a.ref_id)||'-'||TRIM(TO_CHAR(a.ref_seq))||               
               '='||TRIM(mst.rout_org_nod_cd)||'-'||TRIM(mst.rout_dest_nod_cd)||'-'||TRIM(TO_CHAR(mst.rout_seq))  key_value    
               ,mst.inlnd_rout_inv_bil_patt_cd rail_cmb_thru_tp_cd                                                             
               ,'C' trsp_so_sts_cd                                                                                             
               ,'W' trsp_rail_bil_tp_cd                                                                                        
               ,a.fm_yd_cd fm_nod_cd                                                                                           
               ,a.to_yd_cd to_nod_cd                                                                                           
               ,a.vsl_cd                                                                                                       
               ,a.skd_voy_no                                                                                                   
               ,a.skd_dir_cd                                                                                                   
               ,a.vsl_lane_cd slan_cd                                                                                          
               ,a.cntr_no eq_no                                                                                                
               ,a.cntr_tpsz_cd eq_tpsz_cd                                                                                      
               ,'M' cgo_tp_cd                                                                                                  
               ,mst.rout_org_nod_cd                                                                                            
               ,mst.rout_dest_nod_cd                                                                                           
               ,mst.rout_seq                                                                                                   
               ,mst.rout_pln_cd                                                                                                
               ,mst.inlnd_rout_rmk                                                                                             
               ,'SYSTEM' cre_ofc_cd                                                                                            
               ,SYSDATE cre_dt                                                                                                 
               ,'SPP_IF' cre_usr_id                                                                                            
               ,SYSDATE upd_dt                                                                                                 
               ,'SPP_IF' upd_usr_id                                                                                            
               ,'' inter_rmk                                                                                                   
               ,'' spcl_instr_rmk                                                                                              
               ,a.so_if_div_cd trsp_mty_cost_mod_cd                                                                            
               ,a.repo_pln_id                                                                                                  
               ,a.pln_yrwk                                                                                                     
               ,a.ref_seq                                                                                                      
               ,a.ref_id                                                                                                       
               ,a.so_rqst_dt trsp_mty_rqst_dt                                                                                  
               ,a.eq_ctrl_ofc_cd                                                                                               
               ,(SELECT MAX('Y')                                                                                               
                   FROM trs_trsp_rail_edi_nod                                                                                  
                  WHERE edi_rcv_nod_cd IN(a.fm_yd_cd, a.to_yd_cd)                                                              
                    AND LENGTH(edi_rcv_vndr_abbr_nm) > 0) mtc_edi_ind_cd                                                       
           FROM eqr_repo_exe_so_if a                                                                                           
               ,mst_container b                                                                                                
               ,prd_inlnd_rout_mst mst                                                                                         
          WHERE a.cntr_no = b.cntr_no(+)                                                                                       
            AND a.fm_yd_cd = mst.rout_org_nod_cd(+)                                                                            
            AND a.to_yd_cd = mst.rout_dest_nod_cd(+)                                                                           
            AND mst.pctl_io_bnd_cd = 'M'                                                                                       
            AND NVL(mst.delt_flg, 'N') = 'N'   
            AND MST.WRS_MTY_CMDT_CD = 'MN'                                                                                
       	#if ($nodList.size() > 0) 
            AND (mst.rout_org_nod_cd, mst.rout_dest_nod_cd, mst.rout_seq) IN (
													            #foreach( ${keyMst} in ${nodList}) 
	            													#if($velocityCount == 1) 
		            													('$keyMst.velParamField1','$keyMst.velParamField2','$keyMst.velParamField3')
	            													#else 
		            													,('$keyMst.velParamField1','$keyMst.velParamField2','$keyMst.velParamField3')
	            													#end 
            													#end
																			)    
		#end
		#if ($RepoPlnList.size() > 0) 
            AND (a.repo_pln_id, a.pln_yrwk, a.ref_id, a.ref_seq) IN (
													            #foreach( ${keyRepoPln} in ${RepoPlnList}) 
	            													#if($velocityCount == 1) 
		            													('$keyRepoPln.velParamField1','$keyRepoPln.velParamField2','$keyRepoPln.velParamField3','$keyRepoPln.velParamField4')
	            													#else 
		            													,('$keyRepoPln.velParamField1','$keyRepoPln.velParamField2','$keyRepoPln.velParamField3','$keyRepoPln.velParamField4')
	            													#end 
            													#end
																	)
		#end			]]></sql>
			<params>
				<param name="trsp_so_ofc_cty_cd" type="12" value="WRS" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
