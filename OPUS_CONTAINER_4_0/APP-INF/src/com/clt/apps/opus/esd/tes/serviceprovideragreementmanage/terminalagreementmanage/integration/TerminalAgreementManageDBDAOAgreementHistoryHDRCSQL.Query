<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TerminalAgreementManageDBDAOAgreementHistoryHDRCSQL">
			<desc><![CDATA[Agreement Header Insert]]></desc>
			<sql><![CDATA[
INSERT INTO TES_TML_AGMT_HDR ( 
		tml_agmt_ofc_cty_cd
		, tml_agmt_seq
		, tml_agmt_ver_no
		, yd_cd
		, vndr_seq
		, ctrt_ofc_cd
		, cre_ofc_cd
		, eff_fm_dt
		, eff_to_dt
		, auto_xtd_flg
		, agmt_rmk
		, tml_agmt_sts_cd
		, delt_flg
		, cre_usr_id
		, cre_dt
		, upd_usr_id
		, upd_dt
		, locl_cre_dt
	)
	(SELECT                                
		@[tml_agmt_ofc_cty_cd]                                                                   
		, @[tml_agmt_seq]
		, @[tml_agmt_ver_no_new]
		, yd_cd
		, vndr_seq                                                     
		, ctrt_ofc_cd                                                 
		, cre_ofc_cd                                                   
#if (${amend_gb} == 'Y') 
		, eff_to_dt + 1  
		, ADD_MONTHS(eff_to_dt, 12) 
#elseif (${amend_gb} == 'N') 
		, TO_DATE(@[eff_fm_dt], 'YYYY-MM-DD')                    
		, TO_DATE(@[eff_to_dt], 'YYYY-MM-DD') 
#end
		, @[auto_xtd_flg]                                          
		, @[agmt_rmk]                                          
#if (${version_gb} == 'N') 
		, 'C' 
#elseif (${version_gb} == 'Y') 
		, 'P'
#end
		, 'N'                                  
		, @[cre_usr_id]                                   
		, SYSDATE
		, @[cre_usr_id]                                   
		, SYSDATE
		, GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[ofc_cd])                                                   
FROM	TES_TML_AGMT_HDR                                              
WHERE	tml_agmt_ofc_cty_cd	= @[tml_agmt_ofc_cty_cd]                                        
AND		tml_agmt_seq		= @[tml_agmt_seq]                                           
AND		tml_agmt_ver_no		= @[tml_agmt_ver_no]                                             
)			]]></sql>
			<params>
				<param name="tml_agmt_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="tml_agmt_seq" type="2" value="" out="N"/>
				<param name="tml_agmt_ver_no_new" type="2" value="" out="N"/>
				<param name="eff_fm_dt" type="12" value="" out="N"/>
				<param name="eff_to_dt" type="12" value="" out="N"/>
				<param name="auto_xtd_flg" type="12" value="" out="N"/>
				<param name="agmt_rmk" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="tml_agmt_ver_no" type="2" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
