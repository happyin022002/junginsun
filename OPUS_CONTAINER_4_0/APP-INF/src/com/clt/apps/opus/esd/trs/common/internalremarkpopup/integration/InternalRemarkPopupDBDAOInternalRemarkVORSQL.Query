<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="InternalRemarkPopupDBDAOInternalRemarkVORSQL">
			<desc><![CDATA[Get Internal Remarks from TRS_INTER_RMK Table]]></desc>
			<sql><![CDATA[
--BKG LEVEL 
SELECT DECODE(BKG_NO, 'DUM000000000', '', BKG_NO) AS BKG_NO
      ,INTER_RMK_SEQ
      ,EQ_NO
      ,TRSP_SO_OFC_CTY_CD||TRSP_SO_SEQ AS SO_NO
      ,TRSP_WO_OFC_CTY_CD||TRSP_WO_SEQ AS WO_NO
      ,INTER_RMK_CTNT AS INTER_RMK
      ,UPD_USR_ID AS USR_ID
      ,LOCL_UPD_DT AS UPD_DT
	  ,DECODE(INTER_RMK_CD, 'D', 'EMAIL',
                            'G', 'GEMAIL',
                            'E', 'EMEDIT',
                            'C', 'CUSNOT',
                            'B', 'BKG', 'TRS') AS INTER_RMK_CD
FROM  TRS_INTER_RMK
WHERE 1=1
  AND DELT_FLG = 'N'
  AND BKG_NO = @[bkg_no]
  AND EQ_NO IS NULL

UNION

--BKG CNTR LEVEL
SELECT DECODE(BKG_NO, 'DUM000000000', '', BKG_NO) AS BKG_NO
      ,INTER_RMK_SEQ
      ,EQ_NO
      ,TRSP_SO_OFC_CTY_CD||TRSP_SO_SEQ AS SO_NO
      ,TRSP_WO_OFC_CTY_CD||TRSP_WO_SEQ AS WO_NO
      ,INTER_RMK_CTNT AS INTER_RMK
      ,UPD_USR_ID AS USR_ID
      ,LOCL_UPD_DT AS UPD_DT
	  ,DECODE(INTER_RMK_CD, 'D', 'EMAIL',
                            'G', 'GEMAIL',
                            'E', 'EMEDIT',
                            'C', 'CUSNOT',
                            'B', 'BKG', 'TRS') AS INTER_RMK_CD
FROM  TRS_INTER_RMK
WHERE 1=1
  AND DELT_FLG = 'N'
  AND BKG_NO = @[bkg_no]
  AND NVL2(@[eq_no], EQ_NO, 'XX') = NVL(@[eq_no], 'XX')

UNION

--TRS S/O LEVEL
SELECT DECODE(BKG_NO, 'DUM000000000', '', BKG_NO) AS BKG_NO
      ,INTER_RMK_SEQ
      ,EQ_NO
      ,TRSP_SO_OFC_CTY_CD||TRSP_SO_SEQ AS SO_NO
      ,TRSP_WO_OFC_CTY_CD||TRSP_WO_SEQ AS WO_NO
      ,INTER_RMK_CTNT AS INTER_RMK
      ,UPD_USR_ID AS USR_ID
      ,LOCL_UPD_DT AS UPD_DT
	  ,DECODE(INTER_RMK_CD, 'D', 'EMAIL',
                            'G', 'GEMAIL',
                            'E', 'EMEDIT',
                            'C', 'CUSNOT',
                            'B', 'BKG', 'TRS') AS INTER_RMK_CD
FROM  TRS_INTER_RMK
WHERE 1=1
  AND DELT_FLG = 'N'
  AND INTER_RMK_CD = 'T'
  AND BKG_NO = @[bkg_no]
#if(${so_no} != '')
  AND TRSP_SO_OFC_CTY_CD = SUBSTR(@[so_no], 0, 3)
  AND TRSP_SO_SEQ = SUBSTR(@[so_no], 4)
#end			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="eq_no" type="12" value="" out="N"/>
				<param name="so_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
