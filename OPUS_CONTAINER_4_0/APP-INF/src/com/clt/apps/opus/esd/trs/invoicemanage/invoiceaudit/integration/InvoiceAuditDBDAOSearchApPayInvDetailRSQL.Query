<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="InvoiceAuditDBDAOSearchApPayInvDetailRSQL">
			<desc><![CDATA[AP_PAY_INV_DTL 테이블 INSERT]]></desc>
			<sql><![CDATA[
SELECT 
      NVL(LGS_COST_CD,'000000') AS LGS_COST_CD
      ,NVL(ACCT_CD,'000000') AS ACCT_CD
      ,NVL(VSL_CD,'0000') VSL_CD
      ,NVL(SKD_VOY_NO,'0000') SKD_VOY_NO
      ,NVL(SKD_DIR_CD,'0') SKD_DIR_CD
      ,NVL(SKD_DIR_CD,'0') REV_DIR_CD
      ,SLAN_CD
      ,NVL(VSL_CD,'0000')||NVL(SKD_VOY_NO,'0000')||NVL(SKD_DIR_CD,'0') AS ACT_VVD_CD
      ,EQ_TPSZ_CD AS CNTR_TPSZ_CD
      ,BZC_AMT + NVL(NEGO_AMT, 0) AS INV_AMT
      ,TRSP_SO_OFC_CTY_CD AS SO_OFC_CTY_CD
      ,TRSP_SO_SEQ AS SO_SEQ
      ,'I' IBFLAG
  FROM TRS_TRSP_SVC_ORD S
 WHERE INV_NO = @[inv_no] -- 파라메터로 받음 (Confirm 한 invoice no)
UNION ALL
SELECT 
      NVL(LGS_CST.LGS_COST_CD,'000000') AS LGS_COST_CD
      ,NVL(LGS_CST.ACCT_CD,'000000') AS ACCT_CD
      ,NVL(SVC_ORD.VSL_CD,'0000') VSL_CD
      ,NVL(SVC_ORD.SKD_VOY_NO,'0000') SKD_VOY_NO
      ,NVL(SVC_ORD.SKD_DIR_CD,'0') SKD_DIR_CD
      ,NVL(SVC_ORD.SKD_DIR_CD,'0') REV_DIR_CD
      ,SVC_ORD.SLAN_CD
      ,NVL(SVC_ORD.VSL_CD,'0000')||NVL(SVC_ORD.SKD_VOY_NO,'0000')||NVL(SVC_ORD.SKD_DIR_CD,'0') AS ACT_VVD_CD
      ,SVC_ORD.EQ_TPSZ_CD AS CNTR_TPSZ_CD
      ,SCG_DTL.SCG_AMT + NVL(SCG_DTL.INV_SCG_AMT, 0) AS INV_AMT
      ,SVC_ORD.TRSP_SO_OFC_CTY_CD AS SO_OFC_CTY_CD
      ,SVC_ORD.TRSP_SO_SEQ AS SO_SEQ
      ,'I' IBFLAG
FROM		TRS_TRSP_SVC_ORD 				SVC_ORD																																																																																													
		,	TES_LGS_COST					LGS_CST																								
		,	TRS_TRSP_SCG_DTL				SCG_DTL             																				
WHERE		SCG_DTL.TRSP_SO_OFC_CTY_CD 		= SVC_ORD.TRSP_SO_OFC_CTY_CD        																
AND			SCG_DTL.TRSP_SO_SEQ        		= SVC_ORD.TRSP_SO_SEQ               																
AND			SCG_DTL.LGS_COST_CD        		= LGS_CST.LGS_COST_CD    
AND    SVC_ORD.INV_NO = @[inv_no] -- 파라메터로 받음 (Confirm 한 invoice no) 
   


			]]></sql>
			<params>
				<param name="inv_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
