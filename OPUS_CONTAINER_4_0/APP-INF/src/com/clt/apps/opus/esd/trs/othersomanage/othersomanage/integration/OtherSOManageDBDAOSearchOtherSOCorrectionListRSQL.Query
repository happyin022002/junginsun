<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OtherSOManageDBDAOSearchOtherSOCorrectionListRSQL">
			<desc><![CDATA[Other Correction 목록 조회]]></desc>
			<sql><![CDATA[
SELECT 
    A.EQ_NO	eq_no,
    A.EQ_TPSZ_CD,
    A.FM_NOD_CD,
    SUBSTR(A.FM_NOD_CD, 1, 5) FM_LOC_VALUE,
    SUBSTR(A.FM_NOD_CD, 6, 2) FM_YARD_VALUE,
    A.VIA_NOD_CD,
    SUBSTR(A.VIA_NOD_CD, 1, 5) VIA_LOC_VALUE,
    SUBSTR(A.VIA_NOD_CD, 6, 2) VIA_YARD_VALUE,
    A.TO_NOD_CD,
    SUBSTR(A.TO_NOD_CD, 1, 5) TO_LOC_VALUE,
    SUBSTR(A.TO_NOD_CD, 6, 2) TO_YARD_VALUE,
    A.DOR_NOD_CD,
    SUBSTR(A.DOR_NOD_CD, 1, 5) DR_LOC_VALUE,
    SUBSTR(A.DOR_NOD_CD, 6, 2) DR_YARD_VALUE,
    A.ACT_CUST_CNT_CD||A.ACT_CUST_SEQ ACT_CUST_CNT_CD,
    A.DOR_DE_ADDR,
    A.VNDR_SEQ,
    B.VNDR_ABBR_NM,
    A.CURR_CD,
    A.BZC_AMT,
    A.NEGO_AMT,
    A.FUEL_SCG_AMT,
    A.ETC_ADD_AMT,
    A.REF_BKG_NO,
    A.REF_BL_NO,
    A.TRSP_PURP_RSN,
    A.TRSP_SO_OFC_CTY_CD,
    A.TRSP_SO_SEQ,
    A.TRSP_SO_TP_CD,
    A.TRSP_SO_STS_CD,
    A.EQ_KND_CD,
    A.CGO_TP_CD,
    A.TRSP_COST_DTL_MOD_CD,
    A.TRSP_CRR_MOD_CD,
    A.CRE_OFC_CD,
    TO_CHAR(A.LOCL_CRE_DT, 'YYYYMMDD') CRE_DT,
    A.CRE_USR_ID,
    TO_CHAR(A.LOCL_UPD_DT, 'YYYYMMDD') UPD_DT,
    A.UPD_USR_ID,
	DECODE((SELECT MAX(RMK.BKG_NO)
		   FROM TRS_INTER_RMK RMK
		  WHERE 1=1
            AND A.TRSP_SO_OFC_CTY_CD = RMK.TRSP_SO_OFC_CTY_CD(+)
            AND A.TRSP_SO_SEQ = RMK.TRSP_SO_SEQ(+)
			AND NVL(RMK.DELT_FLG, 'X') = 'N'), '', '', 'Y') INTER_RMK
FROM TRS_TRSP_SVC_ORD A,
     MDM_VENDOR B
WHERE A.VNDR_SEQ = B.VNDR_SEQ(+)
    AND A.TRSP_SO_STS_CD IN ('C','R') 

   	#if(${fmdate} != '')
       	AND A.LOCL_CRE_DT BETWEEN TO_DATE(@[fmdate]||'000000','YYYYMMDDHH24MISS') AND TO_DATE(@[todate]||'235959','YYYYMMDDHH24MISS')  
    #end

  	#if(${trs_cost_md_cd} != '')
    	AND A.TRSP_COST_DTL_MOD_CD = @[trs_cost_md_cd]
	#end    

  	#if(${trs_md_cd} != '')
		AND A.TRSP_CRR_MOD_CD = @[trs_md_cd]
	#end    

  	#if(${trsp_so_fm_node} != '')
    	AND A.FM_NOD_CD = @[trsp_so_fm_node]
	#end    

  	#if(${trsp_so_to_node} != '')
    	AND A.TO_NOD_CD = @[trsp_so_to_node]
	#end    

    #if($eqnumberArr.size() > 0)
  	   	AND A.EQ_NO IN (
	   		#foreach( ${key} in ${eqnumberArr}) 
	      		#if($velocityCount == 1)
 		    		'${key}'	
	      		#else 
 		    		, '${key}'	
	      		#end 
	   		#end 
	   	)
    #end    

   	#if(${trsp_so_tp_cd} != '')
   		AND A.TRSP_SO_TP_CD = @[trsp_so_tp_cd]
	#end    

    AND A.DELT_FLG <> 'Y'
    AND A.CRE_OFC_CD = @[cre_ofc_cd]

ORDER BY A.EQ_NO			]]></sql>
			<params>
				<param name="fmdate" type="12" value="" out="N"/>
				<param name="todate" type="12" value="" out="N"/>
				<param name="trs_cost_md_cd" type="12" value="" out="N"/>
				<param name="trs_md_cd" type="12" value="" out="N"/>
				<param name="trsp_so_fm_node" type="12" value="" out="N"/>
				<param name="trsp_so_to_node" type="12" value="" out="N"/>
				<param name="trsp_so_tp_cd" type="12" value="" out="N"/>
				<param name="cre_ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
