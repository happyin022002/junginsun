<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BkgCopManageDBDAOValidateTROSequenceRSQL">
			<desc><![CDATA[기 발행되어 처리된 TRO 내역을 확인한다.]]></desc>
			<sql><![CDATA[
SELECT M.COP_NO, M.IO_BND_CD, M.AREA_CONTI_CD, M.BKG_NO, M.TRO_SEQ, M.TRO_SUB_SEQ, H.CNTR_NO
FROM SCE_TRO_MAPG M, SCE_COP_HDR H
WHERE 1=1
AND M.COP_NO = H.COP_NO
AND M.BKG_NO = @[bkg_no]
AND M.IO_BND_CD = @[io_bnd_cd] 
#if (${tro_seq} != '')
	AND M.TRO_SEQ = @[tro_seq]  
#end
#if (${tro_sub_seq} != '')
	AND M.TRO_SUB_SEQ = CASE WHEN M.AREA_CONTI_CD = 'E' AND @[io_bnd_cd] = 'I' THEN M.TRO_SUB_SEQ
							 ELSE TO_NUMBER(@[tro_sub_seq])
						END
#end

#if (${area_conti_cd} != '') 
	AND AREA_CONTI_CD = @[area_conti_cd]
#end			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
				<param name="tro_seq" type="12" value="" out="N"/>
				<param name="tro_sub_seq" type="12" value="" out="N"/>
				<param name="area_conti_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
