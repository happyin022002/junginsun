<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="Edi315SendDBDAOGetBkgEDICustInfoRSQL">
			<desc><![CDATA[GetBkgEDICustInfo]]></desc>
			<sql><![CDATA[
SELECT  '{CUST_INFO' || CHR(10) ||
       'CUST_TP : ' || BKG_CUST_TP_CD || CHR(10) ||
       'CUST_CD : ' || CUST_SEQ || CHR(10)  ||
       'UN_CUST_CD : ' || (SELECT UN_LOC_CD FROM BKG_XTER_RQST_MST BK,BKG_XTER_CUST BC
                            WHERE BK.BKG_NO =  @[e_bkg_no]
                            AND BK.XTER_RQST_NO = BC.XTER_RQST_NO
                            AND BK.XTER_RQST_SEQ = BC.XTER_RQST_SEQ
                            AND BK.XTER_SNDR_ID = BC.XTER_SNDR_ID 
                            AND XTER_CUST_TP_CD = 'S' 
                            AND ROWNUM = 1) || CHR(10)  ||
       'PCC_CUST_CD : ' ||(SELECT PRNR_CUST_CD FROM BKG_XTER_RQST_MST BK,BKG_XTER_CUST BC
                            WHERE BK.BKG_NO =  @[e_bkg_no]
                            AND BK.XTER_RQST_NO = BC.XTER_RQST_NO
                            AND BK.XTER_RQST_SEQ = BC.XTER_RQST_SEQ
                            AND BK.XTER_SNDR_ID = BC.XTER_SNDR_ID 
                            AND PRNR_CUST_CD is not null
                            AND XTER_CUST_TP_CD = 'S'
                            AND ROWNUM = 1) || CHR(10)  ||
       'PARTNER_REF_NO : ' || (SELECT PRNR_REF_NO FROM BKG_XTER_RQST_MST BK,BKG_XTER_CUST BC
                            WHERE BK.BKG_NO =  @[e_bkg_no]
                            AND BK.XTER_RQST_NO = BC.XTER_RQST_NO
                            AND BK.XTER_RQST_SEQ = BC.XTER_RQST_SEQ
                            AND BK.XTER_SNDR_ID = BC.XTER_SNDR_ID 
                            AND PRNR_REF_NO is not null
                            AND XTER_CUST_TP_CD = 'S'
                            AND ROWNUM = 1) || CHR(10)  ||
       'CUST_NM : ' || BKG_TOKEN_NL_FNC(NVL(CUST_NM, ''), 1, '') || CHR(10) ||
       'CUST_NM2 : ' || BKG_TOKEN_NL_FNC(NVL(CUST_NM, ''), 2, '') || CHR(10) ||
       'CUST_ADDR : ' || BKG_TOKEN_NL_FNC(NVL(CUST_ADDR, ''), 1, '') || CHR(10) ||
       'CUST_ADDR2 : ' || BKG_TOKEN_NL_FNC(NVL(CUST_ADDR, ''), 2, '') || CHR(10) ||
       'CUST_ADDR3 : ' || BKG_TOKEN_NL_FNC(NVL(CUST_ADDR, ''), 3, '') || CHR(10) ||
       'CUST_ADDR4 : ' || BKG_TOKEN_NL_FNC(NVL(CUST_ADDR, ''), 4, '') || CHR(10) ||
       'CUST_ADDR5 : ' || BKG_TOKEN_NL_FNC(NVL(CUST_ADDR, ''), 5, '') || CHR(10) ||
       'CUST_CITY_CD : ' || '' || CHR(10) ||
       'CUST_CITY_NM : ' || CUST_CTY_NM || CHR(10) ||
       --'IBCS_CUST_LOC :' || BC.LOC_CTNT || CHR(10) ||
       'CUST_STAT_CD : ' || CUST_STE_CD  || CHR(10) ||
       'CUST_ZIP_CD : ' || CUST_ZIP_ID || CHR(10) ||
       'CUST_CNT_CD : ' || CUST_CNT_CD  || CHR(10) ||
       '}CUST_INFO' || CHR(10) AS CUST_INFO  
FROM  BKG_CUSTOMER 
WHERE BKG_NO = @[e_bkg_no]
 AND BKG_CUST_TP_CD IN ('A','C','E','F','N','S')
 AND CUST_SEQ IS NOT NULL			]]></sql>
			<params>
				<param name="e_bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
