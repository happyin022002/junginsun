<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="InternalRemarkPopupDBDAOUpdateInternalRemarkVObySoWoUSQL">
			<desc><![CDATA[1. S/O delete 시
: S/O No.에 해당하는 Remark들의 DELT_FLG = 'Y'로 설정
2. W/O cancel 시
: W/O No.에 해당하는 Remark들의 DELT_FLG = 'Y'로 설정]]></desc>
			<sql><![CDATA[
UPDATE TRS_INTER_RMK SET
	DELT_FLG = 'Y'
   ,UPD_DT = SYSDATE
   ,LOCL_UPD_DT = GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[usr_ofc_cd])
WHERE DELT_FLG = 'N'
#if(${so_no} != '')
  AND TRSP_SO_OFC_CTY_CD = SUBSTR(@[so_no], 0, 3)
  AND TRSP_SO_SEQ = SUBSTR(@[so_no], 4)
#end
#if(${wo_no} != '')
  AND (TRSP_WO_OFC_CTY_CD, TRSP_WO_SEQ) IN (
        SELECT TRSP_WO_OFC_CTY_CD, TRSP_WO_SEQ
        FROM TRS_TRSP_WRK_ORD_PRV_TMP
        WHERE WO_PRV_GRP_SEQ = @[wo_prv_grp_seq]
            AND WO_ISS_NO = @[wo_iss_no]
            AND WO_CXL_FLG = 'Y' )
#end			]]></sql>
			<params>
				<param name="usr_ofc_cd" type="12" value="" out="N"/>
				<param name="so_no" type="12" value="" out="N"/>
				<param name="wo_prv_grp_seq" type="12" value="" out="N"/>
				<param name="wo_iss_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
