<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WorkOrderPreviewEdiDBDAOsearchFlatFileEsvPartyRSQL">
			<desc><![CDATA[NYK-Hawk_FFile(ESV_N)-JOEDI_EU_OUTBOUND
{PORT_VOYAGE_DETAIL]]></desc>
			<sql><![CDATA[
SELECT T1.*
  FROM (
		SELECT DECODE(SO.TRSP_BND_CD, 'I', 'Consignee', 'O', 'Shipper') AS PARTY_TYPE
			  ,NVL(M.CUST_LGL_ENG_NM, C.CUST_NM) AS PARTY_NAME
			  ,C.CUST_ADDR AS PARTY_ADD1
			  ,'' AS PARTY_ADD2
			  ,C.CUST_CTY_NM AS PARTY_CITY
			  ,C.CUST_ZIP_ID AS PARTY_POSTAL
			  ,C.CUST_STE_CD AS PARTY_STATE
			  ,CN.CNT_NM AS PARTY_CNT
		  FROM TRS_TRSP_SVC_ORD SO
			  ,BKG_CUSTOMER     C
			  ,MDM_CUSTOMER     M
			  ,MDM_COUNTRY      CN
		 WHERE SO.TRSP_BND_CD IN ('I', 'O')
		   AND SO.BKG_NO = C.BKG_NO(+)
		   AND DECODE(SO.TRSP_BND_CD, 'I', 'C', 'O', 'S') = C.BKG_CUST_TP_CD(+)
		   AND C.CUST_CNT_CD = M.CUST_CNT_CD(+)
		   AND C.CUST_SEQ = M.CUST_SEQ(+)
		   AND C.CUST_CNT_CD = CN.CNT_CD(+)
		   AND SO.TRSP_SO_OFC_CTY_CD = @[trsp_so_ofc_cty_cd]
		   AND SO.TRSP_SO_SEQ = @[trsp_so_seq]
		UNION ALL
		SELECT 'Bill to' AS PARTY_TYPE
			  ,M.OFC_ADDR AS PARTY_NAME
			  ,'' AS PARTY_ADD1
			  ,'' AS PARTY_ADD2
			  ,'' AS PARTY_CITY
			  ,'' AS PARTY_POSTAL
			  ,'' AS PARTY_STATE
			  ,'' AS PARTY_CNT
		  FROM TRS_TRSP_SVC_ORD SO
			  ,MDM_YARD         C
			  ,MDM_ORGANIZATION M
		 WHERE SO.FM_NOD_CD = C.YD_CD(+)
		   AND C.OFC_CD = M.OFC_CD(+)
		   AND SO.TRSP_SO_OFC_CTY_CD = @[trsp_so_ofc_cty_cd]
		   AND SO.TRSP_SO_SEQ = @[trsp_so_seq]
 ) T1
 RIGHT OUTER JOIN DUAL
    ON 1 = 1			]]></sql>
			<params>
				<param name="trsp_so_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="trsp_so_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
