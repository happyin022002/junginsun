<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TerminalAgreementManageDBDAOMultiVolumeAccumulateMZDCSQL">
			<desc><![CDATA[TES_TML_SO_ACCM_MZD Insert or Update]]></desc>
			<sql><![CDATA[
MERGE INTO TES_TML_SO_ACCM_MZD T 
USING DUAL 
ON ( T.ACCM_SEQ = @[accm_seq] 
	AND T.VNDR_SEQ = @[vndr_seq] ) 

WHEN MATCHED THEN
    UPDATE 
           SET CTRT_OFC_CD = @[ctrt_ofc_cd] 
         , ACCM_FM_DT = REPLACE(@[accm_fm_dt], '-', '')  
         , ACCM_TO_DT = REPLACE(@[accm_to_dt], '-', '')
         , TML_ACCM_UT_CD= @[tml_accm_ut_cd] 
         , UPD_USR_ID = @[upd_usr_id] 
         , UPD_DT = SYSDATE 
         , LOCL_UPD_DT = GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[ofc_cd])  

WHEN NOT MATCHED THEN 
    INSERT 
           ( 
               VNDR_SEQ 
             , ACCM_SEQ 
             , CTRT_OFC_CD 
             , ACCM_FM_DT 
             , ACCM_TO_DT 
             , TML_ACCM_UT_CD 
             , CRE_USR_ID 
             , CRE_DT 
             , UPD_USR_ID 
             , UPD_DT 
             , LOCL_CRE_DT 
           ) 
           VALUES 
           ( 
               @[vndr_seq]
             , @[accm_seq]
             , @[ctrt_ofc_cd]
             , REPLACE(@[accm_fm_dt], '-', '') 
             , REPLACE(@[accm_to_dt], '-', '')
             , @[tml_accm_ut_cd]
             , @[cre_usr_id]
             , SYSDATE
             , @[upd_usr_id]
             , SYSDATE 
             , GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[ofc_cd]) 
           )			]]></sql>
			<params>
				<param name="accm_seq" type="12" value="" out="N"/>
				<param name="vndr_seq" type="12" value="" out="N"/>
				<param name="ctrt_ofc_cd" type="12" value="" out="N"/>
				<param name="accm_fm_dt" type="12" value="" out="N"/>
				<param name="accm_to_dt" type="12" value="" out="N"/>
				<param name="tml_accm_ut_cd" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
