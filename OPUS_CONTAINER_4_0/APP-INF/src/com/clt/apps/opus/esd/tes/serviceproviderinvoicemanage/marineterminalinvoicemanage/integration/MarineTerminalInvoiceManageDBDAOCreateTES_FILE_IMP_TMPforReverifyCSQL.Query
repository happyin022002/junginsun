<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="MarineTerminalInvoiceManageDBDAOCreateTES_FILE_IMP_TMPforReverifyCSQL">
			<desc><![CDATA[CreateTES_FILE_IMP_TMPforReverify]]></desc>
			<sql><![CDATA[
INSERT INTO TES_FILE_IMP_TMP(
				TML_SO_OFC_CTY_CD,
				TML_SO_SEQ,
				TML_SO_TMP_SEQ,
				CNTR_NO,
				CNTR_TPSZ_CD,
				CNTR_STY_CD,
				IO_BND_CD,
				VNDR_SEQ,
				YD_CD,
				VVD_CD,
				ATB_DT,
				RCV_DT,
				WRK_DT,
				CRE_USR_ID,
				CRE_DT,
				UPD_USR_ID,
				UPD_DT
		  )
	SELECT      H.TML_SO_OFC_CTY_CD,
				H.TML_SO_SEQ,
				ROWNUM,
				C.CNTR_NO,
				C.CNTR_TPSZ_CD,
				C.CNTR_STY_CD,
				UPPER(C.IO_BND_CD),
				H.VNDR_SEQ,
				H.YD_CD,
				C.VSL_CD||C.SKD_VOY_NO||C.SKD_DIR_CD,
				C.ATB_DT,
				H.RCV_DT,
				TO_CHAR(NVL(C.WRK_DT,C.ATB_DT),'YYYYMMDD'),
				@[cre_usr_id],
				SYSDATE,
				@[upd_usr_id],
				SYSDATE
	FROM  TES_TML_SO_HDR H, TES_TML_SO_CNTR_LIST C
	WHERE H.TML_SO_OFC_CTY_CD = C.TML_SO_OFC_CTY_CD
	AND H.TML_SO_SEQ = C.TML_SO_SEQ
	AND H.TML_SO_OFC_CTY_CD = @[tml_so_ofc_cty_cd]
	AND H.TML_SO_SEQ = @[tml_so_seq]
	AND C.VSL_CD = SUBSTR(@[vvd],1,4)
	AND C.SKD_VOY_NO = SUBSTR(@[vvd],5,4)
	AND C.SKD_DIR_CD = SUBSTR(@[vvd],9,1)
	AND UPPER(C.IO_BND_CD) = @[io_bnd_cd]
	AND C.VRFY_RSLT_IND_CD = 'DC'  --2008-07-30: 이D요청으로 대상을 Discrepancy만으로 ...			]]></sql>
			<params>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="tml_so_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="tml_so_seq" type="12" value="" out="N"/>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
