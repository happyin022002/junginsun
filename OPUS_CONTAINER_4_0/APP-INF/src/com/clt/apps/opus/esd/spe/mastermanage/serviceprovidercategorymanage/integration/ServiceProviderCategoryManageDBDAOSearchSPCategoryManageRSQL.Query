<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ServiceProviderCategoryManageDBDAOSearchSPCategoryManageRSQL">
			<desc><![CDATA[SearchSPCategoryManage]]></desc>
			<sql><![CDATA[
#if (${vndr_seq} == '')  
		#if (${mapped} == 'Y')  
    		SELECT S.VNDR_SEQ,  
    		A.VNDR_LGL_ENG_NM AS VNDR_ABBR_NM,  
    		A.REG_GROUP,  
    		A.OFC_CD,  
    		DECODE(S.SVC_CATE_TRSP_FLG, 'Y', '1', '0') AS SVC_CATE_TRSP_FLG,  
    		DECODE(S.SVC_CATE_RAIL_FLG, 'Y', '1', '0') AS SVC_CATE_RAIL_FLG,  
    		DECODE(S.SVC_CATE_CY_FLG, 'Y', '1', '0') AS SVC_CATE_CY_FLG,  
    		DECODE(S.SVC_CATE_TML_FLG, 'Y', '1', '0') AS SVC_CATE_TML_FLG,  
    		DECODE(S.SVC_CATE_WTR_FLG, 'Y', '1', '0') AS SVC_CATE_WTR_FLG,  
    		DECODE(S.SVC_CATE_EQ_FLG, 'Y', '1', '0') AS SVC_CATE_EQ_FLG  
    		FROM SPE_SVC_PROV_SVC_CATE_MTCH S,  
    		(  
    		SELECT V.VNDR_SEQ,  
    		V.VNDR_LGL_ENG_NM ,  
    		M.REG_GROUP,  
    		M.OFC_CD  
    		FROM MDM_VENDOR V,  
    		(  
    		SELECT A.OFC_CD,  
    		DECODE(B.CONTI_CD, 'F', 'HAM', 'E', 'HAM', 'M', @[eg_rhq_cd], 'A', DECODE(SUBSTR(A.AR_HD_QTR_OFC_CD, 1, 3), 'SIN', 'SIN', 'SHA')) REG_GROUP  
    		FROM MDM_ORGANIZATION A,  
    		MDM_LOCATION B  
    		WHERE A.LOC_CD = B.LOC_CD  
    		AND A.DELT_FLG <> 'Y' ) M  
    		WHERE V.OFC_CD = M.OFC_CD  
    		AND V.DELT_FLG <> 'Y'  
    		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
    		AND M.OFC_CD LIKE @[eg_cty_cd]||'%' ) A  
    		WHERE S.VNDR_SEQ = A.VNDR_SEQ  
		  
		#elseif (${mapped} == 'N')  
    		SELECT V.VNDR_SEQ,  
    		V.VNDR_LGL_ENG_NM AS VNDR_ABBR_NM,  
    		M.REG_GROUP,  
    		M.OFC_CD,  
    		'0' AS SVC_CATE_TRSP_FLG,  
    		'0' AS SVC_CATE_RAIL_FLG,  
    		'0' AS SVC_CATE_CY_FLG,  
    		'0' AS SVC_CATE_TML_FLG,  
    		'0' AS SVC_CATE_WTR_FLG,  
    		'0' AS SVC_CATE_EQ_FLG  
    		FROM MDM_VENDOR V,  
    		(  
    		SELECT A.OFC_CD,  
    		DECODE(B.CONTI_CD, 'F', 'HAM', 'E', 'HAM', 'M', @[eg_rhq_cd], 'A', DECODE(SUBSTR(A.AR_HD_QTR_OFC_CD, 1, 3), 'SIN', 'SIN', 'SHA')) REG_GROUP  
    		FROM MDM_ORGANIZATION A,  
    		MDM_LOCATION B  
    		WHERE A.LOC_CD = B.LOC_CD  
    		AND A.DELT_FLG <> 'Y' ) M  
    		WHERE V.OFC_CD = M.OFC_CD  
    		AND V.DELT_FLG <> 'Y'  
    		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
    		AND V.OFC_CD LIKE @[eg_cty_cd]||'%'  
    		AND V.VNDR_SEQ NOT IN (  
    		SELECT A.VNDR_SEQ  
    		FROM SPE_SVC_PROV_SVC_CATE_MTCH S ,  
    		(  
    		SELECT V.VNDR_SEQ  
    		FROM MDM_VENDOR V,  
    		(  
    		SELECT A.OFC_CD,  
    		DECODE(B.CONTI_CD, 'F', 'HAM', 'E', 'HAM', 'M', @[eg_rhq_cd], 'A', 'SHA') REG_GROUP  
    		FROM MDM_ORGANIZATION A,  
    		MDM_LOCATION B  
    		WHERE A.LOC_CD = B.LOC_CD  
    		AND A.DELT_FLG <> 'Y' ) M  
    		WHERE V.OFC_CD = M.OFC_CD  
    		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
    		AND M.OFC_CD LIKE @[eg_cty_cd]||'%' ) A  
    		WHERE S.VNDR_SEQ = A.VNDR_SEQ)  
		#else  
    		SELECT S.VNDR_SEQ,  
    		A.VNDR_LGL_ENG_NM AS VNDR_ABBR_NM,  
    		A.REG_GROUP,  
    		A.OFC_CD,  
    		DECODE(S.SVC_CATE_TRSP_FLG, 'Y', '1', '0') AS SVC_CATE_TRSP_FLG,  
    		DECODE(S.SVC_CATE_RAIL_FLG, 'Y', '1', '0') AS SVC_CATE_RAIL_FLG,  
    		DECODE(S.SVC_CATE_CY_FLG, 'Y', '1', '0') AS SVC_CATE_CY_FLG,  
    		DECODE(S.SVC_CATE_TML_FLG, 'Y', '1', '0') AS SVC_CATE_TML_FLG,  
    		DECODE(S.SVC_CATE_WTR_FLG, 'Y', '1', '0') AS SVC_CATE_WTR_FLG,  
    		DECODE(S.SVC_CATE_EQ_FLG, 'Y', '1', '0') AS SVC_CATE_EQ_FLG  
    		FROM SPE_SVC_PROV_SVC_CATE_MTCH S,  
    		(  
    		SELECT V.VNDR_SEQ,  
    		V.VNDR_LGL_ENG_NM ,  
    		M.REG_GROUP,  
    		M.OFC_CD  
    		FROM MDM_VENDOR V,  
    		(  
    		SELECT A.OFC_CD,  
    		DECODE(B.CONTI_CD, 'F', 'HAM', 'E', 'HAM', 'M', @[eg_rhq_cd], 'A', DECODE(SUBSTR(A.AR_HD_QTR_OFC_CD, 1, 3), 'SIN', 'SIN', 'SHA')) REG_GROUP  
    		FROM MDM_ORGANIZATION A,  
    		MDM_LOCATION B  
    		WHERE A.LOC_CD = B.LOC_CD  
    		AND A.DELT_FLG <> 'Y' ) M  
    		WHERE V.OFC_CD = M.OFC_CD  
    		AND V.DELT_FLG <> 'Y'  
    		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
    		AND M.OFC_CD LIKE @[eg_cty_cd]||'%' ) A  
    		WHERE S.VNDR_SEQ = A.VNDR_SEQ  
    		UNION ALL  
    		SELECT V.VNDR_SEQ,  
    		V.VNDR_LGL_ENG_NM ,  
    		M.REG_GROUP,  
    		M.OFC_CD,  
    		'0' AS SVC_CATE_TRSP_FLG,  
    		'0' AS SVC_CATE_RAIL_FLG,  
    		'0' AS SVC_CATE_CY_FLG,  
    		'0' AS SVC_CATE_TML_FLG,  
    		'0' AS SVC_CATE_WTR_FLG,  
    		'0' AS SVC_CATE_EQ_FLG  
    		FROM MDM_VENDOR V,  
    		(  
    		SELECT A.OFC_CD,  
    		DECODE(B.CONTI_CD, 'F', 'HAM', 'E', 'HAM', 'M', @[eg_rhq_cd], 'A', DECODE(SUBSTR(A.AR_HD_QTR_OFC_CD, 1, 3), 'SIN', 'SIN', 'SHA')) REG_GROUP  
    		FROM MDM_ORGANIZATION A,  
    		MDM_LOCATION B  
    		WHERE A.LOC_CD = B.LOC_CD  
    		AND A.DELT_FLG <> 'Y' ) M  
    		WHERE V.OFC_CD = M.OFC_CD  
    		AND V.DELT_FLG <> 'Y'  
    		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
    		AND V.OFC_CD LIKE @[eg_cty_cd]||'%'  
    		AND V.VNDR_SEQ NOT IN (  
    		SELECT A.VNDR_SEQ  
    		FROM SPE_SVC_PROV_SVC_CATE_MTCH S ,  
    		(  
    		SELECT V.VNDR_SEQ  
    		FROM MDM_VENDOR V,  
    		(  
    		SELECT A.OFC_CD,  
    		DECODE(B.CONTI_CD, 'F', 'HAM', 'E', 'HAM', 'M', @[eg_rhq_cd], 'A', 'SHA') REG_GROUP  
    		FROM MDM_ORGANIZATION A,  
    		MDM_LOCATION B  
    		WHERE A.LOC_CD = B.LOC_CD  
    		AND A.DELT_FLG <> 'Y' ) M  
    		WHERE V.OFC_CD = M.OFC_CD  
    		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
    		AND M.OFC_CD LIKE @[eg_cty_cd]||'%' ) A  
    		WHERE S.VNDR_SEQ = A.VNDR_SEQ)  
		#end  
		  
#elseif (${vndr_seq} != '')  
		  
		#if (${mapped} == 'Y')  
      		SELECT S.VNDR_SEQ,  
      		M.VNDR_LGL_ENG_NM AS VNDR_ABBR_NM,  
      		M.REG_GROUP,  
      		M.OFC_CD,  
      		DECODE(S.SVC_CATE_TRSP_FLG, 'Y', '1', '0') AS SVC_CATE_TRSP_FLG,  
      		DECODE(S.SVC_CATE_RAIL_FLG, 'Y', '1', '0') AS SVC_CATE_RAIL_FLG,  
      		DECODE(S.SVC_CATE_CY_FLG, 'Y', '1', '0') AS SVC_CATE_CY_FLG,  
      		DECODE(S.SVC_CATE_TML_FLG, 'Y', '1', '0') AS SVC_CATE_TML_FLG,  
      		DECODE(S.SVC_CATE_WTR_FLG, 'Y', '1', '0') AS SVC_CATE_WTR_FLG,  
      		DECODE(S.SVC_CATE_EQ_FLG, 'Y', '1', '0') AS SVC_CATE_EQ_FLG  
      		FROM SPE_SVC_PROV_SVC_CATE_MTCH S,  
      		(  
      		SELECT C.VNDR_SEQ, C.VNDR_LGL_ENG_NM, A.OFC_CD, DECODE(B.CONTI_CD, 'F', 'HAM','E','HAM','M','NYC','A',DECODE(SUBSTR(A.AR_HD_QTR_OFC_CD,1,3),'SIN','SIN','SHA')) REG_GROUP  
      		FROM  MDM_ORGANIZATION A, MDM_LOCATION B, MDM_VENDOR C  
      		WHERE A.LOC_CD = B.LOC_CD  
      		AND A.OFC_CD = C.OFC_CD  
      		AND     A.DELT_FLG <> 'Y'  
      		)M  
      		WHERE S.VNDR_SEQ = M.VNDR_SEQ  
      		AND 	S.VNDR_SEQ = @[vndr_seq] 
      		#if (${eg_rhq_cd} !='')  
        		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
        		AND M.OFC_CD LIKE @[eg_cty_cd]||'%'  
      		#end  
	#elseif (${mapped} == 'A')  
  		#if (${chk_unique} =='Y')  
      		SELECT S.VNDR_SEQ,  
      		M.VNDR_LGL_ENG_NM AS VNDR_ABBR_NM,  
      		M.REG_GROUP,  
      		M.OFC_CD,  
      		DECODE(S.SVC_CATE_TRSP_FLG, 'Y', '1', '0') AS SVC_CATE_TRSP_FLG,  
      		DECODE(S.SVC_CATE_RAIL_FLG, 'Y', '1', '0') AS SVC_CATE_RAIL_FLG,  
      		DECODE(S.SVC_CATE_CY_FLG, 'Y', '1', '0') AS SVC_CATE_CY_FLG,  
      		DECODE(S.SVC_CATE_TML_FLG, 'Y', '1', '0') AS SVC_CATE_TML_FLG,  
      		DECODE(S.SVC_CATE_WTR_FLG, 'Y', '1', '0') AS SVC_CATE_WTR_FLG,  
      		DECODE(S.SVC_CATE_EQ_FLG, 'Y', '1', '0') AS SVC_CATE_EQ_FLG  
      		FROM SPE_SVC_PROV_SVC_CATE_MTCH S,  
      		(  
      		SELECT C.VNDR_SEQ, C.VNDR_LGL_ENG_NM, A.OFC_CD, DECODE(B.CONTI_CD, 'F', 'HAM','E','HAM','M','NYC','A',DECODE(SUBSTR(A.AR_HD_QTR_OFC_CD,1,3),'SIN','SIN','SHA')) REG_GROUP  
      		FROM  MDM_ORGANIZATION A, MDM_LOCATION B, MDM_VENDOR C  
      		WHERE A.LOC_CD = B.LOC_CD  
      		AND A.OFC_CD = C.OFC_CD  
      		AND     A.DELT_FLG <> 'Y'  
      		)M  
      		WHERE S.VNDR_SEQ = M.VNDR_SEQ  
      		AND 	S.VNDR_SEQ = @[vndr_seq]  
      		#if (${eg_rhq_cd} !='')  
        		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
        		AND M.OFC_CD LIKE @[eg_cty_cd]||'%'  
      		#end  
  		#else  
        		SELECT V.VNDR_SEQ,  
        		V.VNDR_LGL_ENG_NM  AS VNDR_ABBR_NM,  
        		M.REG_GROUP,  
        		M.OFC_CD,  
        		'0' AS SVC_CATE_TRSP_FLG,  
        		'0' AS SVC_CATE_RAIL_FLG,  
        		'0' AS SVC_CATE_CY_FLG,  
        		'0' AS SVC_CATE_TML_FLG,  
        		'0' AS SVC_CATE_WTR_FLG,  
        		'0' AS SVC_CATE_EQ_FLG  
        		FROM MDM_VENDOR V,  
        		(  
        		SELECT A.OFC_CD,  
        		DECODE(B.CONTI_CD, 'F', 'HAM', 'E', 'HAM', 'M', 'NYC', 'A', DECODE(SUBSTR(A.AR_HD_QTR_OFC_CD, 1, 3), 'SIN', 'SIN', 'SHA')) REG_GROUP  
        		FROM MDM_ORGANIZATION A,  
        		MDM_LOCATION B  
        		WHERE A.LOC_CD = B.LOC_CD  
        		AND A.DELT_FLG <> 'Y' ) M  
        		WHERE V.OFC_CD = M.OFC_CD  
        		AND V.DELT_FLG <> 'Y'  
        		AND V.VNDR_SEQ =@[vndr_seq]  
        		#if (${eg_rhq_cd} !='')  
          		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
          		AND V.OFC_CD LIKE @[eg_cty_cd]||'%'  
        		#end  
  		#end  
	#else  
  		#if (${chk_unique} =='Y')  
        		SELECT S.VNDR_SEQ,  
        		''AS VNDR_ABBR_NM,  
        		''REG_GROUP,  
        		''OFC_CD,  
        		DECODE(S.SVC_CATE_TRSP_FLG, 'Y', '1', '0') AS SVC_CATE_TRSP_FLG,  
        		DECODE(S.SVC_CATE_RAIL_FLG, 'Y', '1', '0') AS SVC_CATE_RAIL_FLG,  
        		DECODE(S.SVC_CATE_CY_FLG, 'Y', '1', '0') AS SVC_CATE_CY_FLG,  
        		DECODE(S.SVC_CATE_TML_FLG, 'Y', '1', '0') AS SVC_CATE_TML_FLG,  
        		DECODE(S.SVC_CATE_WTR_FLG, 'Y', '1', '0') AS SVC_CATE_WTR_FLG,  
        		DECODE(S.SVC_CATE_EQ_FLG, 'Y', '1', '0') AS SVC_CATE_EQ_FLG  
        		FROM SPE_SVC_PROV_SVC_CATE_MTCH S  
        		WHERE 	S.VNDR_SEQ IS NULL  
  		  
  		#else  
        		SELECT V.VNDR_SEQ,  
        		V.VNDR_LGL_ENG_NM AS VNDR_ABBR_NM,  
        		M.REG_GROUP,  
        		M.OFC_CD,  
        		'0' AS SVC_CATE_TRSP_FLG,  
        		'0' AS SVC_CATE_RAIL_FLG,  
        		'0' AS SVC_CATE_CY_FLG,  
        		'0' AS SVC_CATE_TML_FLG,  
        		'0' AS SVC_CATE_WTR_FLG,  
        		'0' AS SVC_CATE_EQ_FLG  
        		FROM MDM_VENDOR V,  
        		(  
        		SELECT A.OFC_CD,  
        		DECODE(B.CONTI_CD, 'F', 'HAM', 'E', 'HAM', 'M', 'NYC', 'A', DECODE(SUBSTR(A.AR_HD_QTR_OFC_CD, 1, 3), 'SIN', 'SIN', 'SHA')) REG_GROUP  
        		FROM MDM_ORGANIZATION A,  
        		MDM_LOCATION B  
        		WHERE A.LOC_CD = B.LOC_CD  
        		AND A.DELT_FLG <> 'Y' ) M  
        		WHERE V.OFC_CD = M.OFC_CD  
        		AND V.DELT_FLG <> 'Y'  
        		AND V.VNDR_SEQ =@[vndr_seq]  
        		#if (${eg_rhq_cd} !='')  
          		AND M.REG_GROUP LIKE @[eg_rhq_cd]||'%'  
          		AND V.OFC_CD LIKE @[eg_cty_cd]||'%'  
        		#end  
  		#end  
	#end  
#end			]]></sql>
			<params>
				<param name="eg_rhq_cd" type="12" value="" out="N"/>
				<param name="eg_cty_cd" type="12" value="" out="N"/>
				<param name="vndr_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
