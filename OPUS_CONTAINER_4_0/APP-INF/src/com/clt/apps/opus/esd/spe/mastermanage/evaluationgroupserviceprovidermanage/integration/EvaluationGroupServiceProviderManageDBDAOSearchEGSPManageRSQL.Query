<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EvaluationGroupServiceProviderManageDBDAOSearchEGSPManageRSQL">
			<desc><![CDATA[SearchEGSPManage]]></desc>
			<sql><![CDATA[
SELECT A.EG_ID,
       A.EG_ID_SEQ,
       LPAD(A.VNDR_SEQ, 6, '0') AS  VNDR_SEQ,
       B.VNDR_LGL_ENG_NM,
       A.ENG_VNDR_RMK ,
       C.EG_RHQ_CD,
       C.EG_CTY_CD,
       C.SVC_CATE_CD ,
       A.EG_ID||TO_CHAR(A.EG_ID_SEQ, '000') AS EG_ID_ETC
FROM SPE_EV_GRP_SVC_PROV_MTCH A,
     MDM_VENDOR B,
     SPE_EV_GRP C
WHERE A.VNDR_SEQ = B.VNDR_SEQ
  AND ( A.EG_ID = C.EG_ID
  AND A.EG_ID_SEQ = C.EG_ID_SEQ ) 
  
#if (${eg_id}!='')
 	AND   A.EG_ID = SUBSTR(@[eg_id],1,5)
	AND   A.EG_ID_SEQ = TO_NUMBER(SUBSTR(@[eg_id],7,3)) 				
	AND   A.VNDR_SEQ IN (SELECT VNDR_SEQ 									
      				         FROM SPE_SVC_PROV_SVC_CATE_MTCH S, SPE_EV_GRP V                                                    
      				         WHERE  A.EG_ID = V.EG_ID                                                                           
      				         AND    A.EG_ID_SEQ = V.EG_ID_SEQ                                                                   
      				         AND    A.EG_ID = SUBSTR(@[eg_id],1,5)                                                                             
      				         AND    A.EG_ID_SEQ = TO_NUMBER(SUBSTR(@[eg_id],7,3))                                                                            
                       		 AND    (DECODE(V.SVC_CATE_CD,'TR','Y','Y','N') =  DECODE(SVC_CATE_TRSP_FLG,'Y','Y','X')
                          	 		 OR DECODE(V.SVC_CATE_CD,'RL','Y','Y','N') =  DECODE(S.SVC_CATE_RAIL_FLG,'Y','Y','X')
                          			 OR DECODE(V.SVC_CATE_CD,'CY','Y','Y','N') =  DECODE(S.SVC_CATE_CY_FLG,'Y','Y','X')
                          			 OR DECODE(V.SVC_CATE_CD,'TM','Y','Y','N') =  DECODE(S.SVC_CATE_TML_FLG,'Y','Y','X')
                          			 OR DECODE(V.SVC_CATE_CD,'WT','Y','Y','N') =  DECODE(S.SVC_CATE_WTR_FLG,'Y','Y','X')
                          			 OR DECODE(V.SVC_CATE_CD,'EQ','Y','Y','N') =  DECODE(S.SVC_CATE_EQ_FLG,'Y','Y','X')
                    		   		 )           
                      	  )                                                                                          
#else	
		#if(${eg_rhq_cd}!='')	
				AND   C.EG_RHQ_CD = @[eg_rhq_cd]
		#end
		#if(${eg_cty_cd}!='')
				AND	  C.EG_CTY_CD = UPPER(@[eg_cty_cd])
		#end
		#if(${svc_cate_cd}!='')
				AND   C.SVC_CATE_CD = @[svc_cate_cd]		
				AND   A.VNDR_SEQ IN (SELECT VNDR_SEQ																
				                     FROM SPE_SVC_PROV_SVC_CATE_MTCH	
          							 WHERE (DECODE(@[svc_cate_cd],'TR','Y','Y','N') =  DECODE(SVC_CATE_TRSP_FLG,'Y','Y','X')  
          								 OR DECODE(@[svc_cate_cd],'RL','Y','Y','N') =  DECODE(SVC_CATE_RAIL_FLG,'Y','Y','X') 	
          								 OR DECODE(@[svc_cate_cd],'CY','Y','Y','N') =  DECODE(SVC_CATE_CY_FLG,'Y','Y','X')	
          								 OR DECODE(@[svc_cate_cd],'TM','Y','Y','N') =  DECODE(SVC_CATE_TML_FLG,'Y','Y','X') 
          								 OR DECODE(@[svc_cate_cd],'WT','Y','Y','N') =  DECODE(SVC_CATE_WTR_FLG,'Y','Y','X')	
          								 OR DECODE(@[svc_cate_cd],'EQ','Y','Y','N') =  DECODE(SVC_CATE_EQ_FLG,'Y','Y','X')
          								   )	
          							 )																				
		#end
#end			]]></sql>
			<params>
				<param name="eg_id" type="12" value="" out="N"/>
				<param name="eg_rhq_cd" type="12" value="" out="N"/>
				<param name="eg_cty_cd" type="12" value="" out="N"/>
				<param name="svc_cate_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
