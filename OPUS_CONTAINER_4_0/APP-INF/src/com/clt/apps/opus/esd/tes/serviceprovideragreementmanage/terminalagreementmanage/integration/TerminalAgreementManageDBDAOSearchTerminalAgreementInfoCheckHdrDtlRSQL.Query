<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TerminalAgreementManageDBDAOSearchTerminalAgreementInfoCheckHdrDtlRSQL">
			<desc><![CDATA[Header Select]]></desc>
			<sql><![CDATA[
SELECT  a.tml_agmt_ofc_cty_cd
        , a.tml_agmt_seq
        , a.agmt_ver_n1st_no ||'.'||a.agmt_ver_n2nd_no	ver_no	
		, CASE 		WHEN LENGTH(a.tml_agmt_ver_no) = 3 
					THEN LPAD(SUBSTR( a.tml_agmt_ver_no, 0, 1 ), 2, '0') || '.' || SUBSTR( a.tml_agmt_ver_no, 2, 2 )
					ELSE SUBSTR( a.tml_agmt_ver_no, 0, 2 ) || '.' || SUBSTR( a.tml_agmt_ver_no, 3, 2 )
		  END tml_agmt_ver_no
FROM    TES_TML_AGMT_HDR a, TES_TML_AGMT_DTL b
WHERE   a.delt_flg = 'N'  											
AND     a.yd_cd = @[yd_cd]
AND     a.vndr_seq = @[vndr_seq]
AND     b.lgs_cost_cd = @[lgs_cost_cd]
AND     TO_CHAR(a.eff_fm_dt,'YYYY-MM-DD') = @[eff_fm_dt]
AND     TO_CHAR(a.eff_to_dt,'YYYY-MM-DD') = @[eff_to_dt]
AND     a.tml_agmt_ofc_cty_cd = b.tml_agmt_ofc_cty_cd			
AND     a.tml_agmt_seq = b.tml_agmt_seq							
AND     a.tml_agmt_ver_no = b.tml_agmt_ver_no				]]></sql>
			<params>
				<param name="yd_cd" type="12" value="" out="N"/>
				<param name="vndr_seq" type="2" value="" out="N"/>
				<param name="lgs_cost_cd" type="12" value="" out="N"/>
				<param name="eff_fm_dt" type="12" value="" out="N"/>
				<param name="eff_to_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
