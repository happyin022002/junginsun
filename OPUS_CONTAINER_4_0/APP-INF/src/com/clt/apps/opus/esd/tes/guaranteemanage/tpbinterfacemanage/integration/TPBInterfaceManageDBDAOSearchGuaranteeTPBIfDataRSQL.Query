<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TPBInterfaceManageDBDAOSearchGuaranteeTPBIfDataRSQL">
			<desc><![CDATA[data select]]></desc>
			<sql><![CDATA[
SELECT  
        GH.GNTE_NO
        , GH.TTL_AMT
        , GH.OFC_CD
        , GH.GNTE_TP_CD
        , GH.GNTE_CUST_CD        
		, (	SELECT CUST_LGL_ENG_NM 
			FROM MDM_CUSTOMER 
			WHERE CUST_CNT_CD    = SUBSTR(GH.GNTE_CUST_CD, 0, 2)
			AND   CUST_SEQ       = SUBSTR(GH.GNTE_CUST_CD, 3, 6) ) GNTE_CUST_CD_NAME
		, GL.TML_GNTE_CNTR_LIST_SEQ
        , GL.BKG_NO
        , GL.BL_NO
        , GL.SC_NO
        , GL.CNTR_TPSZ_CD
        , GL.CNTR_NO
        , GL.VVD_CD
        , GL.GNTE_AMT IF_AMT
		, GL.TML_IF_OFC_CD
		, GL.TML_IF_SEQ
		, TP.N3PTY_DESC
FROM    TES_GNTE_HDR GH
		, TES_GNTE_CNTR_LIST GL
		, TES_N3RD_PTY_IF TP
WHERE   1   = 1
AND     GH.GNTE_NO  = GL.GNTE_NO
AND     GH.GNTE_NO  = @[gnte_no]
AND		GL.TML_IF_OFC_CD	= TP.TML_IF_OFC_CD(+)
AND		GL.TML_IF_SEQ		= TP.TML_IF_SEQ(+)
#if (${tml_gnte_cntr_list_seq} != '') 
AND     GL.TML_GNTE_CNTR_LIST_SEQ IN (
	#foreach($tml_gnte_cntr_list_seq_num IN ${tml_gnte_cntr_list_seq})
		#if($velocityCount < $tml_gnte_cntr_list_seq.size()) 
		'$tml_gnte_cntr_list_seq_num', 
		#else 
		'$tml_gnte_cntr_list_seq_num' 
		#end 
	#end
	)
#end			]]></sql>
			<params>
				<param name="gnte_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
