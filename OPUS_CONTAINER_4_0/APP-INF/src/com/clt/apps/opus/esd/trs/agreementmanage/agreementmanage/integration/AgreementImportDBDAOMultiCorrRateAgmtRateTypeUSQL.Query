<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AgreementImportDBDAOMultiCorrRateAgmtRateTypeUSQL">
			<desc><![CDATA[Rate Type Update]]></desc>
			<sql><![CDATA[
MERGE INTO TRS_AGMT_RT_TP A
USING ( SELECT A.TRSP_AGMT_OFC_CTY_CD, A.TRSP_AGMT_SEQ, A.TRSP_AGMT_RT_TP_SER_NO
#if(${rt_gbn} == 'BZC')
          FROM TRS_AGMT_EQ_RT A, TRS_AGMT_TMP B
#else
          FROM TRS_AGMT_SCG_RT A, TRS_AGMT_TMP B
#end
         WHERE A.TRSP_AGMT_OFC_CTY_CD = B.TRSP_AGMT_OFC_CTY_CD
           AND A.TRSP_AGMT_SEQ = B.TRSP_AGMT_SEQ
           AND A.TRSP_AGMT_RT_TP_SER_NO = B.TRSP_AGMT_RT_TP_SER_NO
#if(${rt_gbn} == 'BZC')
           AND A.TRSP_AGMT_NOD_SEQ = B.TRSP_AGMT_NOD_SEQ
           AND A.TRSP_AGMT_RT_SEQ = B.TRSP_AGMT_RT_SEQ
#end
           AND B.TRSP_TMP_SEQ = @[trsp_tmp_seq]
           AND B.ROW_NO IS NOT NULL
         GROUP BY A.TRSP_AGMT_OFC_CTY_CD, A.TRSP_AGMT_SEQ, A.TRSP_AGMT_RT_TP_SER_NO
       ) C
ON (     A.TRSP_AGMT_OFC_CTY_CD = C.TRSP_AGMT_OFC_CTY_CD
     AND A.TRSP_AGMT_SEQ = C.TRSP_AGMT_SEQ
     AND A.TRSP_AGMT_RT_TP_SER_NO = C.TRSP_AGMT_RT_TP_SER_NO
   )
WHEN MATCHED THEN
UPDATE 
   SET UPD_USR_ID = @[fm_account_usr_id]
     , UPD_OFC_CD = @[fm_account_ofc_cd]
     , UPD_DT     = SYSDATE			]]></sql>
			<params>
				<param name="trsp_tmp_seq" type="12" value="" out="N"/>
				<param name="fm_account_usr_id" type="12" value="" out="N"/>
				<param name="fm_account_ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
