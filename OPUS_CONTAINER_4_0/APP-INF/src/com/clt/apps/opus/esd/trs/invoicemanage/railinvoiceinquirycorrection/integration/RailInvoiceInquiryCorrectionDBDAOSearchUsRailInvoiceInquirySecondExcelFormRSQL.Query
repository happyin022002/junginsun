<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RailInvoiceInquiryCorrectionDBDAOSearchUsRailInvoiceInquirySecondExcelFormRSQL">
			<desc><![CDATA[RailInvoiceInquiryCorrectionDBDAOSearchUsRailInvoiceInquirySecondExcelForm]]></desc>
			<sql><![CDATA[
SELECT A.TRSP_INV_AUD_STS_CD
      ,COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD00824', A.TRSP_INV_AUD_STS_CD) TRSP_INV_AUD_STS_NM
      ,DECODE(A.INV_HLD_FLG, 'N', '0', 'Y', '1') INV_HLD_FLG
      ,A.INV_NO
      ,A.INV_VNDR_SEQ
      ,C.VNDR_LGL_ENG_NM INV_VNDR_NM
      ,A.WO_VNDR_SEQ
      ,D.VNDR_LGL_ENG_NM WO_VNDR_NM
      ,B.EQ_NO
      ,B.EQ_TPSZ_CD
      ,B.CURR_CD
      ,NVL(B.BZC_AMT, 0) BZC_AMT
      ,NVL(B.FUEL_SCG_AMT, 0) FUEL_SCG_AMT
      ,NVL(B.OVR_WGT_SCG_AMT, 0) OVR_WGT_SCG_AMT
      ,NVL(B.ETC_ADD_AMT, 0) ETC_ADD_AMT
      ,NVL(B.BZC_AMT, 0) + NVL(B.FUEL_SCG_AMT, 0) + NVL(B.OVR_WGT_SCG_AMT, 0) + NVL(B.HZD_MTRL_SCG_AMT, 0) + NVL(B.ETC_ADD_AMT, 0) AS WO_TTL_AMT
      ,B.INV_CURR_CD
      ,NVL(B.INV_BZC_AMT, 0) INV_BZC_AMT
      ,NVL(B.INV_BZC_AMT, 0) AS INV_TTL_AMT
      ,TO_CHAR(A.INV_ISS_DT, 'YYYY-MM-DD') INV_ISS_DT
      ,TO_CHAR(A.INV_RCV_DT, 'YYYY-MM-DD') INV_RCV_DT
      ,TO_CHAR(A.PAY_DT, 'YYYY-MM-DD') PAY_DT
      ,TO_CHAR(TO_DATE(E.GL_DT, 'YYYYMMDD'), 'YYYY-MM-DD') GL_DT
      ,TO_CHAR(A.UPD_DT, 'YYYY-MM-DD') UPD_DT
      ,A.CSR_NO
      ,A.INV_PAY_MZD_CD
      ,A.INV_CHK_TRNS_NO
      ,'' INV_REMARK
      ,A.CRE_OFC_CD
      ,A.CRE_USR_ID
  FROM TRS_TRSP_RAIL_INV_WRK A
      ,TRS_TRSP_RAIL_INV_DTL B
      ,MDM_VENDOR            C
      ,MDM_VENDOR            D
      ,AP_INV_HDR            E
 WHERE A.INV_NO = B.INV_NO
   AND A.INV_VNDR_SEQ = B.INV_VNDR_SEQ
   AND A.INV_VNDR_SEQ = C.VNDR_SEQ(+)
   AND A.WO_VNDR_SEQ = D.VNDR_SEQ(+)
   AND A.CSR_NO = E.CSR_NO(+)
   AND A.INV_NO = @[inv_no]
   AND A.INV_VNDR_SEQ = @[inv_vndr_seq]			]]></sql>
			<params>
				<param name="inv_no" type="12" value="" out="N"/>
				<param name="inv_vndr_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
