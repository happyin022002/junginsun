<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GEMPlanningPerformanceDBDAOReport0025R1RSQL">
			<desc><![CDATA[adjustment report print]]></desc>
			<sql><![CDATA[
SELECT   A.GEN_EXPN_RQST_TP_CD
        ,A.GEN_EXPN_RQST_NO GEN_EXPN_RQST_NO
        ,B.GEN_EXPN_RQST_SEQ GEN_EXPN_RQST_SEQ
        ,MAX (A.CRE_USR_ID) CRE_USR_ID
        ,MAX (A.CRE_DT) CRE_DT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.OFC_CD)) FM_OFC_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.OFC_CD)) TO_OFC_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.GEN_EXPN_CD)) FM_GEN_EXPN_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.GEN_EXPN_CD)) TO_GEN_EXPN_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', G.GEM_EXPN_GRP_CD1)) GEM_EXPN_GRP_CD1
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', G.GEM_EXPN_GRP_CD2)) GEM_EXPN_GRP_CD2
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', DECODE (@[lang_div], 'KOR', G.KRN_ABBR_NM_1, G.ENG_ABBR_NM_1))) FM_EXPN_GRP_ABBR_NM1
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', DECODE (@[lang_div], 'KOR', G.KRN_ABBR_NM_1, G.ENG_ABBR_NM_1))) TO_EXPN_GRP_ABBR_NM1
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', DECODE (@[lang_div], 'KOR', G.KRN_ABBR_NM_2, G.ENG_ABBR_NM_2))) FM_EXPN_GRP_ABBR_NM2
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', DECODE (@[lang_div], 'KOR', G.KRN_ABBR_NM_2, G.ENG_ABBR_NM_2))) TO_EXPN_GRP_ABBR_NM2        
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', DECODE (@[lang_div], 'KOR', G.KRN_ABBR_NM, G.ENG_ABBR_NM))) FM_EXPN_ABBR_NM
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', DECODE (@[lang_div], 'KOR', G.KRN_ABBR_NM, G.ENG_ABBR_NM))) TO_EXPN_ABBR_NM      
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', E.TIC_CD)) FM_TIC_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', E.TIC_CD)) TO_TIC_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.GEN_EXPN_ITM_NO)) FM_GEN_EXPN_ITEM_NO
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.GEN_EXPN_ITM_NO)) TO_GEN_EXPN_ITEM_NO
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.CRNT_GEN_EXPN_APRO_STEP_CD)) FM_CRNT_GEN_EXPN_APRO_STEP_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.CRNT_GEN_EXPN_APRO_STEP_CD)) TO_CRNT_GEN_EXPN_APRO_STEP_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.CRNT_GEN_EXPN_APSTS_CD)) FM_CRNT_GEN_EXPN_APSTS_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.CRNT_GEN_EXPN_APSTS_CD)) TO_CRNT_GEN_EXPN_APSTS_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', A.RQST_OFC_CD)) FM_RQST_OFC_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', A.RQST_OFC_CD)) TO_RQST_OFC_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.GEN_EXPN_ITM_DESC)) FM_GEN_EXPN_ITM_DESC
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.GEN_EXPN_ITM_DESC)) TO_GEN_EXPN_ITM_DESC        
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.GEN_EXPN_CALC_BSS_DESC)) FM_GEN_EXPN_CALC_BSS_DESC
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.GEN_EXPN_CALC_BSS_DESC)) TO_GEN_EXPN_CALC_BSS_DESC        
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.RQST_OPIN_RMK)) FM_RQST_OPIN_RMK
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.RQST_OPIN_RMK)) TO_RQST_OPIN_RMK
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', D.LOCL_CURR_CD)) FM_LOCL_CURR_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', D.LOCL_CURR_CD)) TO_LOCL_CURR_CD
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', D.RQST_UT_VAL)) FM_UT_VAL
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', D.RQST_UT_VAL)) TO_UT_VAL
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', F.USD_LOCL_XCH_RT)) FM_USD_LOCL_XCH_RT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', F.USD_LOCL_XCH_RT)) TO_USD_LOCL_XCH_RT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', F.LOCL_KRW_XCH_RT)) FM_LOCL_KRW_XCH_RT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', F.LOCL_KRW_XCH_RT)) TO_LOCL_KRW_XCH_RT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', F.USD_KRW_XCH_RT)) FM_USD_KRW_XCH_RT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', F.USD_KRW_XCH_RT)) TO_USD_KRW_XCH_RT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.JAN_AMT)) FM_ASG_JAN_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.FEB_AMT)) FM_ASG_FEB_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.MAR_AMT)) FM_ASG_MAR_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.APR_AMT)) FM_ASG_APR_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.MAY_AMT)) FM_ASG_MAY_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.JUN_AMT)) FM_ASG_JUN_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.JUL_AMT)) FM_ASG_JUL_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.AUG_AMT)) FM_ASG_AUG_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.SEP_AMT)) FM_ASG_SEP_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.OCT_AMT)) FM_ASG_OCT_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.NOV_AMT)) FM_ASG_NOV_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'F', B.DEC_AMT)) FM_ASG_DEC_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.JAN_AMT)) TO_ASG_JAN_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.FEB_AMT)) TO_ASG_FEB_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.MAR_AMT)) TO_ASG_MAR_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.APR_AMT)) TO_ASG_APR_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.MAY_AMT)) TO_ASG_MAY_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.JUN_AMT)) TO_ASG_JUN_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.JUL_AMT)) TO_ASG_JUL_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.AUG_AMT)) TO_ASG_AUG_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.SEP_AMT)) TO_ASG_SEP_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.OCT_AMT)) TO_ASG_OCT_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.NOV_AMT)) TO_ASG_NOV_AMT
        ,MAX (DECODE (B.GEN_EXPN_TRNS_DIV_CD, 'T', B.DEC_AMT)) TO_ASG_DEC_AMT                        
        ,NVL (MAX (CASE
                       WHEN B.GEN_EXPN_TRNS_DIV_CD = 'F'
                   AND     C.GEN_EXPN_APRO_STEP_CD = 'RQ'
                           THEN   C.JAN_AMT
                                + C.FEB_AMT
                                + C.MAR_AMT
                                + C.APR_AMT
                                + C.MAY_AMT
                                + C.JUN_AMT
                                + C.JUL_AMT
                                + C.AUG_AMT
                                + C.SEP_AMT
                                + C.OCT_AMT
                                + C.NOV_AMT
                                + C.DEC_AMT
                   END
                  )
             ,0
             ) FM_RQ_AMT
        ,NVL (MAX (CASE
                       WHEN B.GEN_EXPN_TRNS_DIV_CD = 'T'
                   AND     C.GEN_EXPN_APRO_STEP_CD = 'RQ'
                           THEN   C.JAN_AMT
                                + C.FEB_AMT
                                + C.MAR_AMT
                                + C.APR_AMT
                                + C.MAY_AMT
                                + C.JUN_AMT
                                + C.JUL_AMT
                                + C.AUG_AMT
                                + C.SEP_AMT
                                + C.OCT_AMT
                                + C.NOV_AMT
                                + C.DEC_AMT
                   END
                  )
             ,0
             ) TO_RQ_AMT
        ,NVL (MAX (CASE
                       WHEN B.GEN_EXPN_TRNS_DIV_CD = 'F'
                   AND     B.CRNT_GEN_EXPN_APRO_STEP_CD = C.GEN_EXPN_APRO_STEP_CD
                           THEN   C.JAN_AMT
                                + C.FEB_AMT
                                + C.MAR_AMT
                                + C.APR_AMT
                                + C.MAY_AMT
                                + C.JUN_AMT
                                + C.JUL_AMT
                                + C.AUG_AMT
                                + C.SEP_AMT
                                + C.OCT_AMT
                                + C.NOV_AMT
                                + C.DEC_AMT
                   END
                  )
             ,0
             ) FM_AD_AMT
        ,NVL (MAX (CASE
                       WHEN B.GEN_EXPN_TRNS_DIV_CD = 'T'
                   AND     B.CRNT_GEN_EXPN_APRO_STEP_CD = C.GEN_EXPN_APRO_STEP_CD
                           THEN   C.JAN_AMT
                                + C.FEB_AMT
                                + C.MAR_AMT
                                + C.APR_AMT
                                + C.MAY_AMT
                                + C.JUN_AMT
                                + C.JUL_AMT
                                + C.AUG_AMT
                                + C.SEP_AMT
                                + C.OCT_AMT
                                + C.NOV_AMT
                                + C.DEC_AMT
                   END
                  )
             ,0
             ) TO_AD_AMT
         ,'0' FM_USD_AMT
         ,'0' TO_USD_AMT
         ,'0' FM_AD_USD_AMT
         ,'0' TO_AD_USD_AMT
FROM     GEM_REQUEST A, GEM_ITEM B                                                                                                                                                     -- FROM 데이타 --
        ,GEM_APRO_STEP C, GEM_OFFICE D, GEM_EXPENSE E, GEM_XCH_RT F , GEM_EXPN_GRP_V G
WHERE    1 = 1
AND      A.GEN_EXPN_RQST_NO = B.GEN_EXPN_RQST_NO
AND      B.GEN_EXPN_RQST_NO = C.GEN_EXPN_RQST_NO
AND      B.OFC_CD = C.OFC_CD
AND      B.GEN_EXPN_CD = C.GEN_EXPN_CD
AND      B.GEN_EXPN_ITM_NO = C.GEN_EXPN_ITM_NO
AND      B.GEN_EXPN_TRNS_DIV_CD = C.GEN_EXPN_TRNS_DIV_CD
AND      B.GEN_EXPN_RQST_SEQ = C.GEN_EXPN_RQST_SEQ
AND      C.GEN_EXPN_APRO_STEP_CD IN ('RQ', B.CRNT_GEN_EXPN_APRO_STEP_CD)
AND      B.OFC_CD = D.OFC_CD
AND      B.GEN_EXPN_CD = E.GEN_EXPN_CD
AND      F.ACCT_XCH_RT_YRMON =    SUBSTR (A.PLN_YRMON, 1, 4) || '00'
AND      F.GEN_EXPN_XCH_RT_DIV_CD = 'I'
AND      F.CURR_CD = D.LOCL_CURR_CD
AND      B.GEN_EXPN_CD = G.GEN_EXPN_CD
AND      A.GEN_EXPN_RQST_NO = @[gen_expn_rqst_no]
#if (${gen_expn_rqst_seq} != '') 
AND      B.GEN_EXPN_RQST_SEQ = @[gen_expn_rqst_seq]
#end
GROUP BY A.GEN_EXPN_RQST_TP_CD, A.GEN_EXPN_RQST_NO, B.GEN_EXPN_RQST_SEQ
ORDER BY   
  GEM_EXPN_GRP_CD1
, GEN_EXPN_RQST_SEQ
, FM_GEN_EXPN_CD
, FM_RQ_AMT
, FM_GEN_EXPN_ITEM_NO 
, TO_EXPN_GRP_ABBR_NM1 
, TO_GEN_EXPN_CD 
, TO_GEN_EXPN_ITEM_NO			]]></sql>
			<params>
				<param name="lang_div" type="12" value="" out="N"/>
				<param name="gen_expn_rqst_no" type="12" value="" out="N"/>
				<param name="gen_expn_rqst_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
