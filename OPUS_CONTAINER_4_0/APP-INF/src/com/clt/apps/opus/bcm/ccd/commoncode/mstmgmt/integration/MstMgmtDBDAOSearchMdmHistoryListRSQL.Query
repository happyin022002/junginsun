<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="MstMgmtDBDAOSearchMdmHistoryListRSQL">
			<desc><![CDATA[MDM_DAT_CNG_HIS Request List 정보 조회]]></desc>
			<sql><![CDATA[
SELECT *
  FROM
(SELECT  CNG_DT
       ,(SELECT UI_DP_TBL_NM CD_DESC
           FROM MDM_TBL_INFO
          WHERE HIS_FLG = 'Y' AND TBL_DIV_CD = 'T' AND TBL_NM = H.TBL_NM
          GROUP BY TBL_NM, UI_DP_TBL_NM
        ) TBL_NM
       ,(SELECT UI_DP_FLD_NM CD_DESC
           FROM MDM_COL_INFO
          WHERE TBL_NM = H.TBL_NM
            AND COL_NM = H.COL_NM
            AND HIS_FLG = 'Y'
          GROUP BY COL_NM, UI_DP_FLD_NM
        ) COL_NM
       ,CNG_SEQ
       ,N1ST_KEY_COL_NM
       ,N2ND_KEY_COL_NM
       ,N3RD_KEY_COL_NM
       ,N4TH_KEY_COL_NM
       ,N5TH_KEY_COL_NM
       ,PRE_CTNT
       ,AFT_CTNT
       ,CRE_USR_ID
       ,TO_CHAR(CRE_DT, 'YYYY-MM-DD') AS CRE_DT
       ,UPD_USR_ID
       ,TO_CHAR(UPD_DT, 'YYYY-MM-DD')  AS UPD_DT
       ,ROW_NUMBER() OVER (ORDER BY H.CNG_SEQ) AS ROW_SEQ
   FROM MDM_DAT_CNG_HIS H
  WHERE 1 = 1
#if (${fm_rqst_dt} != '')
    AND CNG_DT BETWEEN TO_DATE(@[fm_rqst_dt], 'YYYY-MM-DD') AND TO_DATE(@[to_rqst_dt], 'YYYY-MM-DD') + 0.99999
#end
#if (${tbl_nm} != '')
    AND TBL_NM = @[tbl_nm]
#end
#if (${col_nm} != '')
    AND COL_NM = @[col_nm]
#end
)
#if (${startno} != '') 
  WHERE ROW_SEQ BETWEEN @[startno] AND @[endno]
#end
  ORDER BY CNG_DT DESC			]]></sql>
			<params>
				<param name="fm_rqst_dt" type="12" value="" out="N"/>
				<param name="to_rqst_dt" type="12" value="" out="N"/>
				<param name="tbl_nm" type="12" value="" out="N"/>
				<param name="col_nm" type="12" value="" out="N"/>
				<param name="startno" type="12" value="" out="N"/>
				<param name="endno" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
