<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TariffGeneralInformationDBDAOPriTrfBzcHistoryRSQL">
			<desc><![CDATA[Tariff General Information History]]></desc>
			<sql><![CDATA[
SELECT DISTINCT B.TRF_PFX_CD||'-'||B.TRF_NO Tariff_Code
      ,B.TRF_BZC_TP_CD
      ,T.TRF_NM
	  ,B.TRF_NO
	  ,B.TRF_PFX_CD
  FROM PRI_TRF_BZC B,
       PRI_TARIFF T
 WHERE B.TRF_NO = T.TRF_NO
   AND B.TRF_PFX_CD = T.TRF_PFX_CD
   AND T.DELT_FLG = 'N'
   AND TRF_BZC_STS_CD = 'F'

   #if(${trf_no}!= '')
   AND B.TRF_NO = @[trf_no]
   #end

   #if(${trf_pfx_cd}!= '')
   AND B.TRF_PFX_CD = @[trf_pfx_cd]
   #end       
  
   #if(${access_dt}!= '')
   AND B.EFF_DT <= TO_DATE(@[access_dt], 'YYYY-MM-DD')
   AND NVL(B.EXP_DT, TO_DATE('9999-12-31','YYYY-MM-DD')) >= TO_DATE(@[access_dt], 'YYYY-MM-DD')
   #end

  ORDER BY Tariff_Code			]]></sql>
			<params>
				<param name="trf_no" type="12" value="" out="N"/>
				<param name="trf_pfx_cd" type="12" value="" out="N"/>
				<param name="access_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
