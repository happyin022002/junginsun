<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationCMDBDAOCntrHistoryUpdateUSQL">
			<desc><![CDATA[ContainerMovementMgtDBDAO의 History Update]]></desc>
			<sql><![CDATA[
#if (${del_flg} == '1')
UPDATE BKG_CONTAINER
        SET   CNMV_YR       = @[cnmv_yr]
             ,CNMV_ID_NO    = @[cnmv_id_no]
             ,ORG_YD_CD     = @[org_yd_cd]
             ,DEST_YD_CD    = @[dest_yd_cd]
             ,CNMV_STS_CD   = @[mvmt_sts_cd]
             ,CNMV_EVNT_DT  = TO_DATE(@[cnmv_evnt_dt], 'yyyy-mm-dd hh24:mi')
             ,DIFF_RMK      = NVL(@[cnmv_rmk],DIFF_RMK)
#if (${mvmt_sts_cd} == 'OP')              
             ,CGO_RCV_DT    = NULL
             ,CGO_RCV_YD_CD = NULL
#end
  WHERE       CNTR_NO       = @[cntr_no]
        AND   CNMV_CYC_NO   = @[cnmv_cyc_no]
#elseif (${del_flg} == '2')
UPDATE BKG_CONTAINER
        SET   CGO_RCV_DT    = TO_DATE(@[cnmv_evnt_dt], 'yyyy-mm-dd hh24:mi')
             ,CGO_RCV_YD_CD = @[org_yd_cd]
  WHERE       CNTR_NO       = @[cntr_no]
        AND   CNMV_CYC_NO   = @[cnmv_cyc_no]
#else
UPDATE BKG_CONTAINER
       SET   CNMV_CYC_NO = 9999,
          CNMV_STS_CD = 'MT',
          CNMV_EVNT_DT  = TO_DATE(@[cnmv_evnt_dt], 'yyyy-mm-dd hh24:mi'),
          DIFF_RMK      = 'MT repo VL deleted'
WHERE  CNTR_NO       = @[cntr_no]
  AND  (CNMV_CYC_NO  = @[cnmv_cyc_no]   OR    CNMV_CYC_NO  = 9999)
  AND  BKG_NO        = @[bkg_no]
#end			]]></sql>
			<params>
				<param name="cnmv_yr" type="12" value="" out="N"/>
				<param name="cnmv_id_no" type="12" value="" out="N"/>
				<param name="org_yd_cd" type="12" value="" out="N"/>
				<param name="dest_yd_cd" type="12" value="" out="N"/>
				<param name="mvmt_sts_cd" type="12" value="" out="N"/>
				<param name="cnmv_evnt_dt" type="12" value="" out="N"/>
				<param name="cnmv_rmk" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cnmv_cyc_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
