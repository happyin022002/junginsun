<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="MonthlyQuotaCreationDBDAOUpdateNotifyUSQL">
			<desc><![CDATA[해당 버전을 Notify 한다.]]></desc>
			<sql><![CDATA[
MERGE INTO SAQ_MON_FCAST_TRNS A 
USING
    (SELECT T1.MQTA_MDL_VER_NO 
         , T1.TRD_CD 
         , T1.SUB_TRD_CD 
         , T1.DIR_CD 
      FROM SAQ_MON_FCAST_TRNS T1 
         , SAQ_TGT_GRP_TRD T2 
     WHERE 1=1 
           AND T1.TRD_CD = T2.TRD_CD 
           AND T1.SUB_TRD_CD = T2.SUB_TRD_CD 
           AND T1.DIR_CD = T2.DIR_CD 
           AND T1.MQTA_MDL_VER_NO = @[mqta_mdl_ver_no] 
     GROUP BY T1.MQTA_MDL_VER_NO 
         , T1.TRD_CD 
         , T1.SUB_TRD_CD 
         , T1.DIR_CD 
    ) B 
ON (B.MQTA_MDL_VER_NO = A.MQTA_MDL_VER_NO 
      AND B.TRD_CD = A.TRD_CD 
      AND B.SUB_TRD_CD = A.SUB_TRD_CD 
      AND B.DIR_CD = A.DIR_CD ) 
WHEN MATCHED THEN 
       UPDATE 
              SET A.FCAST_TRNS_STS_CD = 'N' 
            , A.UPD_USR_ID = @[user_id] 
            , A.UPD_DT = SYSDATE 
     			]]></sql>
			<params>
				<param name="mqta_mdl_ver_no" type="12" value="" out="N"/>
				<param name="user_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
