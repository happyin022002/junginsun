<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SCTransportationAdditionalChargeProposalDBDAOPriSpScpTrspAddChgGriArbCancleUSQL">
			<desc><![CDATA[gri cal 취소]]></desc>
			<sql><![CDATA[
UPDATE PRI_SP_SCP_TRSP_ADD_CHG A SET
       A.GRI_APPL_TP_CD = 'N'
	  #if (${amdt_seq} != "0")
      ,(A.PRC_PROG_STS_CD, A.SRC_INFO_CD, A.N1ST_CMNC_AMDT_SEQ, A.PROP_FRT_RT_AMT, A.COFFR_FRT_RT_AMT, A.FNL_FRT_RT_AMT) = 
       (SELECT PRC_PROG_STS_CD, SRC_INFO_CD, N1ST_CMNC_AMDT_SEQ, PROP_FRT_RT_AMT, COFFR_FRT_RT_AMT, FNL_FRT_RT_AMT
        FROM   PRI_SP_SCP_TRSP_ADD_CHG 
        WHERE  PROP_NO = A.PROP_NO
        AND    AMDT_SEQ = A.AMDT_SEQ - 1
        AND    SVC_SCP_CD = A.SVC_SCP_CD
        AND    ADD_CHG_TP_CD = A.ADD_CHG_TP_CD
        AND    ORG_DEST_TP_CD = A.ORG_DEST_TP_CD
        AND    ADD_CHG_SEQ = A.ADD_CHG_SEQ
	    )
	  #else
      ,A.PROP_FRT_RT_AMT = A.PROP_FRT_RT_AMT - A.GRI_APPL_AMT
      #end
      ,A.GRI_APPL_AMT = 0
 WHERE A.PROP_NO = @[prop_no]
   AND A.AMDT_SEQ = @[amdt_seq]
   AND A.SVC_SCP_CD = @[svc_scp_cd]
   AND A.ORG_DEST_TP_CD = @[org_dest_tp_cd]
   AND A.GRI_APPL_TP_CD = 'A'			]]></sql>
			<params>
				<param name="prop_no" type="12" value="" out="N"/>
				<param name="amdt_seq" type="12" value="" out="N"/>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="org_dest_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
