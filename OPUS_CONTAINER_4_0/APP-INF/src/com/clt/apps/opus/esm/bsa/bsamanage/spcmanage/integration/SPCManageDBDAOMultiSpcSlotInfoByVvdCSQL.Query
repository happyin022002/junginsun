<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SPCManageDBDAOMultiSpcSlotInfoByVvdCSQL">
			<desc><![CDATA[BSA_VVD_SWAP_INFO 테이블에 Company의 FREE ADDITION 정보를 업데이트 한다.]]></desc>
			<sql><![CDATA[
MERGE INTO BSA_VVD_SWAP_INFO A 
       USING(
             SELECT @[trd_cd] AS TRD_CD,
                  @[rlane_cd] AS RLANE_CD,
                  @[vsl_cd] AS VSL_CD,
                  @[skd_voy_no] AS SKD_VOY_NO,
                  @[skd_dir_cd] AS SKD_DIR_CD,
                  @[bsa_op_jb_cd] AS BSA_OP_JB_CD,
                  @[free_add_teu_capa] AS FREE_ADD_TEU_CAPA,
                  @[free_add_wgt] AS FREE_ADD_WGT,
                  @[cre_usr_id] AS USR_ID, 
                  COM_ConstantMgr_PKG.COM_getCompanyCode_FNC AS CRR_CD
             FROM DUAL
            ) B
       ON(
               A.TRD_CD         = B.TRD_CD
           AND A.RLANE_CD       = B.RLANE_CD
           AND A.VSL_CD         = B.VSL_CD
           AND A.SKD_VOY_NO     = B.SKD_VOY_NO
           AND A.SKD_DIR_CD     = B.SKD_DIR_CD
           AND A.BSA_OP_JB_CD   = B.BSA_OP_JB_CD
           AND A.CRR_CD         = B.CRR_CD
          )
       WHEN MATCHED THEN
            UPDATE SET 
                   FREE_ADD_TEU_CAPA  = B.FREE_ADD_TEU_CAPA,
                   FREE_ADD_WGT       = B.FREE_ADD_WGT,
                   UPD_USR_ID         = B.USR_ID,
                   UPD_DT             = SYSDATE
       WHEN NOT MATCHED THEN
            INSERT (TRD_CD, 
					RLANE_CD, 
					VSL_CD, 
					SKD_VOY_NO, 
					SKD_DIR_CD,
                    BSA_OP_JB_CD, 
					CRR_CD, 
					FREE_ADD_TEU_CAPA, 
					FREE_ADD_WGT,
                    CRE_USR_ID, 
					CRE_DT, 
					UPD_USR_ID, 
					UPD_DT)
            VALUES( B.TRD_CD, 
					B.RLANE_CD, 
					B.VSL_CD, 
					B.SKD_VOY_NO, 
					B.SKD_DIR_CD, 
					B.BSA_OP_JB_CD,
                    B.CRR_CD, 
					B.FREE_ADD_TEU_CAPA, 
					B.FREE_ADD_WGT, 
					B.USR_ID, 
					SYSDATE, 
					B.USR_ID, 
					SYSDATE)			]]></sql>
			<params>
				<param name="trd_cd" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="bsa_op_jb_cd" type="12" value="" out="N"/>
				<param name="free_add_teu_capa" type="12" value="" out="N"/>
				<param name="free_add_wgt" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
