<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingUtilDBDAOSearchPortCdByVvdRSQL">
			<desc><![CDATA[vvd기준으로 port항목 조회]]></desc>
			<sql><![CDATA[
SELECT	VSL_CD
,	SKD_VOY_NO
,	SKD_DIR_CD
,	VPS_PORT_CD
,	CLPT_IND_SEQ
,	CLPT_SEQ
,	SLAN_CD
,	PORT_SKD_STS_CD
,	YD_CD
,	CALL_YD_IND_SEQ
,	PF_ETA_DT
,	PF_ETB_DT
,	PF_ETD_DT
,	INIT_ETA_DT
,	INIT_ETB_DT
,	INIT_ETD_DT
,	VPS_ETA_DT
,	VPS_ETB_DT
,	VPS_ETD_DT
,	VSL_DLAY_RSN_CD
,	VSL_DLAY_RSN_DESC
,	VSL_DLAY_RSN_LOC_CD
,	SHP_CALL_NO
,	SHP_CALL_NO_UPD_USR_ID
,	SHP_CALL_NO_UPD_DT
,	TML_VSL_CD
,	TML_VOY_NO
,	FT_DT
,	PLISM_YD_CD
,	PLISM_VSL_CD
,	PLISM_VOY_NO
,	SKD_CNG_STS_CD
,	TURN_PORT_FLG
,	TURN_PORT_IND_CD
,	TURN_SKD_VOY_NO
,	TURN_SKD_DIR_CD
,	TURN_CLPT_IND_SEQ
,	IB_CGO_QTY
,	OB_CGO_QTY
--,	CRN_WRK_CMNC_DT
--,	CRN_WRK_CMPL_DT
,	VPS_RMK
,	PHS_IO_RSN_CD
,	PHS_IO_RMK
,	SKD_BRTH_NO
,	INIT_SKD_INP_FLG
,	OFC_INP_FLG
,	NOON_RPT_INP_FLG
,	DEP_RPT_INP_FLG
,	ACT_INP_FLG
,	PRT_CHK_FLG
,	CRE_USR_ID
,	CRE_DT
,	UPD_USR_ID
,	UPD_DT
,	EDI_SND_KNT
,	SKD_AUTO_UPD_FLG
,	PORT_SKP_TP_CD
,	PORT_SKP_RSN_CD
,	PORT_SKP_RSN_OFFR_RMK
,	TTL_DLAY_HRS
,	TS_PORT_CD
,	USD_FLG
,	SLAN_CD || '|' || to_char(VPS_ETD_DT,'yyyy-mm-dd hh24:mi:ss') OPT_DISP
FROM   VSK_VSL_PORT_SKD SKD 
WHERE  SKD.VSL_CD 		= substr(@[vvd_cd], 1, 4)
AND    SKD.SKD_VOY_NO 	= substr(@[vvd_cd], 5, 4)
AND    SKD.SKD_DIR_CD 	= substr(@[vvd_cd], 9, 1)
AND    SKD.CLPT_IND_SEQ = (SELECT MAX(CLPT_IND_SEQ) 
                          FROM VSK_VSL_PORT_SKD  A
                          WHERE A.VSL_CD = SKD.VSL_CD 
                          AND   A.SKD_VOY_NO = SKD.SKD_VOY_NO
                          AND   A.SKD_DIR_CD = SKD.SKD_DIR_CD
                          AND   A.VPS_PORT_CD = SKD.VPS_PORT_CD)
ORDER BY SKD.VPS_PORT_CD			]]></sql>
			<params>
				<param name="vvd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
