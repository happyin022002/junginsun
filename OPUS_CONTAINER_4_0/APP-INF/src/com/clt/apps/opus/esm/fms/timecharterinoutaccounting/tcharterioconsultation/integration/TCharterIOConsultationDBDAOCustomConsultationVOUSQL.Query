<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TCharterIOConsultationDBDAOCustomConsultationVOUSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
#if (${modify_type} == 'Approval') 

	UPDATE FMS_CONSULTATION SET 
		APRO_FLG = 'Y'
    ,	APRO_DT = SYSDATE
	,	UPD_USR_ID = @[upd_usr_id]
	,	UPD_DT = SYSDATE
	WHERE	SLP_TP_CD || SLP_FUNC_CD || SLP_OFC_CD || SLP_ISS_DT || SLP_SER_NO 	= @[csr_no]
#elseif (${modify_type} == 'Cancel') 

	UPDATE FMS_CONSULTATION SET 
		APRO_FLG = 'N'
	,	CXL_FLG = 'Y'
	,	CXL_DESC = @[cxl_desc]
	,	UPD_USR_ID = @[upd_usr_id]
	,	UPD_DT = SYSDATE
	WHERE	SLP_TP_CD || SLP_FUNC_CD || SLP_OFC_CD || SLP_ISS_DT || SLP_SER_NO 	= @[csr_no]

#elseif (${modify_type} == 'CancelOrigin') 

	UPDATE FMS_CSUL_SLP A SET 
		STL_FLG = 'N'
	,	UPD_USR_ID = @[upd_usr_id]
	,	UPD_DT = SYSDATE
	WHERE	EXISTS (SELECT NULL 
					FROM   FMS_CSUL_SLP 
					WHERE  SLP_TP_CD || SLP_FUNC_CD || SLP_OFC_CD || SLP_ISS_DT || SLP_SER_NO = @[csr_no]
					AND    ORG_SLP_TP_CD   = A.SLP_TP_CD
					AND    ORG_SLP_FUNC_CD = A.SLP_FUNC_CD 
					AND    ORG_SLP_OFC_CD  = A.SLP_OFC_CD 
					AND    ORG_ISS_DT      = A.SLP_ISS_DT 
					AND    ORG_SLP_SER_NO  = A.SLP_SER_NO 
					AND    ORG_SLP_SEQ_NO  = A.SLP_SEQ_NO) 

#end			]]></sql>
			<params>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="csr_no" type="12" value="" out="N"/>
				<param name="cxl_desc" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
