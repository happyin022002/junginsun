<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOSearchExportReferencesByCntrRSQL">
			<desc><![CDATA[EXPORT REFERENCES 조회 데이터 가져오기]]></desc>
			<sql><![CDATA[
SELECT
    SUBSTR(V1.BKG_REF_TP_CD, 2, 5) BKG_REF_TP_CD
   ,V1.BKG_REF_TP_NM
   ,V2.CNTR_NO
   ,V2.CUST_REF_NO_CTNT
   ,@[bkg_no] BKG_NO
FROM
    (        
        SELECT  '1CTPO' BKG_REF_TP_CD
               ,'Container P/O Number' BKG_REF_TP_NM
        FROM    DUAL
        UNION ALL
        SELECT  '2CMRN' BKG_REF_TP_CD
               ,'MRN No' BKG_REF_TP_NM
        FROM    DUAL
        UNION ALL
        SELECT  '3CUCR' BKG_REF_TP_CD
               ,'URC No' BKG_REF_TP_NM
        FROM    DUAL
    ) V1,
	(    
		SELECT  BKG_REF_TP_CD
		        , REF_SEQ
		        , CNTR_NO
		        , CUST_REF_NO_CTNT
		        , CPY_DESC_FLG
		        , BKG_NO
		FROM    BKG_REFERENCE
        WHERE   BKG_NO = @[bkg_no]
		AND     BKG_REF_TP_CD = 'CTPO'
		UNION
		SELECT  BKG_REF_TP_CD
		        , REF_SEQ
		        , CNTR_NO
		        , CUST_REF_NO_CTNT
		        , CPY_DESC_FLG
		        , BKG_NO
		FROM    BKG_REFERENCE
        WHERE   BKG_NO = @[bkg_no]
		AND     BKG_REF_TP_CD = 'CMRN'
		UNION
		SELECT  BKG_REF_TP_CD
		        , REF_SEQ
		        , CNTR_NO
		        , CUST_REF_NO_CTNT
		        , CPY_DESC_FLG
		        , BKG_NO
		FROM    BKG_REFERENCE
        WHERE   BKG_NO = @[bkg_no]
		AND     BKG_REF_TP_CD = 'CUCR'     
    ) V2
WHERE SUBSTR(V1.BKG_REF_TP_CD, 2, 5) = V2.BKG_REF_TP_CD(+)	
ORDER BY V1.BKG_REF_TP_CD			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
