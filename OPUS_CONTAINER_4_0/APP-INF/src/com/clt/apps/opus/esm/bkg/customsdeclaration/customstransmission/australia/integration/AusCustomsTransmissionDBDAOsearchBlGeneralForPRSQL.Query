<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AusCustomsTransmissionDBDAOsearchBlGeneralForPRSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
SELECT NVL(B.BL_NO, '')||DECODE(NVL(B.BL_TP_CD, ''), 'S', '', NVL(B.BL_TP_CD, '')) AS BLNBR,
       NVL(VVD.POL_CD, '') AS BLPOL,
       NVL(VVD.POD_CD, '') AS BLPOD,
       NVL(B.POR_CD, '') AS BLPOR,
       NVL(B.DEL_CD, '') AS BLDEL,
       DECODE(@[pol_cd], NULL, NVL(B.PST_RLY_PORT_CD, ''), NVL(B.PRE_RLY_PORT_CD, '')) AS BLRLY,
       NVL(E.LOC_CD, '') AS BLPLACE,
       NVL(TO_CHAR(BL.OBL_ISS_DT, 'RRMMDD'), '') AS BLDATE,
       NVL(BCS.CUST_CNT_CD, '')||LPAD(NVL(TO_CHAR(BCS.CUST_SEQ), ''), 6, '0') AS CUST_CD,
       DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_NM, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_NM, 2), NULL, DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 2)), (SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 1))), SCE_TOKEN_NL_FNC(BCS.CUST_NM, 2)), SCE_TOKEN_NL_FNC(BCS.CUST_NM, 1)) AS SHPR1,
       DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_NM, 2), NULL, DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 2)), SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 1)), SCE_TOKEN_NL_FNC(BCS.CUST_NM, 2)) AS SHPR2,
       DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 2)), SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 1)) AS SHPR3,
       DECODE(SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 2)) AS SHPR4,
       SCE_TOKEN_NL_FNC(BCS.CUST_ADDR, 3) AS SHPR5,
       DECODE(B.CUST_TO_ORD_FLG, 'Y', SCE_TOKEN_NL_FNC(BCN.CUST_NM, 1), DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_NM, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_NM, 2), NULL, DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 2)), (SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 1))), SCE_TOKEN_NL_FNC(BCC.CUST_NM, 2)), SCE_TOKEN_NL_FNC(BCC.CUST_NM, 1))) AS CNEE1,
       DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_NM, 2), NULL, DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 2)), SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 1)), SCE_TOKEN_NL_FNC(BCC.CUST_NM, 2)) AS CNEE2,
       DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 2)), SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 1)) AS CNEE3,
       DECODE(SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 2)) AS CNEE4,
       SCE_TOKEN_NL_FNC(BCC.CUST_ADDR, 3) AS CNEE5,
       DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_NM, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_NM, 2), NULL, DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 2)), (SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 1))), SCE_TOKEN_NL_FNC(BCN.CUST_NM, 2)), SCE_TOKEN_NL_FNC(BCN.CUST_NM, 1)) AS NTFY1,
       DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_NM, 2), NULL, DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 2)), SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 1)), SCE_TOKEN_NL_FNC(BCN.CUST_NM, 2)) AS NTFY2,
       DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 1), NULL, DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 2)), SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 1)) AS NTFY3,
       DECODE(SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 2), NULL, SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 3), SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 2)) AS NTFY4,
       SCE_TOKEN_NL_FNC(BCN.CUST_ADDR, 3) AS NTFY5,
       SCE_TOKEN_NL_FNC(BCA.CUST_NM, 1) AS NTFY21,
       SCE_TOKEN_NL_FNC(BCA.CUST_NM, 2) AS NTFY22,
       SCE_TOKEN_NL_FNC(BCA.CUST_NM, 3) AS NTFY23,
       SCE_TOKEN_NL_FNC(BCA.CUST_NM, 4) AS NTFY24,
       SCE_TOKEN_NL_FNC(BCA.CUST_NM, 5) AS NTFY25,
       SCE_TOKEN_NL_FNC(BCF.CUST_NM, 1) AS FFWD1,
       SCE_TOKEN_NL_FNC(BCF.CUST_NM, 2) AS FFWD2,
       SCE_TOKEN_NL_FNC(BCF.CUST_NM, 3) AS FFWD3,
       SCE_TOKEN_NL_FNC(BCF.CUST_NM, 4) AS FFWD4,
       SCE_TOKEN_NL_FNC(BCF.CUST_NM, 5) AS FFWD5,
       SCE_TOKEN_NL_FNC(BCE.CUST_NM, 1) AS EXPO1,
       SCE_TOKEN_NL_FNC(BCE.CUST_NM, 2) AS EXPO2,
       SCE_TOKEN_NL_FNC(BCE.CUST_NM, 3) AS EXPO3,
       SCE_TOKEN_NL_FNC(BCE.CUST_NM, 4) AS EXPO4,
       SCE_TOKEN_NL_FNC(BCE.CUST_NM, 5) AS EXPO5,
       NVL(BL.BL_CPY_KNT, 0) AS BLCOPY,
       '1' AS BLORG,
       NVL(DOC.PCK_QTY, 0) AS BLPKG,
       NVL(DOC.PCK_TP_CD, '') AS BLPKGU,
       DECODE(NVL(DOC.WGT_UT_CD, ''), 'LBS', ROUND(NVL(DOC.ACT_WGT, 0)*0.4536, 3), NVL(DOC.ACT_WGT, 0)) AS BLWGT,
       DECODE(NVL(DOC.MEAS_UT_CD, ''), 'CBF', ROUND(NVL(DOC.MEAS_QTY, 0)*0.0283, 3), NVL(DOC.MEAS_QTY, 0)) AS BLMEA,
       NVL(B.RCV_TERM_CD, '')||NVL(B.DE_TERM_CD, '') AS RDTYPE,
       NVL(B.BKG_CGO_TP_CD, '') AS CARGOTYPE,
       NVL(CMD.CMDT_NM, '') AS COMMODITY,
       TRANSLATE(NVL(B.XTER_RMK, ' '), CHR(10), ' ') AS XTER_RMK,
       '' AS AUS_QUAR,
       NVL(B.BKG_NO, '') AS BKG_NO,
       NVL(B.BKG_CGO_TP_CD, '') AS BKG_CGO_TP_CD,
       DECODE(NVL(B.DCGO_FLG, ''), 'N', '0', 'Y', '1') AS BKG_SPE_DG,
       DECODE(NVL(B.RC_FLG, ''), 'N', '0', 'Y', '1') AS BKG_SPE_RF,
       DECODE(NVL(B.AWK_CGO_FLG, ''), 'N', '0', 'Y', '1') AS BKG_SPE_AK,
       DECODE(NVL(B.BB_CGO_FLG, ''), 'N', '0', 'Y', '1') AS BKG_SPE_BB,
       DECODE(NVL(B.RD_CGO_FLG, ''), 'N', '0', 'Y', '1') AS BKG_SPE_RD,
       NVL(B.REP_CMDT_CD, '') AS CMDT_CD,
       TRANSLATE(NVL(COM.REP_CMDT_NM, ' '), CHR(10), ' ') AS CMDT_DESC

  FROM BKG_BOOKING B,
       MDM_ORGANIZATION E,
       MDM_REP_CMDT COM,
       MDM_COMMODITY CMD,
       BKG_VVD VVD,
       BKG_BL_ISS BL,
       BKG_RATE RATE,
       BKG_BL_DOC DOC,
       BKG_CUSTOMER BCC,
       BKG_CUSTOMER BCS,
       BKG_CUSTOMER BCN,
       BKG_CUSTOMER BCA,
       BKG_CUSTOMER BCF,
       BKG_CUSTOMER BCE

 WHERE VVD.VSL_CD = @[vsl_cd]
   AND VVD.SKD_VOY_NO = @[skd_voy_no]
   AND VVD.SKD_DIR_CD = @[skd_dir_cd]
#if (${pol_cd}!= '')
   AND VVD.POL_CD = @[pol_cd]
#end
#if (${pod_cd}!= '')
   AND VVD.POD_CD = @[pod_cd]
#end
   AND B.BKG_STS_CD != 'X'
   AND B.BKG_STS_CD != 'S'
   AND B.REP_CMDT_CD = COM.REP_CMDT_CD(+)
   AND B.CMDT_CD = CMD.CMDT_CD(+)
   AND B.BKG_NO = VVD.BKG_NO
   AND B.BKG_NO = BL.BKG_NO(+)
   AND BL.OBL_ISS_OFC_CD = E.OFC_CD(+)
   AND B.BKG_NO = RATE.BKG_NO(+)
   AND B.BKG_NO = DOC.BKG_NO
   AND BCC.BKG_CUST_TP_CD(+) = 'C'
   AND B.BKG_NO=BCC.BKG_NO(+)
   AND B.BKG_NO=BCS.BKG_NO
   AND BCS.BKG_CUST_TP_CD = 'S'
   AND B.BKG_NO=BCN.BKG_NO(+)
   AND BCN.BKG_CUST_TP_CD(+) = 'N'
   AND B.BKG_NO=BCA.BKG_NO(+)
   AND BCA.BKG_CUST_TP_CD(+) = 'A'
   AND B.BKG_NO=BCF.BKG_NO(+)
   AND BCF.BKG_CUST_TP_CD(+) = 'F'
   AND B.BKG_NO=BCE.BKG_NO(+)
   AND BCE.BKG_CUST_TP_CD(+) = 'E'

 ORDER BY B.BL_NO
			]]></sql>
			<params>
				<param name="pol_cd" type="12" value="" out="N"/>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
