<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CommonDBDAOSearchBSRLaneComboListRSQL">
			<desc><![CDATA[Base Data 에서 Lane Adjust 화면에서 Lane Combo list 를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT T1.TRD_CD 
     , T1.SUB_TRD_CD 
     , T1.RLANE_CD 
     , T3.RLANE_NM 
  FROM 
       (SELECT MQTA_MDL_VER_NO 
            , TRD_CD 
            , SUB_TRD_CD 
            , IOC_CD 
            , RLANE_CD 
            , RLANE_CD AS ORG_RLANE_CD 
         FROM SAQ_MON_FCAST_TRNS 
        WHERE 1=1 
              AND MQTA_MDL_VER_NO = @[mqtaMdlVerNo] 
			  #if(${trade} != '') 
              AND TRD_CD = @[trade] 
              #end 
			  #if(${subTrde} != '') 
              AND SUB_TRD_CD = @[subTrde] 
              #end       
              AND (FCAST_TRNS_STS_CD = '0' OR FCAST_TRNS_STS_CD IS NULL) 
        GROUP BY MQTA_MDL_VER_NO 
            , TRD_CD 
            , SUB_TRD_CD 
            , IOC_CD 
            , RLANE_CD 
       ) T1 
     , 
       (SELECT BSE_YR 
            , BSE_QTR_CD 
            , TRD_CD 
            , SUB_TRD_CD 
            , RLANE_CD 
         FROM SAQ_MON_TGT_VVD 
        WHERE 1=1 
              AND DELT_FLG = 'N' 
              AND BSE_YR = @[year] 
              AND BSE_QTR_CD = @[bseQtrCd] 
              #if(${trade} != '') 
              AND TRD_CD = @[trade] 
              #end
			  #if(${subTrde} != '') 
              AND SUB_TRD_CD = @[subTrde] 
              #end   
        GROUP BY BSE_YR 
            , BSE_QTR_CD 
            , TRD_CD 
            , SUB_TRD_CD 
            , RLANE_CD 
       ) T2 
     , MDM_REV_LANE T3 
 WHERE 1=1 
       AND T1.MQTA_MDL_VER_NO = SUBSTR(T2.BSE_YR, 3,2)||BSE_QTR_CD||'01' 
       AND T1.TRD_CD = T2.TRD_CD 
       AND T1.SUB_TRD_CD = T2.SUB_TRD_CD 
       AND T1.RLANE_CD = T2.RLANE_CD 
       AND T1.RLANE_CD = T3.RLANE_CD			]]></sql>
			<params>
				<param name="mqtaMdlVerNo" type="12" value="" out="N"/>
				<param name="trade" type="12" value="" out="N"/>
				<param name="subTrde" type="12" value="" out="N"/>
				<param name="year" type="12" value="" out="N"/>
				<param name="bseQtrCd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
