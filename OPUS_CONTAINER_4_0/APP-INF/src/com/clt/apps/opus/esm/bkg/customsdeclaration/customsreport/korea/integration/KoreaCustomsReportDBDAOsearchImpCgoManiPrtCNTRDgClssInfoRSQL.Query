<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="KoreaCustomsReportDBDAOsearchImpCgoManiPrtCNTRDgClssInfoRSQL">
			<desc><![CDATA[Import Cargo Manifest Print를 위한 Container Information과 DG Class Code를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT  NVL(CNTR.CNTR_NO,' ')||'-'||NVL(CNTR.CNTR_TPSZ_CD,' ')||CHR(10)||'/'||NVL(SEAL.CNTR_SEAL_NO,' ') CNTR_INFO
      , NVL(DG.CLSS,DECODE(SUBSTR(TO_CHAR(RF.CDO_TEMP),1,1),'-',TO_CHAR(RF.CDO_TEMP)||'℃','0','0'||'℃',NULL,NULL,'+'||TO_CHAR(RF.CDO_TEMP)||'℃')) DG_CLSS
FROM   BKG_CONTAINER CNTR, 
       (SELECT DISTINCT BKG_JOIN_FNC(CURSOR(SELECT CNTR_SEAL_NO FROM BKG_CNTR_SEAL_NO WHERE  BKG_NO = @[bkg_no] AND CNTR_NO = BCSN.CNTR_NO ),' ') CNTR_SEAL_NO, CNTR_NO, BKG_NO
        FROM BKG_CNTR_SEAL_NO BCSN
        WHERE BKG_NO = @[bkg_no]) SEAL, 
       (SELECT DISTINCT CNTR_NO CNTR, IMDG_CLSS_CD CLSS
       FROM   BKG_DG_CGO
       WHERE  BKG_NO = @[bkg_no]) DG,
       (SELECT DISTINCT CNTR_NO, CDO_TEMP
        FROM BKG_RF_CGO
        WHERE BKG_NO = @[bkg_no]) RF
WHERE CNTR.BKG_NO= @[bkg_no]
AND   CNTR.BKG_NO = SEAL.BKG_NO(+)
AND   CNTR.CNTR_NO = SEAL.CNTR_NO(+)
AND   CNTR.CNTR_NO = DG.CNTR(+)
AND   CNTR.CNTR_NO = RF.CNTR_NO(+)
ORDER BY CNTR.CNTR_NO, SEAL.CNTR_SEAL_NO			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
