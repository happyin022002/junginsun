<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingUtilDBDAOSearchARCurByTaxChgRSQL">
			<desc><![CDATA[Search AR Curency (Booking, TAX Charge)]]></desc>
			<sql><![CDATA[
SELECT MC.CHG_CD,
       CASE WHEN MC.TAX_CNT_CD IS NULL THEN P_AR_OFC.AR_CURR_CD
            WHEN SUBSTR(P_AR_OFC.LOC_CD,1,2) = MC.TAX_CNT_CD THEN P_AR_OFC.AR_CURR_CD
            ELSE NULL
        END PRE_CURR,
       CASE WHEN MC.TAX_CNT_CD IS NULL THEN C_AR_OFC.AR_CURR_CD
            WHEN SUBSTR(C_AR_OFC.LOC_CD,1,2) = MC.TAX_CNT_CD THEN C_AR_OFC.AR_CURR_CD
            ELSE NULL
        END COL_CURR
FROM BKG_RATE R,
     MDM_ORGANIZATION P_OFC,
     MDM_ORGANIZATION P_AR_OFC,
     MDM_ORGANIZATION C_OFC,
     MDM_ORGANIZATION C_AR_OFC,
     MDM_CHARGE MC
WHERE R.PPD_RCV_OFC_CD = P_OFC.OFC_CD
AND P_OFC.AR_OFC_CD = P_AR_OFC.OFC_CD
AND R.CLT_OFC_CD = C_OFC.OFC_CD
AND C_OFC.AR_OFC_CD = C_AR_OFC.OFC_CD
AND R.BKG_NO = @[bkg_no]
#if(${chg_cds} != '')
AND MC.CHG_CD IN ( NULL
       #foreach($chg_cds IN ${chg_cds})
           #if ($velocityCount < $tchg_cds.size()) 
           , '$chg_cds'
           #else
           , '$chg_cds'
           #end
       #end
    )
#end
AND MC.TAX_FLG = 'Y'			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
