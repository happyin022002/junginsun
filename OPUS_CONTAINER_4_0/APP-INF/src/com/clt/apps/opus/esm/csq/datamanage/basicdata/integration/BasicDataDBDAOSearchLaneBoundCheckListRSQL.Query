<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BasicDataDBDAOSearchLaneBoundCheckListRSQL">
			<desc><![CDATA[CSQ_QTA_LANE_MGMT 와 CSQ_QTA_LANE_OFC 간의 Act Flg 체크.]]></desc>
			<sql><![CDATA[
SELECT 
           DECODE(A2.CPY_NO, 0, 'C', 'L') AS OFC_VW_CD
          ,A1.TRD_CD
          ,A1.RLANE_CD
          ,NVL(A1.LANE_DIR_CD, A3.VSL_SLAN_DIR_CD) || 'B' AS DIR_CD
     FROM CSQ_QTA_LANE_MGMT      A1
         ,COM_CPY_NO             A2
         ,MDM_VSL_SVC_LANE_DIR   A3
    WHERE A1.CSQ_ACT_FLG  = 'Y'
      AND A1.BSE_TP_CD    = @[f_bse_tp_cd]
      AND A1.BSE_YR       = @[f_bse_yr]
      AND A1.BSE_QTR_CD   = DECODE(@[f_bse_tp_cd], 'Y', '00', @[f_bse_qtr_cd])
      AND A2.CPY_NO       < 2
      AND SUBSTR(A1.RLANE_CD,0,3) = A3.VSL_SLAN_CD
      AND A3.VSL_SLAN_DIR_CD      = NVL(A1.LANE_DIR_CD, A3.VSL_SLAN_DIR_CD)
      AND A3.DELT_FLG     = 'N'
#if (${f_ias_sctr_flg} == '' || ${f_ias_sctr_flg} == 'null')
      AND A1.IAS_SCTR_FLG = 'N'
#elseif (${f_ias_sctr_flg} == 'Y')
      AND A1.IAS_SCTR_FLG = 'Y'
#end
MINUS
    SELECT DISTINCT
           A1.OFC_VW_CD
          ,A1.TRD_CD
          ,A1.RLANE_CD
          ,A1.DIR_CD || 'B'
     FROM CSQ_QTA_LANE_OFC A1,
          CSQ_QTA_LANE_MGMT A2
    WHERE A1.BSE_TP_CD   = @[f_bse_tp_cd]
      AND A1.BSE_YR      = @[f_bse_yr]
      AND A1.BSE_QTR_CD  = DECODE(@[f_bse_tp_cd], 'Y', '00', @[f_bse_qtr_cd])
      AND A1.CSQ_ACT_FLG = 'Y'
#if (${f_ias_sctr_flg} == '' || ${f_ias_sctr_flg} == 'null')
      AND A2.IAS_SCTR_FLG = 'N'
#elseif (${f_ias_sctr_flg} == 'Y')
      AND A2.IAS_SCTR_FLG = 'Y'
#end
      AND A1.BSE_TP_CD   = A2.BSE_TP_CD
      AND A1.BSE_YR      = A2.BSE_YR
      AND A1.BSE_QTR_CD  = A2.BSE_QTR_CD
      AND A1.TRD_CD      = A2.TRD_CD
      AND A1.SUB_TRD_CD  = A2.SUB_TRD_CD
      AND A1.RLANE_CD    = A2.RLANE_CD

ORDER BY OFC_VW_CD
        ,TRD_CD
        ,RLANE_CD
        ,DIR_CD			]]></sql>
			<params>
				<param name="f_bse_tp_cd" type="12" value="" out="N"/>
				<param name="f_bse_yr" type="12" value="" out="N"/>
				<param name="f_bse_qtr_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
