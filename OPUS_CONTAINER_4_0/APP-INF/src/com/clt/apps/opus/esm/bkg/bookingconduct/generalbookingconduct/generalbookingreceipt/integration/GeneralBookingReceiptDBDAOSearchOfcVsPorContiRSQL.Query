<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOSearchOfcVsPorContiRSQL">
			<desc><![CDATA[다른 대륙의 Booking을 생성할 수 없음]]></desc>
			<sql><![CDATA[
SELECT COUNT(*) CNT
  FROM MDM_ORGANIZATION OFC
        , MDM_LOCATION OFC_LOC
        , MDM_LOCATION POR
 WHERE OFC.OFC_CD   = @[ofc_cd]
   AND OFC.LOC_CD   = OFC_LOC.LOC_CD
   AND POR.LOC_CD   = @[por_cd]
   AND POR.CONTI_CD <> CASE WHEN NVL((SELECT 'Y'
                                        FROM COM_USR_ROLE_MTCH 
                                       WHERE USR_ROLE_CD IN ('BKG16','BKG17')--DOC CENTER는 대륙 CODE가 같아도 가능         
                                         AND USR_ID = @[usr_id]
										 AND ROWNUM = 1), 'N') = 'Y' THEN POR.CONTI_CD 
                            ELSE OFC_LOC.CONTI_CD END 
   AND ROWNUM = 1			]]></sql>
			<params>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="por_cd" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
