<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="MonthlyQuotaAdjustmentSlsRHQDBDAOSearchAdjustmentSlsRhqLoadZero0156ListRSQL">
			<desc><![CDATA[trd_cd, dir_cd, mqta_ver_no의 조회키별 Load 합이 0인 월을 체크하여 문자열로 리턴.]]></desc>
			<sql><![CDATA[
SELECT TO_CHAR(TO_DATE(BSE_MON, 'MM'), 'MON', 'NLS_DATE_LANGUAGE=AMERICAN')
       ||' / '||LOD_TGT.RLANE_CD||'-'||LOD_TGT.SPRT_GRP_CD||LOD_TGT.BSA_GRP_CD
       ||DECODE( 'Y', @[inclPortFlag], ' / '||POL_CD||' / '||POD_CD, '')
       ||' / '||SLS_RGN_OFC_CD  AS MSG,
       SUB_TRD_CD,
       NVL(POL.PORT_SEQ, 999) AS POL_SEQ,
       NVL(POD.PORT_SEQ, 999) AS POD_SEQ
FROM SAQ_MON_QTA_LOD_TGT LOD_TGT,
     SAQ_MON_QTA_PORT_SEQ POL,
     SAQ_MON_QTA_PORT_SEQ POD
WHERE  LOD_TGT.MQTA_STEP_CD = @[mQtaStepCd]
AND    LOD_TGT.BSE_YR = @[year]
AND    LOD_TGT.BSE_QTR_CD = @[bse_qtr_cd]
AND    LOD_TGT.TRD_CD = @[trade]
AND    LOD_TGT.DIR_CD = @[bound]
AND    LOD_TGT.MQTA_VER_NO = @[mQtaVerNo]
AND    POL.BSE_YR(+) = LOD_TGT.BSE_YR
AND    POL.BSE_QTR_CD(+) = LOD_TGT.BSE_QTR_CD
AND    POL.GLINE_VER_NO(+) = @[glineVerNo]
AND    POL.TRD_CD(+) = LOD_TGT.TRD_CD
AND    POL.DIR_CD(+) = LOD_TGT.DIR_CD
AND    POL.RLANE_CD(+) = LOD_TGT.RLANE_CD
AND    POL.SPRT_GRP_CD(+) = LOD_TGT.SPRT_GRP_CD
AND    POL.BSA_GRP_CD(+) = LOD_TGT.BSA_GRP_CD
AND    POL.PORT_CD(+) = LOD_TGT.POL_CD
AND    POD.BSE_YR(+) = LOD_TGT.BSE_YR
AND    POD.BSE_QTR_CD(+) = LOD_TGT.BSE_QTR_CD
AND    POD.GLINE_VER_NO(+) = @[glineVerNo]
AND    POD.TRD_CD(+) = LOD_TGT.TRD_CD
AND    POD.DIR_CD(+) = LOD_TGT.DIR_CD
AND    POD.RLANE_CD(+) = LOD_TGT.RLANE_CD
AND    POD.SPRT_GRP_CD(+) = LOD_TGT.SPRT_GRP_CD
AND    POD.BSA_GRP_CD(+) = LOD_TGT.BSA_GRP_CD
AND    POD.PORT_CD(+) = LOD_TGT.POD_CD
AND    LOD_QTY = 0
ORDER BY BSE_MON, SUB_TRD_CD,DECODE(LOD_TGT.RLANE_CD,'RBCCO','ZZ',SUBSTR(LOD_TGT.RLANE_CD,-2)), LOD_TGT.RLANE_CD, LOD_TGT.SPRT_GRP_CD,
         LOD_TGT.BSA_GRP_CD, POL_SEQ, POL_CD, POD_SEQ, POD_CD, SLS_RGN_OFC_CD			]]></sql>
			<params>
				<param name="inclPortFlag" type="12" value="" out="N"/>
				<param name="mQtaStepCd" type="12" value="" out="N"/>
				<param name="year" type="12" value="" out="N"/>
				<param name="bse_qtr_cd" type="12" value="" out="N"/>
				<param name="trade" type="12" value="" out="N"/>
				<param name="bound" type="12" value="" out="N"/>
				<param name="mQtaVerNo" type="12" value="" out="N"/>
				<param name="glineVerNo" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
