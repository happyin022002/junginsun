<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOsearchXterCustRSQL">
			<desc><![CDATA[searchXterCust]]></desc>
			<sql><![CDATA[
SELECT MST.XTER_RQST_NO
		, MST.XTER_SNDR_ID
        , MST.XTER_RQST_SEQ
        , SH.CNT_CD SH_CUST_CNT_CD
        , SH.CUST_SEQ SH_CUST_SEQ
        , SH.CNT_CD||SH.CUST_SEQ SH_CNT_SEQ
        , TRIM(REPLACE(SH.CUST_NM,'@@',CHR(10))) SH_CUST_NM
		, mdm_sh.CUST_LGL_ENG_NM SH_CUST_LGL_ENG_NM
        , TRIM(REPLACE(SH.CUST_ADDR,'@@',CHR(10))) SH_CUST_ADDR
        , SH.LOC_NM SH_CUST_CTY_NM, SH.STE_CD SH_CUST_STE_CD
        , SH.LOC_CTNT SH_CSTMS_DECL_CNT_CD, SH.PST_CTNT SH_CUST_ZIP_ID
		, NVL(SH.EORI_NO, '') SH_EORI_NO
		, NVL(SH.EUR_CSTMS_PST_ID, '') SH_EUR_CSTMS_PST_ID
		, NVL(SH.EUR_CSTMS_ST_NM, '') SH_EUR_CSTMS_ST_NM
        , CN.CNT_CD CN_CUST_CNT_CD
        , CN.CUST_SEQ CN_CUST_SEQ
        , CN.CNT_CD||cn.CUST_SEQ CN_CNT_SEQ
        , TRIM(REPLACE(CN.CUST_NM,'@@',CHR(10))) CN_CUST_NM
		, mdm_cn.CUST_LGL_ENG_NM CN_CUST_LGL_ENG_NM
        , TRIM(REPLACE(CN.CUST_ADDR,'@@',CHR(10))) CN_CUST_ADDR
        , CN.LOC_NM  CN_CUST_CTY_NM, CN.STE_CD  CN_CUST_STE_CD
        , CN.CNTC_FAX_NO CN_CUST_FAX_NO
        , CN.CNTC_EML CN_CUST_EML
        , CN.LOC_CTNT  CN_CSTMS_DECL_CNT_CD, CN.PST_CTNT  CN_CUST_ZIP_ID
		, NVL(CN.EORI_NO, '') CN_EORI_NO
		, NVL(CN.EUR_CSTMS_PST_ID, '') CN_EUR_CSTMS_PST_ID
		, NVL(CN.EUR_CSTMS_ST_NM, '') CN_EUR_CSTMS_ST_NM
        , NF.CNT_CD NF_CUST_CNT_CD
        , NF.CUST_SEQ NF_CUST_SEQ
        , NF.CNT_CD||NF.CUST_SEQ NF_CNT_SEQ
        , TRIM(REPLACE(NF.CUST_NM,'@@',CHR(10))) NF_CUST_NM
		, mdm_nf.CUST_LGL_ENG_NM NF_CUST_LGL_ENG_NM
        , TRIM(REPLACE(NF.CUST_ADDR,'@@',CHR(10))) NF_CUST_ADDR
        , NF.loc_nm  NF_CUST_CTY_NM, NF.STE_CD  NF_CUST_STE_CD
        , NF.loc_ctnt  NF_CSTMS_DECL_CNT_CD, NF.PST_CTNT  NF_CUST_ZIP_ID
        , NF.CNTC_FAX_NO NF_CUST_FAX_NO
        , NF.CNTC_EML NF_CUST_EML
		, NVL(NF.EORI_NO, ' ') NF_EORI_NO
		, NVL(NF.EUR_CSTMS_PST_ID, ' ') NF_EUR_CSTMS_PST_ID
		, NVL(NF.EUR_CSTMS_ST_NM, ' ') NF_EUR_CSTMS_ST_NM
        , FF.CNT_CD FF_CUST_CNT_CD
        , FF.CUST_SEQ FF_CUST_SEQ
        , FF.CNT_CD||ff.CUST_SEQ FF_CNT_SEQ
        , TRIM(REPLACE(
       			CASE WHEN LENGTH(FF.CUST_NM) = 0 AND LENGTH(FF.CUST_ADDR||FF.CNTC_NM||FF.CNTC_PHN_NO_CTNT||FF.CNTC_FAX_NO||FF.CNTC_EML) = 0 THEN ''
            		 WHEN LENGTH(FF.CUST_NM) = 0 AND LENGTH(FF.CUST_ADDR||FF.CNTC_NM||FF.CNTC_PHN_NO_CTNT||FF.CNTC_FAX_NO||FF.CNTC_EML) > 0 THEN CHR(10)||CHR(10)||FF.CUST_ADDR
            		 WHEN LENGTH(FF.CUST_NM) < 36 AND INSTR(FF.CUST_NM,CHR(10)) = 0 THEN FF.CUST_NM||CHR(10)||CHR(10)||FF.CUST_ADDR
       			ELSE FF.CUST_NM||CHR(10)||FF.CUST_ADDR
       			 END,'@@',CHR(10))) FF_CUST_NM
		, mdm_ff.CUST_LGL_ENG_NM FF_CUST_LGL_ENG_NM
        , TRIM(REPLACE(FF.CUST_ADDR,'@@',CHR(10))) FF_CUST_ADDR
        , AN.CNT_CD AN_CUST_CNT_CD
        , AN.CUST_SEQ AN_CUST_SEQ
        , AN.CNT_CD||an.CUST_SEQ AN_CNT_SEQ
        , TRIM(REPLACE(
       			CASE WHEN LENGTH(AN.CUST_NM) = 0 AND LENGTH(AN.CUST_ADDR||AN.CNTC_NM||AN.CNTC_PHN_NO_CTNT||AN.CNTC_FAX_NO||AN.CNTC_EML) = 0 THEN ''
            		 WHEN LENGTH(AN.CUST_NM) = 0 AND LENGTH(AN.CUST_ADDR||AN.CNTC_NM||AN.CNTC_PHN_NO_CTNT||AN.CNTC_FAX_NO||AN.CNTC_EML) > 0 THEN CHR(10)||CHR(10)||AN.CUST_ADDR
            		 WHEN LENGTH(AN.CUST_NM) < 36 AND INSTR(AN.CUST_NM,CHR(10)) = 0 THEN AN.CUST_NM||CHR(10)||CHR(10)||AN.CUST_ADDR
       			ELSE AN.CUST_NM||CHR(10)||AN.CUST_ADDR
       			 END,'@@',CHR(10))) AN_CUST_NM
		, MDM_AN.CUST_LGL_ENG_NM AN_CUST_LGL_ENG_NM
        , TRIM(REPLACE(AN.CUST_ADDR,'@@',CHR(10))) AN_CUST_ADDR
        , ex.CNT_CD EX_CUST_CNT_CD
        , ex.CUST_SEQ EX_CUST_SEQ
        , ex.CUST_NM EX_CUST_NM
        , BR.BRO_NO BR_CUST_CNT_CD
        , TRIM(REPLACE(BR.CUST_NM,'@@',CHR(10))) BR_CUST_NM
        , TRIM(REPLACE(BR.CUST_ADDR,'@@',CHR(10))) BR_CUST_ADDR
        , (SELECT DECODE(INDIV_CORP_DIV_CD, 'I', 'S', 'C') FROM MDM_CUSTOMER CUST WHERE CUST.CUST_CNT_CD = SH.CNT_CD AND CUST.CUST_SEQ = SH.CUST_SEQ) SH_KR_CSTMS_CUST_TP_CD
	    , MST.KR_CSTMS_CUST_TP_CD AS SH_KR_CSTMS_CUST_TP_CD2
        , CASE WHEN INSTR(UPPER(CN.CUST_NM), 'ORDER') > 0 THEN 'Y' ELSE (SELECT NVL(CUST_TO_ORD_FLG,'N') FROM BKG_BOOKING WHERE BKG_NO = @[bkg_no]) END CN_CUST_TO_ORD_FLG
        , (SELECT DECODE(CNTR_CUST_TP_CD, 'B', 'S', 'C') FROM MDM_CUSTOMER WHERE CUST_CNT_CD = SH.CNT_CD AND CUST_SEQ = SH.CUST_SEQ) RVIS_CNTR_CUST_TP_CD
		, CBR.CUST_NM CBR_CUST_NM
		, CBR.FAX_NO1 CBR_FAX_NO1
		, CBR.FAX_NO2 CBR_FAX_NO2
		, CBR.FAX_NO3 CBR_FAX_NO3
		, MST.ORG_CNT_NM
FROM BKG_XTER_RQST_MST MST
        , BKG_XTER_CUST SH
        , BKG_XTER_CUST CN
        , BKG_XTER_CUST NF
        , BKG_XTER_CUST FF
        , BKG_XTER_CUST AN
        , BKG_XTER_CUST EX
        , BKG_XTER_CUST BR
        , BKG_XTER_CUST CBR
        , MDM_CUSTOMER MDM_SH
        , MDM_CUSTOMER MDM_CN
        , MDM_CUSTOMER MDM_NF
        , MDM_CUSTOMER MDM_FF
        , MDM_CUSTOMER MDM_AN
WHERE MST.XTER_RQST_NO  = SH.XTER_RQST_NO(+)
  AND MST.XTER_RQST_SEQ = SH.XTER_RQST_SEQ(+)
  AND MST.XTER_SNDR_ID  = SH.XTER_SNDR_ID(+)
  AND 'S'               = SH.XTER_CUST_TP_CD(+)
  AND MST.XTER_RQST_NO  = CN.XTER_RQST_NO(+)
  AND MST.XTER_RQST_SEQ = CN.XTER_RQST_SEQ(+)
  AND MST.XTER_SNDR_ID  = CN.XTER_SNDR_ID(+)
  AND 'C'               = CN.XTER_CUST_TP_CD(+)
  AND MST.XTER_RQST_NO  = NF.XTER_RQST_NO(+)
  AND MST.XTER_RQST_SEQ = NF.XTER_RQST_SEQ(+)
  AND MST.XTER_SNDR_ID  = NF.XTER_SNDR_ID(+)
  AND 'N'               = NF.XTER_CUST_TP_CD(+)
  AND MST.XTER_RQST_NO  = FF.XTER_RQST_NO(+)
  AND MST.XTER_RQST_SEQ = FF.XTER_RQST_SEQ(+)
  AND MST.XTER_SNDR_ID  = FF.XTER_SNDR_ID(+)
  AND 'F'               = FF.XTER_CUST_TP_CD(+)
  AND MST.XTER_RQST_NO  = AN.XTER_RQST_NO(+)
  AND MST.XTER_RQST_SEQ = AN.XTER_RQST_SEQ(+)
  AND MST.XTER_SNDR_ID  = AN.XTER_SNDR_ID(+)
  AND 'A'               = AN.XTER_CUST_TP_CD(+)
  AND MST.XTER_RQST_NO  = EX.XTER_RQST_NO(+)
  AND MST.XTER_RQST_SEQ = EX.XTER_RQST_SEQ(+)
  AND MST.XTER_SNDR_ID  = EX.XTER_SNDR_ID(+)
  AND 'E'               = EX.XTER_CUST_TP_CD(+)
  AND MST.XTER_RQST_NO  = CBR.XTER_RQST_NO(+)
  AND MST.XTER_RQST_SEQ = CBR.XTER_RQST_SEQ(+)
  AND MST.XTER_SNDR_ID  = CBR.XTER_SNDR_ID(+)
  AND 'J'               = CBR.XTER_CUST_TP_CD(+)
  AND MST.XTER_RQST_NO  = BR.XTER_RQST_NO(+)
  AND MST.XTER_RQST_SEQ = BR.XTER_RQST_SEQ(+)
  AND MST.XTER_SNDR_ID  = BR.XTER_SNDR_ID(+)
  AND 'B'               = BR.XTER_CUST_TP_CD(+)
  AND SH.CNT_CD       = MDM_SH.CUST_CNT_CD(+)
  AND SH.CUST_SEQ     = MDM_SH.CUST_SEQ(+)
  AND CN.CNT_CD       = MDM_CN.CUST_CNT_CD(+)
  AND CN.CUST_SEQ     = MDM_CN.CUST_SEQ(+)
  AND NF.CNT_CD       = MDM_NF.CUST_CNT_CD(+)
  AND NF.CUST_SEQ     = MDM_NF.CUST_SEQ(+)
  AND FF.CNT_CD       = MDM_FF.CUST_CNT_CD(+)
  AND FF.CUST_SEQ     = MDM_FF.CUST_SEQ(+)
  AND AN.CNT_CD       = MDM_AN.CUST_CNT_CD(+)
  AND AN.CUST_SEQ     = MDM_AN.CUST_SEQ(+)
  AND MST.XTER_RQST_NO  = @[rqst_no]
  AND MST.XTER_RQST_SEQ = @[rqst_seq]
  AND MST.XTER_SNDR_ID  = @[sender_id]			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="SEL003766200" out="N"/>
				<param name="rqst_no" type="12" value="SEL003766200" out="N"/>
				<param name="rqst_seq" type="12" value="1" out="N"/>
				<param name="sender_id" type="12" value="WEB" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
