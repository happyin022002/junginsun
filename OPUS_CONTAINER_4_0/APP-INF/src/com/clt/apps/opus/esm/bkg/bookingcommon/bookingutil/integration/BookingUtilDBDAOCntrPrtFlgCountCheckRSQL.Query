<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingUtilDBDAOCntrPrtFlgCountCheckRSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
SELECT B.BKG_NO
FROM   BKG_CONTAINER A, BKG_BOOKING B
WHERE  A.BKG_NO = B.BKG_NO
AND    A.CNTR_NO = @[cntr_no]
AND    B.BKG_NO <> @[bkg_no]
AND    (B.VSL_CD,B.SKD_VOY_NO,B.SKD_DIR_CD) = (SELECT BB.VSL_CD,BB.SKD_VOY_NO,BB.SKD_DIR_CD FROM BKG_BOOKING BB WHERE BB.BKG_NO = @[bkg_no])
AND    B.BKG_CGO_TP_CD = (SELECT BB.bkg_cgo_tp_cd FROM BKG_BOOKING BB WHERE BB.BKG_NO = @[bkg_no])
AND    (B.BKG_STS_CD = 'W' OR B.BKG_STS_CD = 'F')
AND EXISTS ( SELECT 'X'
                 FROM BKG_BOOKING BK, BKG_CONTAINER BC
                 WHERE 1=1                                    
                   AND BC.CNTR_PRT_FLG ='Y'
                   AND BK.BKG_NO = B.BKG_NO
                   AND BC.CNTR_NO = @[cntr_no]
                   AND BK.VSL_CD = B.VSL_CD
                   AND BK.SKD_VOY_NO = B.SKD_VOY_NO
                   AND BK.SKD_DIR_CD = B.SKD_DIR_CD
                   AND ROWNUM = 1 
                )			]]></sql>
			<params>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
