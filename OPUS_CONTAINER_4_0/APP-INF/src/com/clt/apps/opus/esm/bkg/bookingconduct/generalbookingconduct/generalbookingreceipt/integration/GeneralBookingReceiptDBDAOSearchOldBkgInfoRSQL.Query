<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOSearchOldBkgInfoRSQL">
			<desc><![CDATA[수정전 Booking 정보 조회]]></desc>
			<sql><![CDATA[
select 
        RCV_TERM_CD, 
        DE_TERM_CD, 
        BKG_CGO_TP_CD,
        OB_SLS_OFC_CD,
		SLAN_CD,
        VSL_CD||SKD_VOY_NO||SKD_DIR_CD BKG_TRUNK_VVD,
        (
            SELECT 
                    FRIST_VVD
            FROM    (
                        SELECT  VSL_CD||SKD_VOY_NO||SKD_DIR_CD FRIST_VVD
#if (${ca_flg}== 'Y')
                        FROM    BKG_VVD_HIS
#else
                        FROM    BKG_VVD
#end
                        WHERE   BKG_NO = @[bkg_no]
#if (${ca_flg}== 'Y')
						AND   CORR_NO = 'TMP0000001'
#end
                        ORDER BY VSL_PRE_PST_CD,VSL_SEQ 
                    )
            WHERE     ROWNUM = 1 
        ) FIRST_VVD,
        POR_CD, 
        POR_NOD_CD, 
        POL_CD, 
        POL_NOD_CD,
        POD_CD, 
        POD_NOD_CD, 
        DEL_CD, 
        DEL_NOD_CD, 
        PRE_RLY_PORT_CD, 
        PST_RLY_PORT_CD,
        MTY_PKUP_YD_CD, 
        FULL_RTN_YD_CD,
		PCTL_NO,
		BKG_CTRL_PTY_CUST_CNT_CD,
		BKG_CTRL_PTY_CUST_SEQ
#if (${ca_flg}== 'Y')
FROM    BKG_BKG_HIS
#else
FROM    BKG_BOOKING
#end
WHERE   BKG_NO = @[bkg_no]
#if (${ca_flg}== 'Y')
AND   CORR_NO = 'TMP0000001'
#end			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
