<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOmanageVgmInfoFmCodecoCSQL">
			<desc><![CDATA[Save VGM INFO from CODECO]]></desc>
			<sql><![CDATA[
INSERT INTO BKG_XTER_VGM 
    (BKG_NO, 
     CNTR_NO, 
     USR_ID, 
     VGM_SEQ, 
     ACT_TP_CD, 
     XTER_VGM_RQST_CD, 
     VGM_WGT, 
     WGT_UT_CD, 
     ESIG_CO_NM, 
     CUST_EML, 
     VGM_CRE_GDT, 
     VGM_CRE_LOCL_DT, 
     CRE_USR_ID, 
     CRE_DT, 
     UPD_USR_ID, 
     UPD_DT, 
     IF_FLG, 
     UPLD_FLG, 
     WGT_TP_CD, 
     REF_ID,
	 VGM_DT_TP_CD,
	 VGM_DOC_TP_CD,
	 VGM_CUST_CNTC_TP_CD
     )
VALUES(
     @[bkg_no],
     @[cntr_no],
     @[ctm_edi_tp],
     NVL((SELECT MAX(VGM_SEQ)
                  FROM BKG_XTER_VGM
                 WHERE BKG_NO = @[bkg_no]
                   AND CNTR_NO = @[cntr_no]
                   AND USR_ID = @[ctm_edi_tp]), 0)+1,
	 'I',
     'EDI',
     @[vgm_wgt],
     @[vgm_wgt_ut_cd],
     DECODE(@[vgm_cust_cntc_tp_cd],'RP',@[vgm_cust_cntc_nm],''),
     @[vgm_cust_eml],
     GLOBALDATE_PKG.TIME_CONV_FNC(COM_CONSTANTMGR_PKG.COM_GETBASELOCATIONCODE_FNC(),TO_DATE(@[vgm_rcv_dt],'YYYYMMDD HH24:MI:SS'),'GMT'),
     GLOBALDATE_PKG.TIME_CONV_FNC(COM_CONSTANTMGR_PKG.COM_GETBASELOCATIONCODE_FNC(),TO_DATE(@[vgm_rcv_dt],'YYYYMMDD HH24:MI:SS'),(SELECT POL_CD FROM BKG_BOOKING WHERE BKG_NO = @[bkg_no])),
     @[ctm_edi_tp],
     SYSDATE,
     @[ctm_edi_tp],
     SYSDATE,
     'N',
     'N',
     'V',
     @[vgm_doc_id_no],
	 @[vgm_dt_tp_cd],
	 @[vgm_doc_tp_cd],
	 @[vgm_cust_cntc_tp_cd]
     )			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="ctm_edi_tp" type="12" value="" out="N"/>
				<param name="vgm_wgt" type="12" value="" out="N"/>
				<param name="vgm_wgt_ut_cd" type="12" value="" out="N"/>
				<param name="vgm_cust_cntc_tp_cd" type="12" value="" out="N"/>
				<param name="vgm_cust_cntc_nm" type="12" value="" out="N"/>
				<param name="vgm_cust_eml" type="12" value="" out="N"/>
				<param name="vgm_rcv_dt" type="12" value="" out="N"/>
				<param name="vgm_doc_id_no" type="12" value="" out="N"/>
				<param name="vgm_dt_tp_cd" type="12" value="" out="N"/>
				<param name="vgm_doc_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
