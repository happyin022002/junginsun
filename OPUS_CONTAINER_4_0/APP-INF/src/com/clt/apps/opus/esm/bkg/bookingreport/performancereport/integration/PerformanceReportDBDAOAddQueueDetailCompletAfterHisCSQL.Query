<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PerformanceReportDBDAOAddQueueDetailCompletAfterHisCSQL">
			<desc><![CDATA[create]]></desc>
			<sql><![CDATA[
INSERT INTO BKG_SR_HIS
    (       SR_KND_CD,
            SR_NO,
            BKG_NO,
            SR_HIS_SEQ,
            SR_STS_CD,
            SR_PROC_STS_CD,
            ATND_USR_ID,
            ST_DT,
            FNT_OFC_RTN_CD,
            CRE_USR_ID,
            CRE_DT,
            UPD_USR_ID,
            UPD_DT,
		    DIFF_RMK
    )
    VALUES
    (@[src_cd],
     @[sr_no],
     @[bkg_no],
     ( SELECT NVL(MAX(SR_HIS_SEQ) + 1,0)
        FROM BKG_SR_HIS
        WHERE SR_KND_CD = @[src_cd] /* 0421의 SRC_CD*/
          AND  SR_NO    = @[sr_no]
          AND  BKG_NO   = @[bkg_no]                
     ) ,
     @[wrk_grp_cd], /*WORK GROUP 코드*/
     'N', /*상수 */
     @[usr_id],
     TO_DATE(@[up_dt],'YYYYMMDD HH24MI'),
     (SELECT RTN_FM_STS_CD
        FROM BKG_SR_CRNT_RQST X
        WHERE SR_KND_CD   = @[src_cd] /* 0421의 SRC_CD*/
         AND SR_NO        = @[sr_no]    
         AND BKG_NO       = @[bkg_no]
         AND SR_AMD_TP_CD = @[sr_kind]/* 0421의 SR_KND_CD*/ 
         AND SR_AMD_SEQ = (SELECT NVL(MAX(SR_AMD_SEQ),0)
                             FROM  BKG_SR_CRNT_RQST
                            WHERE SR_KND_CD = X.SR_KND_CD
                              AND SR_AMD_TP_CD = X.SR_AMD_TP_CD
                              AND BKG_NO = X.BKG_NO
                              AND SR_NO = X.SR_NO
                           )
       ),
      @[usr_id],
      SYSDATE,
      @[usr_id],
      SYSDATE,
      @[message]
     )			]]></sql>
			<params>
				<param name="src_cd" type="12" value="" out="N"/>
				<param name="sr_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="wrk_grp_cd" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="up_dt" type="12" value="" out="N"/>
				<param name="sr_kind" type="12" value="" out="N"/>
				<param name="message" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
