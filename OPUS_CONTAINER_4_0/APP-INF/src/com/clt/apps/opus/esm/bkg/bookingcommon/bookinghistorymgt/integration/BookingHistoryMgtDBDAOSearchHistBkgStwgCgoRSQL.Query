<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingHistoryMgtDBDAOSearchHistBkgStwgCgoRSQL">
			<desc><![CDATA[BookingHistoryMgtDBDAOSearchHistBkgStwgCgoRSQL]]></desc>
			<sql><![CDATA[
WITH OLD AS 
(SELECT @[bkg_no] BKG_NO
, @[stwg_seq] STWG_SEQ
, @[stwg_rmk] STWG_RMK
, @[rqst_dt] RQST_DT
, @[rqst_gdt] RQST_GDT
, @[rqst_usr_id] RQST_USR_ID
, @[aply_no] APLY_NO
, @[spcl_cgo_apro_cd] SPCL_CGO_APRO_CD
, @[stwg_cd] STWG_CD
FROM DUAL)
SELECT HIS_CATE_NM
     , PRE_CTNT
     , CRNT_CTNT
  FROM 
    (
        SELECT 'Stowage' HIS_CATE_NM
                , OLD.STWG_CD||
                  '/'||OLD.STWG_RMK
				  PRE_CTNT
                , NOW.STWG_CD||
                  '/'||NOW.STWG_RMK
                  CRNT_CTNT
          FROM OLD, 
#if (${ca_flg} == 'Y')
               BKG_STWG_CGO_HIS NOW
         WHERE NOW.BKG_NO     (+) = OLD.BKG_NO
	       AND NOW.CORR_NO    (+) = 'TMP0000001' 
#else
               BKG_STWG_CGO NOW
         WHERE NOW.BKG_NO     (+) = OLD.BKG_NO
#end

           AND NOW.STWG_SEQ(+) = OLD.STWG_SEQ
    )    
 WHERE NVL(TRIM(PRE_CTNT), ' ') <> NVL(TRIM(CRNT_CTNT), ' ')			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="stwg_seq" type="12" value="" out="N"/>
				<param name="stwg_rmk" type="12" value="" out="N"/>
				<param name="rqst_dt" type="12" value="" out="N"/>
				<param name="rqst_gdt" type="12" value="" out="N"/>
				<param name="rqst_usr_id" type="12" value="" out="N"/>
				<param name="aply_no" type="12" value="" out="N"/>
				<param name="spcl_cgo_apro_cd" type="12" value="" out="N"/>
				<param name="stwg_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
