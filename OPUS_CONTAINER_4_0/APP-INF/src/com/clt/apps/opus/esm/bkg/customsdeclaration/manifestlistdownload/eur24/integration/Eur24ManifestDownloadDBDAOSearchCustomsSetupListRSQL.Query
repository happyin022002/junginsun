<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="Eur24ManifestDownloadDBDAOSearchCustomsSetupListRSQL">
			<desc><![CDATA[Eur24ManifestDownloadDBDAOSearchCustomsSetupListRSQL]]></desc>
			<sql><![CDATA[
/* CustomsSetupVO */
SELECT PORT_CD
     , '' AS PORTS_CD
     ,TML_CD
     ,''  AS TMLS_CD
     ,Y.CNT_CD
     ,N1ST_EUR_PORT_FLG
     ,EUR_CSTMS_OFC_ID AS CUSTOMS_CD
     ,EUR_CSTMS_OFC_NM AS CUSTOMS_NM
	 ,DECODE(EXS_EDI_SVC_FLG,'Y',1)       AS SVC_EXS_YN
     ,DECODE(ENS_EDI_SVC_FLG,'Y',1)       AS SVC_ENS_YN
     ,DECODE(AN_EDI_SVC_FLG,'Y',1)        AS SVC_AN_YN
     ,DECODE(DVS_RQST_EDI_SVC_FLG,'Y',1)  AS SVC_DR_YN
     ,CNTC_NM               AS CT_NAME
     ,CNTC_PSN_NM           AS CT_POSITION
     ,CNTC_EML              AS CT_EMAIL
     ,CNTC_PHN_NO           AS CT_TEL 
     ,CNTC_FAX_NO           AS CT_FAX

FROM   BKG_CSTMS_EUR_CD_STUP X
     , MDM_LOCATION Y
WHERE  X.PORT_CD = Y.LOC_CD(+)

    #if (${p_cnt_cd} != '') 
        AND Y.CNT_CD = @[p_cnt_cd]
    #end  
/* GRID  조회시 All로 들어오고 저장시는 ALL로 들어온다. ALL은 저장되어야 하므로 중복을 허용해서 안된다. 주의해서 수정한다. */
    #if (${p_port} != '' && ${p_port} != 'All') 
        AND X.PORT_CD = @[p_port]
    #end  

    #if (${p_tml}!= ''  && ${p_tml} != 'All') 
        AND X.TML_CD = @[p_tml]
    #end  
  
    #if (${p_cstms_cd} != '') 
        AND X.EUR_CSTMS_OFC_ID LIKE @[p_cstms_cd]||'%'
    #end			]]></sql>
			<params>
				<param name="p_cnt_cd" type="12" value="" out="N"/>
				<param name="p_port" type="12" value="" out="N"/>
				<param name="p_tml" type="12" value="" out="N"/>
				<param name="p_cstms_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
