<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOaddBkgXterQtyByXmlCSQL">
			<desc><![CDATA[EBookingReceiptDBDAOaddBkgXterQtyByXmlCSQL]]></desc>
			<sql><![CDATA[
INSERT INTO BKG_XTER_QTY BXQ (XTER_SNDR_ID, XTER_RQST_NO, XTER_RQST_SEQ, CNTR_TPSZ_CD, CNTR_QTY, SOC_QTY, CRE_USR_ID, CRE_DT, UPD_USR_ID, UPD_DT)
SELECT BXC.XTER_SNDR_ID
     , BXC.XTER_RQST_NO, BXC.XTER_RQST_SEQ
     , NVL(MCPS.CNTR_TPSZ_CD,BXC.CNTR_TPSZ_CD)
     , COUNT(*)
     , SUM(DECODE(BXC.SOC_FLG,'Y',1,0))
     , 'SYSTEM'
     , SYSDATE
     , 'SYSTEM'
     , SYSDATE
  FROM BKG_XTER_CNTR BXC
     , MDM_CNTR_TP_SZ MCPS
 WHERE BXC.XTER_SNDR_ID = @[sender_id]
   	AND BXC.XTER_RQST_NO = @[rqst_no]
   	AND BXC.XTER_RQST_SEQ = @[rqst_seq]
   	AND DECODE(BXC.CNTR_TPSZ_CD,'40RF','40RQ',BXC.CNTR_TPSZ_CD) = MCPS.MODI_CNTR_TPSZ_CD(+)
	AND MCPS.DELT_FLG(+) = 'N'
	AND MCPS.CNTR_TPSZ_CD(+) <> 'R8'
 GROUP BY BXC.XTER_SNDR_ID, BXC.XTER_RQST_NO, BXC.XTER_RQST_SEQ, NVL(MCPS.CNTR_TPSZ_CD,BXC.CNTR_TPSZ_CD)			]]></sql>
			<params>
				<param name="sender_id" type="12" value="" out="N"/>
				<param name="rqst_no" type="12" value="" out="N"/>
				<param name="rqst_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
