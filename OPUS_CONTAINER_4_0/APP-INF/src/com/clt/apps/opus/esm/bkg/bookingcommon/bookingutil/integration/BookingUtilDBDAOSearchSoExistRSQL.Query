<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingUtilDBDAOSearchSoExistRSQL">
			<desc><![CDATA[Check S/O is created or not]]></desc>
			<sql><![CDATA[
SELECT	TRSP_BND_CD
		,'SVC' FLAG
FROM TRS_TRSP_SVC_ORD
WHERE 0=0
AND BKG_NO = @[bkg_no]
AND DELT_FLG = 'N'
AND NVL(TRSP_FRST_FLG, 'X') <> 'Y'
AND TRSP_BND_CD = DECODE(@[bound_cd], 'B', TRSP_BND_CD, @[bound_cd])
AND TRSP_SO_TP_CD = 'Y'
#if(${nod_cd} != '')
	#if(${bound_cd} == 'O')
		AND	TO_NOD_CD = @[nod_cd]
	#elseif(${bound_cd} == 'I')
		AND FM_NOD_CD = @[nod_cd]
	#end
#end

UNION ALL 

SELECT	TRSP_BND_CD
		,'RAIL' FLAG
FROM TRS_TRSP_RAIL_BIL_ORD
WHERE 0=0
AND BKG_NO = @[bkg_no]
AND DELT_FLG = 'N'
AND NVL(TRSP_FRST_FLG, 'X') <> 'Y'
AND TRSP_BND_CD = DECODE(@[bound_cd], 'B', TRSP_BND_CD, @[bound_cd])
AND CGO_TP_CD = 'F'
#if(${nod_cd} != '')
	#if(${bound_cd} == 'O')
		AND	TO_NOD_CD = @[nod_cd]
	#elseif(${bound_cd} == 'I')
		AND FM_NOD_CD = @[nod_cd]
	#end
#end			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="bound_cd" type="12" value="" out="N"/>
				<param name="nod_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
