<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ManilaManifestListDownloadDBDAOsearchPkgDescRSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
SELECT	REG_NUMBER4,
		BL_NO3,
		PACKAGE_TYPE,
		PCK_QTY,
		DESC_GOOD,
		CASE WHEN LENGTH(desc_good) > 34 THEN '1'
		     WHEN LENGTH(NVL(desc_good,0)) < 35 THEN '0' 
		END MARK,
		ROWNUM AS SEQ,
		''  AS SEQ2
FROM (
		SELECT @[reg_no] reg_number4,
		       COM_ConstantMgr_PKG.COM_getScacCode_FNC()||BKG.BL_NO bl_no3,
		       NVL(DOC.PCK_TP_CD,' ') package_type,
		       NVL(DOC.PCK_QTY,0) pck_qty,
		       DECODE(DOC.PCK_CMDT_DESC,  NULL, '', DOC.PCK_CMDT_DESC ||CHR(10)) ||
		       DECODE(DOC.CNTR_CMDT_DESC, NULL, '', DOC.CNTR_CMDT_DESC||CHR(10)) ||
		       DECODE(DBMS_LOB.SUBSTR( BMD.CMDT_DESC,  2000, 1 ), NULL, '', DBMS_LOB.SUBSTR( BMD.CMDT_DESC,  2000, 1 )) ||
		       DECODE(BH.BL_GDS_DESC, NULL, '', CHR(10)||BH.BL_GDS_DESC) desc_good
		FROM  BKG_BOOKING BKG, 
		      BKG_BL_MK_DESC BMD, 
		      BKG_VVD BV, 
		      BKG_HBL BH, 
		      BKG_BL_DOC DOC
		WHERE BKG.BKG_NO        = BMD.BKG_NO
		  AND BKG.BKG_NO        = BV.BKG_NO 
		  AND BKG.BKG_NO        = BH.BKG_NO (+)
		  AND BKG.BKG_NO        = DOC.BKG_NO 
		  AND BV.VSL_CD         = @[vsl_cd]
		  AND BV.SKD_VOY_NO     = @[skd_voy_no]
		  AND BV.SKD_DIR_CD     = @[skd_dir_cd]
		#if (${pol_cd}!= '') 
		  AND BV.POL_CD        LIKE @[pol_cd] 
		#end
		#if (${pod_cd}!= '') 
		  AND BV.POD_CD        LIKE @[pod_cd] 
		#end
		  AND BKG.BKG_STS_CD IN ('F','W') 
		  AND BKG.BL_NO > ' '
)			]]></sql>
			<params>
				<param name="reg_no" type="12" value="" out="N"/>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
