<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="MonthlyQuotaReleaseDBDAOSearchMonthlyQuotaRelease0052ListSub01RSQL">
			<desc><![CDATA[Confirmation and Distribution Sub]]></desc>
			<sql><![CDATA[
#if (${is_new_version}=='false') 
			SELECT 
			        MQTA_RLSE_VER_NO 
			        ,TRD_CD 
			        ,DIR_CD 
			        ,SAQ_TGT_GRP_CD 
			        ,MQTA_VER_NO 
			        ,GLINE_VER_NO 
			FROM    SAQ_MON_QTA_RLSE_TRD 
			WHERE   MQTA_RLSE_VER_NO = @[mqta_rlse_ver_no] 
	#else 
			SELECT  @[mqta_rlse_ver_no]  AS MQTA_RLSE_VER_NO 
	 		        ,A.SAQ_TGT_GRP_CD 
			        ,A.TRD_CD 
			        ,A.DIR_CD 
			        ,B.MQTA_VER_NO 
			        ,B.GLINE_VER_NO 
			FROM     (
                         SELECT 
                            DISTINCT SAQ_TGT_GRP_CD 
			                         ,TRD_CD 
			                         ,DIR_CD 
			             FROM   SAQ_TGT_GRP_TRD
                      ) A  
		        LEFT JOIN SAQ_MON_QTA_STEP_VER B  
			           ON B.TRD_CD = A.TRD_CD 
					  AND B.DIR_CD = A.DIR_CD 
					  AND B.MQTA_STEP_CD = '01' 
					  AND B.BSE_YR = @[year]  
					  AND B.BSE_QTR_CD = @[quarter] 
					  AND B.SAQ_STS_CD = 'QF' 
			WHERE    1 = 1 
			ORDER BY A.SAQ_TGT_GRP_CD, 
                     A.TRD_CD, 
                     A.DIR_CD 
    #end			]]></sql>
			<params>
				<param name="mqta_rlse_ver_no" type="12" value="" out="N"/>
				<param name="year" type="12" value="" out="N"/>
				<param name="quarter" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
