<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpecialCargoReceiptDBDAOBkgContainerRSQL">
			<desc><![CDATA[BkgContainer_combo]]></desc>
			<sql><![CDATA[
#if (${ca_flg}== 'Y')

SELECT
CNTR_NO val
, 	CNTR_NO name
, 	CNTR_TPSZ_CD
, 	CNTR_VOL_QTY
, 	RCV_TERM_CD
, 	DE_TERM_CD
FROM BKG_CNTR_HIS
WHERE	BKG_NO = @[bkg_no]
and CORR_NO = 'TMP0000001'

#else
SELECT CNTR_NO val
      ,CNTR_NO name
      ,CNTR_TPSZ_CD
      ,CNTR_VOL_QTY
      ,RCV_TERM_CD
      ,DE_TERM_CD
  FROM BKG_CONTAINER A1
 WHERE BKG_NO = @[bkg_no]
   AND EXISTS (SELECT 'X'
                 FROM BKG_BOOKING A2
                     ,BKG_QTY_DTL A3
                WHERE A1.BKG_NO = A2.BKG_NO
                  AND A2.BKG_NO = A3.BKG_NO
                  AND CASE WHEN A2.FLEX_HGT_FLG = 'Y' AND A1.CNTR_TPSZ_CD = 'D5' THEN 'D4' ELSE A1.CNTR_TPSZ_CD END 
                      = CASE WHEN A2.FLEX_HGT_FLG = 'Y' AND A3.CNTR_TPSZ_CD = 'D5' THEN 'D4' ELSE A3.CNTR_TPSZ_CD END 
#if (${spcl_tp} == 'DG')
                  AND A2.DCGO_FLG = 'Y'
#end
#if (${spcl_tp} == 'AWK')
                  AND A2.AWK_CGO_FLG = 'Y'
#end
#if (${spcl_tp} == 'BB')
                  AND A2.BB_CGO_FLG = 'Y'
#end
#if (${spcl_tp} == 'RF')
                  AND A2.RC_FLG = 'Y'
#end
              )
#end			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
