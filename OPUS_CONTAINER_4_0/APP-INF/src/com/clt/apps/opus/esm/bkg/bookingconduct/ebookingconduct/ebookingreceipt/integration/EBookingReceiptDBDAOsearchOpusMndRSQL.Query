<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOsearchOpusMndRSQL">
			<desc><![CDATA[searchOpusMnd]]></desc>
			<sql><![CDATA[
SELECT MKDESC.MK_DESC
        , PCK_QTY
        , PCK_TP_CD
        , (SELECT PCK_NM FROM MDM_PCK_TP WHERE PCK_CD=BL.PCK_TP_CD) PCK_NM
        , ACT_WGT
        , WGT_UT_CD
        , ACT_WGT_PRN_FLG
        , MEAS_QTY
        , MEAS_UT_CD
        , MKDESC.CMDT_DESC
        , PCK_CMDT_DESC
        , CNTR_CMDT_DESC
        , CSTMS_DESC
        , TTL_PCK_DESC
        , (SELECT BKG_JOIN_FNC(CURSOR(SELECT A1.OP_CNTR_QTY || 'X' || SUBSTR(A2.CNTR_TPSZ_DESC, 1, 4)
             FROM BKG_QUANTITY A1, MDM_CNTR_TP_SZ A2
            WHERE A1.BKG_NO = BL.BKG_NO
              AND A1.CNTR_TPSZ_CD = A2.CNTR_TPSZ_CD
              AND A1.CNTR_TPSZ_CD <> 'Q2'
              AND A1.CNTR_TPSZ_CD <> 'Q4'), ',')
           ||' CONTAINER(S) SAID TO CONTAIN:' FROM DUAL) CNTR_DESC
        , DECODE((SELECT 'Y'
                    FROM BKG_XPT_IMP_LIC
                   WHERE BKG_NO = BL.BKG_NO
                     AND ROWNUM = 1), 'Y', 'Y', 'N') XPT_IMP --EXPORT IMPORT INFORMATION 활성화 FLAG
        , DECODE((SELECT 'Y'
                    FROM BKG_REF_DTL 
                   WHERE BKG_NO = BL.BKG_NO
                     AND ROWNUM = 1
                  UNION
                  SELECT 'Y'
                    FROM BKG_REFERENCE
                   WHERE BKG_REF_TP_CD IN ('BKPO', 'CTPO', 'CMPO')
                     AND BKG_NO = BL.BKG_NO
                     AND ROWNUM = 1), 'Y', 'Y', 'N') PO_NO --P/O OTHER NO
        , DECODE((SELECT 'Y'
                    FROM BKG_IMG_STO
                   WHERE RIDR_TP_CD = 'B'
                     AND BKG_NO = BL.BKG_NO
                     AND ROWNUM = 1), 'Y', 'Y', 'N') RIDER --B/L RIDER
  FROM BKG_BL_DOC BL, BKG_BL_MK_DESC MKDESC
 WHERE BL.BKG_NO = MKDESC.BKG_NO(+)
   AND BL.BKG_NO = @[bkg_no]			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
