<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpecialManifestDBDAOmodifyCellPsnNoUSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
UPDATE BKG_CSTMS_EUR_DG A
   SET A.CELL_PSN_NO       = @[cell_psn_no]
 WHERE A.VSL_CD            = SUBSTR(@[vvd_cd], 1, 4)
   AND A.SKD_VOY_NO        = SUBSTR(@[vvd_cd], 5, 4)
   AND A.SKD_DIR_CD        = SUBSTR(@[vvd_cd], 9, 1)
   AND A.BL_NO             = @[bl_no]
   AND (A.CNTR_NO = @[cntr_no] OR CNTR_REF_NO = @[cntr_ref_no])
   AND A.PORT_CD           IN (SELECT VPS_PORT_CD
                                 FROM VSK_VSL_PORT_SKD BB
                                WHERE BB.VSL_CD     = A.VSL_CD    
                                  AND BB.SKD_VOY_NO = A.SKD_VOY_NO
                                  AND BB.SKD_DIR_CD = A.SKD_DIR_CD
                                  AND NVL(BB.SKD_CNG_STS_CD,'X') <> 'S'
                                  AND BB.CLPT_SEQ > (SELECT MIN(CC.CLPT_SEQ)
                                                       FROM VSK_VSL_PORT_SKD CC
                                                      WHERE VSL_CD      = A.VSL_CD     
                                                        AND SKD_VOY_NO  = A.SKD_VOY_NO 
                                                        AND SKD_DIR_CD  = A.SKD_DIR_CD 
                                                        AND VPS_PORT_CD = @[port_cd]
                                                        AND NVL(SKD_CNG_STS_CD,'X') <> 'S'
                                                    )
                              )			]]></sql>
			<params>
				<param name="cell_psn_no" type="12" value="" out="N"/>
				<param name="vvd_cd" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cntr_ref_no" type="12" value="" out="N"/>
				<param name="port_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
