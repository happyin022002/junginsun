<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOcopyBkgRefDtlByBkgCSQL">
			<desc><![CDATA[sourceBkg의 bkg_ref_dtl를 targetBkg로 복사한다.]]></desc>
			<sql><![CDATA[
INSERT INTO BKG_REF_DTL(BKG_NO 
,REF_SEQ 
,CUST_REF_TP_CD 
,DE_NO 
,PRT_NO 
,CPY_DESC_FLG 
,CNTR_NO 
,ITM_NO 
,ITM_DESC 
,PCK_QTY 
,PCK_TP_CD 
,CNTR_WGT 
,WGT_UT_CD 
,MEAS_QTY 
,MEAS_UT_CD 
,PO_NO 
,CRE_USR_ID 
,CRE_DT 
,UPD_USR_ID 
,UPD_DT
)
select @[targetBkg] BKG_NO 
		,(select /*+index_desc ( bkg_ref_dtl XPKBKG_REF_DTL)*/ 
					(nvl(sum(REF_SEQ),0)+1)+ref.REF_SEQ 
					from bkg_ref_dtl
					where REF_SEQ >= 0  
                    and rownum <= 1
					and bkg_no = @[targetBkg] )REF_SEQ 
		,ref.CUST_REF_TP_CD 
		,ref.DE_NO 
		,ref.PRT_NO 
		,ref.CPY_DESC_FLG 
		,ref.CNTR_NO 
		,ref.ITM_NO 
		,ref.ITM_DESC 
		,ref.PCK_QTY 
		,ref.PCK_TP_CD 
		,ref.CNTR_WGT 
		,ref.WGT_UT_CD 
		,ref.MEAS_QTY 
		,ref.MEAS_UT_CD 
		,ref.PO_NO 
		,@[usr_id] CRE_USR_ID 
		,sysdate CRE_DT 
		,@[usr_id] UPD_USR_ID 
		,sysdate UPD_DT
	from bkg_ref_dtl ref
	where ref.bkg_no =@[bkg_no] 
 #if (${cntr_no}!='') 
    and ref.cntr_no =@[cntr_no] 
 #end			]]></sql>
			<params>
				<param name="targetBkg" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
