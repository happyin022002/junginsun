<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TransferOrderIssueDBDAOModifyBkgTroDtlByXterUSQL">
			<desc><![CDATA[TransferOrderIssueDBDAOModifyBkgTroDtlByXterUSQL]]></desc>
			<sql><![CDATA[
UPDATE BKG_TRO_DTL SET 
	CNTR_TPSZ_CD = @[cntr_tpsz_cd]
,	TRO_QTY      = NVL(DECODE(@[tro_qty], '0', '1', @[tro_qty]), '1')
#if (${dor_arr_dt} != '') 
,	DOR_ARR_DT = TO_DATE(@[dor_arr_dt], 'YYYY-MM-DD HH24:MI') 
#else 
,	DOR_ARR_DT = @[dor_arr_dt]
#end
,	PKUP_LOC_CD = @[pkup_loc_cd]

#if (${pkup_yd_cd} != '') 
,	PKUP_YD_CD = @[pkup_loc_cd]||@[pkup_yd_cd]
#else 
,	PKUP_YD_CD = @[pkup_yd_cd]
#end
,	RTN_LOC_CD = @[rtn_loc_cd]

#if (${rtn_yd_cd} != '') 
,	RTN_YD_CD = @[rtn_loc_cd]||@[rtn_yd_cd]
#else 
,	RTN_YD_CD = @[rtn_yd_cd] 
#end
,	UPD_USR_ID = @[upd_usr_id]
,	UPD_DT = sysdate 

#if (${pkup_dt} != '') 
,	PKUP_DT = TO_DATE(@[pkup_dt], 'YYYY-MM-DD HH24:MI') 
#else 
,	PKUP_DT = @[pkup_dt]
#end
,   XTER_TRO_SEQ = @[xter_tro_seq]
,   XTER_TRO_SUB_SEQ = @[xter_tro_sub_seq]
WHERE BKG_NO      = @[bkg_no]
  AND IO_BND_CD   = 'O'
  AND RTN_TRO_FLG = 'N'
  AND TRO_SEQ     = @[tro_seq]
  AND TRO_SUB_SEQ = @[tro_sub_seq]
  AND TRO_SEQ IN (SELECT TRO_SEQ 
					FROM BKG_TRO 
				   WHERE BKG_NO      = @[bkg_no]
					 AND IO_BND_CD   = 'O'
					 AND RTN_TRO_FLG = 'N'
					 AND TRO_SEQ     = @[tro_seq]
					 AND NVL(CXL_FLG, 'N') = 'N')			]]></sql>
			<params>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="tro_qty" type="12" value="" out="N"/>
				<param name="dor_arr_dt" type="12" value="" out="N"/>
				<param name="pkup_loc_cd" type="12" value="" out="N"/>
				<param name="pkup_yd_cd" type="12" value="" out="N"/>
				<param name="rtn_loc_cd" type="12" value="" out="N"/>
				<param name="rtn_yd_cd" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="pkup_dt" type="12" value="" out="N"/>
				<param name="xter_tro_seq" type="12" value="" out="N"/>
				<param name="xter_tro_sub_seq" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="tro_seq" type="12" value="" out="N"/>
				<param name="tro_sub_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
