<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOSendXterRqstNoticeSubjectRSQL">
			<desc><![CDATA[S]]></desc>
			<sql><![CDATA[
SELECT CASE WHEN MST.DOC_TP_CD = 'B' AND MST.XTER_BKG_RQST_STS_CD = 'C' THEN
            'New Booking Request-Sender: '|| 
                CASE WHEN MST.XTER_SNDR_ID = 'PEGASUS' THEN NVL((SELECT BHCC.ATTR_CTNT2 FROM BKG_HRD_CDG_CTNT BHCC WHERE BHCC.HRD_CDG_ID = 'CUSTOMER_301_EDI_ID' AND BHCC.ATTR_CTNT1 = MST.PGSS_EDI_ID AND ROWNUM = 1),MST.XTER_SNDR_ID)
                ELSE MST.XTER_SNDR_ID END
                ||' ReleaseNo: '||MST.XTER_RQST_NO||' Version: '||MST.XTER_RQST_SEQ
                ||DECODE(MST.POR_CD,NULL,'',' POR:'||MST.POR_CD)||DECODE(MST.POL_CD,NULL,'',' LP:'||MST.POL_CD)||DECODE(MST.POD_CD,NULL,'',' POD:'||MST.POD_CD)
                ||DECODE(MST.DEL_CD,NULL,'',' DEL:'||MST.DEL_CD)
            WHEN MST.DOC_TP_CD = 'B' AND MST.XTER_BKG_RQST_STS_CD = 'U' THEN
            'Change Booking Request-Sender: '||MST.XTER_SNDR_ID||' ReleaseNo: '||MST.XTER_RQST_NO||' Version: '||MST.XTER_RQST_SEQ
                ||DECODE(MST.POR_CD,NULL,'',' POR:'||MST.POR_CD)||DECODE(MST.POL_CD,NULL,'',' LP:'||MST.POL_CD)||DECODE(MST.POD_CD,NULL,'',' POD:'||MST.POD_CD)
                ||DECODE(MST.DEL_CD,NULL,'',' DEL:'||MST.DEL_CD)||DECODE(MST.BKG_NO,NULL,'',' Booking # '||MST.BKG_NO)
            WHEN MST.DOC_TP_CD = 'B' AND MST.XTER_BKG_RQST_STS_CD = 'X' THEN
            'Cancel Booking Request-Sender: '||MST.XTER_SNDR_ID||' ReleaseNo: '||MST.XTER_RQST_NO||' Version: '||MST.XTER_RQST_SEQ
                ||DECODE(MST.POR_CD,NULL,'',' POR:'||MST.POR_CD)||DECODE(MST.POL_CD,NULL,'',' LP:'||MST.POL_CD)||DECODE(MST.POD_CD,NULL,'',' POD:'||MST.POD_CD)
                ||DECODE(MST.DEL_CD,NULL,'',' DEL:'||MST.DEL_CD)||DECODE(MST.BKG_NO,NULL,'',' Booking # '||MST.BKG_NO)
            WHEN MST.DOC_TP_CD = 'S' AND MST.XTER_BKG_RQST_STS_CD = 'C' THEN
            'New eSI-Sender: '||MST.XTER_SNDR_ID||' ReleaseNo: '||MST.XTER_RQST_NO||' Version: '||MST.XTER_RQST_SEQ
                ||DECODE(MST.BKG_NO,NULL,'',' Booking # '||MST.BKG_NO)||DECODE(MST.POR_CD,NULL,'',' POR:'||MST.POR_CD)
                ||DECODE(MST.POL_CD,NULL,'',' LP:'||MST.POL_CD)||DECODE(MST.POD_CD,NULL,'',' POD:'||MST.POD_CD)||DECODE(MST.DEL_CD,NULL,'',' DEL:'||MST.DEL_CD)
            WHEN MST.DOC_TP_CD = 'S' AND MST.XTER_BKG_RQST_STS_CD = 'U' THEN
            'Change eSI-Sender: '||MST.XTER_SNDR_ID||' ReleaseNo: '||MST.XTER_RQST_NO||' Version: '||MST.XTER_RQST_SEQ
                ||DECODE(MST.BKG_NO,NULL,'',' Booking # '||MST.BKG_NO)||DECODE(MST.POR_CD,NULL,'',' POR:'||MST.POR_CD)
                ||DECODE(MST.POL_CD,NULL,'',' LP:'||MST.POL_CD)||DECODE(MST.POD_CD,NULL,'',' POD:'||MST.POD_CD)||DECODE(MST.DEL_CD,NULL,'',' DEL:'||MST.DEL_CD)
            ELSE 
            'New e-Booking or e-SI request has arrived'
            END SUBJECT
FROM BKG_XTER_RQST_MST MST
WHERE MST.XTER_SNDR_ID = @[sender_id]
AND MST.XTER_RQST_NO = @[rqst_no]
AND MST.XTER_RQST_SEQ = @[rqst_seq]			]]></sql>
			<params>
				<param name="sender_id" type="12" value="" out="N"/>
				<param name="rqst_no" type="12" value="" out="N"/>
				<param name="rqst_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
