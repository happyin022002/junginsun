<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOSearchVlFlgRSQL">
			<desc><![CDATA[GeneralBookingReceiptDBDAOSearchVlFlg]]></desc>
			<sql><![CDATA[
SELECT 'Y' AS VL_FLG   FROM  BKG_BOOKING BK, BKG_CONTAINER CNTR, BKG_VVD VVD
WHERE 1=1
AND BK.BKG_NO = @[bkg_no]
AND BK.BKG_NO = CNTR.BKG_NO
AND BK.BKG_NO = VVD.BKG_NO
AND 'VL' = (SELECT /*+INDEX_DESC(CTM_MOVEMENT XUK1CTM_MOVEMENT) */ 
										 MVMT_STS_CD
								  FROM	 CTM_MOVEMENT
								  WHERE  CNTR_NO = CNTR.CNTR_NO
									 AND ROWNUM <= 1
									 )
									 
AND NOT EXISTS (SELECT 'Y' FROM CTM_MOVEMENT CTM
                WHERE 1=1
                AND CRNT_VSL_CD = VVD.VSL_CD
                AND CRNT_SKD_VOY_NO = VVD.SKD_VOY_NO
                AND CRNT_SKD_DIR_CD = VVD.SKD_DIR_CD
                AND ROWNUM =1 )			
AND 'Y' = (SELECT 'Y' FROM BKG_HRD_CDG_CTNT WHERE 1=1 AND HRD_CDG_ID ='BKG_VL_VALIDATION' AND ATTR_CTNT1 ='Y' AND ROWNUM =1 )                						 
AND ROWNUM =1			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
