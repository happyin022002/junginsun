<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOmodifybkgMtPickUpYardDateUSQL">
			<desc><![CDATA[modify Empty Pick Up Yard and Date as like Prd information]]></desc>
			<sql><![CDATA[
#if (${ca_flg} == 'Y')
UPDATE BKG_BKG_HIS SET
#else
UPDATE BKG_BOOKING SET
#end
(MTY_PKUP_YD_CD, MTY_PKUP_DT,FULL_RTN_YD_CD, UPD_USR_ID, UPD_DT ) = 
(SELECT NVL(MTY_PKUP_YD_CD,'') MTY_PKUP_YD_CD
	  , CASE WHEN MST.MTY_PKUP_YD_CD is null THEN TO_DATE('', 'YYYY-MM-DD HH24:MI:SS') ELSE NVL(DTL.ARR_ST_DT,'') END MTY_PKUP_DT
      , MST.FULL_RTN_YD_CD FULL_RTN_YD_CD
	  , @[usr_id] UPD_USR_ID
	  , SYSDATE UPD_DT
   FROM PRD_PROD_CTL_MST MST, PRD_PROD_CTL_ROUT_DTL DTL
  WHERE 1=1 
    AND MST.PCTL_NO = (SELECT PCTL_NO FROM BKG_BOOKING WHERE BKG_NO = @[bkg_no])
    AND MST.PCTL_NO = DTL.PCTL_NO
    AND DTL.PCTL_SEQ = 1)
 WHERE BKG_NO = @[bkg_no]			]]></sql>
			<params>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
