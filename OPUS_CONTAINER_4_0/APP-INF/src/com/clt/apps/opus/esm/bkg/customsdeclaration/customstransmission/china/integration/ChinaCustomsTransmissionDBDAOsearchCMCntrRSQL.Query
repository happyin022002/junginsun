<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChinaCustomsTransmissionDBDAOsearchCMCntrRSQL">
			<desc><![CDATA[ChinaCustomsTransmissionDBDAOsearchCMCntrRSQL]]></desc>
			<sql><![CDATA[
SELECT BCT.CNTR_NO,
       BMD.CNTR_MF_SEQ, --CM_SEQ
       SUBSTR(BKG_SPCLCHAR_CONV_FNC(TRIM(REPLACE(REPLACE(UPPER(BMD.CNTR_MF_GDS_DESC), CHR(10), ' '), CHR(9), ' ')), 'J'), 1, 512) AS CNTR_MF_GDS_DESC, --CM_DESC1
       SUBSTR(BKG_SPCLCHAR_CONV_FNC(TRIM(REPLACE(REPLACE(UPPER(BMD.CNTR_MF_MK_DESC), CHR(10), ' '), CHR(9), ' ')), 'J'), 1, 100) AS CNTR_MF_MK_DESC1,
       SUBSTR(BKG_SPCLCHAR_CONV_FNC(TRIM(REPLACE(REPLACE(UPPER(BMD.CNTR_MF_MK_DESC), CHR(10), ' '), CHR(9), ' ')), 'J'), 101, 100) AS CNTR_MF_MK_DESC2,
       SUBSTR(BKG_SPCLCHAR_CONV_FNC(TRIM(REPLACE(REPLACE(UPPER(BMD.CNTR_MF_MK_DESC), CHR(10), ' '), CHR(9), ' ')), 'J'), 201, 100) AS CNTR_MF_MK_DESC3,
       SUBSTR(BKG_SPCLCHAR_CONV_FNC(TRIM(REPLACE(REPLACE(UPPER(BMD.CNTR_MF_MK_DESC), CHR(10), ' '), CHR(9), ' ')), 'J'), 301, 100) AS CNTR_MF_MK_DESC4,
       SUBSTR(BKG_SPCLCHAR_CONV_FNC(TRIM(REPLACE(REPLACE(UPPER(BMD.CNTR_MF_MK_DESC), CHR(10), ' '), CHR(9), ' ')), 'J'), 401, 100) AS CNTR_MF_MK_DESC5,
       --BMD.CNTR_MF_WGT, --CM_WGT
       TO_CHAR(DECODE(NVL(BMD.WGT_UT_CD,' '),'LBS',ROUND(NVL(BMD.CNTR_MF_WGT,0)*0.4536,3), NVL(BMD.CNTR_MF_WGT,0)),'FM999999990.000') AS CNTR_MF_WGT,
       BMD.PCK_QTY, --CM_PKG
       NVL(CNV.CSTMS_PCK_TP_CD, BMD.PCK_TP_CD) AS PCK_TP_CD, --CM_PKG_U
       BMD.RC_FLG, --CM_REEFER_IND
       (SELECT CASE
                  WHEN FDO_TEMP IS NOT NULL THEN FDO_TEMP
                  WHEN CDO_TEMP <> 0 THEN CDO_TEMP
               END
          FROM BKG_CSTMS_CHN_RF
         WHERE BL_NO = BKG.BL_NO
           AND CNTR_NO = BMD.CNTR_NO
           AND CHN_MF_SND_IND_CD = @[trans_mode] ) AS DO_TEMP, --CM_REEFER TEMPERATURE
       (SELECT CASE
                  WHEN FDO_TEMP IS NOT NULL THEN 'F'
                  ELSE DECODE(CDO_TEMP, 0, '', 'C')
               END
          FROM BKG_CSTMS_CHN_RF
         WHERE BL_NO = BKG.BL_NO
           AND CNTR_NO = BMD.CNTR_NO
           AND CHN_MF_SND_IND_CD = @[trans_mode] ) AS TEMP_UN, --CM_RUNIT TEMPERATURE UNIT
        TO_CHAR(DECODE(NVL(BMD.MEAS_UT_CD,' '),'CBF',ROUND(NVL(BMD.MEAS_QTY,0)*0.0283,3), NVL(BMD.MEAS_QTY,0)),'FM999999990.000')  AS MEAS_QTY, /* 20060707 yong: CBF=>CBM로 환산 */
       '1' AS GOODNO, --CM_GOODNO
       BMD.DCGO_SEQ

  FROM BKG_CNTR_MF_DESC BMD,
       BKG_CONTAINER BCT,
       BKG_BOOKING BKG,
       BKG_CSTMS_PCK_TP_CONV CNV

 WHERE BKG.BL_NO = @[bl_no]
   AND BMD.BKG_NO = BKG.BKG_NO
   AND BCT.BKG_NO = BKG.BKG_NO
   AND BCT.CNTR_NO = BMD.CNTR_NO
   AND BMD.PCK_TP_CD = CNV.PCK_TP_CD(+)
   AND CNV.CNT_CD(+) = 'CN'

 ORDER BY BCT.CNTR_DP_SEQ,
          BMD.CNTR_MF_SEQ			]]></sql>
			<params>
				<param name="trans_mode" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
