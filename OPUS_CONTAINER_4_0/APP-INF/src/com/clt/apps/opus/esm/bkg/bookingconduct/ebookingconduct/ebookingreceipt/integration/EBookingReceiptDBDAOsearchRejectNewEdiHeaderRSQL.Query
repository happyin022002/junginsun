<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOsearchRejectNewEdiHeaderRSQL">
			<desc><![CDATA[EBookingReceiptDBDAOsearchRejectNewEdiHeaderRSQL]]></desc>
			<sql><![CDATA[
SELECT BHCC.ATTR_CTNT3 AS RCV_ID
     , BHCC.ATTR_CTNT4 AS SNDR_ID
     , 'A' FLAT_FILE_TYPE
FROM BKG_HRD_CDG_CTNT BHCC
WHERE BHCC.HRD_CDG_ID = @[hrd_cdg_id]
AND BHCC.ATTR_CTNT2 = (SELECT CASE WHEN MST.XTER_SNDR_ID = 'PEGASUS' THEN 
                                   (SELECT BHCC1.ATTR_CTNT2
                                    FROM BKG_HRD_CDG_CTNT BHCC1
                                    WHERE BHCC1.HRD_CDG_ID = 'CUSTOMER_301_EDI_ID'
                                    AND   BHCC1.ATTR_CTNT1 = MST.PGSS_EDI_ID
                                    AND   ROWNUM = 1)
                              ELSE MST.XTER_SNDR_ID END
                       FROM BKG_XTER_RQST_MST MST 
                       WHERE MST.XTER_SNDR_ID = @[sender_id]
                       AND MST.XTER_RQST_NO = @[rqst_no]
                       AND MST.XTER_RQST_SEQ = @[rqst_seq]
                       )
AND ROWNUM = 1			]]></sql>
			<params>
				<param name="hrd_cdg_id" type="12" value="" out="N"/>
				<param name="sender_id" type="12" value="" out="N"/>
				<param name="rqst_no" type="12" value="" out="N"/>
				<param name="rqst_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
