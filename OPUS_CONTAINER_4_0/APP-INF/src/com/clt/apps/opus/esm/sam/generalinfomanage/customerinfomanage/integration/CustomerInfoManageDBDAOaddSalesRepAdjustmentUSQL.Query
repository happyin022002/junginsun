<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CustomerInfoManageDBDAOaddSalesRepAdjustmentUSQL">
			<desc><![CDATA[Customer의 담당 Sales REp 변경 정보를 저장한다.]]></desc>
			<sql><![CDATA[
MERGE INTO SAM_CUST_SLS_REP_INFO A
USING (SELECT SUBSTR(@[cust_cd],1,2) CUST_CNT_CD,to_number(substr(@[cust_cd],3))  CUST_SEQ, @[srep_cd] SREP_CD
         FROM DUAL
      ) B
ON (    A.CUST_CNT_CD = B.CUST_CNT_CD
    AND A.CUST_SEQ    = B.CUST_SEQ
    AND A.SREP_CD     = B.SREP_CD
    )
WHEN MATCHED THEN
UPDATE SET UPD_USR_ID     = @[user_id],
           SREP_PRMRY_FLG = @[srep_prmry_flg],
           UPD_DT         = SYSDATE,
           DELT_FLG       = 'N'
WHEN NOT MATCHED THEN
INSERT (CUST_CNT_CD,CUST_SEQ,SREP_CD,SREP_PRMRY_FLG,CRE_USR_ID,CRE_DT,UPD_USR_ID,UPD_DT,DELT_FLG,DP_SEQ,SREP_CUST_CLSS_CD)
VALUES (substr(@[cust_cd],1,2),to_number(substr(@[cust_cd],3)),@[srep_cd],@[srep_prmry_flg],@[user_id],sysdate,@[user_id],SYSDATE,'N',0,'')			]]></sql>
			<params>
				<param name="cust_cd" type="12" value="" out="N"/>
				<param name="srep_cd" type="12" value="" out="N"/>
				<param name="user_id" type="12" value="" out="N"/>
				<param name="srep_prmry_flg" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
