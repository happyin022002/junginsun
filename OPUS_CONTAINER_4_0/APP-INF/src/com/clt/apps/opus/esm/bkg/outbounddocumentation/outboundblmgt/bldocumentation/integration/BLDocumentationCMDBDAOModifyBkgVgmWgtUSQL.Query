<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationCMDBDAOModifyBkgVgmWgtUSQL">
			<desc><![CDATA[BLDocumentationCMDBDAOModifyBkgVgmWgt]]></desc>
			<sql><![CDATA[
UPDATE BKG_CONTAINER
SET  VGM_WGT = DECODE(@[wgt_tp_cd],'V',ROUND(DECODE(@[vgm_wgt_ut_cd],'KGS',@[vgm_wgt],'LBS',@[vgm_wgt]*0.453592,NULL),3)
								  ,'C',ROUND(DECODE(@[vgm_wgt_ut_cd],'KGS',@[vgm_wgt],'LBS',@[vgm_wgt]*0.453592,NULL),3)+MST_SPEC_FNC('TARE', @[cntr_no]))
    ,VGM_WGT_UT_CD = 'KGS'
    --,VGM_WGT_UPD_DT = SYSDATE
	,VGM_WGT_UPD_DT = NVL((SELECT GLOBALDATE_PKG.TIME_LOCAL_FNC(MDM.LOC_CD) 
						FROM BKG_XTER_USR_INFO USR, MDM_CUSTOMER MDM
						WHERE USR.USR_ID = @[usr_id]
						  AND MDM.CUST_CNT_CD = USR.CUST_CNT_CD
						  AND MDM.CUST_SEQ = USR.CUST_SEQ
						),GLOBALDATE_PKG.TIME_CONV_FNC(COM_CONSTANTMGR_PKG.COM_GETBASELOCATIONCODE_FNC(),sysdate,'SGSIN'))
    ,VGM_WGT_UPD_USR_ID = @[usr_id]
	,WGT_TP_CD = @[wgt_tp_cd]
	,XTER_SNDR_ID = DECODE(@[vgm_tp],'ENC','WEB',@[xter_sndr_id])
	,XTER_VGM_DOC_ID = DECODE(@[vgm_tp],'ENC',@[bkg_no],@[xter_vgm_doc_id])
	,XTER_VGM_RQST_SEQ = DECODE(@[vgm_tp],'ENC',@[vgm_seq],@[xter_vgm_rqst_seq])
	,XTER_VGM_USR_ID = DECODE(@[vgm_tp],'ENC',@[usr_id],'')
WHERE 1=1
AND BKG_NO = @[bkg_no]
AND CNTR_NO = @[cntr_no]			]]></sql>
			<params>
				<param name="wgt_tp_cd" type="12" value="" out="N"/>
				<param name="vgm_wgt_ut_cd" type="12" value="" out="N"/>
				<param name="vgm_wgt" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="vgm_tp" type="12" value="" out="N"/>
				<param name="xter_sndr_id" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="xter_vgm_doc_id" type="12" value="" out="N"/>
				<param name="vgm_seq" type="12" value="" out="N"/>
				<param name="xter_vgm_rqst_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
