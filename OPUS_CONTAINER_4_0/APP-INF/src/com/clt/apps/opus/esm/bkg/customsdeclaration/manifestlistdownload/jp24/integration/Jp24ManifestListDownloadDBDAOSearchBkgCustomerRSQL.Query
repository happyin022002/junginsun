<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="Jp24ManifestListDownloadDBDAOSearchBkgCustomerRSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
SELECT A.BL_NO,
       '  ' AS BL_SPLIT_NO,
       B.BKG_CUST_TP_CD,
       B.CUST_CNT_CD,
       B.CUST_SEQ,
       REPLACE(REPLACE(NVL(UPPER(B.CUST_NM), ''), CHR(180), CHR(39)), '’', '''') AS CUST_NM,
       REPLACE(REPLACE(NVL(UPPER(B.CUST_ADDR), ''), CHR(180), CHR(39)), '’', '''') AS CUST_ADDR,
       B.CUST_ZIP_ID,
       (SELECT /*+ INDEX_ASC(CP XPKMDM_CUST_CNTC_PNT) */
               CP.INTL_PHN_NO||CP.PHN_NO
          FROM MDM_CUST_CNTC_PNT CP
         WHERE B.CUST_CNT_CD = CP.CUST_CNT_CD
           AND B.CUST_SEQ = CP.CUST_SEQ
           AND CP.PHN_NO IS NOT NULL
           AND ROWNUM = 1) AS PHN_NO,
       B.CUST_FAX_NO AS FAX_NO

  FROM BKG_BOOKING A,
       BKG_CUSTOMER B

 WHERE A.BKG_NO = @[bkg_no]
   AND A.BKG_NO = B.BKG_NO
   AND (B.BKG_CUST_TP_CD = 'S' OR
        B.BKG_CUST_TP_CD = 'C' OR
        B.BKG_CUST_TP_CD = 'N')
 ORDER BY BKG_CUST_TP_CD
			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
