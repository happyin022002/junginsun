<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BasicDataDBDAOSearchTargerVvdFixByVbpIfRSQL">
			<desc><![CDATA[Target VVD List를 조회]]></desc>
			<sql><![CDATA[
SELECT VBP.BSE_TP_CD
      ,VBP.BSE_YR
      ,DECODE(VBP.BSE_TP_CD,'Y','00',@[f_bse_qtr_cd]) BSE_QTR_CD
      ,VBP.TRD_CD
      ,VBP.RLANE_CD
      ,VBP.DIR_CD
      ,VBP.VSL_CD||VBP.SKD_VOY_NO||VBP.SKD_DIR_CD VVD
      ,VBP.VSL_CD
      ,VBP.SKD_VOY_NO
      ,VBP.SKD_DIR_CD
      ,VBP.BSE_MON
      ,VBP.BSE_WK
      ,VBP.SUB_TRD_CD
      ,VBP.IOC_CD
      ,NVL(VBP.FNL_BSA_CAPA,0) AS FNL_BSA_CAPA
  FROM CSQ_QTA_TGT_VVD_IF VBP
      ,CSQ_QTA_LANE_MGMT LANE
 WHERE 1=1
   AND VBP.BSE_TP_CD  = LANE.BSE_TP_CD 
   AND VBP.BSE_YR     = LANE.BSE_YR 
   AND VBP.BSE_QTR_CD = LANE.BSE_QTR_CD 
   AND VBP.TRD_CD     = LANE.TRD_CD
   AND VBP.RLANE_CD   = LANE.RLANE_CD
   AND VBP.SUB_TRD_CD = LANE.SUB_TRD_CD
   AND VBP.DIR_CD     = NVL(LANE.LANE_DIR_CD,VBP.DIR_CD)
   AND VBP.BSE_TP_CD  = @[f_bse_tp_cd] 
   AND VBP.BSE_YR     = @[f_bse_yr]
   AND VBP.BSE_MON    BETWEEN '01' AND '12'
#if (${f_bse_tp_cd} == 'Y')
   AND VBP.BSE_QTR_CD = '00'
   AND VBP.BSE_WK     BETWEEN '00' AND '53'
#else
   AND VBP.BSE_QTR_CD = @[f_bse_qtr_cd]
   AND VBP.BSE_WK     BETWEEN @[f_fm_wk] AND @[f_to_wk]
#end
#if (${f_trd_cd} != '' && ${f_trd_cd} != 'All')
  AND VBP.TRD_CD      = @[f_trd_cd]
#end
#if (${f_dir_cd} != '' && ${f_dir_cd} != 'All')
  AND VBP.DIR_CD      = @[f_dir_cd]
#end
#if (${f_sub_trd_cd} != '' && ${f_sub_trd_cd} != 'All')
  AND VBP.SUB_TRD_CD  = @[f_sub_trd_cd]
#end
#if (${f_rlane_cd} != '' && ${f_rlane_cd} != 'All')
  AND VBP.RLANE_CD    = @[f_rlane_cd]
#end
   AND VBP.DELT_FLG      =  'N'
   AND LANE.CSQ_ACT_FLG  =  'Y'
ORDER BY VBP.TRD_CD
        ,VBP.DIR_CD
        ,VBP.SUB_TRD_CD
        ,VBP.RLANE_CD
        ,VBP.BSE_MON
        ,VBP.BSE_WK			]]></sql>
			<params>
				<param name="f_bse_qtr_cd" type="12" value="" out="N"/>
				<param name="f_bse_tp_cd" type="12" value="" out="N"/>
				<param name="f_bse_yr" type="12" value="" out="N"/>
				<param name="f_fm_wk" type="12" value="" out="N"/>
				<param name="f_to_wk" type="12" value="" out="N"/>
				<param name="f_trd_cd" type="12" value="" out="N"/>
				<param name="f_dir_cd" type="12" value="" out="N"/>
				<param name="f_sub_trd_cd" type="12" value="" out="N"/>
				<param name="f_rlane_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
