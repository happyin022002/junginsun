<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OTRCommRequestDBDAOAddOTRCommRequestAcmAgnOtrCommCSQL">
			<desc><![CDATA[AddOTRCommRequestAcmAgnOtrComm]]></desc>
			<sql><![CDATA[
INSERT
INTO ACM_AGN_OTR_COMM
(
OTR_COMM_NO
,AGN_CD
,IO_BND_CD
,AC_TP_CD
,AC_SEQ
,COMM_YRMON
,APLY_DT
,AC_STS_CD
,IF_AMT
,LOC_DIV_CD
,LOC_CD
,AR_OFC_CD
,AP_OFC_CD 	
,AP_CTR_CD
,OFC_ENG_NM
,OTR_COMM_RMK
,COMM_STND_COST_CD
,AC_OCCR_INFO_CD
,AC_SLAN_CD
,AC_RLANE_CD
,AC_VSL_CD
,AC_SKD_VOY_NO
,AC_SKD_DIR_CD
,AC_REV_DIR_CD
,CURR_CD
,XCH_RT_APLY_LVL
,PAY_XCH_RT
,PAY_IF_AMT
,OFC_CHR_CD
,VNDR_CNT_CD
,VNDR_SEQ
,ACCL_FLG
,RQST_USR_ID
,RQST_DT
,RQST_GDT
,AUD_NO
,AUD_USR_ID
,AUD_DT
,AUD_GDT
,CSR_NO
,APRO_USR_ID
,APRO_DT
,APRO_GDT
,GL_DT
,ASA_NO
,INV_TAX_RT
,IF_USR_ID
,IF_DT
,IF_GDT
,AC_PROC_DESC
,CRE_USR_ID
,CRE_DT
,UPD_USR_ID
,UPD_DT
)
    SELECT
           @[otr_comm_no]                         AS OTR_COMM_NO,
           A.OFC_CD                               AS AGN_CD,
           'O'                                    AS IO_BND_CD,
           'T'                                    AS AC_TP_CD,
           '1'                                    AS AC_SEQ,
           REPLACE(@[hid_comm_yrmon], '-', '')        AS COMM_YRMON,
           @[aply_dt]                             AS APLY_DT,
           'CS'                                   AS AC_STS_CD,
           ROUND (@[usd_amt], 2)                  AS IF_AMT,
           NULL                                   AS LOC_DIV_CD,
           NULL                                   AS LOC_CD,
           @[ar_ofc_cd]                           AS AR_OFC_CD,
           A.AP_OFC_CD                            AS AP_OFC_CD,
           A.AP_CTR_CD                            AS AP_CTR_CD,
           A.OFC_ENG_NM                           AS OFC_ENG_NM,
           @[otr_comm_rmk]                        AS OTR_COMM_RMK,
           @[comm_stnd_cost_cd]                   AS COMM_STND_COST_CD,
           @[ac_occr_info_cd]                     AS AC_OCCR_INFO_CD,
           'CNT'                                  AS AC_SLAN_CD,
           'CNTCO'                                AS AC_RLANE_CD,
           SUBSTR(@[vvd],1,4)                     AS AC_VSL_CD,
           SUBSTR(@[vvd],5,4)                     AS AC_SKD_VOY_NO,
           SUBSTR(@[vvd],9,1)                     AS AC_SKD_DIR_CD,
           SUBSTR(@[vvd],10,1)                    AS AC_REV_DIR_CD,
           @[curr_cd]                             AS CURR_CD,
           '2'                                    AS XCH_RT_APLY_LVL,
           @[pay_xch_rt]                          AS PAY_XCH_RT,
           ROUND (@[pay_if_amt], 2)               AS PAY_IF_AMT,

           (
               SELECT NVL(OFC_CHR_CD,'')
                 FROM ACM_OFC_INFO
                WHERE AGN_CD = A.OFC_CD 
			   	  AND ROWNUM = 1 
           )     
                                                  AS OFC_CHR_LVL, 
           (
               SELECT vndr_cnt_cd 
                 FROM MDM_VENDOR
                WHERE VNDR_SEQ = @[vndr_seq]
           )                                      AS VNDR_CNT_CD,
           @[vndr_seq]                            AS VNDR_SEQ,
           'N'                                    AS ACCL_FLG,
           NULL                                   AS RQST_USR_ID,
           NULL                                   AS RQST_DT,
           NULL                                   AS RQST_GDT,
           NULL                                   AS AUD_NO,
           NULL                                   AS AUD_USR_ID,
           NULL                                   AS AUD_DT,
           NULL                                   AS AUD_GDT,
           NULL                                   AS CSR_NO,
           NULL                                   AS APRO_USR_ID,
           NULL                                   AS APRO_DT,
           NULL                                   AS APRO_GDT,
           NULL                                   AS GL_DT,
           ''                                     AS ASA_NO,
           @[inv_tax_rt]                          AS INV_TAX_RT,
           NULL                                   AS IF_USR_ID,
           NULL                                   AS IF_DT,
           NULL                                   AS IF_GDT,
           'OTHER COMMISSION MANUAL INPUTTED BY '|| @[usr_id] AS AC_PROC_DESC,  
           @[usr_id]                              AS CRE_USR_ID,
           SYSDATE                                AS CRE_DT,
           @[usr_id]                              AS UPD_USR_ID,
           SYSDATE                                AS UPD_DT
      FROM MDM_ORGANIZATION A
     WHERE A.OFC_CD = @[agn_cd]
       AND ROWNUM = 1			]]></sql>
			<params>
				<param name="otr_comm_no" type="12" value="" out="N"/>
				<param name="hid_comm_yrmon" type="12" value="" out="N"/>
				<param name="aply_dt" type="12" value="" out="N"/>
				<param name="usd_amt" type="12" value="" out="N"/>
				<param name="ar_ofc_cd" type="12" value="" out="N"/>
				<param name="otr_comm_rmk" type="12" value="" out="N"/>
				<param name="comm_stnd_cost_cd" type="12" value="" out="N"/>
				<param name="ac_occr_info_cd" type="12" value="" out="N"/>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="curr_cd" type="12" value="" out="N"/>
				<param name="pay_xch_rt" type="12" value="" out="N"/>
				<param name="pay_if_amt" type="12" value="" out="N"/>
				<param name="vndr_seq" type="12" value="" out="N"/>
				<param name="inv_tax_rt" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="agn_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
