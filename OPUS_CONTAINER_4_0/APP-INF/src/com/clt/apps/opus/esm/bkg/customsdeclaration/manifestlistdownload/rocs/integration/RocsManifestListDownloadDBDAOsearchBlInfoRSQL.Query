<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RocsManifestListDownloadDBDAOsearchBlInfoRSQL">
			<desc><![CDATA[ROCS(ROTTERDAM) 세관 신고용 B/L 일반 정보를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT BKG_NO, BL_NO, FAX_NO,CUST_EML,
       REGEXP_SUBSTR(SHPR_ADDR, '[^'||@[dif_chr]||']*') SHPR_ADDR1,
       SUBSTR(SHPR_ADDR,REGEXP_INSTR(SHPR_ADDR,'['||@[dif_chr]||']')+2) SHPR_ADDR2,
       REGEXP_SUBSTR(CNEE_ADDR, '[^'||@[dif_chr]||']*') CNEE_ADDR1,
       SUBSTR(CNEE_ADDR,REGEXP_INSTR(CNEE_ADDR,'['||@[dif_chr]||']')+2) CNEE_ADDR2,
       REGEXP_SUBSTR(NTFY_ADDR, '[^'||@[dif_chr]||']*') NTFY_ADDR1,
       SUBSTR(NTFY_ADDR,REGEXP_INSTR(NTFY_ADDR,'['||@[dif_chr]||']')+2) NTFY_ADDR2,
       VSL.VSL_CD, VSL.SKD_VOY_NO, VSL.SKD_DIR_CD, FRT_TERM_CD, T1_DOC_CD,
       VSL.VSL_CD||VSL.SKD_VOY_NO||VSL.SKD_DIR_CD vvd_number,
       FRT_TERM_CD, T1_DOC_CD,
	   SHPR_CNT_CD, 
	   SHPR_CUST_SEQ,
	   CNEE_CNT_CD,
	   CNEE_CUST_SEQ,
	   NTFY_CNT_CD,
	   NTFY_CUST_SEQ,
	   SHPR_EORI_NO,
	   SHPR_CTY_NM,
	   SHPR_CSTMS_DECL_CNT_CD,
 	   SHPR_ZIP_ID,
	   SHPR_ST_NM,
	   CNEE_EORI_NO,
	   CNEE_CTY_NM,
	   CNEE_CSTMS_DECL_CNT_CD,
 	   CNEE_ZIP_ID,
	   CNEE_ST_NM,
	   NTFY_EORI_NO,
	   NTFY_CTY_NM,
	   NTFY_CSTMS_DECL_CNT_CD,
 	   NTFY_ZIP_ID,
	   NTFY_ST_NM
FROM	 BKG_CSTMS_RTM_BL BL, BKG_CSTMS_RTM_VSL VSL
#if (${bl_no} == '' && ${frm_crn_number}!= '') 	
              WHERE   BL.VSL_CALL_REF_NO       = @[frm_crn_number] 
#end
#if (${bl_no}!= '' && ${frm_crn_number} == '') 	
              WHERE BL_NO = SUBSTR(@[bl_no],0,12) 
#end
#if (${bl_no}!= '' && ${frm_crn_number} != '') 
              WHERE BL_NO = SUBSTR(@[bl_no],0,12) 
              AND   BL.VSL_CALL_REF_NO       = @[frm_crn_number] 
#end
#if (${bl_tp_cd}!= '')
              AND   BL_TP_CD = @[bl_tp_cd]
#end
 			  AND   BL.VSL_CD = VSL.VSL_CD
              AND   BL.SKD_VOY_NO = VSL.SKD_VOY_NO
              AND   BL.SKD_DIR_CD = VSL.SKD_DIR_CD
AND	 BL.VSL_CALL_REF_NO = VSL.VSL_CALL_REF_NO			]]></sql>
			<params>
				<param name="dif_chr" type="12" value="@@" out="N"/>
				<param name="frm_crn_number" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="bl_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
