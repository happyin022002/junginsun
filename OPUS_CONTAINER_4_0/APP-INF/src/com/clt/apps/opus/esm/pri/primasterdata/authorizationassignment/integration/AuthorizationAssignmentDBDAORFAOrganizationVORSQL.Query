<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AuthorizationAssignmentDBDAORFAOrganizationVORSQL">
			<desc><![CDATA[RFA Organization Tree]]></desc>
			<sql><![CDATA[
	SELECT  OFC.LVL AS LVL
	 		, OFC.PRNT_OFC_CD
            , OFC.OFC_CD
            ,  OFC.OFC_ENG_NM
			, OFC.BY_PATH
    FROM 
    (
        SELECT LEVEL AS LVL
             , PRNT_OFC_CD
             , OFC_CD
             , OFC_CD AS OFC_ENG_NM
             , LTRIM(SYS_CONNECT_BY_PATH(LPAD(OFC_CD, 6, ' '), '|'), '|') BY_PATH
             , CONNECT_BY_ISLEAF
        FROM MDM_ORGANIZATION
        WHERE 1=1
        AND   DECODE(DELT_FLG, 'Y', 0, 1) = 1
        START WITH OFC_CD=COM_ConstantMgr_PKG.COM_getHeadOfficeCode_FNC()
        CONNECT BY PRIOR OFC_CD = PRNT_OFC_CD
        ORDER SIBLINGS BY OFC_CD
    ) OFC, (SELECT OFC_CD FROM TABLE(COM_OfficeCodeMgr_PKG.COM_getOfficeCodeList_FNC('000002','PRI'))) APP_OFC
    WHERE     OFC.BY_PATH LIKE '%' || LPAD(APP_OFC.OFC_CD,6,' ')
    order by by_path			]]></sql>
			<params>
			</params>
		</query>
	</querys>
</sqls>
