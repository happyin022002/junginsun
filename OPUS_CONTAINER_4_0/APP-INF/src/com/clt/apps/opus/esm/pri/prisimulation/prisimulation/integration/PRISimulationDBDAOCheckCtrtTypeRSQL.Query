<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PRISimulationDBDAOCheckCtrtTypeRSQL">
			<desc><![CDATA[Checking Contract Type. (SC,RFA,TAA)]]></desc>
			<sql><![CDATA[
SELECT
   NVL((SELECT 'T'
          FROM PRI_TAA_MN MN,
               PRI_TAA_HDR HDR
         WHERE MN.TAA_PROP_NO = HDR.TAA_PROP_NO
           AND HDR.TAA_NO = @[ctrt_no]
           AND CFM_FLG = 'Y'
           AND ROWNUM = 1    --TAA
       ),NVL(
       (SELECT 'R'
          FROM PRI_RP_MN MN,
               PRI_RP_HDR HDR
         WHERE MN.PROP_NO = HDR.PROP_NO
           AND HDR.RFA_NO = @[ctrt_no]
           AND PROP_STS_CD = 'A'
           AND ROWNUM = 1   --RFA
       ),
       (SELECT 'S'
          FROM PRI_SP_MN MN,
               PRI_SP_HDR HDR,
               PRI_SP_CTRT_PTY PTY
         WHERE MN.PROP_NO = HDR.PROP_NO
           AND MN.PROP_NO = PTY.PROP_NO
           AND MN.AMDT_SEQ = PTY.AMDT_SEQ
           AND HDR.SC_NO = @[ctrt_no]
           AND PTY.PRC_CTRT_PTY_TP_CD = 'C'
           AND MN.PROP_STS_CD = 'F'
           AND ROWNUM = 1   --SC
       ))) AS CTRT_TP
FROM DUAL			]]></sql>
			<params>
				<param name="ctrt_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
