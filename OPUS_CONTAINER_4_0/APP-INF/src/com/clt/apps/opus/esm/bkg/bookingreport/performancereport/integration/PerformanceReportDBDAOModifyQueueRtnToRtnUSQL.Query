<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PerformanceReportDBDAOModifyQueueRtnToRtnUSQL">
			<desc><![CDATA[PerformanceReportDBDAOModifyQueueRtnToRtnUSQL]]></desc>
			<sql><![CDATA[
UPDATE BKG_SR_CRNT_RQST X
        SET SR_CRNT_INFO_CD    ='T', /*상수*/
            RTN_TO_RTN_STS_CD  =  RTN_FM_STS_CD,
            RTN_TO_RTN_USR_ID  = RTN_FM_USR_ID,

            BL_DOC_INP_FLG = Decode(RTN_FM_STS_CD,'I','Y',BL_DOC_INP_FLG),
            BL_RT_FLG      = Decode(RTN_FM_STS_CD,'R','Y', BL_RT_FLG),
            BL_AUD_FLG     = Decode(RTN_FM_STS_CD,'A','Y', BL_AUD_FLG),

            CRNT_DT     =   GLOBALDATE_PKG.TIME_CONV_FNC(COM_CONSTANTMGR_PKG.COM_GETBASELOCATIONCODE_FNC(), SYSDATE, GLOBALDATE_PKG.GET_LOCCD_FNC( (SELECT OFC_CD
                                                                                                          FROM   COM_USER
                                                                                                          WHERE  USR_ID = @[usr_id]) )
                                    ),
            CRNT_USR_ID = @[usr_id],
            UPD_DT      = SYSDATE,
            UPD_USR_ID  = @[usr_id]
           
    WHERE SR_KND_CD   = @[src_cd] /*0421의 SRC_CD*/
     AND SR_NO        = @[sr_no]    
     AND BKG_NO       = @[bkg_no]
     AND SR_AMD_TP_CD = @[sr_knd_cd]/* 0421의 SR_KND_CD*/ 
     AND SR_AMD_SEQ = (SELECT NVL(MAX(SR_AMD_SEQ),0)
                        FROM   BKG_SR_CRNT_RQST
                        WHERE SR_KND_CD = X.SR_KND_CD
                        AND SR_AMD_TP_CD = X.SR_AMD_TP_CD
                        AND BKG_NO = X.BKG_NO
                        AND SR_NO = X.SR_NO
                     )			]]></sql>
			<params>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="src_cd" type="12" value="" out="N"/>
				<param name="sr_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="sr_knd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
