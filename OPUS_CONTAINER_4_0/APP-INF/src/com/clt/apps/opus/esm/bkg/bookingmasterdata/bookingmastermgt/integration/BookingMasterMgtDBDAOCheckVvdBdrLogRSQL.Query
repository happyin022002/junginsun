<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingMasterMgtDBDAOCheckVvdBdrLogRSQL">
			<desc><![CDATA[checkVvdBdrLog]]></desc>
			<sql><![CDATA[
#if (${vvd_cd} != '')
	SELECT DECODE(SIGN(COUNT(1)),1,'Y','N') BDR_FLAG
	FROM BKG_VVD_BDR_LOG
	WHERE	1=1
	#if (${vvd_cd} != '') 
		AND   VSL_CD = SUBSTR(@[vvd_cd],1,4)
		AND   SKD_VOY_NO = SUBSTR(@[vvd_cd],5,4)
		AND   SKD_DIR_CD = SUBSTR(@[vvd_cd],9,1)
	#end
	
	#if (${pol_cd} != '') 
		AND	POL_CD = @[pol_cd]
	#end

	#if (${pod_cd} != '') 
		AND	POD_CD = @[pod_cd]
	#end

	#if(${rdo_trunk_feeder} =='T')
		AND (TRNK_BDR_FLG = 'Y' OR TRNK_AUTO_BDR_FLG = 'Y' OR TRNK_MNL_BDR_FLG = 'Y')
	#else
		AND (FDR_BDR_FLG = 'Y' OR FDR_AUTO_BDR_FLG = 'Y' OR FDR_MNL_BDR_FLG = 'Y')
	#end

#else
SELECT 'N' BDR_FLAG FROM DUAL
#end			]]></sql>
			<params>
				<param name="vvd_cd" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
