<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AusCustomsTransmissionDBDAOsearchCntrInfoRSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
SELECT BC.CNTR_NO,
       DECODE(SUBSTR(BC.CNTR_TPSZ_CD, 2, 1), '2', '22', '3', '25', '4', '42', '5', '45', '6', '92', '7', '95', '8', '92', '9', '95', '95') AS CNTR_SZ,
       DECODE(SUBSTR(BC.CNTR_TPSZ_CD, 1, 1), 'D', 'GP', 'R', 'RT', 'O', 'UT', 'S', 'UT', 'F', 'PF', 'A', 'PF', 'P', 'PF', 'T', 'TN', 'GP') AS CNTR_TP,
       (SELECT DECODE(LSTM_CD, 'SH', '1', '2')
          FROM MST_CONTAINER MST
         WHERE MST.CNTR_NO = BC.CNTR_NO) AS CNTR_SUPL_CD,
       (SELECT CASE
                  WHEN BK.BKG_CGO_TP_CD = 'P' THEN 'E'
                  WHEN BC.BB_CGO_FLG = 'Y' THEN 'B'
                  WHEN BC.CNTR_PRT_FLG = 'Y' THEN
                     CASE
                        WHEN BK.RCV_TERM_CD||BK.DE_TERM_CD = 'SS' THEN 'L'
                        ELSE 'X'
                     END
                  ELSE 'F'
               END
          FROM BKG_BOOKING BK
         WHERE BK.BKG_NO = @[bkg_no]) AS CNTR_FM_IND,    --4:EMPTY / 5:FULL
       BC.CNTR_WGT AS CNTR_G_WGT,
       NVL(BC.WGT_UT_CD, 'KGS') AS CNTR_G_WGT_UNIT,
       MC.CNTR_TPSZ_TARE_WGT AS CNTR_T_WGT,
       CASE WHEN MC.CNTR_TPSZ_TARE_WGT IS NOT NULL THEN 'KGM' ELSE '' END AS CNTR_T_WGT_UNIT,
       DECODE(BC.RC_FLG, 'Y', NVL2(RF.CDO_TEMP, RF.FDO_TEMP, RF.CDO_TEMP)) AS CNTR_TMP,
       DECODE(BC.RC_FLG, 'Y', DECODE(RF.CDO_TEMP, NULL, 'FAH', 'CEL')) AS CNTR_TMP_UNIT,    --CEL-CELCIUS, FAH-FAHRENHEIT
       BC.PCK_QTY,    -- for CARLST/UBMREQ
       NVL(CNV.CSTMS_PCK_TP_CD, 'PK') AS PCK_TP_CD    -- for CARLST/UBMREQ

  FROM BKG_CONTAINER BC,
       MDM_CNTR_TP_SZ MC,
       BKG_RF_CGO RF,
       BKG_CSTMS_PCK_TP_CONV CNV

 WHERE BC.BKG_NO = @[bkg_no]
#if (${cntr_no} != '')
   AND BC.CNTR_NO = @[cntr_no]
#end
   AND MC.CNTR_TPSZ_CD(+) = BC.CNTR_TPSZ_CD
   AND BC.BKG_NO = RF.BKG_NO(+)
   AND BC.CNTR_NO = RF.CNTR_NO(+)
   AND (RF.RC_SEQ IS NULL OR
        RF.RC_SEQ = (SELECT MAX(RC_SEQ)
                       FROM BKG_RF_CGO
                      WHERE BKG_NO = BC.BKG_NO
                        AND CNTR_NO = BC.CNTR_NO))
   AND BC.PCK_TP_CD = CNV.PCK_TP_CD(+)
   AND CNV.CNT_CD(+) = 'AU'			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
