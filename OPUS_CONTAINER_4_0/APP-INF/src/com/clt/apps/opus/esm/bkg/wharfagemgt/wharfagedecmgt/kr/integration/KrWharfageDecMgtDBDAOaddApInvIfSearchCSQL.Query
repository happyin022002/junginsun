<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="KrWharfageDecMgtDBDAOaddApInvIfSearchCSQL">
			<desc><![CDATA[i]]></desc>
			<sql><![CDATA[
INSERT INTO AP_INV_IF (
         AP_PGM_NO
       , INV_SEQ
       , TTL_ROW_KNT
       , ROW_KNT
       , HDR_CSR_NO
       , HDR_CSR_TP_CD
       , HDR_INV_DT
       , HDR_INV_TERM_DT
       , HDR_GL_DT
       , HDR_VNDR_NO
       , HDR_CSR_AMT
       , HDR_PAY_AMT
       , HDR_PAY_DT
       , HDR_CSR_CURR_CD
       , HDR_VNDR_TERM_NM
       , HDR_INV_DESC
       , HDR_ATTR_CATE_NM
       , HDR_ATTR_CTNT1
       , HDR_ATTR_CTNT2
       , HDR_ATTR_CTNT3
       , HDR_ATTR_CTNT4
       , HDR_ATTR_CTNT5
       , HDR_ATTR_CTNT6
       , HDR_ATTR_CTNT7
       , HDR_ATTR_CTNT8
       , HDR_ATTR_CTNT9
       , HDR_ATTR_CTNT10
       , HDR_ATTR_CTNT11
       , HDR_ATTR_CTNT12
       , HDR_ATTR_CTNT13
       , HDR_ATTR_CTNT14
       , HDR_ATTR_CTNT15
       , HDR_GLO_ATTR_CTNT1
       , HDR_GLO_ATTR_CTNT2
       , HDR_GLO_ATTR_CTNT3
       , HDR_GLO_ATTR_CTNT4
       , HDR_GLO_ATTR_CTNT5
       , HDR_GLO_ATTR_CTNT6
       , HDR_GLO_ATTR_CTNT7
       , HDR_GLO_ATTR_CTNT8
       , HDR_GLO_ATTR_CTNT9
       , HDR_GLO_ATTR_CTNT10
       , HDR_GLO_ATTR_CTNT11
       , HDR_GLO_ATTR_CTNT12
       , HDR_GLO_ATTR_CTNT13
       , HDR_GLO_ATTR_CTNT14
       , HDR_GLO_ATTR_CTNT15
       , HDR_GLO_ATTR_CTNT16
       , HDR_GLO_ATTR_CTNT17
       , HDR_GLO_ATTR_CTNT18
       , HDR_SRC_CTNT
       , HDR_PAY_MZD_LU_CD
       , HDR_PAY_GRP_LU_CD
       , HDR_COA_CO_CD
       , HDR_COA_RGN_CD
       , HDR_COA_CTR_CD
       , HDR_COA_ACCT_CD
       , HDR_COA_VVD_CD
       , HDR_COA_INTER_CO_CD
       , HDR_COA_FTU_N1ST_CD
       , HDR_COA_FTU_N2ND_CD
       , HDR_PPD_NO
       , HDR_PPD_DTRB_NO
       , HDR_PPD_APLY_AMT
       , HDR_PPD_GL_DT
       , HDR_APRO_FLG
       , HDR_TAX_DECL_FLG
       , HDR_ERR_CSR_NO
       , HDR_IF_FLG
       , HDR_IF_DT
       , HDR_IF_ERR_RSN
       , HDR_PPAY_APLY_FLG
       , HDR_TJ_OFC_CD
       , HDR_ACT_XCH_RT
       , HDR_IMP_ERR_FLG
       , HDR_RCV_ERR_FLG
       , HDR_TAX_CURR_XCH_FLG
       , HDR_USR_EML
       , HDR_IMP_ERR_RSN
       , HDR_RCV_ERR_RSN
       , HDR_FTU_USE_CTNT1
       , HDR_FTU_USE_CTNT2
       , HDR_FTU_USE_CTNT3
       , HDR_FTU_USE_CTNT4
       , HDR_FTU_USE_CTNT5
       , CSR_NO
       , LINE_SEQ
       , LINE_NO
       , LINE_TP_LU_CD
       , INV_AMT
       , INV_DESC
       , INV_TAX_CD
       , DTRB_COA_CO_CD
       , DTRB_COA_RGN_CD
       , DTRB_COA_CTR_CD
       , DTRB_COA_ACCT_CD
       , DTRB_COA_VVD_CD
       , DTRB_COA_INTER_CO_CD
       , DTRB_COA_FTU_N1ST_CD
       , DTRB_COA_FTU_N2ND_CD
       , ATTR_CATE_NM
       , ATTR_CTNT1
       , ATTR_CTNT2
       , ATTR_CTNT3
       , ATTR_CTNT4
       , ATTR_CTNT5
       , ATTR_CTNT6
       , ATTR_CTNT7
       , ATTR_CTNT8
       , ATTR_CTNT9
       , ATTR_CTNT10
       , ATTR_CTNT11
       , ATTR_CTNT12
       , ATTR_CTNT13
       , ATTR_CTNT14
       , ATTR_CTNT15
       , BKG_NO
       , CNTR_TPSZ_CD
       , ACT_VVD_CD
       , PLN_SCTR_DIV_CD
       , SO_CRR_CD
       , YD_CD
       , FTU_USE_CTNT1
       , FTU_USE_CTNT2
       , FTU_USE_CTNT3
       , FTU_USE_CTNT4
       , FTU_USE_CTNT5
       , SND_FLG
       , CRE_DT
       , CRE_USR_ID
--       , EAI_EVNT_DT
--       , ESTM_ERR_RSN
--       , TRSP_SO_TP_CD
--       , SO_OFC_CTY_CD
--       , SO_SEQ
--       , CGO_TP_CD
)
SELECT   CC.AP_PGM_NO AS AP_PGM_NO
       , ROWNUM + (SELECT NVL(MAX(INV_SEQ),0) FROM AP_INV_IF WHERE AP_PGM_NO = CC.AP_PGM_NO) AS INV_SEQ
       , DD.TTL_ROW_KNT AS TTL_ROW_KNT
       , ROWNUM AS ROW_KNT
       -- 이하 AP_INV_HDR에서 가져옴
       , AA.CSR_NO AS HDR_CSR_NO
       , AA.CSR_TP_CD AS HDR_CSR_TP_CD
       , AA.INV_DT AS HDR_INV_DT
       , AA.INV_TERM_DT AS HDR_INV_TERM_DT
       , AA.GL_DT AS HDR_GL_DT
       , AA.VNDR_NO AS HDR_VNDR_NO
       , AA.CSR_AMT AS HDR_CSR_AMT
       , AA.PAY_AMT AS HDR_PAY_AMT
       , AA.PAY_DT AS HDR_PAY_DT
       , AA.CSR_CURR_CD AS HDR_CSR_CURR_CD
       , AA.VNDR_TERM_NM AS HDR_VNDR_TERM_NM
       , AA.INV_DESC AS HDR_INV_DESC
       , AA.ATTR_CATE_NM AS HDR_ATTR_CATE_NM
       , AA.ATTR_CTNT1 AS HDR_ATTR_CTNT1
       , AA.ATTR_CTNT2 AS HDR_ATTR_CTNT2
       , AA.ATTR_CTNT3 AS HDR_ATTR_CTNT3
       , AA.ATTR_CTNT4 AS HDR_ATTR_CTNT4
       , AA.ATTR_CTNT5 AS HDR_ATTR_CTNT5
       , AA.ATTR_CTNT6 AS HDR_ATTR_CTNT6
       , AA.ATTR_CTNT7 AS HDR_ATTR_CTNT7
       , AA.ATTR_CTNT8 AS HDR_ATTR_CTNT8
       , AA.ATTR_CTNT9 AS HDR_ATTR_CTNT9
       , AA.ATTR_CTNT10 AS HDR_ATTR_CTNT10
       , AA.ATTR_CTNT11 AS HDR_ATTR_CTNT11
       , AA.ATTR_CTNT12 AS HDR_ATTR_CTNT12
       , AA.ATTR_CTNT13 AS HDR_ATTR_CTNT13
       , AA.ATTR_CTNT14 AS HDR_ATTR_CTNT14
       , AA.ATTR_CTNT15 AS HDR_ATTR_CTNT15
       , AA.GLO_ATTR_CTNT1 AS HDR_GLO_ATTR_CTNT1
       , AA.GLO_ATTR_CTNT2 AS HDR_GLO_ATTR_CTNT2
       , AA.GLO_ATTR_CTNT3 AS HDR_GLO_ATTR_CTNT3
       , AA.GLO_ATTR_CTNT4 AS HDR_GLO_ATTR_CTNT4
       , AA.GLO_ATTR_CTNT5 AS HDR_GLO_ATTR_CTNT5
       , AA.GLO_ATTR_CTNT6 AS HDR_GLO_ATTR_CTNT6
       , AA.GLO_ATTR_CTNT7 AS HDR_GLO_ATTR_CTNT7
       , AA.GLO_ATTR_CTNT8 AS HDR_GLO_ATTR_CTNT8
       , AA.GLO_ATTR_CTNT9 AS HDR_GLO_ATTR_CTNT9
       , AA.GLO_ATTR_CTNT10 AS HDR_GLO_ATTR_CTNT10
       , AA.GLO_ATTR_CTNT11 AS HDR_GLO_ATTR_CTNT11
       , AA.GLO_ATTR_CTNT12 AS HDR_GLO_ATTR_CTNT12
       , AA.GLO_ATTR_CTNT13 AS HDR_GLO_ATTR_CTNT13
       , AA.GLO_ATTR_CTNT14 AS HDR_GLO_ATTR_CTNT14
       , AA.GLO_ATTR_CTNT15 AS HDR_GLO_ATTR_CTNT15
       , AA.GLO_ATTR_CTNT16 AS HDR_GLO_ATTR_CTNT16
       , AA.GLO_ATTR_CTNT17 AS HDR_GLO_ATTR_CTNT17
       , AA.GLO_ATTR_CTNT18 AS HDR_GLO_ATTR_CTNT18
       , AA.SRC_CTNT AS HDR_SRC_CTNT
       , AA.PAY_MZD_LU_CD AS HDR_PAY_MZD_LU_CD
       , AA.PAY_GRP_LU_CD AS HDR_PAY_GRP_LU_CD
       , AA.COA_CO_CD AS HDR_COA_CO_CD
       , AA.COA_RGN_CD AS HDR_COA_RGN_CD
       , AA.COA_CTR_CD AS HDR_COA_CTR_CD
       , AA.COA_ACCT_CD AS HDR_COA_ACCT_CD
       , AA.COA_VVD_CD AS HDR_COA_VVD_CD
       , AA.COA_INTER_CO_CD AS HDR_COA_INTER_CO_CD
       , AA.COA_FTU_N1ST_CD AS HDR_COA_FTU_N1ST_CD
       , AA.COA_FTU_N2ND_CD AS HDR_COA_FTU_N2ND_CD
       , AA.PPD_NO AS HDR_PPD_NO
       , AA.PPD_DTRB_NO AS HDR_PPD_DTRB_NO
       , AA.PPD_APLY_AMT AS HDR_PPD_APLY_AMT
       , AA.PPD_GL_DT AS HDR_PPD_GL_DT
       , AA.APRO_FLG AS HDR_APRO_FLG
       , AA.TAX_DECL_FLG AS HDR_TAX_DECL_FLG
       , AA.ERR_CSR_NO AS HDR_ERR_CSR_NO
       , AA.IF_FLG AS HDR_IF_FLG
       , AA.IF_DT AS HDR_IF_DT
       , AA.IF_ERR_RSN AS HDR_IF_ERR_RSN
       , AA.PPAY_APLY_FLG AS HDR_PPAY_APLY_FLG
       , AA.TJ_OFC_CD AS HDR_TJ_OFC_CD
       , AA.ACT_XCH_RT AS HDR_ACT_XCH_RT
       , AA.IMP_ERR_FLG AS HDR_IMP_ERR_FLG
       , AA.RCV_ERR_FLG AS HDR_RCV_ERR_FLG
       , AA.TAX_CURR_XCH_FLG AS HDR_TAX_CURR_XCH_FLG
       , AA.USR_EML AS HDR_USR_EML
       , AA.IMP_ERR_RSN AS HDR_IMP_ERR_RSN
       , AA.RCV_ERR_RSN AS HDR_RCV_ERR_RSN
       , AA.FTU_USE_CTNT1 AS HDR_FTU_USE_CTNT1
       , AA.FTU_USE_CTNT2 AS HDR_FTU_USE_CTNT2
       , AA.FTU_USE_CTNT3 AS HDR_FTU_USE_CTNT3
       , AA.FTU_USE_CTNT4 AS HDR_FTU_USE_CTNT4
       , AA.FTU_USE_CTNT5 AS HDR_FTU_USE_CTNT5
       -- 이하 AP_INV_DTRB에서 가져옴
       , BB.CSR_NO AS CSR_NO
       , BB.LINE_SEQ AS LINE_SEQ
       , BB.LINE_NO AS LINE_NO
       , BB.LINE_TP_LU_CD AS LINE_TP_LU_CD
       , BB.INV_AMT AS INV_AMT
       , BB.INV_DESC AS INV_DESC
       , BB.INV_TAX_CD AS INV_TAX_CD
       , BB.DTRB_COA_CO_CD AS DTRB_COA_CO_CD
       , BB.DTRB_COA_RGN_CD AS DTRB_COA_RGN_CD
       , BB.DTRB_COA_CTR_CD AS DTRB_COA_CTR_CD
       , BB.DTRB_COA_ACCT_CD AS DTRB_COA_ACCT_CD
       , BB.DTRB_COA_VVD_CD AS DTRB_COA_VVD_CD
       , BB.DTRB_COA_INTER_CO_CD AS DTRB_COA_INTER_CO_CD
       , BB.DTRB_COA_FTU_N1ST_CD AS DTRB_COA_FTU_N1ST_CD
       , BB.DTRB_COA_FTU_N2ND_CD AS DTRB_COA_FTU_N2ND_CD
       , BB.ATTR_CATE_NM AS ATTR_CATE_NM
       , BB.ATTR_CTNT1 AS ATTR_CTNT1
       , BB.ATTR_CTNT2 AS ATTR_CTNT2
       , BB.ATTR_CTNT3 AS ATTR_CTNT3
       , BB.ATTR_CTNT4 AS ATTR_CTNT4
       , BB.ATTR_CTNT5 AS ATTR_CTNT5
       , BB.ATTR_CTNT6 AS ATTR_CTNT6
       , BB.ATTR_CTNT7 AS ATTR_CTNT7
       , BB.ATTR_CTNT8 AS ATTR_CTNT8
       , BB.ATTR_CTNT9 AS ATTR_CTNT9
       , BB.ATTR_CTNT10 AS ATTR_CTNT10
       , BB.ATTR_CTNT11 AS ATTR_CTNT11
       , BB.ATTR_CTNT12 AS ATTR_CTNT12
       , BB.ATTR_CTNT13 AS ATTR_CTNT13
       , BB.ATTR_CTNT14 AS ATTR_CTNT14
       , BB.ATTR_CTNT15 AS ATTR_CTNT15
       , BB.BKG_NO AS BKG_NO
       , BB.CNTR_TPSZ_CD AS CNTR_TPSZ_CD
       , BB.ACT_VVD_CD AS ACT_VVD_CD
       , BB.PLN_SCTR_DIV_CD AS PLN_SCTR_DIV_CD
       , BB.SO_CRR_CD AS SO_CRR_CD
       , BB.YD_CD AS YD_CD
       , BB.FTU_USE_CTNT1 AS FTU_USE_CTNT1
       , BB.FTU_USE_CTNT2 AS FTU_USE_CTNT2
       , BB.FTU_USE_CTNT3 AS FTU_USE_CTNT3
       , BB.FTU_USE_CTNT4 AS FTU_USE_CTNT4
       , BB.FTU_USE_CTNT5 AS FTU_USE_CTNT5
       , 'Y' AS SND_FLG
       , SYSDATE AS CRE_DT
       , @[cre_usr_id] AS CRE_USR_ID
  FROM AP_INV_HDR AA, AP_INV_DTRB BB,
       (SELECT 'ESMBKGXXX'||TO_CHAR(SYSDATE, 'YYYYMMDD') AS AP_PGM_NO
          FROM DUAL) CC,
       (SELECT COUNT(CSR_NO) TTL_ROW_KNT FROM AP_INV_DTRB WHERE CSR_NO = @[csr_no]) DD
 WHERE AA.CSR_NO = @[csr_no]
   AND BB.CSR_NO = AA.CSR_NO			]]></sql>
			<params>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="csr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
