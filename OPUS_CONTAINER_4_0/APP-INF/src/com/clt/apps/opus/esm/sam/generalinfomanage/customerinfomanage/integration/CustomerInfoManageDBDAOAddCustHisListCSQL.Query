<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CustomerInfoManageDBDAOAddCustHisListCSQL">
			<desc><![CDATA[AddCustHisList]]></desc>
			<sql><![CDATA[
INSERT INTO SAM_CUST_HIS
            (
                CUST_CNT_CD,
                CUST_SEQ,
                CUST_HIS_SEQ,
                CNG_ITM_CD,
                OLD_VAL_DESC,
                NEW_VAL_DESC,
                UPD_USR_ID,
                UPD_DT,
                CRE_USR_ID,
                CRE_DT
            )
     VALUES
            (
                SUBSTR(@[cust_cd],1,2),
                TO_NUMBER(SUBSTR(@[cust_cd],3,6)),                
                NVL((SELECT 
                            MAX(CUST_HIS_SEQ)+1
                       FROM
                            SAM_CUST_HIS
                      WHERE CUST_CNT_CD = SUBSTR(@[cust_cd],1,2)
                        AND CUST_SEQ = TO_NUMBER(SUBSTR(@[cust_cd],3,6))
                     GROUP BY CUST_CNT_CD,CUST_SEQ ),1
                ),             
                @[a_cng_itm_cd],     
            
				#if(${a_cng_itm_cd} == '4')                   
                DECODE(@[a_old_val_desc],'B','BCO','N','Non-BCO',@[a_old_val_desc]),
                DECODE(@[a_new_val_desc],'B','BCO','N','Non-BCO',@[a_new_val_desc]),
                #end
                
				#if(${a_cng_itm_cd} != '4')                   
                DECODE(@[a_old_val_desc],'A','ACTIVE','I','INACTIVE','C','COMPANY','P','PRIVATE',@[a_old_val_desc]),
                DECODE(@[a_new_val_desc],'A','ACTIVE','I','INACTIVE','C','COMPANY','P','PRIVATE',@[a_new_val_desc]),
                #end
                
                @[user_id],
                SYSDATE,
                @[user_id],
                SYSDATE                                      
            )			]]></sql>
			<params>
				<param name="cust_cd" type="12" value="" out="N"/>
				<param name="a_cng_itm_cd" type="12" value="" out="N"/>
				<param name="a_old_val_desc" type="12" value="" out="N"/>
				<param name="a_new_val_desc" type="12" value="" out="N"/>
				<param name="user_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
