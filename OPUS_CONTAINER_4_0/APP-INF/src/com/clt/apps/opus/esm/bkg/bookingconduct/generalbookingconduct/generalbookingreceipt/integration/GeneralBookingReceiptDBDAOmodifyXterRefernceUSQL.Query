<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOmodifyXterRefernceUSQL">
			<desc><![CDATA[modifyXterRefernce]]></desc>
			<sql><![CDATA[
update bkg_reference
   set CUST_REF_NO_CTNT = (select decode(@[no],  1, mst.xter_rqst_no --EBRF, ESRF
                                        , 2, DECODE(mst.xter_sndr_id,'SEANACCS',mst.cust_ref_no,mst.SHPR_REF_NO)  --EBSH, ESSH
                                        , mst.FWRD_REF_NO     --EBFF, ESFF
                                        ) cust_ref_no
                        from bkg_xter_rqst_mst mst
                       where xter_sndr_id = @[sender_id]
                         and xter_rqst_no = @[rqst_no]
                         and xter_rqst_seq= @[rqst_seq])
        , UPD_USR_ID = @[usr_id]
        , UPD_DT = sysdate
 where bkg_no = @[bkg_no]
   and bkg_ref_tp_cd = decode(@[doc_tp_cd], 'B', decode(@[no], 1, 'EBRF', 2, 'EBSH', 'EBFF')
                                           , decode(@[no], 1, 'ESRF', 2, 'ESSH', 'ESFF'))			]]></sql>
			<params>
				<param name="no" type="12" value="" out="N"/>
				<param name="sender_id" type="12" value="" out="N"/>
				<param name="rqst_no" type="12" value="" out="N"/>
				<param name="rqst_seq" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="doc_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
