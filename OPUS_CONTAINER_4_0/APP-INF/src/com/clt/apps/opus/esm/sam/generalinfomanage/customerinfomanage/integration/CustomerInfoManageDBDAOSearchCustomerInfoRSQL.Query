<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CustomerInfoManageDBDAOSearchCustomerInfoRSQL">
			<desc><![CDATA[SearchCustomerInfo]]></desc>
			<sql><![CDATA[
SELECT     CUST_LGL_ENG_NM,
           OFC_CD,
           CUST_STS_CD,
           SREP_CD,
           CNTR_CUST_TP_CD,
           INDIV_CORP_DIV_CD,
           LOC_CD,
           CUST_RGST_NO,
           KEY_ACCT_FLG,
           CUST_GRP_ID,
           MLT_TRD_ACCT_FLG,
           A.CRE_USR_ID,
           OFC_ENG_NM,
           SREP_NM,
           B.PHN_NO,
           B.FAX_NO,
           B.CUST_EML,
           BZET_ADDR,
           USR_NM,
           CRE_OFC_CD ,
    	   CTS_NO,
    	   B.INTL_PHN_NO,
    	   B.INTL_FAX_NO,
    	   CUST_GRP_NM,
    	   MAX_ADR_SEQ AS CUST_CNTC_PNT_SEQ
FROM (
    SELECT C.CUST_CNT_CD,C.CUST_SEQ,
           C.CUST_LGL_ENG_NM,
           C.OFC_CD,
           C.CUST_STS_CD,
           C.SREP_CD,
           C.CNTR_CUST_TP_CD,
           C.INDIV_CORP_DIV_CD,
           C.LOC_CD,
           C.CUST_RGST_NO,
           C.KEY_ACCT_FLG,
           C.CUST_GRP_ID,
           C.MLT_TRD_ACCT_FLG,
           C.CRE_USR_ID,
           O.OFC_ENG_NM,
           S.SREP_NM,
           AD.BZET_ADDR,
           US.USR_NM,
           C.OFC_CD AS CRE_OFC_CD,
    	   C.CTS_NO,
    	   PE.CUST_GRP_NM,
    	   (SELECT MAX(CNP.CUST_CNTC_PNT_SEQ) FROM MDM_CUST_CNTC_PNT CNP WHERE CNP.CUST_CNT_CD = C.CUST_CNT_CD AND CNP.CUST_SEQ = C.CUST_SEQ) MAX_ADR_SEQ
    FROM MDM_CUSTOMER C, MDM_ORGANIZATION O, MDM_SLS_REP S,MDM_CUST_ADDR AD, COM_USER US, MDM_CUST_PERF_GRP PE
    WHERE C.OFC_CD    = O.OFC_CD
    AND C.SREP_CD     = S.SREP_CD
    AND C.CUST_CNT_CD = AD.CUST_CNT_CD(+) 
    AND C.CUST_SEQ    = AD.CUST_SEQ(+)
    AND C.CRE_USR_ID  = US.USR_ID(+)
    AND C.CUST_GRP_ID = PE.CUST_GRP_ID(+)
    AND AD.PRMRY_CHK_FLG(+) = 'Y'
    AND AD.ADDR_TP_CD(+)    = '1'
    AND C.CUST_CNT_CD       = SUBSTR(@[cust_cd],1,2)
    AND C.CUST_SEQ          = TO_NUMBER(SUBSTR(@[cust_cd],3,6))
) A,MDM_CUST_CNTC_PNT B
WHERE A.CUST_CNT_CD = B.CUST_CNT_CD(+)
  AND A.CUST_SEQ    = B.CUST_SEQ(+)
  AND A.MAX_ADR_SEQ = B.CUST_CNTC_PNT_SEQ(+)			]]></sql>
			<params>
				<param name="cust_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
