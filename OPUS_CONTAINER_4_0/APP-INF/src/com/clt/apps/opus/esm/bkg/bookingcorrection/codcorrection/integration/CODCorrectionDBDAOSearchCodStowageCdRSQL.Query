<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CODCorrectionDBDAOSearchCodStowageCdRSQL">
			<desc><![CDATA[해당 cntr의 stowage를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT cntr.cntr_no, BP.BAY||BP.ROWW||BP.TIER cntr_stwg_no
  FROM BAY_PLAN BP, bkg_container cntr, VSK_VSL_PORT_SKD skd
 WHERE cntr.bkg_no  = @[bkg_no]
   AND CNTR.CNTR_NO = BP.ID 
   and BP.VSL_CD    = substr(@[rhnd_vvd], 1, 4)
   AND BP.VOY_NO    = substr(@[rhnd_vvd], 5, 4)
   AND BP.DIR_CD    = substr(@[rhnd_vvd], 9, 1)
   AND Bp.VSL_CD    = skd.VSL_CD
   AND Bp.VOY_NO    = skd.SKD_VOY_NO
   AND Bp.DIR_CD    = skd.SKD_DIR_CD
   AND Bp.PORT_CD   = skd.VPS_PORT_CD
   AND Bp.PLAN_TYPE = 'F'
   AND skd.CLPT_SEQ <= (SELECT min(skd.CLPT_SEQ)
                          FROM VSK_VSL_PORT_SKD skd
                         WHERE skd.VSL_CD       = substr(@[rhnd_vvd], 1, 4)
                           AND skd.SKD_VOY_NO   = substr(@[rhnd_vvd], 5, 4)
                           AND skd.SKD_DIR_CD   = substr(@[rhnd_vvd], 9, 1)
                           AND skd.yd_cd        = @[rhnd_yd_cd])			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="rhnd_vvd" type="12" value="" out="N"/>
				<param name="rhnd_yd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
