<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationBLDBDAOHblCustByXterUSQL">
			<desc><![CDATA[eBKG에서 Hbl customer 정보를 insert/update한다.]]></desc>
			<sql><![CDATA[
#if (${ca_flg} == 'Y') 
MERGE INTO BKG_HBL_CUST_HIS A
USING DUAL ON (a.BKG_NO=@[bkg_no] AND A.CORR_NO='TMP0000001' AND A.HBL_SEQ=@[hbl_seq] AND A.BKG_CUST_TP_CD=@[bkg_cust_tp_cd])
WHEN MATCHED THEN
	UPDATE SET CUST_NM = @[cust_nm]
	,	CUST_ADDR = @[cust_addr]
	,	UPD_USR_ID = @[upd_usr_id]
	,	UPD_DT = sysdate
WHEN NOT MATCHED THEN
	INSERT (BKG_NO
	,      CORR_NO
	,      HBL_SEQ
	,  	   BKG_CUST_TP_CD
	,      CUST_CNT_CD
	,  	   CUST_SEQ
	,      CUST_NM
	,      CUST_ADDR
	,      CRE_USR_ID
	,      CRE_DT
	,      UPD_USR_ID
	,      UPD_DT
	)
	VALUES(@[bkg_no]
	,   'TMP0000001'
	,	@[hbl_seq]
	,	@[bkg_cust_tp_cd]
	,	''
	,	''
	,	@[cust_nm]
	,	@[cust_addr]
	,	@[cre_usr_id]
	,	sysdate
	,	@[cre_usr_id]
	,	sysdate
	)
#else 
MERGE INTO BKG_HBL_CUST A
USING DUAL ON (a.BKG_NO = @[bkg_no] AND	a.HBL_SEQ = @[hbl_seq] AND	a.BKG_CUST_TP_CD = @[bkg_cust_tp_cd])
WHEN MATCHED THEN
	UPDATE SET CUST_NM = @[cust_nm]
	,	CUST_ADDR = @[cust_addr]
	,	UPD_USR_ID = @[upd_usr_id]
	,	UPD_DT = sysdate
WHEN NOT MATCHED THEN
	INSERT (BKG_NO
	,      HBL_SEQ
	,      BKG_CUST_TP_CD
	,      CUST_CNT_CD
	,      CUST_SEQ
	,      CUST_NM
	,      CUST_ADDR
	,      CRE_USR_ID
	,      CRE_DT
	,      UPD_USR_ID
	,      UPD_DT
	)
	VALUES(@[bkg_no]
	,   @[hbl_seq]
	,	@[bkg_cust_tp_cd]
	,	''
	,	''
	,	@[cust_nm]
	,	@[cust_addr]
	,	@[cre_usr_id]
	,	sysdate
	,	@[cre_usr_id]
	,	sysdate
	)
#end			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="hbl_seq" type="12" value="" out="N"/>
				<param name="bkg_cust_tp_cd" type="12" value="" out="N"/>
				<param name="cust_nm" type="12" value="" out="N"/>
				<param name="cust_addr" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
