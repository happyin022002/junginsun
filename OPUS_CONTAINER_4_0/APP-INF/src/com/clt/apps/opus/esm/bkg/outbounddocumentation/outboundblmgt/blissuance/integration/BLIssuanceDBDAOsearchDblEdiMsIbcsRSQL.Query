<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLIssuanceDBDAOsearchDblEdiMsIbcsRSQL">
			<desc><![CDATA[select]]></desc>
			<sql><![CDATA[
SELECT FF
FROM (
SELECT 
	   'MS_IBCS_NM1:'   || BKG_TOKEN_NL_FNC(NVL(CUST_NM,''), 1, '')   || CHR(10)||
       'MS_IBCS_NM2:'   || BKG_TOKEN_NL_FNC(NVL(CUST_NM,''), 2, '')   || CHR(10)||
       'MS_IBCS_ADDR1:' || BKG_TOKEN_NL_FNC(NVL(CUST_ADDR,''), 1, '') || CHR(10)||
       'MS_IBCS_ADDR2:' || BKG_TOKEN_NL_FNC(NVL(CUST_ADDR,''), 2, '') || CHR(10)||
       'MS_IBCS_ADDR3:' || BKG_TOKEN_NL_FNC(NVL(CUST_ADDR,''), 3, '') || CHR(10)||
       'MS_CUST_CD:'    || CUST_SEQ  || CHR(10)||
       'MS_CITY_NM:'    || ''  || CHR(10)||
       'MS_STAT_CD:'    || STE_CD  || CHR(10)||
       'MS_ZIP_CD:'    || PST_CTNT  || CHR(10)||
       'MS_CNT_CD:'    || CNT_CD  
        || CHR(10) AS FF
,ROW_NUMBER() OVER(PARTITION BY MST.XTER_SNDR_ID,MST.XTER_RQST_NO ORDER BY MST.UPLD_DT DESC) RNUM 
,CUST.*
FROM   BKG_XTER_RQST_MST MST , BKG_XTER_CUST CUST 
WHERE MST.BKG_NO = @[bkg_no]
AND MST.XTER_RQST_NO = CUST.XTER_RQST_NO
AND MST.XTER_RQST_SEQ = CUST.XTER_RQST_SEQ
AND MST.XTER_SNDR_ID = CUST.XTER_SNDR_ID
AND BKG_UPLD_STS_CD ='F'
AND XTER_CUST_TP_CD ='MS'
ORDER BY MST.XTER_RQST_NO DESC
) FF
WHERE RNUM =1			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
