<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TransferOrderIssueDBDAOSearchEurTroDtlRSQL">
			<desc><![CDATA[TransferOrderIssueDBDAOSearchEurTroDtlRSQL]]></desc>
			<sql><![CDATA[
SELECT  BKG_NO
        , IO_BND_CD
        , TRO_SEQ
        , TRO_SUB_SEQ
        , DOR_ADDR_TP_CD
		, CASE WHEN @[io_bnd_cd] = 'O' AND LOC_CD IS NULL THEN (SELECT POR_CD FROM BKG_BOOKING BK WHERE BKG_NO = @[bkg_no])
		  ELSE LOC_CD 
		  END DOR_LOC_CD
		, CASE WHEN @[io_bnd_cd] = 'O' AND ZN_CD IS NULL THEN (SELECT SUBSTR(REP_ZN_CD,6,2) FROM MDM_LOCATION MDM, BKG_BOOKING BK WHERE BK.BKG_NO  = @[bkg_no] AND BK.POR_CD = MDM.LOC_CD ) 
		  ELSE SUBSTR(ZN_CD, 6, 2)
		  END ZN_CD
        , LOD_REF_NO
        , DOR_ZIP_ID DOR_PST_NO
        , SUBSTR(DOR_ADDR,  1, 50) DOR_ADDR_1
        , SUBSTR(DOR_ADDR, 51, 50) DOR_ADDR_2
        , SUBSTR(DOR_ADDR, 101, 50) DOR_ADDR_3
        , SUBSTR(DOR_ADDR, 151, 50) DOR_ADDR_4
        , TO_CHAR(ARR_DT, 'YYYY-MM-DD') ARR_DT
        , TO_CHAR(ARR_DT, 'HH24:MI') ARR_DT_HHMI
        , CNTC_PSON_NM
        , CNTC_PHN_NO
        , CNTC_EML
  FROM BKG_EUR_TRO_DTL
 WHERE BKG_NO = @[bkg_no]
   AND IO_BND_CD = @[io_bnd_cd]			]]></sql>
			<params>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
