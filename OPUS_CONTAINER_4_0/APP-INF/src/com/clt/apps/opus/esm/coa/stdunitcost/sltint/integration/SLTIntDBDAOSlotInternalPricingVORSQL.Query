<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SLTIntDBDAOSlotInternalPricingVORSQL">
			<desc><![CDATA[@20140916.SJH : COA_SLT_INTER_PRC_UT_COST 조회]]></desc>
			<sql><![CDATA[
SELECT RANK() OVER (ORDER BY SLAN_CD||TRD_CD||SUB_TRD_CD||FM_CNT_CD||FM_PORT_CD||TO_CNT_CD||TO_PORT_CD||CGO_TP_CD) GRP
  	    ,MAX(RT_SEQ) OVER(PARTITION BY SLAN_CD||TRD_CD||SUB_TRD_CD||FM_CNT_CD||FM_PORT_CD||TO_CNT_CD||TO_PORT_CD||CGO_TP_CD) MAXSEQ
  	    ,RT_SEQ
  	    ,RT_SEQ                    RT_SEQ_ORG
        ,SLAN_CD
        ,TRD_CD
  	    ,SUB_TRD_CD
  	    ,FM_CNT_CD
  	    ,DECODE(TRIM(FM_PORT_CD), 'X', '', FM_PORT_CD) FM_PORT_CD
  	    ,TO_CNT_CD
  	    ,DECODE(TRIM(TO_PORT_CD), 'X', '', TO_PORT_CD) TO_PORT_CD	     
  	    ,CGO_TP_CD
  	    ,NVL(CNTR_20FT_RT_AMT,0)   CNTR_20FT_RT_AMT
        ,NVL(CNTR_40FT_RT_AMT,0)   CNTR_40FT_RT_AMT
        ,NVL(CNTR_HC_RT_AMT,0)     CNTR_HC_RT_AMT
        ,NVL(CNTR_45FT_RT_AMT,0)   CNTR_45FT_RT_AMT
        ,EFF_FM_YRMON
        ,EFF_TO_YRMON
        ,BAT_FLG								--SJH.20141216.ADD
   FROM COA_SLT_INTER_PRC_UT_COST 
  WHERE 1=1
    AND SLAN_CD    = NVL(@[f_slane_cd], SLAN_CD)
    AND TRD_CD     = NVL(@[f_trd_cd], TRD_CD)
    AND SUB_TRD_CD = NVL(@[f_sub_trd_cd], SUB_TRD_CD)
    #if (${f_fm_port_cd} != '')
      #if (${f_fm_len} == '2')
      AND FM_CNT_CD LIKE @[f_fm_port_cd]||'%'
      #else
      AND FM_PORT_CD LIKE @[f_fm_port_cd]||'%'
      #end
    #end
    #if (${f_to_port_cd} != '')
      #if (${f_to_len} == '2')
      AND TO_CNT_CD LIKE @[f_to_port_cd]||'%'
      #else
      AND TO_PORT_CD LIKE @[f_to_port_cd]||'%'
      #end
    #end
    AND CGO_TP_CD  = NVL(@[f_cgo_tp_cd], CGO_TP_CD)
    #if (${f_eff_fm_yrmon} != '')
    AND NVL(EFF_TO_YRMON,'999912') >= @[f_eff_fm_yrmon]		--SJH.20141110.MOD, 20141224.MOD : NULL가능
    #end
    AND DELT_FLG = 'N'
  ORDER BY SLAN_CD, TRD_CD, SUB_TRD_CD, FM_PORT_CD, FM_CNT_CD, TO_PORT_CD, TO_CNT_CD, CGO_TP_CD, EFF_FM_YRMON, EFF_TO_YRMON, RT_SEQ			]]></sql>
			<params>
				<param name="f_slane_cd" type="12" value="" out="N"/>
				<param name="f_trd_cd" type="12" value="" out="N"/>
				<param name="f_sub_trd_cd" type="12" value="" out="N"/>
				<param name="f_fm_port_cd" type="12" value="" out="N"/>
				<param name="f_to_port_cd" type="12" value="" out="N"/>
				<param name="f_cgo_tp_cd" type="12" value="" out="N"/>
				<param name="f_eff_fm_yrmon" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
