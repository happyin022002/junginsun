<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOEBookingXterCmShipmentRSQL">
			<desc><![CDATA[XterCmShipment]]></desc>
			<sql><![CDATA[
SELECT
  XTER_SNDR_ID,
  XTER_RQST_NO,
  	XTER_RQST_SEQ,
  	CNTR_NO,
  	CNTR_MF_SEQ,
  	PCK_QTY,
  	PCK_TP_CD,
  	CNTR_MF_WGT,
  	WGT_UT_CD,
  	MEAS_QTY,
  	MEAS_UT_CD,
  	 MK_DESC,
  	CMDT_DESC,
  	CNTR_MF_DTL_DESC,
  	HAMO_TRF_CD,
  	NCM_NO,
  	CMDT_HS_CD,
  	DCGO_SEQ,
  	CNTR_SEQ,
   (SELECT PO_NO FROM BKG_XTER_CNTR CNTR WHERE  A.XTER_RQST_NO = CNTR.XTER_RQST_NO AND CNTR.CNTR_SEQ =  A.CNTR_SEQ AND A.XTER_RQST_SEQ = CNTR.XTER_RQST_SEQ 
   AND CNTR.XTER_SNDR_ID = A.XTER_SNDR_ID AND CNTR.CNTR_NO = A.CNTR_NO) AS PO_NO,
  	(SELECT XTER_CNTR_SEAL_NO FROM BKG_XTER_CNTR_SEAL_NO CNTR WHERE  A.XTER_RQST_NO = CNTR.XTER_RQST_NO AND CNTR.CNTR_SEQ =  A.CNTR_SEQ AND A.XTER_RQST_SEQ = CNTR.XTER_RQST_SEQ 
   AND CNTR.XTER_SNDR_ID = A.XTER_SNDR_ID AND CNTR_SEAL_SEQ = 1 AND CNTR.CNTR_NO = A.CNTR_NO) AS CNTR_SEAL_NO1 ,
    	(SELECT XTER_CNTR_SEAL_NO FROM BKG_XTER_CNTR_SEAL_NO CNTR WHERE  A.XTER_RQST_NO = CNTR.XTER_RQST_NO AND CNTR.CNTR_SEQ =  A.CNTR_SEQ AND A.XTER_RQST_SEQ = CNTR.XTER_RQST_SEQ 
   AND CNTR.XTER_SNDR_ID = A.XTER_SNDR_ID AND CNTR_SEAL_SEQ = 2 AND CNTR.CNTR_NO = A.CNTR_NO) AS CNTR_SEAL_NO2
  FROM (
SELECT 
    MK.XTER_SNDR_ID,
  	MK.XTER_RQST_NO,
  	MK.XTER_RQST_SEQ,
  	MK.CNTR_NO,
  	MK.MK_DESC_SEQ AS CNTR_MF_SEQ,
  	MK.PCK_QTY,
  	MK.PCK_TP_CD,
  	MK.CNTR_MF_WGT,
  	MK.WGT_UT_CD,
  	MK.MEAS_QTY,
  	MK.MEAS_UT_CD,
  	MK.CNTR_MF_MK_DESC AS MK_DESC,
  	MK.CNTR_MF_DESC AS CMDT_DESC,
  	MK.CNTR_MF_DTL_DESC,
  	MK.HAMO_TRF_CTNT AS HAMO_TRF_CD,
  	MK.NCM_NO,
  	MK.CMDT_HS_CD,
  	MK.DCGO_SEQ,
  	MK.CNTR_SEQ
FROM BKG_XTER_CNTR_MK_DESC MK
WHERE MK.XTER_SNDR_ID = @[sender_id]
AND MK.XTER_RQST_NO   = @[rqst_no]
AND MK.XTER_RQST_SEQ  = @[rqst_seq]
GROUP BY
	MK.XTER_RQST_NO ,
  	MK.XTER_RQST_SEQ ,
  	MK.CNTR_NO ,
  	MK.MK_DESC_SEQ ,
  	MK.PCK_QTY ,
  	MK.PCK_TP_CD ,
  	MK.CNTR_MF_WGT ,
  	MK.WGT_UT_CD ,
  	MK.MEAS_QTY ,
  	MK.MEAS_UT_CD ,
  	MK.CNTR_MF_MK_DESC ,
  	MK.CNTR_MF_DESC ,
  	MK.CNTR_MF_DTL_DESC ,
  	MK.HAMO_TRF_CTNT ,
  	MK.NCM_NO ,
  	MK.CMDT_HS_CD ,
  	MK.DCGO_SEQ ,
  	MK.CNTR_SEQ,
    MK.XTER_SNDR_ID
    ) A
ORDER BY CNTR_SEQ,CNTR_MF_SEQ			]]></sql>
			<params>
				<param name="sender_id" type="12" value="" out="N"/>
				<param name="rqst_no" type="12" value="" out="N"/>
				<param name="rqst_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
