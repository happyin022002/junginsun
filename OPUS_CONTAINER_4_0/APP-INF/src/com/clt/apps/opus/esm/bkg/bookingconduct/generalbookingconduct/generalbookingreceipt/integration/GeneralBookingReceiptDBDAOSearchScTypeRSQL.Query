<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOSearchScTypeRSQL">
			<desc><![CDATA[Sc Type 조회]]></desc>
			<sql><![CDATA[
select distinct PRC_CTRT_CUST_TP_CD real_cust_tp_cd
  from pri_sp_hdr hdr
        , pri_sp_mn main
        , pri_sp_ctrt_cust_tp cust
		, (
		   SELECT NVL((
                       SELECT RT_APLY_DT
#if (${ca_flg}== 'Y')
                         FROM BKG_RT_HIS RT
                        WHERE BKG_NO = @[bkg_no]
                          AND CORR_NO = 'TMP0000001'
#else
                         FROM BKG_RATE R
                        WHERE BKG_NO = @[bkg_no]
#end
                          AND RT_APLY_DT IS NOT NULL
                      ),(
		               SELECT SYSDATE FROM DUAL
                      )
                  ) APPL_DT
             FROM DUAL
          ) APPL_DT
 where hdr.prop_no = main.prop_no
   and main.prop_no = cust.prop_no
   and main.amdt_seq = cust.amdt_seq
   and MAIN.eff_dt - 0.0001 < APPL_DT.APPL_DT
   AND MAIN.exp_dt + 0.9999 > APPL_DT.APPL_DT
   and prop_sts_cd = 'F'
   and hdr.sc_no = @[sc_no]
   and rownum = 1			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
