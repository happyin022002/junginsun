<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CLLCDLManifestDBDAOsearchGeneralInfoRSQL">
			<desc><![CDATA[searchGeneralInfo]]></desc>
			<sql><![CDATA[
SELECT	
	'{HEADER' ||CHR(10)||
	'CLL_QUAL:'||'6OB'||CHR(10)||
	'REF_NUM:'||@[flat_file_ref_no]||CHR(10)||
	'FUNC_CD:'||DECODE(@[in_edi_msg_tp],'ORIGINAL',9,'REPLACE',5,'CANCEL',1,'CHANGE',4,'ADDITION',2)||CHR(10)|| 
	'RESP_CD:'||'AB'||CHR(10)||
	'}HEADER'||CHR(10)||
	'{VVD_INFO'||CHR(10)||
	'TRANS_QUAL:'||'20'||CHR(10)||
	'TMNL_VSL:'||VSL.ATTR_CTNT2||CHR(10)||
	'SVC_VVD:'||SUBSTR(VSL.ATTR_CTNT2,-3)||SUBSTR((SELECT OB_CSSM_VOY_NO FROM VSK_VSL_PORT_SKD 
											WHERE VSL_CD = @[in_vsl_cd] AND SKD_VOY_NO = @[in_skd_voy_no] AND SKD_DIR_CD = @[in_skd_dir_cd]
											AND VPS_PORT_CD = @[in_pol_cd] AND CLPT_IND_SEQ = 1),-4)||CHR(10)||
	'CARRIER_CD:'||'NYK'||CHR(10)||
	'CD_QUAL:'||'172'||CHR(10)||
	'CD_RESP:'||'20'||CHR(10)||
	'VSL_NM:'||SUBSTR(VSL.ATTR_CTNT2,1,4)||SUBSTR((SELECT VSL_ENG_NM FROM MDM_VSL_CNTR WHERE VSL_CD = @[in_vsl_cd]),1,13)||CHR(10)||
	'{POL_INFO'||CHR(10)||
	'POL_QUAL:'||'9'||CHR(10)||
	'TMNL_CD:'||NVL(POL.UN_LOC_CD, NVL(POL.LOC_CD,' '))||CHR(10)||
	'TMNL_NM:'||(SELECT ATTR_CTNT3 FROM BKG_CSTMS_CD_CONV_CTNT WHERE CNT_CD = 'KR' AND CSTMS_DIV_ID = 'KR_CLL_EDI_SND_LIST' AND ATTR_CTNT1 = @[in_rcv_id])||CHR(10)||
	'}POL_INFO'||CHR(10)||
	'}VVD_INFO'||CHR(10)||
	'{PARTY_INFO'||CHR(10)||
	'PARTY_QUAL:'||'MR'||CHR(10)||
	'PARTY_NM:'||@[in_rcv_id]||CHR(10)||
	'}PARTY_INFO'||CHR(10)||
	'{PARTY_INFO'||CHR(10)||
	'PARTY_QUAL:'||'MS'||CHR(10)||
	'PARTY_NM:'||'NYKLE010'||CHR(10)||
	'}PARTY_INFO'||CHR(10)||
	'{PARTY_INFO'||CHR(10)||
	'PARTY_QUAL:'||'CA'||CHR(10)||
	'PARTY_NM:'||'NYK'||CHR(10)||
	'}PARTY_INFO'||CHR(10) GENERAL_INFO
FROM	
	BKG_CSTMS_TML_KR_CLL CLL,
	MDM_LOCATION POL,
	BKG_CSTMS_CD_CONV_CTNT VSL
WHERE CLL.CNTR_LIST_NO = @[in_vsl_cd]||SUBSTR(@[in_skd_voy_no],2,3)||@[in_skd_dir_cd]||SUBSTR(@[in_pol_cd],3,3)
AND VSL.ATTR_CTNT1 = CLL.VSL_CD
AND VSL.CNT_CD = 'KR' 
AND VSL.CSTMS_DIV_ID = 'KTML_CD' 
AND VSL.DELT_FLG = 'N'
AND CLL.BKG_POL_CD = POL.LOC_CD
AND NVL(CLL.POL_YD_CD,' ') LIKE @[in_pol_yd_cd]||'%'
AND ROWNUM = 1			]]></sql>
			<params>
				<param name="flat_file_ref_no" type="12" value="" out="N"/>
				<param name="in_edi_msg_tp" type="12" value="" out="N"/>
				<param name="in_vsl_cd" type="12" value="" out="N"/>
				<param name="in_skd_voy_no" type="12" value="" out="N"/>
				<param name="in_skd_dir_cd" type="12" value="" out="N"/>
				<param name="in_pol_cd" type="12" value="" out="N"/>
				<param name="in_rcv_id" type="12" value="" out="N"/>
				<param name="in_pol_yd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
