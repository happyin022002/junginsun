<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOAddMrnUcrNoCSQL">
			<desc><![CDATA[MRN UCR NO 저장]]></desc>
			<sql><![CDATA[
#if (${ca_flg} == 'Y')
INSERT INTO BKG_REF_HIS
(
    BKG_NO
	,CORR_NO
    ,REF_SEQ
    ,BKG_REF_TP_CD
    ,CUST_REF_NO_CTNT
    ,CNTR_NO
    ,CRE_USR_ID
    ,CRE_DT
    ,UPD_USR_ID
    ,UPD_DT
    ,REF_NO
)VALUES
(
    @[bkg_no]
	,'TMP0000001'
    ,(SELECT NVL(MAX(REF_SEQ)+1,1) FROM BKG_REF_HIS WHERE BKG_NO = @[bkg_no] AND CORR_NO = 'TMP0000001')
    ,@[bkg_ref_tp_cd]
    ,@[cust_ref_no_ctnt]
    ,@[cntr_no]
    ,@[cre_usr_id]
    ,sysdate
    ,@[upd_usr_id]
    ,sysdate
	,@[ref_no]
)
#else
INSERT INTO BKG_REFERENCE
(
    BKG_NO
    ,REF_SEQ
    ,BKG_REF_TP_CD
    ,CUST_REF_NO_CTNT
    ,CNTR_NO
    ,CRE_USR_ID
    ,CRE_DT
    ,UPD_USR_ID
    ,UPD_DT
    ,REF_NO
)VALUES
(
    @[bkg_no]
    ,(SELECT NVL(MAX(REF_SEQ)+1,1) FROM BKG_REFERENCE WHERE BKG_NO = @[bkg_no])
    ,@[bkg_ref_tp_cd]
    ,@[cust_ref_no_ctnt]
    ,@[cntr_no]
    ,@[cre_usr_id]
    ,sysdate
    ,@[upd_usr_id]
    ,sysdate
	,@[ref_no]
)
#end
			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="bkg_ref_tp_cd" type="12" value="" out="N"/>
				<param name="cust_ref_no_ctnt" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="ref_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
