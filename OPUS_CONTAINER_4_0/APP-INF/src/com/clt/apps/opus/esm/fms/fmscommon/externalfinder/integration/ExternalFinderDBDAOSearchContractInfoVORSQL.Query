<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ExternalFinderDBDAOSearchContractInfoVORSQL">
			<desc><![CDATA[FMS Contract Info Search]]></desc>
			<sql><![CDATA[
SELECT (SELECT INTG_CD_VAL_DP_DESC
          FROM COM_INTG_CD_DTL CD
         WHERE INTG_CD_ID = 'CD01513'
           AND INTG_CD_VAL_CTNT = A.FLET_CTRT_TP_CD) FLET_CTRT_TP_NM
     , VNDR_SEQ
     , (SELECT VNDR_LGL_ENG_NM
          FROM MDM_VENDOR
         WHERE VNDR_SEQ = A.VNDR_SEQ
           AND DELT_FLG = 'N') VNDR_LGL_ENG_NM
     , A.FLET_CTRT_TP_CD
     , A.CUST_CNT_CD
     , A.CUST_SEQ
     , (SELECT M.CUST_LGL_ENG_NM
          FROM MDM_CUSTOMER M
         WHERE M.CUST_CNT_CD = A.CUST_CNT_CD
           AND M.CUST_SEQ = A.CUST_SEQ) AS CUST_LGL_ENG_NM
  FROM (
       SELECT CASE WHEN (A.FLET_CTRT_TP_CD = 'TO' AND @[call_slip_tp_cd] = 'P') THEN 
                        (SELECT M.VNDR_SEQ
                           FROM MDM_CUSTOMER M
                          WHERE M.CUST_CNT_CD = A.CUST_CNT_CD
                            AND M.CUST_SEQ = A.CUST_SEQ)
                   ELSE A.VNDR_SEQ
               END VNDR_SEQ
             , A.FLET_CTRT_TP_CD
             , A.CUST_CNT_CD
             , A.CUST_SEQ
          FROM FMS_CONTRACT A
         WHERE A.FLET_CTRT_NO = @[flet_ctrt_no] 
        ) A			]]></sql>
			<params>
				<param name="call_slip_tp_cd" type="12" value="" out="N"/>
				<param name="flet_ctrt_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
