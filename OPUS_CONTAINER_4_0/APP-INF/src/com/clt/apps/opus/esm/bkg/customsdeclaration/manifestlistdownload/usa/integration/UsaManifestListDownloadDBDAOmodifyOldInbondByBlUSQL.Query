<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="UsaManifestListDownloadDBDAOmodifyOldInbondByBlUSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
MERGE

  INTO BKG_CSTMS_ADV_IBD IB
       USING (SELECT NVL(@[cnt_cd], 'US') AS CNT_CD,
                     @[bl_no] AS BL_NO
                FROM DUAL) TM ON (IB.CNT_CD = TM.CNT_CD AND IB.BL_NO = TM.BL_NO)


       WHEN MATCHED THEN
          UPDATE SET IBD_TRSP_TP_CD = DECODE(@[ibd_clr_tp_cd], 'l', '', @[ibd_trsp_tp_cd]),
                     IBD_TRSP_NO = @[ibd_trsp_no],
                     CSTMS_CLR_TP_CD = @[ibd_clr_tp_cd],
                     FREE_TRD_ZN_FLG = NVL(@[ibd_free_trd_zn_flg], 'N'),
                     UPD_USR_ID = @[upd_usr_id],
                     UPD_DT = SYSDATE,
                     PTT_FRM_CD = NVL(PTT_FRM_CD, @[ptt_frm_cd]),
                     IBD_TRSP_ARR_DT = TO_DATE(@[ibd_trsp_arr_dt], 'YYYY-MM-DD HH24:MI'),
                     IBD_TRSP_ARR_ACPT_DT = TO_DATE(@[ibd_trsp_arr_acpt_dt], 'YYYY-MM-DD HH24:MI'),
                     IBD_TRSP_XPT_DT = TO_DATE(@[ibd_trsp_xpt_dt], 'YYYY-MM-DD HH24:MI'),
                     IBD_TRSP_XPT_ACPT_DT = TO_DATE(@[ibd_trsp_xpt_acpt_dt], 'YYYY-MM-DD HH24:MI'),
                     IBD_TRSP_ARR_SND_FLG = NVL(@[ibd_trsp_arr_snd_flg], 'N'),
                     IBD_TRSP_XPT_SND_FLG = NVL(@[ibd_trsp_xpt_snd_flg], 'N')


       WHEN NOT MATCHED THEN
          INSERT (CNT_CD,
                  BL_NO,
                  IBD_TRSP_TP_CD,
                  IBD_TRSP_NO,
                  CSTMS_CLR_TP_CD,
                  FREE_TRD_ZN_FLG,
                  LOCL_CLR_IPI_MVMT_FLG,
                  IBD_TRSP_ARR_SND_FLG,
                  IBD_TRSP_XPT_SND_FLG,
                  CRE_USR_ID,
                  CRE_DT,
                  UPD_USR_ID,
                  UPD_DT,
                  PTT_FRM_CD,
                  IBD_TRSP_ARR_DT,
                  IBD_TRSP_ARR_ACPT_DT,
                  IBD_TRSP_XPT_DT,
                  IBD_TRSP_XPT_ACPT_DT)
          VALUES (NVL(@[cnt_cd], 'US'),
                  @[bl_no],
                  DECODE(@[ibd_clr_tp_cd], 'l', '', @[ibd_trsp_tp_cd]),
                  @[ibd_trsp_no],
                  @[ibd_clr_tp_cd],
                  NVL(@[ibd_free_trd_zn_flg], 'N'),
                  'N',
                  'N',
                  'N',
                  @[cre_usr_id],
                  SYSDATE,
                  @[upd_usr_id],
                  SYSDATE,
                  @[ptt_frm_cd],
                  TO_DATE(@[ibd_trsp_arr_dt], 'YYYY-MM-DD HH24:MI'),
                  TO_DATE(@[ibd_trsp_arr_acpt_dt], 'YYYY-MM-DD HH24:MI'),
                  TO_DATE(@[ibd_trsp_xpt_dt], 'YYYY-MM-DD HH24:MI'),
                  TO_DATE(@[ibd_trsp_xpt_acpt_dt], 'YYYY-MM-DD HH24:MI'))			]]></sql>
			<params>
				<param name="cnt_cd" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="ibd_clr_tp_cd" type="12" value="" out="N"/>
				<param name="ibd_trsp_tp_cd" type="12" value="" out="N"/>
				<param name="ibd_trsp_no" type="12" value="" out="N"/>
				<param name="ibd_free_trd_zn_flg" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="ptt_frm_cd" type="12" value="" out="N"/>
				<param name="ibd_trsp_arr_dt" type="12" value="" out="N"/>
				<param name="ibd_trsp_arr_acpt_dt" type="12" value="" out="N"/>
				<param name="ibd_trsp_xpt_dt" type="12" value="" out="N"/>
				<param name="ibd_trsp_xpt_acpt_dt" type="12" value="" out="N"/>
				<param name="ibd_trsp_arr_snd_flg" type="12" value="" out="N"/>
				<param name="ibd_trsp_xpt_snd_flg" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
