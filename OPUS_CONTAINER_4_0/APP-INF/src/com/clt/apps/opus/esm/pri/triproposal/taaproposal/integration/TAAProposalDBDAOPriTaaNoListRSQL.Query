<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TAAProposalDBDAOPriTaaNoListRSQL">
			<desc><![CDATA[TAA No List Select]]></desc>
			<sql><![CDATA[
SELECT TH.TAA_NO
     , TM.TAA_PROP_NO
     , TM.AMDT_SEQ
     , TM.SVC_SCP_CD
     , TM.RESPB_SLS_OFC_CD
     , TM.RESPB_SREP_CD
     , SR.SREP_NM AS RESPB_SREP_NM
     , TM.CTRT_CUST_CNT_CD
     , TM.CTRT_CUST_SEQ
     , TM.CTRT_CUST_CNT_CD || LPAD(TM.CTRT_CUST_SEQ, 6, '0') AS CTRT_CUST_CD
     , CU.CUST_LGL_ENG_NM AS CTRT_CUST_NM
     , TO_CHAR(TM.EFF_DT,'YYYYMMDD') EFF_DT
     , TO_CHAR(TM.EXP_DT,'YYYYMMDD') EXP_DT
FROM PRI_TAA_MN TM
   , PRI_TAA_HDR TH
   , MDM_SLS_REP SR
   , MDM_CUSTOMER CU
WHERE TH.TAA_PROP_NO = TM.TAA_PROP_NO
AND   TM.AMDT_SEQ = (SELECT MAX(TA.AMDT_SEQ)
                     FROM PRI_TAA_MN TA
                     WHERE TA.TAA_PROP_NO = TM.TAA_PROP_NO)
AND   SR.SREP_CD = TM.RESPB_SREP_CD
AND   CU.CUST_CNT_CD = TM.CTRT_CUST_CNT_CD
AND   CU.CUST_SEQ = TM.CTRT_CUST_SEQ
#if (${svc_scp_cd} != '') 
AND   TM.SVC_SCP_CD = @[svc_scp_cd]
#end
#if (${ctrt_cust_cnt_cd} != '') 
AND   TM.CTRT_CUST_CNT_CD = @[ctrt_cust_cnt_cd]
#end
#if (${ctrt_cust_seq} != '') 
AND   TM.CTRT_CUST_SEQ = @[ctrt_cust_seq]
#end
ORDER BY TM.SVC_SCP_CD, TH.TAA_NO			]]></sql>
			<params>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="ctrt_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="ctrt_cust_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
