<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="HoldNoticeDBDAOsearchBkgCustInfoRSQL">
			<desc><![CDATA[CustInfoVO 생성]]></desc>
			<sql><![CDATA[
SELECT A.BKG_NO
      ,A.POD_CD
      ,B.BKG_CUST_TP_CD
      ,B.CUST_CNT_CD
      ,B.CUST_SEQ
      ,B.CUST_NM
FROM   BKG_BOOKING A
      ,(
        SELECT 
               BKGM.BKG_NO
              ,BKGM.POD_CD
              ,BCST.BKG_CUST_TP_CD
              ,BCST.CUST_CNT_CD
              ,BCST.CUST_SEQ
              ,BCST.CUST_NM
        FROM   BKG_BOOKING BKGM
              ,BKG_CUSTOMER BCST
        WHERE  BKGM.BL_NO          = @[bl_no]
        AND    BCST.BKG_NO         = BKGM.BKG_NO 
        AND    ((BKGM.SAM_CNEE_NTFY_FLG = 'N' AND BKGM.CUST_TO_ORD_FLG = 'N' AND BCST.BKG_CUST_TP_CD IN ('C', 'N')) OR -- Consignee, Notify둘다 생성
                (BKGM.SAM_CNEE_NTFY_FLG = 'Y' AND BCST.BKG_CUST_TP_CD = 'C') OR -- Notify는 Consignee와 같으므로 Consignee만 생성
                (BKGM.CUST_TO_ORD_FLG = 'Y'   AND BCST.BKG_CUST_TP_CD = 'N') -- Notify에게 연락하므로 Notify만 생성
               )
       ) B
WHERE  A.BL_NO  = @[bl_no]
AND    A.BKG_NO = B.BKG_NO(+)			]]></sql>
			<params>
				<param name="bl_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
