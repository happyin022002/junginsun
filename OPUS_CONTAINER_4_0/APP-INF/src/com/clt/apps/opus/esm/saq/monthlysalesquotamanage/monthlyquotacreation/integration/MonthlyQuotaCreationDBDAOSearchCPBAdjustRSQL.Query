<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="MonthlyQuotaCreationDBDAOSearchCPBAdjustRSQL">
			<desc><![CDATA[해당 버전의 CPB Adjust Data를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT T1.MQTA_MDL_VER_NO 
     , T1.TRD_CD 
     , T1.SUB_TRD_CD 
     , T1.IOC_CD 
     , T1.RLANE_CD 
     , T1.DIR_CD 
     , MAX(T1.CTRT_RHQ_CD) AS CTRT_RHQ_CD 
     , MAX(T1.CTRT_AQ_CD) AS CTRT_AQ_CD 
     , T1.CTRT_OFC_CD  
     , MAX(T1.SLS_RHQ_CD) AS SLS_RHQ_CD 
     , MAX(T1.SLS_AQ_CD) AS SLS_AQ_CD 
     , T1.SLS_OFC_CD        
     , MAX(T1.ORG_CM_UC_AMT) AS CM_UC_AMT 
     , MAX(T1.CM_UC_AMT) AS CHNG_CM_UC_AMT 
  FROM SAQ_MON_FCAST_TRNS T1 
     , SAQ_TGT_GRP_TRD T2  
 WHERE 1=1 
       AND T1.TRD_CD = T2.TRD_CD 
       AND T1.SUB_TRD_CD = T2.SUB_TRD_CD 
       AND T1.DIR_CD = T2.DIR_CD 
       AND T1.MQTA_MDL_VER_NO = @[mqta_mdl_ver_no] 
       AND (T1.FCAST_TRNS_STS_CD = '0' OR T1.FCAST_TRNS_STS_CD IS NULL)
      #if(${trade} != '' && ${trade} != 'ALL')
        AND T1.TRD_CD     = @[trade] 
      #end 
      #if(${bound} != '' && ${bound} != 'ALL')                                                                                                                                                                                                                                                            
        AND T1.DIR_CD     = @[bound]  
      #end
 GROUP BY T1.MQTA_MDL_VER_NO 
     , T1.TRD_CD 
     , T1.SUB_TRD_CD 
     , T1.IOC_CD 
     , T1.RLANE_CD 
     , T1.DIR_CD 
     , T1.CTRT_OFC_CD
     , T1.SLS_OFC_CD
 ORDER BY T1.MQTA_MDL_VER_NO 
     , T1.TRD_CD 
     , T1.SUB_TRD_CD 
     , T1.IOC_CD 
     , T1.RLANE_CD 
     , T1.DIR_CD 
     , T1.CTRT_OFC_CD
     , T1.SLS_OFC_CD			]]></sql>
			<params>
				<param name="mqta_mdl_ver_no" type="12" value="" out="N"/>
				<param name="trade" type="12" value="" out="N"/>
				<param name="bound" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
