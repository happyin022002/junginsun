<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RFAProposalMainDBDAOApprovalCancelVORSQL">
			<desc><![CDATA[Approval Cancel 시 BKG_BOOKING,BKG_RATE테이블에서 사용되는 RFA_NO가 있는지 조회한다.]]></desc>
			<sql><![CDATA[
SELECT 'OK' CD FROM DUAL
UNION ALL
SELECT BKG_NO CD
FROM (
    SELECT BK.BKG_NO
    FROM BKG_BOOKING BK
       , BKG_RATE BR
    WHERE BK.RFA_NO = @[rfa_no]
    AND   BK.BKG_STS_CD <> 'X'
    AND   BR.BKG_NO = BK.BKG_NO
    AND   BR.RT_APLY_DT BETWEEN TO_DATE(REPLACE(@[eff_dt],'-',''),'YYYYMMDD') 
                        AND TO_DATE(REPLACE(@[exp_dt],'-','')||'235959','YYYYMMDDHH24MISS')
    ORDER BY BK.BKG_NO
)
WHERE ROWNUM < 7			]]></sql>
			<params>
				<param name="rfa_no" type="12" value="" out="N"/>
				<param name="eff_dt" type="12" value="" out="N"/>
				<param name="exp_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
