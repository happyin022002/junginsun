<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AuthorizationAssignmentDBDAOPriAuthorizationVORSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
SELECT @[prc_ctrt_tp_cd] AS PRC_CTRT_TP_CD
     , AU.SVC_SCP_CD
     , UR.USR_ID
     , UR.USR_NM
     , UR.OFC_CD
     , UR.GRD_ENG_NM
     , AU.EFF_DT
     , DECODE(SIGN(AU.EXP_DT - SYSDATE),1,TO_CHAR(AU.EFF_DT, 'YYYYMMDD'),'') AS EFF_DT
     , TO_CHAR(AU.EXP_DT, 'YYYYMMDD') AS EXP_DT
     , CASE WHEN AU.USR_ID IS NULL
            THEN 'N'
            WHEN (AU.EXP_DT - SYSDATE) > 0 
            THEN 'Y'
            ELSE 'N'
       END AUTH_FLG
     , AU.CRE_USR_ID
     , AU.CRE_DT
     , AU.UPD_USR_ID
     , TO_CHAR(AU.UPD_DT, 'YYYYMMDD') AS UPD_DT
     , (SELECT USR_NM||' / '||OFC_CD FROM COM_USER WHERE USR_ID = AU.UPD_USR_ID ) AS UPD_USR_NM
FROM COM_USER UR
   , PRI_AUTHORIZATION AU
WHERE UR.OFC_CD = @[ofc_cd]
AND   UR.USE_FLG = 'Y'
#if (${is_inq} == 'Y') 
AND   AU.USR_ID = UR.USR_ID -- inquiry
AND   AU.PRC_CTRT_TP_CD = @[prc_ctrt_tp_cd]  -- S:S/C, R:RFA
AND   (AU.EXP_DT - SYSDATE) > 0
    #if (${svc_scp_cd} != '') 
AND   AU.SVC_SCP_CD = @[svc_scp_cd]
    #end
#else 
AND   AU.USR_ID(+) = UR.USR_ID -- creation
AND   AU.PRC_CTRT_TP_CD(+) = @[prc_ctrt_tp_cd]  -- S:S/C, R:RFA
AND   AU.SVC_SCP_CD(+) = @[svc_scp_cd]
#end
ORDER BY UR.USR_ID, AU.SVC_SCP_CD			]]></sql>
			<params>
				<param name="prc_ctrt_tp_cd" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
