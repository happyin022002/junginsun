<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingHistoryMgtDBDAOSearchHistNewBkgEurTroRSQL">
			<desc><![CDATA[BookingHistoryMgtDBDAOSearchHistNewBkgEurTroRSQL]]></desc>
			<sql><![CDATA[
SELECT HIS_CATE_NM
     , PRE_CTNT
     , CRNT_CTNT
  FROM 
    (
        SELECT 'TRO YARD' HIS_CATE_NM
                , '' PRE_CTNT
                , NOW.CNTR_NO||
                  '/'||NOW.HLG_TP_CD||
                  '/PICKUP:'||NOW.CNTR_PKUP_YD_CD||
                  '/'||TO_CHAR(NOW.CNTR_PKUP_DT, 'YYYY-MM-DD HH24:MI:SS')||
                  '/RETURN:'||NOW.CNTR_RTN_YD_CD||
                  '/'||TO_CHAR(NOW.CNTR_RTN_DT, 'YYYY-MM-DD HH24:MI:SS') CRNT_CTNT
          FROM BKG_EUR_TRO NOW
         WHERE NOW.BKG_NO = @[bkg_no] 
#if ($field_list.size() > 0)
           AND (BKG_NO, IO_BND_CD, TRO_SEQ) NOT IN (
           #foreach($field_id in ${field_list}) 
               #if($velocityCount < $field_list.size()) $field_id,  #else $field_id  #end
           #end
           )
#end
        UNION ALL
        SELECT 'TRO ACTUAL SHIPPER' HIS_CATE_NM
                , '' PRE_CTNT
                , NOW.CNTR_NO||
                  '/'||NOW.ACT_CNT_CD||NOW.ACT_CUST_SEQ CRNT_CTNT
          FROM BKG_EUR_TRO NOW
         WHERE NOW.BKG_NO = @[bkg_no] 
#if ($field_list.size() > 0)
           AND (BKG_NO, IO_BND_CD, TRO_SEQ) NOT IN (
           #foreach($field_id in ${field_list}) 
               #if($velocityCount < $field_list.size()) $field_id,  #else $field_id  #end
           #end
           )
#end
        UNION ALL
        SELECT 'TRO RATE' HIS_CATE_NM
                , '' PRE_CTNT
                , NOW.CNTR_NO||
                  '/'||NOW.CURR_CD||
                  '/MANIFESTED RATE:'||NOW.ALL_IN_RT_CD||
                  '/VAT'||NOW.VAT_FLG||
                  '/T1 DOC'||NOW.T1_DOC_FLG||
                  '/'||NOW.TRNS_REV_AMT CRNT_CTNT
          FROM BKG_EUR_TRO NOW
         WHERE NOW.BKG_NO = @[bkg_no] 
#if ($field_list.size() > 0)
           AND (BKG_NO, IO_BND_CD, TRO_SEQ) NOT IN (
           #foreach($field_id in ${field_list}) 
               #if($velocityCount < $field_list.size()) $field_id,  #else $field_id  #end
           #end
           )
#end
        UNION ALL
        SELECT 'TRO SPCL INST' HIS_CATE_NM
                , '' PRE_CTNT
                , NOW.SPCL_INSTR_RMK
          FROM BKG_EUR_TRO NOW
         WHERE NOW.BKG_NO = @[bkg_no] 
#if ($field_list.size() > 0)
           AND (BKG_NO, IO_BND_CD, TRO_SEQ) NOT IN (
           #foreach($field_id in ${field_list}) 
               #if($velocityCount < $field_list.size()) $field_id,  #else $field_id  #end
           #end
           )
#end
    )
 WHERE CRNT_CTNT IS NOT NULL			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
