<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PRISimulationDBDAOSearchRevenueDetailInfoRSQL">
			<desc><![CDATA[get the result for Revenue Detail Info of Selected Container Size,Commodity]]></desc>
			<sql><![CDATA[
SELECT X.*,
       DECODE(X.FRT_INCL_XCLD_DIV_CD,'N',X.CHG_AMT_USD,0) AS NET_AMT_USD
  FROM (
        SELECT C.CHG_CD,
               C.CURR_CD,
               C.CHG_UT_AMT,
               C.RAT_UT_CD,
               TO_CHAR(C.RAT_AS_QTY) AS RAT_AS_QTY,
               TO_CHAR(C.CHG_AMT) AS CHG_AMT,
               TO_CHAR(C.APLY_XCH_RTO) AS APLY_XCH_RTO,
               TO_CHAR(ROUND(C.APLY_XCH_RTO * C.CHG_AMT,2)) AS CHG_AMT_USD,
               C.FRT_INCL_XCLD_DIV_CD,
               C.FRT_TERM_CD,
               R.PRC_CGO_TP_CD AS CGO_TP_CD,
               C.SVC_SCP_CD,
               C.RT_SEQ,
               1 ORD
          FROM PRI_SIM_RT R, PRI_SIM_CHG_RT C
         WHERE R.PCTL_NO = C.PCTL_NO
           AND R.CNTR_SZ_CD = C.CNTR_SZ_CD
           AND R.CMDT_CD = C.CMDT_CD
           AND R.CMDT_SEQ = C.CMDT_SEQ
           AND R.AUTO_RAT_FLG = C.AUTO_RAT_FLG
           AND C.PCTL_NO = @[pctl_no]
           AND C.CNTR_SZ_CD = @[cntr_sz_cd]
           AND C.CMDT_CD = @[cmdt_cd]
           AND C.CMDT_SEQ = @[cmdt_seq]
           AND C.AUTO_RAT_FLG = NVL(@[auto_rat_flg],'Y')
           AND C.RAT_UT_CD NOT IN ('CM','MT')
    UNION ALL
        SELECT C.CHG_CD,
               C.CURR_CD,
               C.CHG_UT_AMT,
               C.RAT_UT_CD,
               '-' AS RAT_AS_QTY,
               '-' AS CHG_AMT,
               '-' AS APLY_XCH_RTO,
               '-' AS CHG_AMT_USD,
               C.FRT_INCL_XCLD_DIV_CD,
               C.FRT_TERM_CD,
               R.PRC_CGO_TP_CD AS CGO_TP_CD,
               C.SVC_SCP_CD,
               C.RT_SEQ,
               2 ORD
          FROM PRI_SIM_RT R, PRI_SIM_CHG_RT C
         WHERE R.PCTL_NO = C.PCTL_NO
           AND R.CNTR_SZ_CD = C.CNTR_SZ_CD
           AND R.CMDT_CD = C.CMDT_CD
           AND R.CMDT_SEQ = C.CMDT_SEQ
           AND R.AUTO_RAT_FLG = C.AUTO_RAT_FLG
           AND C.PCTL_NO = @[pctl_no]
           AND C.CNTR_SZ_CD = @[cntr_sz_cd]
           AND C.CMDT_CD = @[cmdt_cd]
           AND C.CMDT_SEQ = @[cmdt_seq]
           AND C.AUTO_RAT_FLG = NVL(@[auto_rat_flg],'Y')
           AND C.RAT_UT_CD IN ('CM','MT')
       ) X
ORDER BY X.ORD, X.RT_SEQ			]]></sql>
			<params>
				<param name="pctl_no" type="12" value="" out="N"/>
				<param name="cntr_sz_cd" type="12" value="" out="N"/>
				<param name="cmdt_cd" type="12" value="" out="N"/>
				<param name="cmdt_seq" type="12" value="" out="N"/>
				<param name="auto_rat_flg" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
