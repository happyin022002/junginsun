<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationCMDBDAOModifyCrdUSQL">
			<desc><![CDATA[Cargo Receive Date Update]]></desc>
			<sql><![CDATA[
UPDATE BKG_CONTAINER CNTR 
   SET CGO_RCV_DT = CASE 
					WHEN CGO_RCV_DT IS NULL THEN (SELECT MIN(MVMT.CNMV_EVNT_DT) AS CGO_RCV_DT
                       FROM CTM_MOVEMENT MVMT
                      WHERE MVMT.CNTR_NO = @[cntr_no]
                        AND MVMT.MVMT_STS_CD = 'OC'
                        --AND MVMT.CNMV_YR = CNTR.CNMV_YR
                        AND MVMT.CNMV_CYC_NO = CNTR.CNMV_CYC_NO                     
                    )
					ELSE CGO_RCV_DT 
					END
 WHERE BKG_NO = @[bkg_no]
   AND CNTR_NO = @[cntr_no]			]]></sql>
			<params>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
