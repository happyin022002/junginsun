<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="KorManifestListDBDAOmodifyDgVVDInfoUSQL">
			<desc><![CDATA[Download후에 DG VVD정보를 modify함]]></desc>
			<sql><![CDATA[
UPDATE BKG_CSTMS_KR_DG_CGO_VVD
   SET PORT_CD = @[port_cd]
     , IO_BND_CD = DECODE(@[io], '01', 'I', 'O')
     , INTER_CNG_CTRL_NO = @[doc_no]
     , CALL_KNT = @[call_knt]
     , VSL_NM = @[vsl_eng_nm]
     , KR_VSL_CALL_SGN_CD = @[call_sgn_no]
#if(${arv_dt}!=' ') 
     , ARR_DT = TO_DATE(@[arv_dt], 'YYYY-MM-DD HH24:MI')
#end
#if(${from_dt}!=' ') 
     , DCHG_FM_DT = TO_DATE(@[from_dt], 'YYYY-MM-DD HH24:MI')
#end
#if(${to_dt}!=' ') 
     , DCHG_TO_DT = TO_DATE(@[to_dt], 'YYYY-MM-DD HH24:MI')
#end
     , KR_DCHG_CO_ID = @[dchg_com_cd]
     , DCHG_VNDR_NM = @[dsch_com_nm]
     , KR_CSTMS_DCHG_N1ST_JB_CD = @[job_code1]
     , KR_CSTMS_DCHG_N2ND_JB_CD = @[job_code2]
     , TTL_CNTR_KNT   =   @[total_cntr]
     , DG_TTL_WGT     =   @[total_wgt]
     , PRE_CLPT_CD    =   @[pre_port]
     , PORT_AREA_N1ST_ID   =   @[port_area]
     , PORT_AREA_N2ND_ID   =   @[port_anch]
     , PORT_DESC   =   @[port_desc]
     , REP_SBST_CTNT   =  @[substance]
     , CNTC_PSON_DESC     =  @[contact]
     , UPD_DT       =   SYSDATE
     , UPD_USR_ID       =  @[user_id]
     , KR_PORT_AUTH_CD   =   @[authority]
     , KR_CSTMS_DG_TRNS_CD       =   @[trans_code]
     , DCGO_SEQ     =   NVL(@[dgco_seq],0)
     , TML_VSL_CD     =   @[tml_vvd]
     , TML_SKD_VOY_NO  =  @[tml_skd_voy_no]
 WHERE MRN_NO       =   SUBSTR(@[mrn_no],1,10)
   AND MRN_CHK_NO   =   SUBSTR(@[mrn_no],11,1)
   AND VSL_CD       =   SUBSTR(@[vvd], 1, 4)
   AND SKD_VOY_NO   =   SUBSTR(@[vvd], 5, 4)
   AND SKD_DIR_CD   =   SUBSTR(@[vvd], 9, 1)
   AND VVD_SEQ      =   @[max_vvd_seq]			]]></sql>
			<params>
				<param name="port_cd" type="12" value="" out="N"/>
				<param name="io" type="12" value="" out="N"/>
				<param name="doc_no" type="12" value="" out="N"/>
				<param name="call_knt" type="12" value="" out="N"/>
				<param name="vsl_eng_nm" type="12" value="" out="N"/>
				<param name="call_sgn_no" type="12" value="" out="N"/>
				<param name="arv_dt" type="12" value="" out="N"/>
				<param name="from_dt" type="12" value="" out="N"/>
				<param name="to_dt" type="12" value="" out="N"/>
				<param name="dchg_com_cd" type="12" value="" out="N"/>
				<param name="dsch_com_nm" type="12" value="" out="N"/>
				<param name="job_code1" type="12" value="" out="N"/>
				<param name="job_code2" type="12" value="" out="N"/>
				<param name="total_cntr" type="12" value="" out="N"/>
				<param name="total_wgt" type="12" value="" out="N"/>
				<param name="pre_port" type="12" value="" out="N"/>
				<param name="port_area" type="12" value="" out="N"/>
				<param name="port_anch" type="12" value="" out="N"/>
				<param name="port_desc" type="12" value="" out="N"/>
				<param name="substance" type="12" value="" out="N"/>
				<param name="contact" type="12" value="" out="N"/>
				<param name="user_id" type="12" value="" out="N"/>
				<param name="authority" type="12" value="" out="N"/>
				<param name="trans_code" type="12" value="" out="N"/>
				<param name="dgco_seq" type="12" value="" out="N"/>
				<param name="tml_vvd" type="12" value="" out="N"/>
				<param name="tml_skd_voy_no" type="12" value="" out="N"/>
				<param name="mrn_no" type="12" value="" out="N"/>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="max_vvd_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
