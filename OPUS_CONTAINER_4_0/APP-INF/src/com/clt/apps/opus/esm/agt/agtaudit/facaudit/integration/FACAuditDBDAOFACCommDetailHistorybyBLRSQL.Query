<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="FACAuditDBDAOFACCommDetailHistorybyBLRSQL">
			<desc><![CDATA[ESM_AGT_015 FAC Commission의 History Detail 목록 조회]]></desc>
			<sql><![CDATA[
SELECT 
	B.FAC_SEQ AS FAC_SEQ,
	DECODE(SUBSTR(B.FAC_DIV_CD,1,1),'B',DECODE(B.FAC_DIV_CD,'BL',B.ACT_COMM_AMT, 0),0) AS BL_COMM_AMT,         
    DECODE(SUBSTR(B.FAC_DIV_CD,1,1),'B',DECODE(B.FAC_DIV_CD,'BL',0,B.ACT_COMM_AMT),0) AS ACT_COMM_AMT, 
    B.BKG_BX_QTY AS BKG_BX_QTY,
    B.FAC_BX_RT AS FAC_BX_RT,
    B.BKG_TEU_QTY AS BKG_TEU_QTY,
    B.FAC_TEU_RT AS FAC_TEU_RT, 
    B.BKG_FEU_QTY AS BKG_FEU_QTY, 
    B.FAC_FEU_RT AS FAC_FEU_RT,
    B.BKG_RF_TEU_QTY AS BKG_RF_TEU_QTY,
    B.FAC_RF_TEU_RT AS FAC_RF_TEU_RT,
    B.BKG_RF_FEU_QTY AS BKG_RF_FEU_QTY, 
    B.FAC_RF_FEU_RT AS FAC_RF_FEU_RT, 
    DECODE(SUBSTR(B.FAC_DIV_CD,1,1),'C',B.ACT_COMM_AMT,0) AS CNTR_COMM_AMT, 
    B.ACT_PRE_COMM_AMT AS ACT_PRE_COMM_AMT, 
    TO_CHAR (B.CRE_DT, 'YYYYMMDD') AS CRE_DT, 
    REPLACE(B.FAC_RMK, '&', '&amp;') AS FAC_RMK, 
    B.COMM_PROC_STS_CD AS COMM_PROC_STS_CD,  
    REPLACE(B.COMM_PROC_RSLT_RSN, '&', '&amp;') AS COMM_PROC_RSLT_RSN, 
    TO_CHAR (B.FAC_IF_DT, 'YYYYMMDD') AS FAC_IF_DT, 
    B.FAC_OFC_CD AS FAC_OFC_CD,
    B.AGMT_CNT_CD AS AGMT_CNT_CD,
    B.AGMT_CUST_SEQ AS AGMT_CUST_SEQ,
    B.AGMT_RT_SEQ AS AGMT_RT_SEQ
FROM AGT_COMM_BKG_INFO A, AGT_FAC_COMM B 
WHERE A.BKG_NO = B.BKG_NO
#if (${bl_no} != '') 
AND A.BL_NO = @[bl_no] 
#end 
#if (${bkg_no} != '') 
AND A.BKG_NO = @[bkg_no] 
#end
ORDER BY FAC_SEQ DESC			]]></sql>
			<params>
				<param name="bl_no" type="12" value="" out="Y"/>
				<param name="bkg_no" type="12" value="" out="Y"/>
			</params>
		</query>
	</querys>
</sqls>
