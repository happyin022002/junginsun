<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CustomerInfoManageDBDAOSearchCustomerGroupCodeRSQL">
			<desc><![CDATA[MDM_CUST_PERF_GRP, MDM_CUSTOMER]]></desc>
			<sql><![CDATA[
SELECT    M.CUST_GRP_ID   --AS Group Code
        , M.CUST_GRP_NM AS CUST_LGL_ENG_NM -- Customer Group Name
		, M.OFC_CD   -- Ofc Code
        , M.SREP_CD
        , M.VBS_CLSS_CD
        , M.NBS_CLSS_CD1
        , M.NBS_CLSS_CD2
        , M.NBS_CLSS_CD3
        , M.CRE_USR_ID
        , M.CRE_DT
        , M.UPD_USR_ID
        , TO_CHAR(UPD_DT,'YYYY-MM-DD') AS UPD_DT --, M.UPD_DT
        , M.DELT_FLG
        , M.EAI_EVNT_DT
        , M.EAI_IF_ID
        , M.CUST_GRP_ABBR_NM
        , (
            SELECT COUNT(C.CUST_GRP_ID) 
              FROM MDM_CUSTOMER C 
             WHERE C.CUST_GRP_ID = M.CUST_GRP_ID
               AND C.CNTR_DIV_FLG = 'Y'
          ) AS MEMBER -- MEMBER (MDM_CUSTOMER)
        , '' LOC_CD
        , '' CUST_GRP_NM
        , '' MATCH_RULE
        , '' CUST_CD
        , '' CUST_CNT_CD
        , '' CUST_SEQ
  FROM MDM_CUST_PERF_GRP M
/* 1) */
WHERE 1=1  
#if(${match_rule} == 'D' && ${cust_grp_nm} != '')  -- Start with 
   AND Upper(CUST_GRP_NM) LIKE Upper(@[cust_grp_nm])||'%'-- Cust. Code 
#end
#if(${match_rule} == 'I' && ${cust_grp_nm} != '')  -- Include  
   AND Upper(CUST_GRP_NM) LIKE '%'||Upper(@[cust_grp_nm])||'%'-- Cust. Code 
#end
#if(${match_rule} == 'A' && ${cust_grp_nm} != '')  -- Exact      
   AND Upper(CUST_GRP_NM) = Upper(@[cust_grp_nm])-- Cust. Code 
#end 
#if(${cust_grp_id} != '') 
    AND Upper(CUST_GRP_ID) LIKE Upper(@[cust_grp_id])||'%' -- Group ID
#end
/* 2) */
#if(${cust_grp_abbr_nm} != '') 
    AND Upper(CUST_GRP_ABBR_NM) = Upper(@[cust_grp_abbr_nm])-- Abbr 
#end			]]></sql>
			<params>
				<param name="cust_grp_nm" type="12" value="" out="N"/>
				<param name="cust_grp_id" type="12" value="" out="N"/>
				<param name="cust_grp_abbr_nm" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
