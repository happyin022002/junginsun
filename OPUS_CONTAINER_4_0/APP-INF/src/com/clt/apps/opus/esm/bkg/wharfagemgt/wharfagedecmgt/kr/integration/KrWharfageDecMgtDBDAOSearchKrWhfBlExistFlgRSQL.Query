<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="KrWharfageDecMgtDBDAOSearchKrWhfBlExistFlgRSQL">
			<desc><![CDATA[VVD, Port, Bound 별 한국 WHF B/L 존재 여부 확인]]></desc>
			<sql><![CDATA[
SELECT CASE NVL(COUNT(A.VSL_CD), 0) WHEN 1 THEN 'Y' ELSE 'N' END AS KR_WHF_EXIST_FLG
  FROM BKG_KR_WHF_BL A, BKG_KR_WHF_RT B
 WHERE A.VSL_CD = SUBSTR(@[vvd], 1, 4)
   AND A.SKD_VOY_NO = SUBSTR(@[vvd], 5, 4)
   AND A.SKD_DIR_CD = SUBSTR(@[vvd], 9, 1)
   AND A.WHF_BND_CD IN (DECODE(SUBSTR(@[whf_bnd_cd], 1, 1), 'O', 'OO', 'II'), DECODE(SUBSTR(@[whf_bnd_cd], 1, 1), 'O', 'OT', 'IT'))
   AND DECODE(SUBSTR(@[whf_bnd_cd], 1, 1), 'O', A.WHF_POL_CD, A.WHF_POD_CD) = @[whf_pol_cd]
   AND B.VSL_CD = A.VSL_CD
   AND B.SKD_VOY_NO = A.SKD_VOY_NO
   AND B.WHF_BND_CD = A.WHF_BND_CD
   AND B.BL_NO = A.BL_NO
   AND ROWNUM <= 1 -- 전체 건수를 구하는 것보다는 존재 유무를 확인하기 위함			]]></sql>
			<params>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="whf_bnd_cd" type="12" value="" out="N"/>
				<param name="whf_pol_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
