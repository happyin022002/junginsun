<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountPayableInvoiceDBDAOSearchInvoiceEntryLineListRSQL">
			<desc><![CDATA[Invoice의 차변인 Line 정보를 조회하여 Line내역에 나타냄]]></desc>
			<sql><![CDATA[
SELECT 
   TO_CHAR(D.ACCTG_DT, 'YYYY-MM-DD') AS  ACCTG_DT
 , D.ACCL_BK_PST_FLG
 , D.ASET_ADD_FLG
 , D.ASET_TRAK_FLG
 , D.CSH_BK_PST_FLG
 , D.DTRB_LINE_NO
 , SLCC.SGM_CTNT1                   AS DTRB_COA_CO_CD  -- COMPANY_CODE
 , SLCC.SGM_CTNT2                   AS DTRB_COA_RGN_CD -- REGION_CODE
 , SLCC.SGM_CTNT3                   AS DTRB_COA_CTR_CD -- CENTER_CODE
 , SLCC.SGM_CTNT4                   AS DTRB_COA_ACCT_NO -- ACCOUNT_CODE
 , SLCC.SGM_CTNT5                   AS DTRB_COA_INTER_CO_CD --INTERCOMPANY_CODE
 , SLCC.SGM_CTNT6                   AS DTRB_COA_VVD_CD  -- VVD_CODE
 , D.INV_SEQ
 , D.LINE_TP_LU_CD
 , D.EFF_YRMON
 , TRIM(SAP_GET_CUR_AMT_FNC(H.INV_CURR_CD, D.DTRB_AMT))  DTRB_AMT
 , D.DTRB_FUNC_AMT  
 , D.BAT_SEQ
 , D.DTRB_DESC
 , D.MTCH_STS_FLG
 , D.ACCTG_PST_FLG
 , D.RVS_FLG
 , D.DTRB_XCH_DT
 , D.DTRB_XCH_RT
 , D.DTRB_XCH_RT_TP_CD
 , D.ATTR_CTNT1
 , D.ATTR_CTNT2
 , D.ATTR_CTNT3
 , D.ATTR_CTNT4
 , D.ATTR_CTNT5
 , D.ATTR_CTNT6
 , D.ATTR_CTNT7
 , D.ATTR_CTNT8
 , D.ATTR_CTNT9
 , D.ATTR_CTNT10
 , D.ATTR_CTNT11
 , D.ATTR_CTNT12
 , D.ATTR_CTNT13
 , D.ATTR_CTNT14
 , D.ATTR_CTNT15
 , D.ATTR_CATE_NM
 , D.PPAY_RMN_AMT
 , D.GLO_ATTR_CATE_NM
 , D.GLO_ATTR_CTNT1
 , D.GLO_ATTR_CTNT2
 , D.GLO_ATTR_CTNT3
 , D.GLO_ATTR_CTNT4
 , D.GLO_ATTR_CTNT5
 , D.GLO_ATTR_CTNT6
 , D.GLO_ATTR_CTNT7
 , D.GLO_ATTR_CTNT8
 , D.GLO_ATTR_CTNT9
 , D.GLO_ATTR_CTNT10
 , D.GLO_ATTR_CTNT11
 , D.GLO_ATTR_CTNT12
 , D.GLO_ATTR_CTNT13
 , D.GLO_ATTR_CTNT14
 , D.GLO_ATTR_CTNT15
 , D.GLO_ATTR_CTNT16
 , D.GLO_ATTR_CTNT17
 , D.GLO_ATTR_CTNT18
 , D.GLO_ATTR_CTNT19
 , D.GLO_ATTR_CTNT20
 , D.DTRB_MTCH_TP_NM
 , D.INV_DTRB_SEQ
 , D.PRNT_RVS_DTRB_SEQ
 , D.ACCTG_EVNT_SEQ
 , D.PPAY_DTRB_SEQ
 , D.DTRB_CLSS_NM
 , D.DTRB_VAT_CD
 , D.OLD_DTRB_SEQ
 , D.CRE_USR_ID
 , D.CRE_DT
 , D.DTRB_CD_CMB_SEQ
 , D.UPD_USR_ID
 , D.UPD_DT
 , '' USR_ID
 , D.INV_RND_AMT
 , H.INV_CURR_CD 
 , (SELECT D.LU_DESC
    FROM  SCO_LU_HDR H, SCO_LU_DTL D
    WHERE H.LU_TP_CD = D.LU_TP_CD 
    AND   H.LU_TP_CD = 'AP TAX CODE'
    AND   H.LU_APPL_CD = 'SAP'
    AND   D.LU_CD = D.DTRB_VAT_CD AND ROWNUM=1 )DTRB_VAT_NM
 , (SELECT D.ATTR_CTNT1
    FROM  SCO_LU_HDR H, SCO_LU_DTL D
    WHERE H.LU_TP_CD = D.LU_TP_CD 
    AND   H.LU_TP_CD = 'AP TAX CODE'
    AND   H.LU_APPL_CD = 'SAP'
    AND   D.LU_CD = D.DTRB_VAT_CD AND ROWNUM=1 )DTRB_VAT_RT
FROM    SAP_INV_HDR H
      , SAP_INV_DTL D
      , SCO_LEGR_CD_CMB SLCC
WHERE   H.INV_SEQ = D.INV_SEQ
AND     D.DTRB_CD_CMB_SEQ = SLCC.CD_CMB_SEQ(+)
AND     H.INV_SEQ = TO_NUMBER ( @[inv_seq] )
ORDER BY H.INV_SEQ, D.DTRB_LINE_NO			]]></sql>
			<params>
				<param name="inv_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
