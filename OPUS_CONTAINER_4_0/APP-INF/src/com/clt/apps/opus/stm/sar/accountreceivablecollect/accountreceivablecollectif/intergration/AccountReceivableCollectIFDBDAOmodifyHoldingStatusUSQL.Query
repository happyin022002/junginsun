<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableCollectIFDBDAOmodifyHoldingStatusUSQL">
			<desc><![CDATA[modifyHoldingStatus]]></desc>
			<sql><![CDATA[
UPDATE SAR_AR_IF
SET IF_FLG = 'H'
WHERE IF_SEQ_NO = @[if_seq_no] 
AND ( ( LOCL_AMT + DOC_AMT = 0  )
  OR (REC_TP_CD,ASGN_NO,NVL(COST_CTR_CD,' ') ,NVL(GL_ACCT_NO,' '),NVL(CUST_NO,' '),NVL(PFITCTR_CD,' '),NVL(ALTN_ACCT_NO,' '),NVL(BIZ_PRNR_REF_KEY_CD1,' '), NVL(PLN_DT,' ')) 
    IN (
        SELECT  MAX(REC_TP_CD), MAX(ASGN_NO), MAX(NVL(COST_CTR_CD,' ')) ,MAX(NVL(GL_ACCT_NO,' ')),MAX(NVL(CUST_NO,' ')),MAX(NVL(PFITCTR_CD,' ')), MAX(NVL(ALTN_ACCT_NO,' ')),MAX(NVL(BIZ_PRNR_REF_KEY_CD1,' ')), MAX(NVL(PLN_DT,' '))
        FROM SAR_AR_IF A
        WHERE IF_SEQ_NO = @[if_seq_no]
        GROUP BY 
        ACCT_CO_CD, 
        IF_DOC_TP_CD,
        DOC_DT,
        PST_DT,
        REF_DOC_NO,
        DOC_HDR_CD,
        CURR_CD,
        TAX_CALC_AUTO_FLG,
        VAT_TAX_CD,
        ASGN_NO,
        ITM_DESC,
        PLN_DT,
        COST_CTR_CD,
        ORD_NO,
        MN_ASET_NO,
        SUB_ASET_NO,
        ASET_TJ_TP_CD,
        ASET_VAL_DT,
        GL_ACCT_NO,
        CUST_NO,
        VNDR_CRTR_ACCT_NO,
        DUE_DT_CALC_BSEL_DT,
        PAY_MZD_CD,
        STE_CNTRL_BANK_IND_CD,
        MTRL_NO,
        FUEL_LAND_QTY,
        MEAS_BSE_UT_CD,
        PFITCTR_CD,
        ALTN_ACCT_NO,
        BIZ_PRNR_REF_KEY_CD1,
        BIZ_PRNR_REF_KEY_CD2,
        LINE_ITM_REF_KEY_CD,
        INSTR_KEY_CD1,
        INSTR_KEY_CD2,
        INSTR_KEY_CD3,
        PAY_REF_CD,
        AUTOMTC_PAY_CURR_CD,
        PAY_CURR_AMT,
        CTRT_NO,
        CTRT_TP_CD,
        PAY_RSN_CD,
        CLSS_CD,
        ACT_PLC_CD,
        ENTR_EXPN_ID,
        BUD_MGMT_DIV_CD,
        ACT_DT,
        VSL_CD,
        VVL_CD,
        HUS_BANK_ID,
        PAY_BLCK_KEY_CD,
        REC_TP_CD
        HAVING (SUM(DECODE(PST_KEY_CD,'01',NVL(LOCL_AMT,0),40,NVL(LOCL_AMT,0),11,NVL(LOCL_AMT,0)*(-1), 50,NVL(LOCL_AMT,0)*(-1)))=0)
                AND (SUM(DECODE(PST_KEY_CD,'01',NVL(DOC_AMT,0),40,NVL(DOC_AMT,0),11,NVL(DOC_AMT,0)*(-1), 50,NVL(DOC_AMT,0)*(-1)))=0)
                AND COUNT(*)>=2
        )
)			]]></sql>
			<params>
				<param name="if_seq_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
