<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountPayablePaymentDBDAOSearchInquiryofTransactionListRSQL">
			<desc><![CDATA[Inquiry of Transaction]]></desc>
			<sql><![CDATA[
SELECT STI.TYPE_MEANING
     , STI.BANK_ACCOUNT_SEQ    -- Hidden
     , STI.TRX_NUMBER
     , STI.CURRENCY_CODE
     , TRIM(SAP_GET_CUR_AMT_FNC(STI.CURRENCY_CODE, STI.AMOUNT)) AMOUNT
     , STI.CAL_AMOUNT          -- Hidden
     , STI.PAYMENT_AMOUNT      -- Hidden
     , STI.RECEIPT_AMOUNT      -- Hidden
     , TO_CHAR(STI.CLEARED_DATE, 'YYYY-MM-DD') AS CLEARED_DATE
     , STI.AGENT_NAME
     , STI.BATCH_NAME
     , STI.SOURCE
     , STI.TRANSACTION_ID      -- Hidden
     , STI.DESCRIPTION
     , STI.EXCHANGE_RATE
     , TRIM(SAP_GET_CUR_AMT_FNC(STI.CURRENCY_CODE, STI.LCL_AMOUNT)) LCL_AMOUNT
     , STI.CAL_LCL_AMOUNT      -- Hidden
     , STI.PAYMENT_LCL_AMOUNT  -- Hidden
     , STI.RECEIPT_LCL_AMOUNT  -- Hidden
     , STI.REFERENCE_TYPE
     , STI.REFERENCE_NUMBER    
     , STI.SLIP_STATUS         -- Hidden
     ,(SELECT DP_PRCS_KNT FROM MDM_CURRENCY MC WHERE MC.CURR_CD = STI.CURRENCY_CODE AND DELT_FLG = 'N' AND ROWNUM=1) AS CURR_POINT 
FROM   SAP_TRX_INQ_V STI
WHERE  STI.BANK_ACCOUNT_SEQ = @[bank_acct_seq]
AND    STI.CLEARED_DATE >= TO_DATE(REPLACE(@[fr_dt],'-','') , 'YYYYMMDD')
AND    STI.CLEARED_DATE <  TO_DATE(REPLACE(@[to_dt],'-',''), 'YYYYMMDD') + 1
ORDER  BY STI.CLEARED_DATE, STI.TYPE_MEANING, STI.SOURCE			]]></sql>
			<params>
				<param name="bank_acct_seq" type="12" value="" out="N"/>
				<param name="fr_dt" type="12" value="" out="N"/>
				<param name="to_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
