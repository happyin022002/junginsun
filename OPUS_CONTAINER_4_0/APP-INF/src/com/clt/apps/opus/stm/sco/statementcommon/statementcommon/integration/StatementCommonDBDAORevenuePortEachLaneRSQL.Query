<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="StatementCommonDBDAORevenuePortEachLaneRSQL">
			<desc><![CDATA[search RevenuePortEachLane]]></desc>
			<sql><![CDATA[
SELECT  AAA.VSL_SLAN_CD AS SLAN_CD
    ,   AAA.RLANE_CD
    ,   AAA.RLANE_NM
    ,   NVL(BBB.FINC_REV_DIR_CD, AAA.VSL_SLAN_DIR_CD || AAA.RLANE_DIR_CD) AS FINC_REV_DIR_CD
    ,   NVL(BBB.REV_IPT_OCN_CD, AAA.ZN_IOC_CD)  AS  REV_IPT_OCN_CD
 	,   NVL(BBB.REV_IPT_OCN_CD, AAA.ZN_IOC_CD)  AS  H_REV_IPT_OCN_CD
    ,   BBB.REV_PORT_CD
 	, 	DECODE(AAA.VSL_SLAN_DIR_CD, AAA.RLANE_DIR_CD, 'N', 'Y')  AS DIR_CNG_CD
 	, 	NVL(BBB.DELT_FLG, 'N') AS DELT_FLG
 	, 	'' AS CRE_USR_ID
 	, 	'' AS UPD_USR_ID
FROM
(
    SELECT  DISTINCT
            B.VSL_SLAN_CD    
        ,   A.RLANE_CD
        ,   A.RLANE_NM
        ,   C.VSL_SLAN_DIR_CD
        ,   NVL
            (
                (
                    SELECT  DISTINCT
                            AFDC.RLANE_DIR_CD
                    FROM    AR_FINC_DIR_CONV    AFDC
                    WHERE   AFDC.SLAN_CD       = C.VSL_SLAN_CD
                      AND   AFDC.SLAN_DIR_CD   = C.VSL_SLAN_DIR_CD
                      AND   AFDC.RLANE_CD      = A.RLANE_CD
                      AND   NVL(AFDC.DELT_FLG, 'N') <> 'Y'
                      AND   ROWNUM = 1
                )
                ,
                VSL_SLAN_DIR_CD
            ) AS   RLANE_DIR_CD
        ,   D.ZN_IOC_CD
    FROM    MDM_REV_LANE            A
        ,   MDM_VSL_SVC_LANE        B
        ,   MDM_VSL_SVC_LANE_DIR    C
        ,   AR_ROUT_RNK             D
    WHERE   1 = 1
      AND   A.VSL_TP_CD         =   B.VSL_TP_CD
      AND   A.VSL_SLAN_CD       =   B.VSL_SLAN_CD
      AND   B.VSL_SLAN_CD       =   C.VSL_SLAN_CD
      AND   D.RLANE_CD          =   A.RLANE_CD
      AND   D.SLAN_CD           =   A.VSL_SLAN_CD
      AND   B.VSL_SLAN_CD LIKE DECODE(@[vsl_slan_cd], NULL, '', @[vsl_slan_cd]) || '%'
      AND   A.RLANE_CD LIKE DECODE(@[rlane_cd], NULL, '', @[rlane_cd]) || '%'
      AND   NVL(A.DELT_FLG      , 'N')  <> 'Y'
      AND   NVL(B.DELT_FLG      , 'N')  <> 'Y'
      AND   NVL(C.DELT_FLG      , 'N')  <> 'Y'
      AND   NVL(D.DELT_FLG      , 'N')  <> 'Y'
) AAA
,   
(
        SELECT  SRLPI.SLAN_CD
            ,   SRLPI.RLANE_CD
            ,   SRLPI.REV_IPT_OCN_CD
            ,   SRLPI.REV_PORT_CD
            ,   SRLPI.FINC_REV_DIR_CD
   ,   SRLPI.DELT_FLG
        FROM    SCO_REV_LANE_PORT_INFO  SRLPI
        WHERE   NVL(SRLPI.DELT_FLG, 'N')  <> 'Y'
)   BBB
WHERE   AAA.VSL_SLAN_CD     =   BBB.SLAN_CD(+)
  AND   AAA.RLANE_CD        =   BBB.RLANE_CD(+)
  AND   AAA.VSL_SLAN_DIR_CD =   SUBSTR(BBB.FINC_REV_DIR_CD(+),1,1)
  AND   AAA.ZN_IOC_CD       =   BBB.REV_IPT_OCN_CD(+)
ORDER BY    VSL_SLAN_CD
        ,   RLANE_CD
        ,   VSL_SLAN_DIR_CD
        ,   RLANE_DIR_CD
        ,   AAA.ZN_IOC_CD   DESC
        ,   BBB.REV_PORT_CD			]]></sql>
			<params>
				<param name="vsl_slan_cd" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
