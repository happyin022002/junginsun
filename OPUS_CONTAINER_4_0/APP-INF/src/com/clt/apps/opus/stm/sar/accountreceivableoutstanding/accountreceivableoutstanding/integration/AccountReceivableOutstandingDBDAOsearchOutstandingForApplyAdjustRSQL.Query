<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableOutstandingDBDAOsearchOutstandingForApplyAdjustRSQL">
			<desc><![CDATA[Apply 및 Adjust 대상 OTS 정보 조회]]></desc>
			<sql><![CDATA[
SELECT SOH.IF_NO
	   , SOH.RHQ_CD
	   , SOH.OTS_OFC_CD
       , SOH.BL_NO
       , SOH.INV_NO
	   , SOH.OTS_HIS_SEQ
       , SOH.CURR_CD
       , SOH.OTS_SRC_CD
	   , SOH.INV_OFC_CD
	   , SOH.SHP_TO_CUST_CNT_CD
	   , SOH.SHP_TO_CUST_SEQ
	   , SOH.BIL_TO_CUST_CNT_CD
	   , SOH.BIL_TO_CUST_SEQ
	   , SOH.VSL_CD
	   , SOH.SKD_VOY_NO
	   , SOH.DIR_CD
	   , SOH.SVC_SCP_CD
	   , SOH.XCH_RT_TP_CD
	   , SOH.LOCL_XCH_RT
	   , SOH.USD_XCH_RT
	   , SOH.BKG_IO_BND_CD
	   , SOH.XCH_RT_DT
	   , SOH.POL_CD
	   , SOH.POD_CD
       , SOC.CHG_TP_CD
       , SOC.BAL_AMT CHG_BAL_AMT
       , SOC.GL_DT
       , SOC.TJ_SRC_NM
       , SLD.DP_SEQ
FROM SAR_OTS_CHG SOC,
     SAR_OTS_HIS SOH,
     SCO_LU_DTL SLD
WHERE SOC.OTS_HIS_SEQ = SOH.OTS_HIS_SEQ
AND SOC.TJ_SRC_NM = SLD.LU_CD
AND SLD.LU_TP_CD = 'ACCT CTNT3'
AND SOH.OTS_HIS_TP_CD = 'OTS'                   
AND SOC.BAL_AMT <> 0    
#if(${asa_flg} != '') 
	AND SOH.OTS_OFC_CD = @[ots_ofc_cd] 
#else
	AND SOH.INV_OFC_CD = @[ots_ofc_cd] 
#end
AND SOH.BL_NO = @[bl_no]
AND SOH.INV_NO = @[inv_no]
AND SOC.BL_CURR_CD = @[bl_curr_cd] 
AND SOC.CHG_TP_CD = @[chg_tp_cd]
ORDER BY SLD.DP_SEQ, 
         SOH.OTS_HIS_SEQ DESC			]]></sql>
			<params>
				<param name="ots_ofc_cd" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="inv_no" type="12" value="" out="N"/>
				<param name="bl_curr_cd" type="12" value="" out="N"/>
				<param name="chg_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
