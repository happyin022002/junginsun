<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountPayableCommonDBDAOSearchPopPayInvoiceInfomationListRSQL">
			<desc><![CDATA[AccountPayableCommonDBDAOsearchPopPayInvoiceInfomationListRSQL]]></desc>
			<sql><![CDATA[
SELECT 
	   SIH.INV_NO,
       SPS.PAY_SKD_NO,
	   TRIM(OPUSADM.SAP_GET_CUR_AMT_FNC(SIH.INV_CURR_CD, SPS.PAY_RMN_AMT)) AS PAY_RMN_AMT,
       SIH.INV_CURR_CD,
       TO_CHAR(SIH.INV_DT,'YYYYMMDD') AS INV_DT,
       SIH.GL_DT,
       SIH.INV_DESC,
	   TRIM(OPUSADM.SAP_GET_CUR_AMT_FNC(SIH.INV_CURR_CD, SIH.INV_AMT)) AS INV_AMT,
	   SIH.LIAB_CD_CMB_SEQ,
       SPS.XTER_BANK_ACCT_SEQ,
       SPS.REMIT_VNDR_NO,
	   SIH.INV_SEQ			
FROM  SAP_INV_HDR SIH,
      SAP_PAY_SKD SPS
WHERE SIH.INV_SEQ = SPS.INV_SEQ
AND SIH.INV_CXL_DT IS NULL
AND NVL(SIH.PAY_STS_FLG,'N') <> 'Y'
AND NVL(SPS.PAY_STS_FLG,'N') <> 'Y'
AND NVL(SPS.INV_HLD_FLG,'N') = 'N'
AND SPS.PAY_BAT_RUN_SEQ IS NULL
AND SIH.AP_APSTS_CD = 'MANUALLY APPROVED'
AND SIH.INV_NO LIKE NVL(@[inv_no], '')||'%'
#if (${inv_curr_cd} != '')
AND SIH.INV_PAY_CURR_CD = @[inv_curr_cd]
#end
#if (${vndr_no} != '')
AND SIH.VNDR_NO =@[vndr_no]
#end
#if (${pay_mzd_lu_cd} != '')
AND SIH.PAY_MZD_LU_CD =@[pay_mzd_lu_cd]
#end
			]]></sql>
			<params>
				<param name="inv_no" type="12" value="" out="N"/>
				<param name="inv_curr_cd" type="12" value="" out="N"/>
				<param name="vndr_no" type="12" value="" out="N"/>
				<param name="pay_mzd_lu_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
