<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableOutstandingDBDAOsearchPaymentRequestLetterHistoryRSQL">
			<desc><![CDATA[searchPaymentRequestLetterHistory]]></desc>
			<sql><![CDATA[
SELECT B.STMT_RQST_SEQ
     , DECODE(B.STMT_RQST_TP_CD,'CUST','Ad Hoc','Standard') AS STMT_RQST_TP_CD
     , B.CTRL_OFC_CD
     , TO_CHAR(B.STMT_ST_DT,'YYYY-MM-DD HH24:MI:SS') STMT_ST_DT
     , B.STMT_USR_ID
     , B.CUST_CNT_CD||LPAD(B.CUST_SEQ,6, '0') AS CS_CUST_CD
     , (SELECT CUST_LGL_ENG_NM FROM MDM_CUSTOMER A WHERE B.CUST_CNT_CD = A.CUST_CNT_CD AND B.CUST_SEQ = A.CUST_SEQ) CUST_NM
     , B.STMT_STS_CD   
FROM SAR_PAY_RQST_LTR_HIS B
 WHERE 1 = 1
#if ( ${r_type} != '')
 AND B.STMT_RQST_TP_CD = DECODE(@[r_type],'C','CUST','OFC')
#end 
#if ( ${cust_cnt_cd} != '' && ${cust_seq} )
 AND (B.CUST_CNT_CD = @[cust_cnt_cd] AND B.CUST_SEQ = TO_NUMBER(@[cust_seq]))
#end 
#if ( ${ar_ofc_cd} != '')
 AND B.CTRL_OFC_CD = @[ar_ofc_cd]
#end 
#if ( ${send_dt_fm} != '' && ${send_dt_to} )
 AND (B.STMT_ST_DT BETWEEN TO_DATE(REPLACE(@[send_dt_fm],'-',''), 'YYYYMMDD') 
     AND (TO_DATE(REPLACE(@[send_dt_to],'-',''), 'YYYYMMDD') + 0.99999))
#end
ORDER BY B.STMT_ST_DT DESC			]]></sql>
			<params>
				<param name="r_type" type="12" value="" out="N"/>
				<param name="cust_cnt_cd" type="12" value="" out="N"/>
				<param name="cust_seq" type="12" value="" out="N"/>
				<param name="ar_ofc_cd" type="12" value="" out="N"/>
				<param name="send_dt_fm" type="12" value="" out="N"/>
				<param name="send_dt_to" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
