<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableAdjustDBDAOSearchSapInvDtlIfCdCmbNextSeqRSQL">
			<desc><![CDATA[get Next Code Combination Sequence No for AP DTL IF]]></desc>
			<sql><![CDATA[
#if(${sys_tp_cd} == 'ADJ')

SELECT SLCC2.CD_CMB_SEQ
FROM SCO_LEGR_CD_CMB SLCC1, 
	 SCO_LEGR_CD_CMB SLCC2,
     SAR_ACCT_MTX SAM
WHERE SLCC1.SGM_CTNT1 = SLCC2.SGM_CTNT1
AND SLCC1.SGM_CTNT2 = SLCC2.SGM_CTNT2
AND SLCC1.SGM_CTNT3 = SLCC2.SGM_CTNT3
#if(${rvs_flg} == 'N')
	AND SLCC2.SGM_CTNT4 = DECODE(SUBSTR(${gain_and_lss_amt} ,1,1), '-', SAM.LEGR_XCH_DIFF_INCM_ACCT_CD, SAM.LEGR_XCH_DIFF_LSS_ACCT_CD )
#else
	AND SLCC2.SGM_CTNT4 = DECODE(SUBSTR(${gain_and_lss_amt} ,1,1), '-', SAM.LEGR_XCH_DIFF_LSS_ACCT_CD, SAM.LEGR_XCH_DIFF_INCM_ACCT_CD )
#end
AND SLCC1.SGM_CTNT5 = SLCC2.SGM_CTNT5
AND SLCC1.SGM_CTNT6 = SLCC2.SGM_CTNT6
AND SLCC1.CD_CMB_SEQ = @[dtrb_cd_cmb_seq]
AND SAM.ACCT_CTNT1 ='ADJ'
AND SAM.ACCT_TP_CD = @[adj_tp_cd]

#elseif(${sys_tp_cd} == 'OFF')

SELECT SLCC2.CD_CMB_SEQ
FROM SCO_LEGR_CD_CMB SLCC1, 
	 SCO_LEGR_CD_CMB SLCC2,
     SAR_ACCT_MTX SAM
WHERE SLCC1.SGM_CTNT1 = SLCC2.SGM_CTNT1
AND SLCC1.SGM_CTNT2 = SLCC2.SGM_CTNT2
AND SLCC1.SGM_CTNT3 = SLCC2.SGM_CTNT3
AND SLCC2.SGM_CTNT4 = @[off_gain_and_lss_acct_cd]
AND SLCC1.SGM_CTNT5 = SLCC2.SGM_CTNT5
AND SLCC1.SGM_CTNT6 = SLCC2.SGM_CTNT6
AND SLCC1.CD_CMB_SEQ = @[dtrb_cd_cmb_seq]
AND SAM.ACCT_CTNT1 ='ADJ'
AND SAM.ACCT_TP_CD = @[adj_tp_cd]

#end			]]></sql>
			<params>
				<param name="dtrb_cd_cmb_seq" type="12" value="" out="N"/>
				<param name="adj_tp_cd" type="12" value="" out="N"/>
				<param name="off_gain_and_lss_acct_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
