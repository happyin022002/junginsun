<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivalbeAgentDBDAOsearchAgentCollectionListInquiryRSQL">
			<desc><![CDATA[Agent Collection List Inquiry]]></desc>
			<sql><![CDATA[
SELECT 
 ASA_NO         ,BL_NO      ,INV_NO         ,CHG_TP_CD       ,ASA_CLT_SEQ     
,AR_OFC_CD      ,VVD_CD     ,PORT_CD        ,ASA_XCH_RT1     ,ASA_CURR_CD
,ASA_XCH_RT2    ,ASA_RMK    ,AGN_CD         ,SVC_SCP_CD      ,EFF_DT
,IB_OB_CD       ,GL_YRMON   ,LOCL_CURR_CD   ,SAIL_ARR_DT     ,TO_CHAR(DUE_DT,'YYYYMMDD') AS DUE_DT
,ASA_TP_CD      ,TTL_AMT    ,USD_AMT        ,CHG_USD_AMT     ,EQV_LOCL_AMT

, N3RD_CURR_CD1  , N3RD_AMT1 , N3RD_XCH_RT1 , N3RD_LOCL_AMT1
, N3RD_CURR_CD2  , N3RD_AMT2 , N3RD_XCH_RT2 , N3RD_LOCL_AMT2
, N3RD_CURR_CD3  , N3RD_AMT3 , N3RD_XCH_RT3 , N3RD_LOCL_AMT3
, N3RD_CURR_CD4  , N3RD_AMT4 , N3RD_XCH_RT4 , N3RD_LOCL_AMT4
, EQV_LOCL_AMT2  ,LOCL_AMT

,'' OPTION1      ,'' OPTION2        ,'' ASA_NO1      ,'' ASA_NO2      ,'' ASA_NO3
,'' BND          ,'' GL_YRMON_FM	,'' GL_YRMON_TO	 ,'' DUE_DT_FM	  ,'' DUE_DT_TO

FROM SAR_AGN_CLT_RFND_MST SAC
WHERE 1=1
AND  ASA_NO			 = @[asa_no1]||@[asa_no2]||@[asa_no3]
AND AR_OFC_CD        = @[ar_ofc_cd]
AND GL_YRMON        <= SUBSTR(REPLACE(@[gl_yrmon_to],'-',''),1,6)
#if (${option2} == 'V' )       
    #if ( ${bnd} != 'ALL'  ) 
       AND IB_OB_CD  =  @[bnd] 
    #end
    
    #if ( ${vvd_cd} != '' )
       AND VVD_CD = @[vvd_cd]
    #end  
    
    #if ( ${svc_scp_cd} != '' )
      AND SVC_SCP_CD = @[svc_scp_cd]
    #end  
    
    #if ( ${port_cd} != '' )
      AND PORT_CD = @[port_cd]
    #end  
    
#elseif ( ${option2} == 'D' )
    
    #if ( ${due_dt_fm} != '' )
         AND DUE_DT >=  TO_DATE(REPLACE(@[due_dt_fm],'-','') ,'YYYYMMDD')      
    #end                   
    #if ( ${due_dt_to} != '' )
         AND DUE_DT <=  TO_DATE(REPLACE(@[due_dt_to],'-','') ,'YYYYMMDD')      
    #end                           
    
#end

#if (${option1} != 'ALL') 
#if (${option1} == 'C' )
AND	TTL_AMT >= 0 
#elseif (${option1} == 'R' )
AND TTL_AMT < 0 
#end
#end			]]></sql>
			<params>
				<param name="asa_no1" type="12" value="" out="N"/>
				<param name="asa_no2" type="12" value="" out="N"/>
				<param name="asa_no3" type="12" value="" out="N"/>
				<param name="ar_ofc_cd" type="12" value="" out="N"/>
				<param name="gl_yrmon_to" type="12" value="" out="N"/>
				<param name="bnd" type="12" value="" out="N"/>
				<param name="vvd_cd" type="12" value="" out="N"/>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="port_cd" type="12" value="" out="N"/>
				<param name="due_dt_fm" type="12" value="" out="N"/>
				<param name="due_dt_to" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
