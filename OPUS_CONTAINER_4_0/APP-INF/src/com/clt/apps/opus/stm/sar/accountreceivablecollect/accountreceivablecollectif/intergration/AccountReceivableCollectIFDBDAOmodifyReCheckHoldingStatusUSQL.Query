<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableCollectIFDBDAOmodifyReCheckHoldingStatusUSQL">
			<desc><![CDATA[modifyReCheckHoldingStatus]]></desc>
			<sql><![CDATA[
UPDATE SAR_AR_IF SET 
    ERP_IF_ERR_RSN = 'DR minus CR is not zero'
WHERE IF_SEQ_NO = @[if_seq_no]
AND IF_FLG = 'H'
AND 'N' =
(
   SELECT 
     CASE WHEN NVL(sum(decode(pst_key_cd,'01',NVL(locl_amt,0),40,NVL(locl_amt,0),11,NVL(locl_amt,0)*(-1), 50,NVL(locl_amt,0)*(-1))),0) = 0
          AND NVL(sum(decode(pst_key_cd,'01',NVL(doc_amt,0),40,NVL(doc_amt,0),11,NVL(doc_amt,0)*(-1), 50,NVL(doc_amt,0)*(-1))),0) = 0 THEN 'Y'
     ELSE 'N'
   END
      FROM SAR_AR_IF
     WHERE IF_SEQ_NO = @[if_seq_no]
       AND IF_FLG='H'
)			]]></sql>
			<params>
				<param name="if_seq_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
