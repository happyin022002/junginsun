<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableCommonDBDAOsearchAROfficeListRSQL">
			<desc><![CDATA[레벨별 AR Office 리스트 조회]]></desc>
			<sql><![CDATA[
SELECT ARMO.OFC_CD OTS_OFC_CD   
	 , DECODE(ISO.OTS_SMRY_CD, '', DECODE(SOI.OTS_CATE_CD, '', 'BL', SOI.OTS_CATE_CD), DECODE(ISO.OTS_SMRY_CD, 'CLR', 'BL', ISO.OTS_SMRY_CD)) AS OTS_SMRY_CD
     , SOI.OTS_CD
     , SOI.REP_OTS_OFC_CD
     , ARMO.AR_HD_QTR_OFC_CD RHQ_CD
     , SOI.RCT_TP_CD
     , SOI.RCT_UNAPY_FLG
	 , SOI.OFC_ENTR_LVL_CD
	 , ARMO.AR_CURR_CD
     , MC.DP_PRCS_KNT 
	 , @[ar_ofc_cd] AR_OFC_CD 
	 , SOI.BANK_CTRL_CD
     , SOI.OFC_BRNC_AGN_TP_CD
     , SOI.AGN_CURR_CD
     , SOI.AGN_PFX_CD
     , SOI.AGN_OTS_LMT_AMT
     , SOI.AGN_CMB_CD
	 , NVL(SOI.RCT_DOC_CD, 'STANDARD') RCT_DOC_CD
FROM MDM_ORGANIZATION ARMO,
     INV_AR_STUP_OFC ISO,
     SCO_OFC_INFO  SOI,
     MDM_CURRENCY MC
WHERE ARMO.OFC_CD = ISO.AR_OFC_CD(+)
AND   ARMO.OFC_CD = SOI.OFC_CD(+)
AND   ARMO.AR_CURR_CD = MC.CURR_CD(+)
#if (${ofc_entr_lvl_cd} == 'BA' || ${ofc_entr_lvl_cd} == '') 
    #if (${ots_cd} == 'COU')
        AND EXISTS(SELECT 'X'
                   FROM   SCO_OFC_INFO SOI2
                   WHERE  SOI.REP_OTS_OFC_CD = SOI2.REP_OTS_OFC_CD
                   AND    SOI2.OFC_CD = @[ar_ofc_cd])
    #else
        AND ARMO.OFC_CD = @[ar_ofc_cd]
    #end 
#elseif (${ofc_entr_lvl_cd} == 'HO' || ${ofc_entr_lvl_cd} =='HQ')
    AND EXISTS ( SELECT 'X' 
                 FROM   MDM_ORGANIZATION MO 
                 WHERE  MO.OFC_CD = @[ar_ofc_cd] 
			     AND    MO.AR_HD_QTR_OFC_CD = ARMO.AR_HD_QTR_OFC_CD ) 
    AND EXISTS ( SELECT 'X' 
                 FROM   MDM_ORGANIZATION MO 
                 WHERE  ARMO.OFC_CD = MO.AR_OFC_CD )
#elseif (${ofc_entr_lvl_cd} == 'ALL')    
	AND EXISTS ( SELECT 'X' 
                 FROM   MDM_ORGANIZATION MO 
                 WHERE  ARMO.OFC_CD = MO.AR_OFC_CD )
#end
#if(${ofc_brnc_agn_tp_cd} != '')
	AND SOI.OFC_BRNC_AGN_TP_CD = @[ofc_brnc_agn_tp_cd]
#end
ORDER BY ARMO.OFC_CD			]]></sql>
			<params>
				<param name="ar_ofc_cd" type="12" value="" out="N"/>
				<param name="ofc_brnc_agn_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
