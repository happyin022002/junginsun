<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="StatementCommonDBDAOSearchSakuraInterfaceInfoRSQL">
			<desc><![CDATA[Search Sakura Interface Info]]></desc>
			<sql><![CDATA[
SELECT *
FROM (

SELECT ORG_T.*
 ,ROWNUM AS RNUM 
 ,COUNT(*) OVER() AS TOTAL_CNT

FROM (

#if (${module} != 'AP' )
SELECT  IF_DOC_TP_CD,
        DOC_DT,
        PST_DT,
        REF_DOC_NO,
        CURR_CD,
        PST_KEY_CD,
        VAT_TAX_CD,
        SAR_GET_FMT_MASK_FNC('JPY', LOCL_AMT) LOCL_AMT,
        SAR_GET_FMT_MASK_FNC(CURR_CD, DOC_AMT) DOC_AMT,
        ASGN_NO,
        GL_ACCT_NO,
        CUST_NO,
        REC_TP_CD,
        IF_FLG,
		IF_FILE_ID,
        IF_DT,
        ERP_IF_ERR_FLG,
        ERP_IF_ERR_RSN       
FROM    SAR_AR_IF
WHERE   
		IF_FLG <> 'H'
#if (${pst_dt_fm} != '')
	AND PST_DT >= REPLACE(@[pst_dt_fm], '-', '')
#end
#if (${pst_dt_to} != '')
	AND PST_DT <= REPLACE(@[pst_dt_to], '-', '')
#end
#if (${if_dt_fm} != '')
	AND	TO_CHAR(IF_DT,'YYYYMMDD') >= REPLACE(@[if_dt_fm], '-', '')
#end
#if (${if_dt_to} != '')
	AND TO_CHAR(IF_DT,'YYYYMMDD') <= REPLACE(@[if_dt_to], '-', '')
#end
#if (${asgn_no} != '' )
    AND     ASGN_NO = @[asgn_no]
#end
#if (${ref_doc_no} != '' )
    AND     REF_DOC_NO = @[ref_doc_no]
#end
#if(${if_doc_tp_cd} != '')
    AND     IF_DOC_TP_CD = @[if_doc_tp_cd]
#end
#if(${if_flg} != '')
    AND     IF_FLG = @[if_flg]
#end
#end

#if (${module} == '' )
UNION ALL
#end

#if (${module} != 'AR') 
SELECT  IF_DOC_TP_CD,
        DOC_DT,
        PST_DT,
        REF_DOC_NO,
        CURR_CD,
        PST_KEY_CD,
        VAT_TAX_CD,
        SAR_GET_FMT_MASK_FNC('JPY', LOCL_AMT) LOCL_AMT,
        SAR_GET_FMT_MASK_FNC(CURR_CD, DOC_AMT) DOC_AMT,
        ASGN_NO,
        GL_ACCT_NO,
        CUST_NO,
        '' REC_TP_CD,
        IF_FLG,
		IF_FILE_ID,
        IF_DT,
        ERP_IF_ERR_FLG,
        ERP_IF_ERR_RSN       
FROM    SAP_AP_IF
WHERE   
		IF_FLG <> 'H'
#if (${pst_dt_fm} != '')
	AND PST_DT >= REPLACE(@[pst_dt_fm], '-', '')
#end
#if (${pst_dt_to} != '')
	AND PST_DT <= REPLACE(@[pst_dt_to], '-', '')
#end
#if (${if_dt_fm} != '')
	AND TO_CHAR(IF_DT,'YYYYMMDD') >= REPLACE(@[if_dt_fm], '-', '')
#end
#if (${if_dt_to} != '')
	AND TO_CHAR(IF_DT,'YYYYMMDD') <= REPLACE(@[if_dt_to], '-', '')
#end
#if (${asgn_no} != '' )
    AND     ASGN_NO = @[asgn_no]
#end
#if (${ref_doc_no} != '' )
    AND     REF_DOC_NO = @[ref_doc_no]
#end
#if(${if_doc_tp_cd} != '')
    AND     IF_DOC_TP_CD = @[if_doc_tp_cd]
#end
#if(${if_flg} != '')
    AND     IF_FLG = @[if_flg]
#end

#end

) ORG_T
)
WHERE RNUM BETWEEN @[startpart] AND @[endpart]			]]></sql>
			<params>
				<param name="pst_dt_fm" type="12" value="" out="N"/>
				<param name="pst_dt_to" type="12" value="" out="N"/>
				<param name="if_dt_fm" type="12" value="" out="N"/>
				<param name="if_dt_to" type="12" value="" out="N"/>
				<param name="asgn_no" type="12" value="" out="N"/>
				<param name="ref_doc_no" type="12" value="" out="N"/>
				<param name="if_doc_tp_cd" type="12" value="" out="N"/>
				<param name="if_flg" type="12" value="" out="N"/>
				<param name="startpart" type="12" value="" out="N"/>
				<param name="endpart" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
