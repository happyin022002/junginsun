<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableReceiptDBDAOsearchUnapplyReceiptListRSQL">
			<desc><![CDATA[Unapply Receipt 리스트 조회]]></desc>
			<sql><![CDATA[
SELECT SR.CHQ_NO,
       SR.RCT_DT,
       SR.RCT_NO,
       SR.RCT_CUST_CNT_CD,
       SR.RCT_CUST_SEQ,
       DECODE(SR.RCT_CUST_CNT_CD, '', '', SR.RCT_CUST_CNT_CD||'-'||LPAD(SR.RCT_CUST_SEQ, 6, '0')) RCT_CUST_CD,
       NVL(MCC.LOCL_NM, MC.CUST_LGL_ENG_NM) CUST_NM,
       SR.RCT_OFC_CD,
       SR.RCT_CURR_CD,
       SAR_GET_CUR_AMT_FNC(SR.RCT_CURR_CD, SR.RCT_AMT) RCT_AMT,
       DECODE(SR.RCT_STS_CD, 'UNID', SAR_GET_CUR_AMT_FNC(SR.RCT_CURR_CD, SR.BAL_RCT_AMT), 0) UNIDEN_AMT,
       DECODE(SR.RCT_STS_CD, 'UNAPP', SAR_GET_CUR_AMT_FNC(SR.RCT_CURR_CD, SR.BAL_RCT_AMT), 0) UNAPPL_AMT,       
       SR.RCT_RMK,
       SR.CRE_USR_ID,
       CU.USR_NM CRE_USR_NM
FROM   SAR_RECEIPT SR,
       MDM_CUSTOMER MC,       
       MDM_CR_CUST MCC,
       COM_USER CU
WHERE  SR.RCT_CUST_CNT_CD = MC.CUST_CNT_CD(+)
AND    SR.RCT_CUST_SEQ = MC.CUST_SEQ(+)
AND    MC.CUST_CNT_CD = MCC.CUST_CNT_CD(+)
AND    MC.CUST_SEQ = MCC.CUST_SEQ(+)
AND    SR.CRE_USR_ID = CU.USR_ID
AND    SR.RCT_CXL_DT IS NULL
AND    SR.RCT_STS_CD IN ('UNAPP','UNID')
AND    SR.BAL_RCT_AMT > 0
AND    SR.RCT_OFC_CD = @[rct_ofc_cd]
#if (${rct_cust_cnt_cd} != '')
    AND    SR.RCT_CUST_CNT_CD = @[rct_cust_cnt_cd]
#end
#if (${rct_cust_seq} != '')
    AND    SR.RCT_CUST_SEQ = TO_NUMBER(@[rct_cust_seq])
#end 
#if (${rct_from_dt} != '')
    AND    SR.RCT_DT >= REPLACE(@[rct_from_dt], '-', '')
#end
#if (${rct_to_dt} != '')
    AND    SR.RCT_DT <= REPLACE(@[rct_to_dt], '-', '')
#end
#if (${rct_no} != '')
    AND    SR.RCT_NO = @[rct_no]
#end
#if (${chq_no} != '')
    AND    SR.CHQ_NO = @[chq_no]
#end
#if (${rct_from_amt} != '')
    AND    SR.RCT_AMT >= TO_NUMBER(REPLACE(@[rct_from_amt], ',', ''))
#end
#if (${rct_to_amt} != '')
    AND    SR.RCT_AMT <= TO_NUMBER(REPLACE(@[rct_to_amt], ',', ''))
#end
#if (${cre_usr_id} != '')
    AND    SR.CRE_USR_ID = @[cre_usr_id]
#end
#if (${rct_curr_cd} != '')
    AND    SR.RCT_CURR_CD = @[rct_curr_cd]
#end			]]></sql>
			<params>
				<param name="rct_ofc_cd" type="12" value="" out="N"/>
				<param name="rct_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="rct_cust_seq" type="12" value="" out="N"/>
				<param name="rct_from_dt" type="12" value="" out="N"/>
				<param name="rct_to_dt" type="12" value="" out="N"/>
				<param name="rct_no" type="12" value="" out="N"/>
				<param name="chq_no" type="12" value="" out="N"/>
				<param name="rct_from_amt" type="12" value="" out="N"/>
				<param name="rct_to_amt" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="rct_curr_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
