<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountPayableInvoiceDBDAOSearhAsaInfoListRSQL">
			<desc><![CDATA[SearhAsaInfoList]]></desc>
			<sql><![CDATA[
SELECT  SAM.ASA_NO    AS ASA_NO
      , DECODE(SAM.ASA_STS_CD, 'O', 'Open', 'A', 'Approve') AS ASA_STATUS
      , SAM.AGN_CD    AS ASA_OFFICE
      , SAM.CURR_CD   AS ASA_CURRENCY
      , SUBSTR(SAM.ASA_PRD_FM_DT,1,4) ||'-'|| SUBSTR(SAM.ASA_PRD_FM_DT,5,2) ||'-'|| SUBSTR(SAM.ASA_PRD_FM_DT,7,2) AS ASA_PERIOD_FROM
      , SUBSTR(SAM.ASA_PRD_TO_DT,1,4) ||'-'|| SUBSTR(SAM.ASA_PRD_TO_DT,5,2) ||'-'|| SUBSTR(SAM.ASA_PRD_TO_DT,7,2) AS ASA_PERIOD_TO
FROM    SAR_ASA_MST SAM
      , MDM_ORGANIZATION MO
WHERE   MO.AR_OFC_CD = SAM.AGN_CD
AND     MO.AR_OFC_CD = SAM.OFC_CD  
AND     MO.OFC_CD = @[ofc_cd]
AND     SAM.CURR_CD = @[inv_curr_cd]
AND     SAM.ASA_FSH_DT IS NULL
UNION  
SELECT  SAM.ASA_NO    AS ASA_NO
      , DECODE(SAM.ASA_STS_CD, 'O', 'Open', 'A', 'Approve') AS ASA_STATUS
      , SAM.AGN_CD    AS ASA_OFFICE
      , SAM.CURR_CD   AS ASA_CURRENCY
      , SUBSTR(SAM.ASA_PRD_FM_DT,1,4) ||'-'|| SUBSTR(SAM.ASA_PRD_FM_DT,5,2) ||'-'|| SUBSTR(SAM.ASA_PRD_FM_DT,7,2) AS ASA_PERIOD_FROM
      , SUBSTR(SAM.ASA_PRD_TO_DT,1,4) ||'-'|| SUBSTR(SAM.ASA_PRD_TO_DT,5,2) ||'-'|| SUBSTR(SAM.ASA_PRD_TO_DT,7,2) AS ASA_PERIOD_TO
FROM    SAP_INV_HDR SIH
      , SAR_ASA_MST SAM
WHERE   SIH.ATTR_CTNT2 = SAM.ASA_NO
AND     SIH.INV_SEQ = DECODE(@[inv_seq], 'NO_DATA', '',@[inv_seq] )			]]></sql>
			<params>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="inv_curr_cd" type="12" value="" out="N"/>
				<param name="inv_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
