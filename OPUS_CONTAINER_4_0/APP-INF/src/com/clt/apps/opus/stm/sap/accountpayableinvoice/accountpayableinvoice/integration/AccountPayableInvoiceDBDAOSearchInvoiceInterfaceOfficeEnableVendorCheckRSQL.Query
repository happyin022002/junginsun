<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountPayableInvoiceDBDAOSearchInvoiceInterfaceOfficeEnableVendorCheckRSQL">
			<desc><![CDATA[Office의 Region 정보와 Vendor의 Country 정보를 비교하여 11(본사) 지역의 경우 본사해당 Country을 갖는 Vendor만 사용하고 그외의 지역에는 본사외 해당 Country을 갖는 Vendor만을 사용하도록 체크]]></desc>
			<sql><![CDATA[
SELECT  DECODE(MO.FINC_RGN_CD, '11', DECODE(ML.CNT_CD, NVL(OWNCT.LU_CD, 'N1'), 'Y', 'N'), DECODE(ML.CNT_CD, NVL(OWNCT.LU_CD, 'N1'), 'N', 'Y')) AS ENABLE_FLG
FROM    MDM_ORGANIZATION MO
      , MDM_VENDOR MV
      , MDM_LOCATION ML
      , MDM_ORGANIZATION MO2
      , MDM_COUNTRY MC
      , (SELECT  SLD.LU_TP_CD, SLD.LU_CD, SLD.LU_DESC 
         FROM    SCO_LU_DTL SLD
         WHERE   SLD.LU_TP_CD = 'NATIVE COUNTRY' AND SLD.ENBL_FLG = 'Y' AND NVL(SLD.LU_ST_DT, SYSDATE) >= SYSDATE AND ROWNUM = 1) OWNCT
WHERE   MO.OFC_CD = @[ofc_cd]
AND     MV.VNDR_SEQ = @[vndr_cd]
AND     MV.OFC_CD = MO2.OFC_CD
AND     MO2.LOC_CD = ML.LOC_CD
AND     ML.CNT_CD = MC.CNT_CD(+)
AND     ML.CNT_CD = OWNCT.LU_CD(+)			]]></sql>
			<params>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="vndr_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
