<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableAdjustDBDAOSearchCurrencyRoundingCheckListRSQL">
			<desc><![CDATA[get Currency Rounding Check List]]></desc>
			<sql><![CDATA[
SELECT 
    REC_ACCT_AMT,
    CONV_ADJ_ACCT_AMT,
    CASE WHEN ABS(REC_ACCT_AMT) - ABS(CONV_ADJ_ACCT_AMT) <> 0 THEN ABS(REC_ACCT_AMT) - ABS(CONV_ADJ_ACCT_AMT)
    END AS CURR_ROUND,
    CASE WHEN ABS(REC_ACCT_AMT) - ABS(CONV_ADJ_ACCT_AMT) <> 0 THEN 'HDR_RND'
    END AS DTRB_SRC_TP_CD
FROM
(    
    SELECT ROUND(SOC.BAL_AMT * SODR.CONV_XCH_RT, @[dp_prcs_knt]) AS OTS_BAL_ACCT_AMT,
           ROUND((SOC.BAL_AMT + @[adj_amt]) * SODR.CONV_XCH_RT, @[dp_prcs_knt]) AS OTS_ENDG_BAL_ACCT_AMT,
           (ROUND(SOC.BAL_AMT * SODR.CONV_XCH_RT, @[dp_prcs_knt]) - ROUND((SOC.BAL_AMT + @[adj_amt]) * SODR.CONV_XCH_RT, @[dp_prcs_knt])) AS REC_ACCT_AMT,
           ROUND(@[adj_amt] * SODR.CONV_XCH_RT, @[dp_prcs_knt]) AS CONV_ADJ_ACCT_AMT
    FROM   SAR_OTS_CHG SOC,
           SAR_OTS_DTRB SODR
    WHERE  SOC.OTS_HIS_SEQ = @[ots_his_seq]
    AND    SOC.CHG_TP_CD = @[chg_tp_cd]
    AND    SOC.OTS_HIS_SEQ = SODR.OTS_HIS_SEQ
    AND    SOC.CHG_TP_CD = SODR.CHG_TP_CD
    AND    SODR.ACCT_CLSS_CD = 'REC'
)			]]></sql>
			<params>
				<param name="dp_prcs_knt" type="12" value="" out="N"/>
				<param name="adj_amt" type="12" value="" out="N"/>
				<param name="ots_his_seq" type="12" value="" out="N"/>
				<param name="chg_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
