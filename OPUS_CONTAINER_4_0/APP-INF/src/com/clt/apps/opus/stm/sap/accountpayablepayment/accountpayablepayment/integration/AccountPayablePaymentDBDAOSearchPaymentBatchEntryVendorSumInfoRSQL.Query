<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountPayablePaymentDBDAOSearchPaymentBatchEntryVendorSumInfoRSQL">
			<desc><![CDATA[searchPaymentBatchEntryVendorSumInfo]]></desc>
			<sql><![CDATA[
SELECT  SSI.PAY_BAT_SEQ
      , SSI.PAY_BAT_NM
      , SSI.VNDR_NO
      , SUM(SSI.PAY_AMT) AS PAY_AMT
      , SISC.BANK_ACCT_SEQ
      , (SELECT  NVL(ATTR_CTNT1,0) + 1 AS PAY_NO
         FROM    SCO_LU_HDR SLH
               , SCO_LU_DTL SLD
         WHERE   SLH.LU_TP_CD = SLD.LU_TP_CD
         AND     SLH.LU_TP_CD = 'PAYMENT METHOD'
         AND     NVL(SLD.ENBL_FLG, 'Y') = 'Y'
         AND     NVL(SLD.LU_ST_DT, SYSDATE) >= SYSDATE
         AND     SLH.LU_APPL_CD = 'SAP'
         AND     LU_CD = SISC.PAY_MZD_LU_CD) AS DOC_FIRST_NO
      , (SELECT  NVL(ATTR_CTNT1,0) + 1 AS PAY_NO
         FROM    SCO_LU_HDR SLH
               , SCO_LU_DTL SLD
         WHERE   SLH.LU_TP_CD = SLD.LU_TP_CD
         AND     SLH.LU_TP_CD = 'PAYMENT METHOD'
         AND     NVL(SLD.ENBL_FLG, 'Y') = 'Y'
         AND     NVL(SLD.LU_ST_DT, SYSDATE) >= SYSDATE
         AND     SLH.LU_APPL_CD = 'SAP'
         AND     LU_CD = SISC.PAY_MZD_LU_CD) + COUNT(SSI.VNDR_NO) AS DOC_LAST_NO
FROM    SAP_SEL_INV SSI
      , SAP_INV_SEL_CRTE SISC
WHERE   SSI.PAY_BAT_SEQ = SISC.PAY_BAT_SEQ
AND     SSI.PAY_BAT_NM = SISC.PAY_BAT_NM
AND     SSI.PAY_BAT_SEQ = @[pay_bat_seq]
AND     SSI.PAY_BAT_NM = @[pay_bat_nm]
GROUP   BY SSI.PAY_BAT_SEQ
         , SSI.PAY_BAT_NM
         , SSI.VNDR_NO
         , SISC.BANK_ACCT_SEQ
         , SISC.PAY_MZD_LU_CD			]]></sql>
			<params>
				<param name="pay_bat_seq" type="12" value="" out="N"/>
				<param name="pay_bat_nm" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
