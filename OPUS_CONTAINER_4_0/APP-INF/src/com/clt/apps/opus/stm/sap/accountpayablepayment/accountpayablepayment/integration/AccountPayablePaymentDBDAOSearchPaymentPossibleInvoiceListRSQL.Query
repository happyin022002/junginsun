<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountPayablePaymentDBDAOSearchPaymentPossibleInvoiceListRSQL">
			<desc><![CDATA[searchPaymentPossibleInvoiceList]]></desc>
			<sql><![CDATA[
SELECT  SIH.INV_NO                          AS INV_NO
      , SIH.INV_SEQ                         AS INV_SEQ
      , TO_CHAR(SIH.INV_DT,'YYYYMMDD')      AS INV_DT
      , SIH.VNDR_NO                         AS VNDR_NO
      , MV.VNDR_LGL_ENG_NM                  AS VNDR_LGL_ENG_NM
      , SIH.INV_CURR_CD                     AS PAY_CURR_CD
      , TRIM(SAP_GET_CUR_AMT_FNC(SIH.INV_CURR_CD, SIH.INV_AMT))  INV_AMT
      , TO_CHAR(SPS.DUE_DT,'YYYYMMDD')      AS DUE_DT
      , SIH.INV_DESC                        AS INV_DESC
      , TRIM(SAP_GET_CUR_AMT_FNC(SIH.INV_CURR_CD, SPS.PAY_RMN_AMT))  PAY_AMT
      , SBA.BANK_ACCT_NO                    AS BANK_ACCT_NO
      , @[pay_bat_seq]                      AS PAY_BAT_SEQ
      , @[pay_bat_nm]                       AS PAY_BAT_NM
	  , SPS.PAY_SKD_NO                      AS PAY_SKD_NO
FROM    SAP_INV_HDR SIH
      , SAP_PAY_SKD SPS
      , MDM_VENDOR MV
      , SAP_BANK_ACCT SBA
WHERE   SIH.INV_SEQ = SPS.INV_SEQ 
AND     TO_NUMBER(SIH.VNDR_NO) = MV.VNDR_SEQ 
AND     SPS.XTER_BANK_ACCT_SEQ = SBA.BANK_ACCT_SEQ(+)
AND     SIH.INV_CXL_DT IS NULL
AND     NVL(SIH.PAY_STS_FLG,'N') <> 'Y'
AND     NVL(SPS.PAY_STS_FLG,'N') <> 'Y'
AND     NVL(SPS.INV_HLD_FLG,'N') = 'N'
AND     SPS.PAY_BAT_RUN_SEQ IS NULL
AND     SIH.AP_APSTS_CD = 'MANUALLY APPROVED'
AND     SIH.INV_NO LIKE NVL(@[inv_no], '')||'%'			]]></sql>
			<params>
				<param name="pay_bat_seq" type="12" value="" out="N"/>
				<param name="pay_bat_nm" type="12" value="" out="N"/>
				<param name="inv_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
