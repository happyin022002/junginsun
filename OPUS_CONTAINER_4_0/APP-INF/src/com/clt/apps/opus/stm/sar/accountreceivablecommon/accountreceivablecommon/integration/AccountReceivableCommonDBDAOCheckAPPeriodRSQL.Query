<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableCommonDBDAOCheckAPPeriodRSQL">
			<desc><![CDATA[Check AP period]]></desc>
			<sql><![CDATA[
SELECT DECODE(NVL(MAX(CHK_PRD1), 'N')||NVL(MAX(CHK_PRD2), 'N'), 'CC', 'C', 'CO', 'C', 'NC', 'C', 'NN', 'C', 'O') CHK_PRD 
FROM
	(SELECT CLZ_STS_CD AS CHK_PRD1, NULL AS CHK_PRD2
	 FROM AP_PERIOD 
	 WHERE EFF_YRMON = SUBSTR(REPLACE(@[gl_dt], '-'), 0, 6) 
	 AND SYS_DIV_CD = '34' 
	 AND OFC_CD = @[ofc_cd]
	 AND AR_AP_DIV_CD = 'P'

	 UNION ALL

	 SELECT NULL AS CHG_PRD1, CLZ_STS_CD AS CHK_PRD2
	 FROM AP_PERIOD AP
      	  , MDM_ORGANIZATION MO
	 WHERE AP.EFF_YRMON = SUBSTR(REPLACE(@[gl_dt], '-'), 0, 6) 
	 AND AP.SYS_DIV_CD = '34' 
	 AND MO.OFC_CD = @[ofc_cd]   
	 AND AP.AR_AP_DIV_CD = 'P'
	 AND AP.OFC_CD = MO.AR_HD_QTR_OFC_CD)			]]></sql>
			<params>
				<param name="gl_dt" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
