<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountPayablePaymentDBDAOSearchAccountingPaymentInvGainLossAmtInfoRSQL">
			<desc><![CDATA[searchAccountingPaymentInvGainLossAmtInfo]]></desc>
			<sql><![CDATA[
  SELECT  ABS(ROUND(SPD.PAY_AMT * NVL(SIH.INV_XCH_RT, 1), 
	 	  (SELECT DP_PRCS_KNT FROM MDM_CURRENCY MC WHERE MC.CURR_CD = @[functional_currency] AND DELT_FLG = 'N' AND ROWNUM=1)) - 
	      ROUND(SPD.PAY_AMT * NVL((SELECT SPH.PAY_XCH_RT FROM SAP_PAY_HDR SPH WHERE SPH.PAY_SEQ = SPD.PAY_SEQ AND ROWNUM = 1), 1), 
	    	(SELECT DP_PRCS_KNT FROM MDM_CURRENCY MC WHERE MC.CURR_CD = @[functional_currency] AND DELT_FLG = 'N' AND ROWNUM=1))) AS GAIN_LOSS_AMT
  FROM    SAP_PAY_DTL SPD
	    , SAP_INV_HDR SIH
  WHERE   SPD.INV_SEQ = SIH.INV_SEQ 
  AND     SPD.INV_PAY_SEQ = @[inv_pay_seq]
  AND     SPD.INV_SEQ = @[inv_seq]			]]></sql>
			<params>
				<param name="functional_currency" type="12" value="" out="N"/>
				<param name="inv_pay_seq" type="12" value="" out="N"/>
				<param name="inv_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
