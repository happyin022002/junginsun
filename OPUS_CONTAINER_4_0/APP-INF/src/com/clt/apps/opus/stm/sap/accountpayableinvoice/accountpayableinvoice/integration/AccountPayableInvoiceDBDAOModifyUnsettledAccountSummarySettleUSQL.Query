<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountPayableInvoiceDBDAOModifyUnsettledAccountSummarySettleUSQL">
			<desc><![CDATA[AccountPayableInvoiceDBDAOModifyUnsettledAccountSummarySettleUSQL]]></desc>
			<sql><![CDATA[
UPDATE  SAP_UNSTL_SMRY SUS
SET     SUS.ACCT_STL_FLG = 'Y'
WHERE   1 = 1
AND     (SUS.STL_KEY_NO, SUS.COA_ACCT_CD, SUS.COA_CTR_CD, SUS.VNDR_NO, SUS.UNSTL_CURR_CD) 
             IN (SELECT  STL_KEY_NO
                       , COA_ACCT_CD
                       , COA_CTR_CD
                       , VNDR_NO
                       , UNSTL_CURR_CD
                 FROM    (SELECT  SUS2.STL_KEY_NO
                                , SUS2.COA_ACCT_CD
                                , SUS2.COA_CTR_CD
                                , SUS2.VNDR_NO
                                , SUS2.UNSTL_CURR_CD
                                , SUM(SUS2.UNSTL_AMT) AS STL_AMT
                          FROM    SAP_UNSTL_SMRY SUS2
                          WHERE   1 = 1
                          AND     SUS2.UNSTL_YRMON = REPLACE(@[unstl_yrmon],'-','')
                          AND     SUS2.UNSTL_SRC_CD = 'AP'
                          GROUP   BY SUS2.STL_KEY_NO, SUS2.COA_ACCT_CD, SUS2.COA_CTR_CD, SUS2.VNDR_NO, SUS2.UNSTL_CURR_CD)
                 WHERE   1 = 1
                 AND     STL_AMT = 0 )
AND     SUS.UNSTL_YRMON = REPLACE(@[unstl_yrmon],'-','')
AND     SUS.UNSTL_SRC_CD = 'AP'			]]></sql>
			<params>
				<param name="unstl_yrmon" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
