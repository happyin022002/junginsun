<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingARCreationDBDAOModifyARInvoiceMainVOUSQL">
			<desc><![CDATA[INV_AR_MN 테이블에 update]]></desc>
			<sql><![CDATA[
UPDATE INV_AR_MN SET 
	CGO_WGT = @[cgo_wgt]
,	CGO_MEAS_QTY = NVL(@[cgo_meas_qty],0)
,	BKG_TEU_QTY = NVL(@[bkg_teu_qty],0)
,	BKG_FEU_QTY = NVL(@[bkg_feu_qty],0)
#if (${frt_fwrd_cust_seq} != '') 
,	FRT_FWRD_CUST_SEQ = @[frt_fwrd_cust_seq]
#end
#if (${sc_no} != '') 
,	SC_NO = @[sc_no]
#end
#if (${rfa_no} != '') 
,	RFA_NO = @[rfa_no]
#end
#if (${srep_cd} != '') 
,	SREP_CD = @[srep_cd]
#end
,	MST_BL_NO = @[mst_bl_no]
,	DUE_DT = REPLACE(@[due_dt],'-','')
#if (${bl_inv_if_dt} != '') 
,	BL_INV_IF_DT = REPLACE(@[bl_inv_if_dt],'-','')
#end
,	BL_INV_CFM_DT = REPLACE(@[bl_inv_cfm_dt],'-','')
,	GL_EFF_DT = REPLACE(@[gl_eff_dt],'-','')
,	INV_RMK = @[inv_rmk]
,	INV_REF_NO = @[inv_ref_no]
#if (${co_stf_ctnt} != '') 
,	CO_STF_CTNT = @[co_stf_ctnt]
#end
#if (${bkg_corr_no} != '') 
,	BKG_CORR_NO = @[bkg_corr_no]
#end
,	ACT_CUST_CNT_CD = @[act_cust_cnt_cd]
,	ACT_CUST_SEQ = @[act_cust_seq]
,	REV_TP_CD = @[rev_tp_cd]
,	REV_SRC_CD = @[rev_src_cd]
,	VSL_CD = @[vsl_cd]
,	SKD_VOY_NO = @[skd_voy_no]
,	SKD_DIR_CD = @[skd_dir_cd]
,	SVC_SCP_CD = @[svc_scp_cd]
,	SAIL_DT =  REPLACE(@[sail_dt],'-','')
,	SAIL_ARR_DT =  REPLACE(@[sail_arr_dt],'-','')
,	SLAN_CD = @[slan_cd]
,	IO_BND_CD = @[io_bnd_cd]
,	TRNK_VSL_CD = @[trnk_vsl_cd]
,	TRNK_SKD_VOY_NO = @[trnk_skd_voy_no]
,	TRNK_SKD_DIR_CD = @[trnk_skd_dir_cd]
,	POR_CD = @[por_cd]
,	POL_CD = @[pol_cd]
,	POD_CD = @[pod_cd]
,	DEL_CD = @[del_cd]
,	INV_CUST_CNT_CD = @[inv_cust_cnt_cd]
,	INV_CUST_SEQ = @[inv_cust_seq]
#if (${frt_fwrd_cnt_cd} != '') 
,	FRT_FWRD_CNT_CD = @[frt_fwrd_cnt_cd]
#end
,   INV_TTL_LOCL_AMT = (SELECT NVL(SUM(CURR_LOCL_AMT),0)
                              FROM (SELECT A.CURR_CD, SUM(ROUND(A.CHG_AMT*A.INV_XCH_RT,C.DP_PRCS_KNT)) CURR_LOCL_AMT
                                      FROM INV_AR_CHG A,
                                           INV_AR_MN B,
                                           MDM_CURRENCY C
                                     WHERE A.AR_IF_NO =@[ar_if_no]
                                       AND A.AR_IF_NO = B.AR_IF_NO
                                       AND C.CURR_CD = B.LOCL_CURR_CD
                                     GROUP BY A.CURR_CD,A.INV_XCH_RT,C.DP_PRCS_KNT))
,	USD_XCH_RT = NVL(@[usd_xch_rt],0)
,	UPD_USR_ID = @[upd_usr_id]
,	UPD_DT = sysdate
,   ZN_IOC_CD = @[zn_ioc_cd]
,   CR_TERM_DYS  = NVL(@[cr_term_dys] ,0)
,   CUST_CR_FLG = NVL(@[cust_cr_flg],'N')
,   XCH_RT_N3RD_TP_CD   = @[xch_rt_n3rd_tp_cd]
,   XCH_RT_USD_TP_CD = @[xch_rt_usd_tp_cd]
,   XCH_RT_DT = REPLACE(@[xch_rt_dt],'-','')
#if (${obrd_cd} == 'B') 
,	OBRD_DT = REPLACE(@[xch_rt_dt],'-','')
#end
#if (${rev_vsl_cd} != '') 
,   REV_VSL_CD = @[rev_vsl_cd]
#end
#if (${rev_skd_voy_no} != '') 
,   REV_SKD_VOY_NO = @[rev_skd_voy_no]
#end
#if (${rev_skd_dir_cd} != '') 
,   REV_SKD_DIR_CD = @[rev_skd_dir_cd]
#end
#if (${rev_dir_cd} != '') 
,   REV_DIR_CD = @[rev_dir_cd]
#end
#if (${rlane_cd} != '') 
,   RLANE_CD = @[rlane_cd]
#end
#if (${inv_svc_scp_cd} != '') 
,	INV_SVC_SCP_CD = @[inv_svc_scp_cd]
#end
#if (${ar_cty_cd} != '') 
,	AR_CTY_CD = @[ar_cty_cd]
#end
#if (${sls_ofc_cd} != '') 
,	SLS_OFC_CD = @[sls_ofc_cd]
#end 
,	AR_TAX_IND_CD = DECODE(@[ar_tax_ind_cd],'KOR',NVL((SELECT '10' FROM INV_AR_CHG K WHERE K.AR_IF_NO = @[ar_if_no]	AND K.CHG_CD ='TVA'
													GROUP BY K.AR_IF_NO
													HAVING SUM(K.CHG_AMT) <> 0),'0'),NVL(AR_TAX_IND_CD,'0'))
,	INV_LOCL_XCH_RT = NVL(@[inv_locl_xch_rt], NVL(INV_LOCL_XCH_RT, 0))
,	INV_USD_XCH_RT = NVL(@[inv_usd_xch_rt], NVL(INV_USD_XCH_RT, 0))
WHERE	AR_IF_NO = @[ar_if_no]			]]></sql>
			<params>
				<param name="cgo_wgt" type="12" value="1" out="N"/>
				<param name="cgo_meas_qty" type="12" value="" out="N"/>
				<param name="bkg_teu_qty" type="12" value="" out="N"/>
				<param name="bkg_feu_qty" type="12" value="" out="N"/>
				<param name="frt_fwrd_cust_seq" type="12" value="11" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="rfa_no" type="12" value="" out="N"/>
				<param name="srep_cd" type="12" value="" out="N"/>
				<param name="mst_bl_no" type="12" value="" out="N"/>
				<param name="due_dt" type="12" value="" out="N"/>
				<param name="bl_inv_if_dt" type="12" value="" out="N"/>
				<param name="bl_inv_cfm_dt" type="12" value="" out="N"/>
				<param name="gl_eff_dt" type="12" value="" out="N"/>
				<param name="inv_rmk" type="12" value="" out="N"/>
				<param name="inv_ref_no" type="12" value="" out="N"/>
				<param name="co_stf_ctnt" type="12" value="" out="N"/>
				<param name="bkg_corr_no" type="12" value="" out="N"/>
				<param name="act_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="act_cust_seq" type="12" value="" out="N"/>
				<param name="rev_tp_cd" type="12" value="" out="N"/>
				<param name="rev_src_cd" type="12" value="" out="N"/>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="sail_dt" type="12" value="" out="N"/>
				<param name="sail_arr_dt" type="12" value="" out="N"/>
				<param name="slan_cd" type="12" value="" out="N"/>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
				<param name="trnk_vsl_cd" type="12" value="" out="N"/>
				<param name="trnk_skd_voy_no" type="12" value="" out="N"/>
				<param name="trnk_skd_dir_cd" type="12" value="" out="N"/>
				<param name="por_cd" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
				<param name="del_cd" type="12" value="" out="N"/>
				<param name="inv_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="inv_cust_seq" type="12" value="" out="N"/>
				<param name="frt_fwrd_cnt_cd" type="12" value="" out="N"/>
				<param name="ar_if_no" type="12" value="1" out="N"/>
				<param name="usd_xch_rt" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="zn_ioc_cd" type="12" value="" out="N"/>
				<param name="cr_term_dys" type="12" value="" out="N"/>
				<param name="cust_cr_flg" type="12" value="" out="N"/>
				<param name="xch_rt_n3rd_tp_cd" type="12" value="" out="N"/>
				<param name="xch_rt_usd_tp_cd" type="12" value="" out="N"/>
				<param name="xch_rt_dt" type="12" value="" out="N"/>
				<param name="rev_vsl_cd" type="12" value="" out="N"/>
				<param name="rev_skd_voy_no" type="12" value="" out="N"/>
				<param name="rev_skd_dir_cd" type="12" value="" out="N"/>
				<param name="rev_dir_cd" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
				<param name="inv_svc_scp_cd" type="12" value="" out="N"/>
				<param name="ar_cty_cd" type="12" value="" out="N"/>
				<param name="sls_ofc_cd" type="12" value="" out="N"/>
				<param name="ar_tax_ind_cd" type="12" value="" out="N"/>
				<param name="inv_locl_xch_rt" type="12" value="" out="N"/>
				<param name="inv_usd_xch_rt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
