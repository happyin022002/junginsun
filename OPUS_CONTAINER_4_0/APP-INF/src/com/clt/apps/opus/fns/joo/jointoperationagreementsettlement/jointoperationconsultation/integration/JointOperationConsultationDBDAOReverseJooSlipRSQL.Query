<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="JointOperationConsultationDBDAOReverseJooSlipRSQL">
			<desc><![CDATA[Reverse전표생성시 기존SLIP을 읽어 -금액을 insert한다.]]></desc>
			<sql><![CDATA[
SELECT 
        A.SLP_TP_CD
       ,A.SLP_FUNC_CD
       ,A.SLP_OFC_CD
       ,A.SLP_ISS_DT
       ,A.SLP_SER_NO
       ,A.SLP_SEQ_NO
       ,A.DR_CR_CD
       ,A.ACCT_CD
       ,CASE WHEN B.REV_YRMON IS NULL THEN
                  TO_CHAR(B.EAI_EVNT_DT -1, 'YYYYMMDD')
             ELSE TO_CHAR(A.EFF_DT,'YYYYMMDD')
        END AS EFF_DT
       ,A.CSR_LOCL_CURR_CD
       ,A.CSR_LOCL_AMT
       ,A.CSR_USD_AMT
       ,A.SLP_DESC
       ,A.CTR_CD
       ,A.LOC_CD
       ,A.RLANE_CD
       ,A.VSL_CD
       ,A.SKD_VOY_NO
       ,A.SKD_DIR_CD
       ,A.REV_DIR_CD
       ,A.KEY_NO
       ,A.JO_BIL_NO
       ,DECODE(B.REV_YRMON,NULL,'Y','N') AS VVD_CXL_FLG
       ,A.JO_STL_ITM_CD
       ,A.BSA_QTY
       ,A.BSA_SLT_PRC
       ,A.ACCT_YRMON
       ,A.STL_VVD_SEQ
       ,A.STL_SEQ
FROM   JOO_SLIP       A,
       AR_MST_REV_VVD B
WHERE  A.VSL_CD     = B.VSL_CD      (+)
AND    A.SKD_VOY_NO = B.SKD_VOY_NO  (+)
AND    A.SKD_DIR_CD = B.SKD_DIR_CD  (+)
AND    A.REV_DIR_CD = B.RLANE_DIR_CD(+)
AND    A.SLP_TP_CD  || A.SLP_FUNC_CD || A.SLP_OFC_CD || A.SLP_ISS_DT || A.SLP_SER_NO  = @[csr_no]			]]></sql>
			<params>
				<param name="csr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
