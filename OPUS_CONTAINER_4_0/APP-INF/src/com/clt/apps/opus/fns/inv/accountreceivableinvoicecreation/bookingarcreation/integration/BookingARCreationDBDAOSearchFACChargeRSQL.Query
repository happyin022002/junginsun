<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingARCreationDBDAOSearchFACChargeRSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
SELECT FAC.BKG_NO,
       'FAC' CHG_CD, 
       FAC.CURR_CD, 
       'BL' PER_TP_CD, 
       ROUND(NVL(FAC.CRNT_AMT,0),2)*-1 TRF_RT_AMT, 
       1 RAT_AS_CNTR_QTY, 
       ROUND(NVL(FAC.CRNT_AMT,0),2)*-1 CHG_AMT,       
       0 INV_XCH_RT,
	   '' TRF_NO,
	   '' DE_TERM_CD,
	   '' AUTO_RAT_CD
  FROM ACM_FAC_COMM FAC
 WHERE FAC.BKG_NO = @[bkg_no]
   AND FAC.SLS_OFC_CD = @[ofc_cd]
   AND FAC.FAC_STS_CD != 'CE'
   AND FAC.cre_usr_id !='UNIT COST'
   AND (FAC.bkg_no, FAC.fac_seq) = (select /*+ INDEX_DESC(acm_fac_comm, XPKACM_FAC_COMM) */ c.bkg_no,c.fac_seq 
                                      from acm_fac_comm c 
                                     where c.bkg_no = FAC.bkg_no 
                                       and c.fac_seq = FAC.fac_seq and rownum = 1) 
   AND NVL(FAC.CRNT_AMT,0) <> 0			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
