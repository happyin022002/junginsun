<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingARCreationDBDAOInvIssContainerCSQL">
			<desc><![CDATA[InvIssContainer]]></desc>
			<sql><![CDATA[
INSERT INTO INV_AR_CNTR 
(AR_IF_NO, CNTR_SEQ, CNTR_NO, CNTR_TPSZ_CD, CRE_USR_ID, CRE_DT, UPD_USR_ID, UPD_DT)                  
SELECT B.AR_IF_NO
      ,ROW_NUMBER() OVER (PARTITION BY B.AR_IF_NO ORDER BY B.AR_IF_NO,C.CNTR_NO)
      ,C.CNTR_NO,C.CNTR_TPSZ_CD,@[user_id],SYSDATE,@[user_id],SYSDATE
  FROM INV_AR_MN B
      ,BKG_CONTAINER C
 WHERE B.BKG_NO = C.BKG_NO 
   AND B.AR_IF_NO IN (SELECT DISTINCT A.AR_IF_NO 
                        FROM INV_AR_ISS_FTR A,
					 	     INV_AR_MN B
                       WHERE A.INV_ISS_WRK_NO = @[wrk_no]
					     AND A.AR_IF_NO = B.AR_IF_NO
					     AND B.REV_TP_CD||B.REV_SRC_CD NOT IN ('MIV','MIC','MOC')
						)			]]></sql>
			<params>
				<param name="user_id" type="12" value="" out="N"/>
				<param name="wrk_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
