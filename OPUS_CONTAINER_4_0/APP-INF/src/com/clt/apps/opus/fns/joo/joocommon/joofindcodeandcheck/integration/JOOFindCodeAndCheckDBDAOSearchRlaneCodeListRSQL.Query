<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="JOOFindCodeAndCheckDBDAOSearchRlaneCodeListRSQL">
			<desc><![CDATA[공통 Rlane CD 조회.]]></desc>
			<sql><![CDATA[
SELECT DISTINCT CR.RLANE_CD
     , CR.JO_CRR_CD
     , CR.TRD_CD
     , CR.JO_STL_OPT_CD
     , CASE WHEN CR.VNDR_SEQ IS NOT NULL AND CR.CUST_SEQ IS NOT NULL THEN 'A'
            ELSE CASE WHEN CR.VNDR_SEQ IS NOT NULL THEN 'E'
                      ELSE CASE WHEN CR.CUST_SEQ IS NOT NULL THEN 'R'
                                ELSE 'N'
                           END
                 END
       END AS RE_DIVR_CD
     , NVL(CA.JO_CRR_AUTH_CD,'R') AS JO_CRR_AUTH_CD
     , FM.LOCL_CURR_CD
#if (${jo_stl_itm_cd} != '')
     , SB.JO_STL_TGT_TP_CD
#else
     , '' AS JO_STL_TGT_TP_CD
#end
     , CR.JO_CRR_CD||CR.TRD_CD||CR.RLANE_CD AS GRP_KEY
  FROM JOO_CARRIER CR
     , JOO_CRR_AUTH CA
     , JOO_FINC_MTX FM
#if (${jo_stl_itm_cd} != '')
     , JOO_STL_BSS_PORT SB
#end
 WHERE 1=1
   AND CR.DELT_FLG = 'N'
   AND CA.DELT_FLG = 'N'
   AND CA.AUTH_OFC_CD = @[auth_ofc_cd]
   AND CR.JO_CRR_CD = CA.JO_CRR_CD
   AND CR.RLANE_CD = CA.RLANE_CD
   AND CR.JO_CRR_CD = FM.JO_CRR_CD(+)
   AND CR.RLANE_CD = FM.RLANE_CD (+)
#if (${re_divr_cd} != '')
   AND FM.RE_DIVR_CD(+) = @[re_divr_cd]
#end
#if (${jo_stl_itm_cd} != '')
   AND CR.JO_CRR_CD = SB.JO_CRR_CD (+)
   AND CR.RLANE_CD = SB.RLANE_CD (+)
   AND FM.JO_STL_ITM_CD(+) = @[jo_stl_itm_cd]
   AND SB.JO_STL_ITM_CD(+) = @[jo_stl_itm_cd]
#end
 ORDER BY CR.JO_CRR_CD
     , CR.TRD_CD
     , CR.RLANE_CD			]]></sql>
			<params>
				<param name="auth_ofc_cd" type="12" value="SINHO" out="N"/>
				<param name="re_divr_cd" type="12" value="" out="N"/>
				<param name="jo_stl_itm_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
