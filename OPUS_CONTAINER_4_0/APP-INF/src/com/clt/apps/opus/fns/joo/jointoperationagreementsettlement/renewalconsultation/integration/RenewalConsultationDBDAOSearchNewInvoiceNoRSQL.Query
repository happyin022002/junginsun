<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RenewalConsultationDBDAOSearchNewInvoiceNoRSQL">
			<desc><![CDATA[New Invoice No 생성 
RE_DIVR_CD : REV/EXP 동일 Invoice No를 가지도록 한다.]]></desc>
			<sql><![CDATA[
SELECT @[acctg_crr_cd]||NVL(SUBSTR(@[acct_yrmon],3) ,TO_CHAR(SYSDATE,'RRMM'))||TRIM(TO_CHAR(NVL(MAX(TO_NUMBER(SUBSTR(INV.INV_NO, 8))), 0) + 1,'000')) AS NEW_INV_NO 
  FROM JOO_INVOICE INV
 WHERE INV.ACCT_YRMON   = NVL(@[acct_yrmon], TO_CHAR(SYSDATE,'YYYYMM'))
   AND INV.ACCTG_CRR_CD = @[acctg_crr_cd]			]]></sql>
			<params>
				<param name="acctg_crr_cd" type="12" value="" out="N"/>
				<param name="acct_yrmon" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
