<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChassisMgsetAgreementDBDAOCheckCHSExistChgCreDataByAgreementDataRSQL">
			<desc><![CDATA[ChassisMgsetAgreementDB.CheckCHSExistChgCreDataByAgreementData]]></desc>
			<sql><![CDATA[
SELECT SUM(CNT) AS CNT
  FROM (
    SELECT 
        COUNT(*) AS CNT
    FROM  
        CGM_LSE_CHG_HDR
    WHERE 1=1
        AND COST_YRMON >= SUBSTR(@[agmt_eff_dt],1,6)
        AND AGMT_OFC_CTY_CD = @[agmt_ofc_cty_cd]
        AND AGMT_SEQ = @[agmt_seq]
        AND AGMT_VER_NO = @[agmt_ver_no]
#if(${action_flag} == 'V')
        AND LSE_CHG_STS_CD <> 'C'
#end
    UNION ALL
    SELECT 
        COUNT(*) AS CNT
    FROM 
        CGM_PAY_INV
    WHERE 1=1
        AND COST_YRMON >= SUBSTR(@[agmt_eff_dt],1,6)
        AND AGMT_OFC_CTY_CD = @[agmt_ofc_cty_cd]
        AND AGMT_SEQ = @[agmt_seq]
        AND AGMT_VER_NO = @[agmt_ver_no]
#if(${action_flag} == 'V')
        AND CHSS_MGST_INV_STS_CD <> 'C'
#end
)			]]></sql>
			<params>
				<param name="agmt_eff_dt" type="12" value="" out="N"/>
				<param name="agmt_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="agmt_seq" type="2" value="" out="N"/>
				<param name="agmt_ver_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
