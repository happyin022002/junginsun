<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="HolidayMgtDBDAOSb45RulingExceptionsDupCheckRSQL">
			<desc><![CDATA[각 Country, Location, Yard, Bound 별로 등록된 SB45 Ruling Exceptions 정보 조회용 쿼리]]></desc>
			<sql><![CDATA[
SELECT CNT_CD
      ,LOC_CD
      ,YD_CD
      ,IO_BND_CD
      ,DEM_DET_TP_CD
      ,EXCLU_SEQ
      ,XCLD_SAT_FLG
      ,XCLD_SUN_FLG
      ,XCLD_HOL_FLG
      ,TO_CHAR(EFF_DT, 'YYYY-MM-DD') AS EFF_DT
      ,TO_CHAR(EXP_DT, 'YYYY-MM-DD') AS EXP_DT
      ,CRE_USR_ID
      ,CRE_DT
      ,UPD_USR_ID
      ,UPD_DT
      ,EDW_UPD_DT 
  FROM DMT_OVR_DY_EXCLU
 WHERE 1=1
#if(${cnt_cd} != '')
   AND CNT_CD = @[cnt_cd]
#end
   AND LOC_CD = NVL(@[loc_cd], ' ')
#if(${yd_cd} != '')
   AND YD_CD LIKE @[yd_cd] || '%'
#else
   AND YD_CD = ' '
#end
#if(${io_bnd_cd} == 'A')
   AND IO_BND_CD IN (@[io_bnd_cd], 'I', 'O')
	#if(${dem_det_tp_cd} != '' && ${dem_det_tp_cd} != 'A')
	    AND DEM_DET_TP_CD IN (@[dem_det_tp_cd], 'A')
	#else
	    AND DEM_DET_TP_CD IN (@[dem_det_tp_cd], 'M', 'T')
	#end
#else
   AND IO_BND_CD IN (@[io_bnd_cd], 'A')
	#if(${dem_det_tp_cd} != '' && ${dem_det_tp_cd} != 'A')
	    AND DEM_DET_TP_CD IN (@[dem_det_tp_cd], 'A')
	#else
	    AND DEM_DET_TP_CD IN (@[dem_det_tp_cd], 'M', 'T')
	#end
#end
#if(${exclu_seq} !='')
   AND EXCLU_SEQ <> @[exclu_seq]
#end
   AND (TO_DATE(@[eff_dt], 'YYYYMMDD') BETWEEN EFF_DT + .0 AND NVL(EXP_DT, TO_DATE('99991231', 'YYYYMMDD')) + 0.99999
        OR 
        EFF_DT + .0 BETWEEN TO_DATE(@[eff_dt], 'YYYYMMDD') + .0 AND NVL(TO_DATE(@[exp_dt], 'YYYYMMDD'), TO_DATE('99991231', 'YYYYMMDD')) + 0.99999
       )			]]></sql>
			<params>
				<param name="cnt_cd" type="12" value="" out="N"/>
				<param name="loc_cd" type="12" value="" out="N"/>
				<param name="yd_cd" type="12" value="" out="N"/>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
				<param name="dem_det_tp_cd" type="12" value="" out="N"/>
				<param name="exclu_seq" type="12" value="" out="N"/>
				<param name="eff_dt" type="12" value="" out="N"/>
				<param name="exp_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
