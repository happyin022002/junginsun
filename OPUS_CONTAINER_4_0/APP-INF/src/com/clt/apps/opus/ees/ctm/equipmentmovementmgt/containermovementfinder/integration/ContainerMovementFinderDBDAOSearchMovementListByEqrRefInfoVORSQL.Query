<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerMovementFinderDBDAOSearchMovementListByEqrRefInfoVORSQL">
			<desc><![CDATA[SearchMovementListByEqrRefInfoVO]]></desc>
			<sql><![CDATA[
SELECT V.REPO_PLN_ID,
    V.REF_ID,
	V.REF_ID AS MTY_PLN_NO,
    V.PLN_YRWK,
    V.EQ_TYPE,
    V.ITEM,
    V.FM_YD,
    V.FM_DT,
    V.TO_YD,
    V.TO_DT,
    V.MTY_BKG_NO AS BKG_NO
FROM (SELECT VP.REPO_PLN_ID,
        VP.REF_ID,
        VP.PLN_YRWK,
        'T.VVD' AS EQ_TYPE,
        DECODE(VP.TRSP_MOD_CD, 'V', 'T.VVD', 'T', 'Truck', 'R', 'Rail', 'Water') AS ITEM,
        SUBSTR(VP.FM_YD_CD,1,5) AS FM_YD,
        VP.FM_ETD_DT AS FM_DT,
        SUBSTR(VP.TO_YD_CD,1,5) AS TO_YD,
        VP.TO_ETB_DT AS TO_DT,
        VP.MTY_BKG_NO
    FROM EQR_VSL_LODG_DCHG_EXE_PLN VP
    UNION ALL
    SELECT IP.REPO_PLN_ID,
        IP.REF_ID,
        IP.PLN_YRWK,
        'T/R/W' AS EQ_TYPE,
        DECODE(IP.TRSP_MOD_CD, 'V', 'T.VVD', 'T', 'Truck', 'R', 'Rail', 'Water') AS ITEM,
        SUBSTR(IP.FM_YD_CD,1,5) AS FM_YD,
        IP.FM_ETD_DT AS FM_DT,
        SUBSTR(IP.TO_YD_CD,1,5) AS TO_YD,
        IP.TO_ETA_DT AS TO_DT,
        IP.MTY_BKG_NO
    FROM EQR_INLND_TRSP_EXE_PLN IP
    UNION ALL
    SELECT EP.REPO_PLN_ID,
        EP.REF_ID,
        EP.PLN_YRWK,
        'LCC Int.' AS EQ_TYPE,
        DECODE(EP.TRSP_MOD_CD, 'V', 'T.VVD', 'T', 'Truck', 'R', 'Rail', 'Water') AS ITEM,
        SUBSTR(EP.FM_YD_CD,1,5) AS FM_YD,
        EP.FM_ETD_DT AS FM_DT,
        SUBSTR(EP.TO_YD_CD,1,5) AS TO_YD,
        EP.TO_ETA_DT AS TO_DT,
        '' AS MTY_BKG_NO
    FROM EQR_ECC_INTER_EXE_PLN EP
    UNION ALL
    SELECT OP.REPO_PLN_ID,
        OP.REF_ID,
        OP.PLN_YRWK,
        'ON/OFH' AS EQ_TYPE,
        '' AS ITEM,
        SUBSTR(OP.FM_YD_CD,1,5) AS FM_YD,
        TO_DATE(OP.FM_LOC_DT, 'YYYY/MM/DD HH24:MI:SS') AS FM_DT,
        SUBSTR(OP.TO_YD_CD,1,5) AS TO_YD,
        TO_DATE(OP.TO_LOC_DT, 'YYYY/MM/DD HH24:MI:SS') AS TO_DT,
        '' AS MTY_BKG_NO
    FROM EQR_ONF_HIR_EXE_PLN OP) V
WHERE V.REF_ID = @[mty_pln_no]			]]></sql>
			<params>
				<param name="mty_pln_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
