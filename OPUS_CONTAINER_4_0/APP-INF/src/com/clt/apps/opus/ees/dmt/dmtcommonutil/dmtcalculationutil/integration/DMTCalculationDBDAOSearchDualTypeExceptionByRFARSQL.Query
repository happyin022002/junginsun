<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DMTCalculationDBDAOSearchDualTypeExceptionByRFARSQL">
			<desc><![CDATA[searchDualTypeExceptionByRFA]]></desc>
			<sql><![CDATA[
SELECT     'Y'    DUALFLAG
          FROM    DMT_DUL_TP_EXPT
         WHERE    CUST_CNT_CD     =   @[act_cust_cnt_cd]
           AND    CUST_SEQ        =   @[act_cust_seq]
           AND    DUL_EXPT_DELT_FLG   =   'N'
           AND    TO_DATE(@[efft_dt],'YYYYMMDD') BETWEEN DUL_EXPT_EFF_DT AND NVL(DUL_EXPT_EXP_DT, SYSDATE) 
           AND    NVL(DMDT_CNTR_TP_CD, @[cntr_tp] ) =   @[cntr_tp]
           AND    NVL(DMDT_CGO_TP_CD,  @[cgo_tp])   =   @[cgo_tp]
           AND    IO_BND_CD       =   @[io_bnd_cd]
           AND    DMDT_CTRT_EXPT_TP_CD    =   'B'
            
#if (${io_bnd_cd} == 'I') 
	#if (${dmdt_trf_cd} == 'DMIF') 
		   AND (   CVRG_CNT_CD 		= @[yrd_cnt_cd]         	OR CVRG_CNT_CD = ' ')
		#if (${yrd_cnt_cd} == 'US' || ${yrd_cnt_cd} == 'CA') 		   
		   AND (   CVRG_RGN_STE_CD 	= @[yrd_ste_cd]         	OR CVRG_RGN_STE_CD = ' ')
		#else   
		   AND (   CVRG_RGN_STE_CD 	= @[yrd_rgn_cd]         	OR CVRG_RGN_STE_CD = ' ')
		#end   
		   AND (   CVRG_LOC_CD 		= @[yrd_loc_cd]         	OR CVRG_LOC_CD = ' ')
	#elseif (${dmdt_trf_cd} == 'DTIC' || ${dmdt_trf_cd} == 'CTIC') 
		   AND (   CVRG_CNT_CD 		= @[del_cnt_cd]         	OR CVRG_CNT_CD = ' ')
		#if (${del_cnt_cd} == 'US' || ${del_cnt_cd} == 'CA') 	   
		   AND (   CVRG_RGN_STE_CD 	= @[del_ste_cd]         	OR CVRG_RGN_STE_CD = ' ')
		#else     
		   AND (   CVRG_RGN_STE_CD 	= @[del_rgn_cd]         	OR CVRG_RGN_STE_CD = ' ')
		#end     		   
		   AND (   CVRG_LOC_CD 		= @[del_loc_cd]         	OR CVRG_LOC_CD = ' ')

	#end
#elseif (${io_bnd_cd} == 'O')
 	#if (${dmdt_trf_cd} == 'DMOF') 
		   AND (   CVRG_CNT_CD 		= @[yrd_cnt_cd]         	OR CVRG_CNT_CD = ' ')
		#if (${yrd_cnt_cd} == 'US' || ${yrd_cnt_cd} == 'CA') 
		   AND (   CVRG_RGN_STE_CD 	= @[yrd_ste_cd]         	OR CVRG_RGN_STE_CD = ' ')
		#else     
		   AND (   CVRG_RGN_STE_CD 	= @[yrd_rgn_cd]         	OR CVRG_RGN_STE_CD = ' ')
		#end    
		   AND (   CVRG_LOC_CD 		= @[yrd_loc_cd]         	OR CVRG_LOC_CD = ' ')
	#elseif (${dmdt_trf_cd} == 'DTOC' || ${dmdt_trf_cd} == 'CTOC') 
		   AND (   CVRG_CNT_CD = @[por_cnt_cd]         			OR CVRG_CNT_CD = ' ')
		#if (${por_cnt_cd} == 'US' || ${por_cnt_cd} == 'CA') 		   
		   AND (   CVRG_RGN_STE_CD 	= @[por_ste_cd]         	OR CVRG_RGN_STE_CD = ' ')
		#else		   
		   AND (   CVRG_RGN_STE_CD 	= @[por_rgn_cd]         	OR CVRG_RGN_STE_CD = ' ')
		#end  		   
		   AND (   CVRG_LOC_CD 		= @[por_loc_cd]         	OR CVRG_LOC_CD = ' ')
	#end	
#end			]]></sql>
			<params>
				<param name="act_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="act_cust_seq" type="12" value="" out="N"/>
				<param name="efft_dt" type="12" value="" out="N"/>
				<param name="cntr_tp" type="12" value="" out="N"/>
				<param name="cgo_tp" type="12" value="" out="N"/>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
				<param name="yrd_cnt_cd" type="12" value="" out="N"/>
				<param name="yrd_ste_cd" type="12" value="" out="N"/>
				<param name="yrd_rgn_cd" type="12" value="" out="N"/>
				<param name="yrd_loc_cd" type="12" value="" out="N"/>
				<param name="del_cnt_cd" type="12" value="" out="N"/>
				<param name="del_ste_cd" type="12" value="" out="N"/>
				<param name="del_rgn_cd" type="12" value="" out="N"/>
				<param name="del_loc_cd" type="12" value="" out="N"/>
				<param name="por_cnt_cd" type="12" value="" out="N"/>
				<param name="por_ste_cd" type="12" value="" out="N"/>
				<param name="por_rgn_cd" type="12" value="" out="N"/>
				<param name="por_loc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
