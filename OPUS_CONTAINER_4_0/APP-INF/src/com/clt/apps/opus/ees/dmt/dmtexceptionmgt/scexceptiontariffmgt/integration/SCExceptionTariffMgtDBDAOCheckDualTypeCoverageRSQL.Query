<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SCExceptionTariffMgtDBDAOCheckDualTypeCoverageRSQL">
			<desc><![CDATA[선택한 Tariff Type 과 Coverage 에 맞는 Dual Type 이 존재하는지 조회하는 쿼리]]></desc>
			<sql><![CDATA[
SELECT	COUNT(CUST_CNT_CD) CNT
FROM	DMT_DUL_TP_EXPT
WHERE	CUST_CNT_CD = @[cust_cnt_cd]
	AND	CUST_SEQ = @[cust_seq]
	AND	DUL_EXPT_DELT_FLG = 'N'
    AND DUL_EXPT_EFF_DT <= TO_DATE(@[dul_expt_eff_dt], 'YYYYMMDD')
    AND NVL(DUL_EXPT_EXP_DT, TO_DATE(@[dul_expt_exp_dt], 'YYYYMMDD')) >= TO_DATE(@[dul_expt_exp_dt], 'YYYYMMDD')
#if(${dmdt_ctrt_expt_tp_cd} == "B")
	AND NVL(DMDT_CNTR_TP_CD, SUBSTR(@[dmdt_cntr_cgo_tp_cd], 1, 1)) = SUBSTR(@[dmdt_cntr_cgo_tp_cd], 1, 1)
	AND NVL(DMDT_CGO_TP_CD, SUBSTR(@[dmdt_cntr_cgo_tp_cd], 3)) = SUBSTR(@[dmdt_cntr_cgo_tp_cd], 3)
#else
	AND	NVL(DMDT_CNTR_CGO_TP_CD, @[dmdt_cntr_cgo_tp_cd]) = @[dmdt_cntr_cgo_tp_cd]
#end
	AND	NVL(IO_BND_CD, @[io_bnd_cd]) = @[io_bnd_cd]
	AND DMDT_CTRT_EXPT_TP_CD = NVL(@[dmdt_ctrt_expt_tp_cd], 'S')
	AND	DECODE(CVRG_CNT_CD, ' ', NVL(@[cvrg_cnt_cd], ' '), CVRG_CNT_CD) = NVL(@[cvrg_cnt_cd], ' ')
	AND DECODE(CVRG_RGN_STE_CD, ' ', NVL(@[cvrg_rgn_ste_cd], ' '), CVRG_RGN_STE_CD) = NVL(@[cvrg_rgn_ste_cd], ' ')
	AND DECODE(CVRG_LOC_CD, ' ', NVL(@[cvrg_loc_cd], ' '), CVRG_LOC_CD) = NVL(@[cvrg_loc_cd], ' ')			]]></sql>
			<params>
				<param name="cust_cnt_cd" type="12" value="" out="N"/>
				<param name="cust_seq" type="12" value="" out="N"/>
				<param name="dul_expt_eff_dt" type="12" value="" out="N"/>
				<param name="dul_expt_exp_dt" type="12" value="" out="N"/>
				<param name="dmdt_cntr_cgo_tp_cd" type="12" value="" out="N"/>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
				<param name="dmdt_ctrt_expt_tp_cd" type="12" value="" out="N"/>
				<param name="cvrg_cnt_cd" type="12" value="" out="N"/>
				<param name="cvrg_rgn_ste_cd" type="12" value="" out="N"/>
				<param name="cvrg_loc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
