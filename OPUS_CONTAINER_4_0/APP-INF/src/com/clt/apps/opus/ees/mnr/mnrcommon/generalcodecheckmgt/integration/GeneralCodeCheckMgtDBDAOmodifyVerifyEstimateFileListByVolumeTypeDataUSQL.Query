<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralCodeCheckMgtDBDAOmodifyVerifyEstimateFileListByVolumeTypeDataUSQL">
			<desc><![CDATA[modifyVerifyEstimateFileListByVolumeTypeData]]></desc>
			<sql><![CDATA[
UPDATE MNR_DAT_VRFY A
       SET A.INP_MSG4 = 'VT'
 WHERE A.TMP_SEQ = @[tmp_seq]
   AND A.INP_MSG4 = 'SS'
   AND EXISTS (
                SELECT 'X'
                FROM MNR_RPR_TRF_HDR MRTH,
                  MNR_RPR_TRF_DTL MRTD
                WHERE MRTH.TRF_NO = MRTD.TRF_NO
                AND   MRTH.TRF_NO IN (
                                        SELECT MAX(MRTH.TRF_NO)
                                        FROM MNR_RPR_TRF_HDR MRTH
                                        WHERE MRTH.MNR_TRF_KND_CD = 'STD'
                                          AND MRTH.MNR_TRF_STS_CD = 'HA'
                                          AND TO_CHAR(MRTH.EFF_DT, 'YYYYMMDD') <= TO_CHAR(SYSDATE, 'YYYYMMDD')
                                        GROUP BY MRTH.EQ_KND_CD 
                                      )
                  AND SUBSTRB(A.INP_MSG19, 1, 3) = SUBSTR(MRTD.COST_GRP_CD, 1, 3)
                  AND A.INP_MSG2 = MRTD.EQ_CMPO_CD
                  AND A.INP_MSG5 = MRTD.EQ_RPR_CD
                  AND NVL(RTRIM(A.INP_MSG7), 'XXXX') = NVL(RTRIM(MRTD.TRF_DIV_CD), 'XXXX')
                  AND   A.INP_MSG8                   <> MRTD.VOL_TP_CD
                  AND ROWNUM = 1 
              )			]]></sql>
			<params>
				<param name="tmp_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
