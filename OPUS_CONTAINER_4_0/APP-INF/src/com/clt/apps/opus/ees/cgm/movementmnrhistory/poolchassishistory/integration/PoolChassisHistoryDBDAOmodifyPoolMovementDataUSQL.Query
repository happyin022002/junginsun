<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PoolChassisHistoryDBDAOmodifyPoolMovementDataUSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
UPDATE CGM_POOL_MVMT_HIS
	SET CHSS_OWNR_CO_CD=NVL(( SELECT CASE WHEN (A.ACIAC_DIV_CD = 'A' AND A.AGMT_LSTM_CD NOT IN ('NP','CP') )
                 OR (A.ACIAC_DIV_CD <> 'A' AND B.EQ_ASET_STS_CD = 'LST')
            THEN 'H' 
                     ELSE 'O' 
                END 
           FROM CGM_EQUIPMENT A , CGM_EQ_STS_HIS B
      WHERE A.EQ_NO= @[chss_no]
       AND A.EQ_NO= B.EQ_NO
       AND A.EQ_STS_SEQ = B.EQ_STS_SEQ
		  ), 'O') 
      , VNDR_NM            = @[vndr_nm]
      , CHSS_POOL_CD       = @[chss_pool_cd]
      , CHSS_TPSZ_CD       = @[chss_tpsz_cd]
      , EQ_TPSZ_REP_CD     = ''
      , YD_CD              = @[yd_cd]
      , YD_COM_FLG         = ''
      , LOC_NM             = @[loc_nm]
      , CNTR_NO            = @[cntr_no]
      ,CNTR_OWNR_CO_CD     = decode(@[cntr_no],null,'','','',nvl((select  CASE WHEN  A.ACIAC_DIV_CD = 'A' OR  A.CNTR_STS_CD='LST' THEN 'H' 
               														 ELSE 'O'
            													 END
           														  from  MST_CONTAINER A
        													 WHERE CNTR_NO =@[cntr_no]
     														  ),'O'))
      , POOL_CO_GATE_IO_CD = @[pool_co_gate_io_cd]
      , CNTR_TPSZ_CD       = @[cntr_tpsz_cd]
      , MGST_NO            = @[mgst_no]
      , CHSS_USE_CO_NM     = @[chss_use_co_nm]
      , UPD_USR_ID         = 'EDI_322'
      , UPD_DT             = SYSDATE
      , POOL_CHSS_CO_CD     = @[pool_chss_co_cd]   
	  , TRKR_NM				= @[trkr_nm]
	  , MVMT_STS_NM			= @[mvmt_sts_nm] 
	  , CHSS_MVMT_ACT_CD	= @[act_cd]
 WHERE CHSS_NO= @[chss_no]
   AND MVMT_DT=TO_DATE(@[mvmt_dt],'RRRRMMDDHH24MI')			]]></sql>
			<params>
				<param name="chss_no" type="12" value="" out="N"/>
				<param name="vndr_nm" type="12" value="" out="N"/>
				<param name="chss_pool_cd" type="12" value="" out="N"/>
				<param name="chss_tpsz_cd" type="12" value="" out="N"/>
				<param name="yd_cd" type="12" value="" out="N"/>
				<param name="loc_nm" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="pool_co_gate_io_cd" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="mgst_no" type="12" value="" out="N"/>
				<param name="chss_use_co_nm" type="12" value="" out="N"/>
				<param name="pool_chss_co_cd" type="12" value="" out="N"/>
				<param name="trkr_nm" type="12" value="" out="N"/>
				<param name="mvmt_sts_nm" type="12" value="" out="N"/>
				<param name="act_cd" type="12" value="" out="N"/>
				<param name="mvmt_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
