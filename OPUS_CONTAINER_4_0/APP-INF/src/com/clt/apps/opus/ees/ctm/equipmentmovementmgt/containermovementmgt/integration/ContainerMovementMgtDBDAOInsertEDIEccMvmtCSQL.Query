<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerMovementMgtDBDAOInsertEDIEccMvmtCSQL">
			<desc><![CDATA[EDI Batch ECC관련 데이타를 CTM_BOOKING 테이블에 INSERT]]></desc>
			<sql><![CDATA[
INSERT INTO CTM_BOOKING
			(BKG_NO			,
			BL_NO			,
			BKG_STS_CD		,
			BKG_CGO_TP_CD	,
			SLAN_CD			,
			SVC_SCP_CD		,
			VSL_CD			,
			SKD_VOY_NO		,
			SKD_DIR_CD		,
			RCV_TERM_CD		,
			DE_TERM_CD		,
			POR_CD			,
			POL_CD			,
			POD_CD			,
			DEL_CD			,
			OSCA_CMDT_CD	,
			DCGO_FLG		,
			RC_FLG			,
			AWK_CGO_FLG		,
			BB_CGO_FLG		,
			RD_CGO_FLG		,
			HNGR_FLG		,
			PRCT_FLG		,
			SPCL_HIDE_FLG	,
			SOC_FLG			,
			SPLIT_FLG		,
			HCMT_CMB_FLG	,
			BKG_CRE_TP_CD	,
			TO_BKG_NO		,
			FM_BKG_NO		,
			MTY_SPLIT_AVAL_CD,
			PRE_RLY_PORT_CD	,
			PST_RLY_PORT_CD	,
			CRE_USR_ID		,
			CRE_DT			,
			UPD_USR_ID		,
			UPD_DT			,
			BL_NO_TP		,
			BL_TP_CD		,
			REP_CMDT_CD		,
			RAIL_BLK_CD		,
			OSCA_CRE_DT     ,
			OSCA_UPD_DT		,
			VPS_ETD_DT
			)
     VALUES 
	(
			@[bkg_no]			,
			@[bl_no]			,
			@[bkg_sts_cd]		,
			@[bkg_cgo_tp_cd]	,
			(SELECT VSL_SLAN_CD FROM MDM_VSL_SVC_LANE WHERE MODI_VSL_SLAN_CD2 = @[slan_cd] and rownum = 1),
			@[svc_scp_cd]		,
			NVL((SELECT MAP.VSL_CD FROM  MDM_VSL_CNTR MAP WHERE
			MAP.VSL_CD LIKE SUBSTR(TRIM(@[vsl_cd]),1,3)||'%' AND SUBSTR(MAP.VSL_CD,1,3) = SUBSTR(TRIM(@[vsl_cd]),1,3) 
			AND DELT_FLG != 'Y' AND ROWNUM <= 1),'COXX')	,
			Decode(length(@[skd_voy_no]), 3, '0'||@[skd_voy_no], 4, @[skd_voy_no], NVL(@[skd_voy_no],'0001'))	,
			NVL(@[skd_dir_cd],'E')		,
			@[rcv_term_cd]		,
			@[de_term_cd]		,
			NVL((select SUBSTR(YD_CD,0,5) AS POR_CD from MDM_YARD WHERE MODI_YD_CD=@[por_cd] AND DELT_FLG != 'Y' AND ROWNUM=1),'')			,
			NVL((select SUBSTR(YD_CD,0,5) AS POL_CD from MDM_YARD WHERE MODI_YD_CD=@[pol_cd] AND DELT_FLG != 'Y' AND ROWNUM=1),'')			,
			NVL((select SUBSTR(YD_CD,0,5) AS POD_CD from MDM_YARD WHERE MODI_YD_CD=@[pod_cd] AND DELT_FLG != 'Y' AND ROWNUM=1),'')			,
			NVL((select SUBSTR(YD_CD,0,5) AS DEL_CD from MDM_YARD WHERE MODI_YD_CD=@[del_cd] AND DELT_FLG != 'Y' AND ROWNUM=1),'')			,
			''	,
			@[dcgo_flg]		,
			@[rc_flg]			,
			@[awk_cgo_flg]		,
			@[bb_cgo_flg]		,
			@[rd_cgo_flg]		,
			@[hngr_flg]		,
			@[prct_flg]		,
			@[spcl_hide_flg]	,
			@[soc_flg]			,
			@[split_flg]		,
			@[hcmt_cmb_flg]	,
			@[bkg_cre_tp_cd]	,
			@[to_bkg_no]		,
			@[fm_bkg_no]		,
			@[mty_split_aval_cd],
			@[pre_rly_port_cd]	,
			@[pst_rly_port_cd]	,
			@[cre_usr_id]		,
			sysdate			,
			@[upd_usr_id]		,
			sysdate			,
			@[bl_no_tp]		,
			@[bl_tp_cd]		,
			@[rep_cmdt_cd]		,
			@[rail_blk_cd]		,
			TO_DATE(SUBSTR(@[cre_dt],0,19),'YYYY-MM-DD HH24:MI:SS')			,
			TO_DATE(SUBSTR(@[upd_dt],0,19),'YYYY-MM-DD HH24:MI:SS'),
			TO_DATE(SUBSTR(@[etd_dt],0,19),'YYYY-MM-DD HH24:MI:SS')
     )			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="bkg_sts_cd" type="12" value="" out="N"/>
				<param name="bkg_cgo_tp_cd" type="12" value="" out="N"/>
				<param name="slan_cd" type="12" value="" out="N"/>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="rcv_term_cd" type="12" value="" out="N"/>
				<param name="de_term_cd" type="12" value="" out="N"/>
				<param name="por_cd" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
				<param name="del_cd" type="12" value="" out="N"/>
				<param name="dcgo_flg" type="12" value="" out="N"/>
				<param name="rc_flg" type="12" value="" out="N"/>
				<param name="awk_cgo_flg" type="12" value="" out="N"/>
				<param name="bb_cgo_flg" type="12" value="" out="N"/>
				<param name="rd_cgo_flg" type="12" value="" out="N"/>
				<param name="hngr_flg" type="12" value="" out="N"/>
				<param name="prct_flg" type="12" value="" out="N"/>
				<param name="spcl_hide_flg" type="12" value="" out="N"/>
				<param name="soc_flg" type="12" value="" out="N"/>
				<param name="split_flg" type="12" value="" out="N"/>
				<param name="hcmt_cmb_flg" type="12" value="" out="N"/>
				<param name="bkg_cre_tp_cd" type="12" value="" out="N"/>
				<param name="to_bkg_no" type="12" value="" out="N"/>
				<param name="fm_bkg_no" type="12" value="" out="N"/>
				<param name="mty_split_aval_cd" type="12" value="" out="N"/>
				<param name="pre_rly_port_cd" type="12" value="" out="N"/>
				<param name="pst_rly_port_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="bl_no_tp" type="12" value="" out="N"/>
				<param name="bl_tp_cd" type="12" value="" out="N"/>
				<param name="rep_cmdt_cd" type="12" value="" out="N"/>
				<param name="rail_blk_cd" type="12" value="" out="N"/>
				<param name="cre_dt" type="12" value="" out="N"/>
				<param name="upd_dt" type="12" value="" out="N"/>
				<param name="etd_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
