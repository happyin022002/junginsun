<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DMTCommonFaxEmailDBDAODmtFaxEmlSndHisCSQL">
			<desc><![CDATA[DMT_FAX_EML_SND_HIS]]></desc>
			<sql><![CDATA[
INSERT INTO DMT_FAX_EML_SND_HIS (
      DMDT_FAX_EML_SND_TP_CD
    , FAX_EML_SND_NO
	, FAX_EML_SND_HIS_SEQ
    , DMDT_SND_DOC_TP_CD
    , DMDT_INV_NO
    , ACT_PAYR_CNT_CD
    , ACT_PAYR_SEQ
    , DMDT_PAYR_EML
    , DMDT_PAYR_FAX_NO
    , FAX_EML_SND_RSLT_MSG
    , CRE_USR_ID
    , CRE_DT
    , CRE_OFC_CD
    , UPD_USR_ID
    , UPD_DT
) VALUES (
      @[fesndtp]
    , @[fesndno]
	, ( select (nvl(max(FAX_EML_SND_HIS_SEQ),1)+1) from DMT_FAX_EML_SND_HIS where DMDT_FAX_EML_SND_TP_CD = @[fesndtp] and FAX_EML_SND_NO = @[fesndno] )
    , @[sndoctp]
    , @[invoice]
    , DECODE( LENGTH( @[payercd] ) , 8 , SUBSTR( @[payercd] , 1 , 2 ) , 6 , '00' , '00' )
    , DECODE( LENGTH( @[payercd] ) , 8 , SUBSTR( @[payercd] , 3 , 6 ) , 6 , @[payercd] , 0 )
    , @[payreml]
    , @[payrfax]
    , ( SELECT EML_ERR_MSG FROM COM_EML_SND_INFO WHERE RD_SUB_SYS_CD = 'DMT' AND EML_SND_NO = @[fesndno] )
    , @[usid]
    , NVL(GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[usof]),SYSDATE)
    , @[usof]
    , @[usid]
    , NVL(GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[usof]),SYSDATE)
)			]]></sql>
			<params>
				<param name="fesndtp" type="12" value="" out="N"/>
				<param name="fesndno" type="12" value="" out="N"/>
				<param name="sndoctp" type="12" value="" out="N"/>
				<param name="invoice" type="12" value="" out="N"/>
				<param name="payercd" type="12" value="" out="N"/>
				<param name="payreml" type="12" value="" out="N"/>
				<param name="payrfax" type="12" value="" out="N"/>
				<param name="usid" type="12" value="" out="N"/>
				<param name="usof" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
