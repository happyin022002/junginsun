<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeCalculationDBDAORequestChargeDeletionCSQL">
			<desc><![CDATA[ChargeDeletion  Request 등록]]></desc>
			<sql><![CDATA[
INSERT INTO DMT_CHG_DELT_RQST_APRO
( SYS_AREA_GRP_ID,
  CNTR_NO,
  CNTR_CYC_NO,
  DMDT_TRF_CD,
  DMDT_CHG_LOC_DIV_CD,
  CHG_SEQ,
  CHG_OFC_CD,
  DELT_SEQ,
  DMDT_DELT_RQST_STS_CD,
  RQST_USR_ID,
  RQST_OFC_CD,
  RQST_DT,
  APRO_OFC_CD,
  CRE_USR_ID,
  CRE_OFC_CD,
  CRE_DT,
  UPD_USR_ID,
  UPD_OFC_CD,
  UPD_DT,
  DMDT_CHG_DELT_RSN_CD,
  DELT_RMK
)
SELECT
@[svr_id] ,
@[cntr_no],
TO_NUMBER(@[cntr_cyc_no]),
@[dmdt_trf_cd],
@[dmdt_chg_loc_div_cd],
TO_NUMBER(@[chg_seq]),
CALC.OFC_CD,
(SELECT	NVL(MAX(DELT_SEQ), 0) + 1
 FROM	DMT_CHG_DELT_RQST_APRO
 WHERE	SYS_AREA_GRP_ID = @[svr_id]
 AND	CNTR_NO			= @[cntr_no]
 AND	CNTR_CYC_NO		= @[cntr_cyc_no]
 AND	DMDT_TRF_CD		= @[dmdt_trf_cd]
 AND	DMDT_CHG_LOC_DIV_CD  = @[dmdt_chg_loc_div_cd]
 AND	CHG_SEQ			= @[chg_seq]	),
 'R',
@[cre_usr_id],
@[cre_ofc_cd],
SYSDATE,
DECODE(CALC.OFC_RHQ_CD,'SINWA',CALC.OFC_RHQ_CD,
                       'SHAAS',CALC.OFC_RHQ_CD,
                       'NYCNA',DECODE( CALC.OFC_CD,'TORBB', CALC.OFC_CD	,
                                                   'MEXBB', CALC.OFC_CD	,
                                                   'SAOBB', CALC.OFC_CD	,
                                                   'MTRBS', 'TORBB',
                                                   'VANBS', 'TORBB',  CALC.OFC_RHQ_CD),
                       'HAMUR',DECODE(SUBSTR(CALC.OFC_CD,4,2),'BB',CALC.OFC_CD	, 
                                                              'BO',CALC.OFC_CD	,
                                                              'BS',(SELECT PRNT_OFC_CD FROM MDM_ORGANIZATION WHERE OFC_CD = CALC.OFC_CD	), 
                                                               CALC.OFC_RHQ_CD),CALC.OFC_RHQ_CD),
@[cre_usr_id],
@[cre_ofc_cd],
SYSDATE,
@[cre_usr_id],
@[cre_ofc_cd],
SYSDATE,
@[dmdt_chg_delt_rsn_cd],
@[corr_rmk]
FROM  DMT_CHG_CALC CALC
WHERE CALC.SYS_AREA_GRP_ID = @[svr_id]
AND	CALC.CNTR_NO		   = @[cntr_no]
AND	CALC.CNTR_CYC_NO	   = @[cntr_cyc_no]
AND	CALC.DMDT_TRF_CD	   = @[dmdt_trf_cd]
AND	CALC.DMDT_CHG_LOC_DIV_CD  = @[dmdt_chg_loc_div_cd]
AND	CALC.CHG_SEQ		   = @[chg_seq]			]]></sql>
			<params>
				<param name="svr_id" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cntr_cyc_no" type="12" value="" out="N"/>
				<param name="dmdt_trf_cd" type="12" value="" out="N"/>
				<param name="dmdt_chg_loc_div_cd" type="12" value="" out="N"/>
				<param name="chg_seq" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="cre_ofc_cd" type="12" value="" out="N"/>
				<param name="dmdt_chg_delt_rsn_cd" type="12" value="" out="N"/>
				<param name="corr_rmk" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
