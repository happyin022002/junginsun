<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="LeaseSubleaseDBDAOMstContainerVORSQL">
			<desc><![CDATA[Container Status Inquiry]]></desc>
			<sql><![CDATA[
SELECT 
       A.CNTR_NO,   
       SUBSTR(A.CNTR_NO,11) CHK_DGT, 
       DECODE(A.ACIAC_DIV_CD, 'I', 'Inactive','A','Active') ACIAC_DIV_CD, 
       A.CNTR_TPSZ_CD,
       A.LSTM_CD, 
       B.CNTR_TPSZ_ISO_CD, 
       DECODE(C.CNTR_OLD_VAN_FLG,'Y', 'Old', 'New') CNTR_OLD_VAN_FLG,
       NVL(( SELECT COM_CONSTANTMGR_PKG.COM_getCompanyName_FNC()
             FROM MNR_TTL_LSS_RQST_HDR TH
                , MNR_TTL_LSS_RQST_DTL TD
            WHERE 1                   = 1
              AND    TH.TTL_LSS_STS_CD = 'HA'
              AND    TH.TTL_LSS_NO      = TD.TTL_LSS_NO
              AND    TD.RQST_EQ_NO    = A.CNTR_NO
              AND    A.ONH_DT < TH.TTL_LSS_DT
              AND    ROWNUM            = 1), DECODE(A.CNTR_STS_CD||A.CNMV_STS_CD||A.ACIAC_DIV_CD, 'OWNMTInactive', 'Not Receiving', MV.VNDR_LGL_ENG_NM) 
        ) AS OWNR_CO_CD,
       COM_CONSTANTMGR_PKG.COM_getCompanyName_FNC() AS CNTR_USE_CO_CD
FROM MST_CONTAINER A, 
     MDM_CNTR_TP_SZ B,
     MST_CNTR_STS_HIS C,
     MDM_VENDOR MV
WHERE 1 = 1
AND	A.CNTR_NO = MST_COMMON_PKG.MST_CNTR_NO_FNC(@[cntr_no])
AND B.CNTR_TPSZ_CD = A.CNTR_TPSZ_CD
AND C.CNTR_NO(+)   = A.CNTR_NO
AND A.VNDR_SEQ     = MV.VNDR_SEQ(+)
AND ROWNUM = 1			]]></sql>
			<params>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
