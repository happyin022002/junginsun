<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ReceivableRentalCostDBDAOReceivableRentalChargeUSQL">
			<desc><![CDATA[계약번호별 Receivable Rental Charge Creation 자료를 개별 갱신합니다.]]></desc>
			<sql><![CDATA[
UPDATE  LSE_RCV_RNTL_CHG A
SET     LSE_CNTR_CHG_STS_CD = 'C',
        TTL_CHG_AMT  = (SELECT  NVL(SUM(COST_AMT),0) 
                        FROM    LSE_RCV_RNTL_CHG_DTL
                        WHERE   COST_YRMON   = A.COST_YRMON
                        AND     AGMT_CTY_CD  = A.AGMT_CTY_CD
                        AND     AGMT_SEQ     = A.AGMT_SEQ
                        AND     RCV_RNTL_SEQ = A.RCV_RNTL_SEQ
						AND     LSE_RCV_CHG_CRE_CD != 'D'),
        PNL_AMT      = 0,
        CR_AMT       = (SELECT  NVL(SUM(CR_AMT),0) 
                        FROM    LSE_RCV_RNTL_CHG_DTL
                        WHERE   COST_YRMON   = A.COST_YRMON
                        AND     AGMT_CTY_CD  = A.AGMT_CTY_CD
                        AND     AGMT_SEQ     = A.AGMT_SEQ
                        AND     RCV_RNTL_SEQ = A.RCV_RNTL_SEQ
						AND     LSE_RCV_CHG_CRE_CD != 'D'),
        INV_AMT      = 0,
        DPS_AMT      = 0,
        BAL_AMT      = 0,
        UPD_USR_ID	 = @[upd_usr_id],
        UPD_DT		 = SYSDATE
WHERE   COST_YRMON   = @[cost_yrmon]
AND     AGMT_CTY_CD  = @[agmt_cty_cd]
AND     AGMT_SEQ     = @[agmt_seq]
AND     RCV_RNTL_SEQ = @[rcv_rntl_seq]			]]></sql>
			<params>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="cost_yrmon" type="12" value="" out="N"/>
				<param name="agmt_cty_cd" type="12" value="" out="N"/>
				<param name="agmt_seq" type="2" value="" out="N"/>
				<param name="rcv_rntl_seq" type="2" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
