<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerOnOffhireDBDAOModifyCntrMasterByTermChangeDataUSQL">
			<desc><![CDATA[modifyCntrMasterByTermChangeData]]></desc>
			<sql><![CDATA[
UPDATE MST_CONTAINER A
SET 
     (CNTR_STS_CD,LST_STS_YD_CD,LST_STS_SEQ) 
        =(SELECT /*+ INDEX_DESC(B XAK1MST_CNTR_STS_HIS) */
            B.CNTR_STS_CD, B.YD_CD, B.CNTR_STS_SEQ
        FROM MST_CNTR_STS_HIS B
        WHERE A.CNTR_NO=B.CNTR_NO
        AND ROWNUM=1)	 
	,(LSTM_CD,AGMT_CTY_CD,AGMT_SEQ,VNDR_SEQ,ONH_FREE_DYS,MIN_ONH_DYS, ONH_CNTR_STS_CD,ONH_DT,ONH_YD_CD,ONH_STS_SEQ) 
        = (SELECT LA.LSTM_CD, LA.AGMT_CTY_CD,LA.AGMT_SEQ,LA.VNDR_SEQ, B.RNTL_CHG_FREE_DYS,B.CNTR_MIN_ONH_DYS,
                     B.CNTR_STS_CD,B.CNTR_STS_EVNT_DT,B.YD_CD,B.CNTR_STS_SEQ
           FROM MST_CNTR_STS_HIS B
                  , LSE_AGREEMENT LA
           WHERE B.AGMT_CTY_CD  = LA.AGMT_CTY_CD
           AND   B.AGMT_SEQ     = LA.AGMT_SEQ
           AND   B.CNTR_NO      = A.CNTR_NO
           AND   B.CNTR_STS_SEQ = MST_ONH_STS_SEQ_FNC(A.CNTR_NO))    
    ,RSTR_USG_TP_LBL_NM3 = null
    ,RSTR_USG_TP_LBL_NM8 = null
    ,TERM_CNG_SEQ	     = @[term_cng_seq]
    ,OWNR_CO_CD          = 'O'
    ,CNTR_USE_CO_CD      = 'O'
    ,UPD_USR_ID          = @[upd_usr_id]
    ,UPD_DT              = SYSDATE
WHERE 
    CNTR_NO             = @[cntr_no]			]]></sql>
			<params>
				<param name="term_cng_seq" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
