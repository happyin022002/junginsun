<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CIMCommonDBDAOAddBkgContainerDataCSQL">
			<desc><![CDATA[BKG_CONTAINER 신규저장]]></desc>
			<sql><![CDATA[
INSERT INTO BKG_CONTAINER BC
(
    BC.CNTR_NO,
    BC.BKG_NO,
    BC.CNMV_YR, 
    BC.CNMV_ID_NO, 
    BC.CNMV_CYC_NO, 
    BC.CNMV_STS_CD, 
    BC.CNMV_EVNT_DT, 
    BC.ORG_YD_CD,
    BC.CRE_USR_ID,
    BC.UPD_USR_ID
)
SELECT @[cntr_no] AS CNTR_NO , @[bkg_no] AS BKG_NO , MAX(CM.CNMV_YR)
			,  SUBSTR(MAX(CM.CNMV_YR||TRIM(TO_CHAR(CM.CNMV_SEQ, '00000'))||NVL(CM.CNMV_SPLIT_NO, ' ')||TRIM(TO_CHAR(CM.CNMV_ID_NO, '00000'))), -5)
			,  SUBSTR(MAX(CM.CNMV_YR||TRIM(TO_CHAR(CM.CNMV_SEQ, '00000'))||NVL(CM.CNMV_SPLIT_NO, ' ')||TRIM(TO_CHAR(CM.CNMV_CYC_NO, '0000'))), -4)
			,  SUBSTR(MAX(CM.CNMV_YR||TRIM(TO_CHAR(CM.CNMV_SEQ, '00000'))||NVL(CM.CNMV_SPLIT_NO, ' ')||TRIM(CM.MVMT_STS_CD)), -2)
			,  TO_DATE(SUBSTR(MAX(CM.CNMV_YR||TRIM(TO_CHAR(CM.CNMV_SEQ, '00000'))||NVL(CM.CNMV_SPLIT_NO, ' ')||TO_CHAR(CM.CNMV_EVNT_DT, 'YYYYMMDDHH24MISS')), -14), 'YYYYMMDDHH24MISS')
			, SUBSTR(MAX(CM.CNMV_YR||TRIM(TO_CHAR(CM.CNMV_SEQ, '00000'))||NVL(CM.CNMV_SPLIT_NO, ' ')||TRIM(CM.ORG_YD_CD)), -7)
            , 'AAA'
            , 'AAA'
        FROM  CTM_MOVEMENT CM
        WHERE CM.CNTR_NO = @[cntr_no]
		AND		ROWNUM   = 1			]]></sql>
			<params>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
