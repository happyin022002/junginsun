<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerOnOffhireDBDAOValidationCurrentStatusDataRSQL">
			<desc><![CDATA[ValidationCurrentStatusData]]></desc>
			<sql><![CDATA[
SELECT  COUNT(1)||'' AS RESSTR, '' AS RESSTR1
FROM MST_CNTR_PRE_STS A
WHERE 1 = 1
#if (${st_cd} == '0')
AND   A.CNTR_STS_CD = 'LSO'
#end
#if (${st_cd} == '1')
AND   A.CNTR_STS_CD = 'SBO'
#end
#if (${st_cd} == '2')
AND   A.CNTR_STS_CD = 'SBI'
#end
#if (${st_cd} == '3')
AND   A.CNTR_STS_CD = 'MUO'
#end
#if (${st_cd} == '4')
AND   A.CNTR_STS_CD = 'MUI'
#end
#if (${st_cd} == '5')
AND   A.CNTR_STS_CD = 'SRO'
#end
#if (${st_cd} == '6')
AND   A.CNTR_STS_CD = 'SRI'
#end
#if (${st_cd} == '7')
AND   A.CNTR_STS_CD = 'DON'
#end
#if (${st_cd} == '8')
AND   A.CNTR_STS_CD = 'SCR'
#end
#if (${st_cd} == '9')
AND   A.CNTR_STS_CD = 'SLD'
#end
#if (${st_cd} == '10')
AND   A.CNTR_STS_CD = 'TLL'
#end
#if (${st_cd} == '11')
AND   A.CNTR_STS_CD = 'LSO'
#end
AND   A.CNTR_PRE_STS_CD =  (SELECT  AA.CNTR_STS_CD
                            FROM MST_CONTAINER AA
							WHERE 1 = 1
							AND   AA.CNTR_NO = @[cntr_no]
                           )
UNION ALL
SELECT DECODE(A.CRNT_YD_CD, @[sts_evnt_yd_cd], '1','0') AS RESSTR, 
#if (${st_cd} == '2' || ${st_cd} == '4')
       CASE WHEN (SELECT /*+ INDEX_DESC(HIS XAK1MST_CNTR_STS_HIS) */
                         TO_CHAR(HIS.CNTR_STS_EVNT_DT, 'YYYY-MM-DD')
                    FROM MST_CNTR_STS_HIS HIS
                   WHERE HIS.CNTR_STS_CD = DECODE(@[st_cd], 2, 'SBO', 4, 'MUO', 'XXX')
                     AND HIS.CNTR_NO     = @[cntr_no]
                     AND ROWNUM          = 1)
                  <= @[hire_date] THEN '0'
#else
       CASE WHEN TO_CHAR(DECODE(SIGN(A.CNMV_DT - HIS.STS_DT), -1, HIS.STS_DT, A.CNMV_DT),'YYYY-MM-DD') <= @[hire_date] THEN '0'
#end
       ELSE '1' END RESSTR1
FROM MST_CONTAINER A
   ,(SELECT /*+ INDEX_DESC(HIS XAK1MST_CNTR_STS_HIS) */
            HIS.CNTR_NO
          , HIS.CNTR_STS_EVNT_DT STS_DT
       FROM MST_CNTR_STS_HIS HIS
      WHERE HIS.CNTR_NO     = @[cntr_no]
        AND  ROWNUM         = 1) HIS
WHERE A.CNTR_NO = @[cntr_no]
AND   A.CNTR_NO = HIS.CNTR_NO(+)
UNION ALL
#if (${st_cd} == '1' || ${st_cd} == '3')
SELECT COUNT(1)||'' AS RESSTR, '' RESSTR1 
FROM LSE_AGMT_RT A
WHERE 1 = 1
AND A.AGMT_CTY_CD  = @[agmt_cty_cd]
AND A.AGMT_SEQ     = @[agmt_seq]
AND A.CNTR_TPSZ_CD = @[cntr_tpsz_cd]
AND A.CNTR_RNTL_CHG_TP_CD = 'PDGV'
AND ROWNUM                = 1
#else
SELECT '1' AS RESSTR, '' RESSTR1 
FROM DUAL
#end			]]></sql>
			<params>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="sts_evnt_yd_cd" type="12" value="" out="N"/>
				<param name="st_cd" type="12" value="" out="N"/>
				<param name="hire_date" type="12" value="" out="N"/>
				<param name="agmt_cty_cd" type="12" value="" out="N"/>
				<param name="agmt_seq" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
