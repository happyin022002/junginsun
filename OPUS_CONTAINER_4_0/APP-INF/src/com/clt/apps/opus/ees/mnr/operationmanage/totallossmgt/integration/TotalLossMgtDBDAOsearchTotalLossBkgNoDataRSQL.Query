<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TotalLossMgtDBDAOsearchTotalLossBkgNoDataRSQL">
			<desc><![CDATA[DESC Enter..]]></desc>
			<sql><![CDATA[
SELECT BKG_NO
  FROM BKG_BOOKING
WHERE BKG_NO = 
(SELECT CASE WHEN                 
(
#if(${eq_type} == 'U')
  SELECT /*+ INDEX_DESC (A XFN1CTM_MOVEMENT) */
        A.MVMT_STS_CD
#elseif(${eq_type} == 'Z')
  SELECT /*+ INDEX_DESC (A XAK17CTM_MOVEMENT) */
        A.MVMT_STS_CD
#elseif(${eq_type} == 'G')
  SELECT /*+ INDEX_DESC (A XAK20CTM_MOVEMENT) */
        A.MVMT_STS_CD
#end
  FROM CTM_MOVEMENT A
 WHERE 1=1
#if(${eq_type} == 'U')
   AND A.CNTR_NO = @[eq_no]
#elseif(${eq_type} == 'Z')
   AND A.CHSS_NO = @[eq_no]
#elseif(${eq_type} == 'G')
   AND A.MGST_NO = @[eq_no]
#end
   AND TO_CHAR(A.CNMV_EVNT_DT, 'YYYY-MM-DD') <= @[ttl_lss_dt]
   AND ROWNUM = 1) = 'MT' THEN 'XX'
   ELSE
  (
#if(${eq_type} == 'U')
        SELECT /*+ INDEX_DESC (A XFN1CTM_MOVEMENT) */
             A.BKG_NO
#elseif(${eq_type} == 'Z')
        SELECT /*+ INDEX_DESC (A XAK17CTM_MOVEMENT) */
             A.BKG_NO
#elseif(${eq_type} == 'G')
        SELECT /*+ INDEX_DESC (A XAK20CTM_MOVEMENT) */
             A.BKG_NO
#end
  FROM CTM_MOVEMENT A
 WHERE 1=1
#if(${eq_type} == 'U')
   AND A.CNTR_NO = @[eq_no]
#elseif(${eq_type} == 'Z')
   AND A.CHSS_NO = @[eq_no]
#elseif(${eq_type} == 'G')
   AND A.MGST_NO = @[eq_no]
#end
   AND TO_CHAR(A.CNMV_EVNT_DT, 'YYYY-MM-DD') <= @[ttl_lss_dt]
   AND ROWNUM = 1) END
FROM DUAL)
  AND BKG_CGO_TP_CD IN ('F', 'R')			]]></sql>
			<params>
				<param name="eq_no" type="12" value="" out="N"/>
				<param name="ttl_lss_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
