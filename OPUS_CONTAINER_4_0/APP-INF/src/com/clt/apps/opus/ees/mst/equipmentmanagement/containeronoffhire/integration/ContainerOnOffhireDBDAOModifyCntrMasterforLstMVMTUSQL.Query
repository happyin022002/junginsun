<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerOnOffhireDBDAOModifyCntrMasterforLstMVMTUSQL">
			<desc><![CDATA[Laste Movement Information Update]]></desc>
			<sql><![CDATA[
UPDATE MST_CONTAINER MC
      SET  
         (  SYS_AREA_GRP_ID
         , CNMV_YR
         , CNMV_ID_NO
         , CNMV_SEQ 
         , CNMV_SPLIT_NO
         , CNMV_CYC_NO
         , CNMV_DT
         , CNMV_GDT
         , PRE_STS_FLG
         , FULL_FLG
         , CRNT_YD_CD
         , CNMV_STS_CD
         , IMDT_EXT_FLG
         , LOC_CD
         , SCC_CD
         , LCC_CD
         , ECC_CD
         , RCC_CD
         , CO_CRE_FLG
         , ACIAC_DIV_CD)
          = ( SELECT /*+ INDEX_DESC(CM XAK2CTM_MOVEMENT) */
                      CM.SYS_AREA_GRP_ID
                     , CM.CNMV_YR
                     , CM.CNMV_ID_NO
                     , CM.CNMV_SEQ     
                     , CM.CNMV_SPLIT_NO
                     , CM.CNMV_CYC_NO
                     , CM.CNMV_EVNT_DT
                     , GLOBALDATE_PKG.TIME_CONV_FNC (SUBSTR (CM.ORG_YD_CD, 0, 5 ), CM.CNMV_EVNT_DT, 'GMT' ) AS CNMV_GDT
                     , 'N' AS PRE_STS_FLG
                     , CM.FCNTR_FLG
                     , CM.ORG_YD_CD
                     , CM.MVMT_STS_CD
                     , CM.IMDT_EXT_FLG
                     , SUBSTR(CM.ORG_YD_CD, 1, 5) AS LOC_CD
                     , MST_LOC_FNC(SUBSTR(CM.ORG_YD_CD, 1, 5),'SCC')    AS SCC_CD
                     , MST_LOC_FNC(SUBSTR(CM.ORG_YD_CD, 1, 5),'LCC')    AS LCC_CD
                     , MST_LOC_FNC(SUBSTR(CM.ORG_YD_CD, 1, 5),'ECC')    AS ECC_CD
                     , MST_LOC_FNC(SUBSTR(CM.ORG_YD_CD, 1, 5),'RCC')    AS RCC_CD
                     , 'N' CO_CRE_FLG
                     , DECODE(CM.MVMT_STS_CD, 'XX', 'I', 'A')
               FROM CTM_MOVEMENT CM
              WHERE MC.CNTR_NO = CM.CNTR_NO
                AND ROWNUM    = 1)
         , UPD_USR_ID  = @[upd_usr_id]
         , UPD_DT      = SYSDATE
WHERE MC.CNTR_NO = @[cntr_no]
AND   EXISTS (SELECT 'X'
                FROM CTM_MOVEMENT CM
               WHERE MC.CNTR_NO = CM.CNTR_NO
                 AND ROWNUM     = 1)
AND   ROWNUM     = 1			]]></sql>
			<params>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
