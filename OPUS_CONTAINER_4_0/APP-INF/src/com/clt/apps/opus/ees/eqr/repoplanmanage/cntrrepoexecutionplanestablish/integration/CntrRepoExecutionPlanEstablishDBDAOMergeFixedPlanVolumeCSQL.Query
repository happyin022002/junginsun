<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CntrRepoExecutionPlanEstablishDBDAOMergeFixedPlanVolumeCSQL">
			<desc><![CDATA[Fixed Plan 수정]]></desc>
			<sql><![CDATA[
MERGE INTO	EQR_VSL_LODG_DCHG_PLN_QTY I
	USING
	(
		SELECT	 @[repo_pln_id]		AS REPO_PLN_ID
				,@[pln_yrwk]		AS PLN_YRWK
				,@[pln_seq]			AS PLN_SEQ
				,@[cntr_tpsz_cd]	AS CNTR_TPSZ_CD
		FROM	DUAL
	) M
	ON
	(
			I.REPO_PLN_ID	= M.REPO_PLN_ID
		AND	I.PLN_YRWK		= M.PLN_YRWK
		AND	I.PLN_SEQ		= M.PLN_SEQ
		AND I.CNTR_TPSZ_CD	= M.CNTR_TPSZ_CD
	)
WHEN MATCHED THEN
	UPDATE
		SET	 I.CNTR_QTY			= @[cntr_qty]
			,I.LODG_DCHG_COST_AMT=@[lodg_dchg_cost_amt] 
			,I.PLN_UC_AMT		= @[pln_uc_amt]
			,I.LODG_PORT_COST_AMT=@[cntr_qty] * @[pln_uc_amt]
			,I.DCHG_PORT_COST_AMT=@[dchg_port_cost_amt]
			,I.UPD_USR_ID		= @[upd_usr_id]
			,I.UPD_DT			= SYSDATE
WHEN NOT MATCHED THEN
	INSERT 
	(
		REPO_PLN_ID
	,	PLN_YRWK
	,	PLN_SEQ
	,	CNTR_TPSZ_CD
	,	CNTR_QTY
	,	PLN_UC_AMT
	,	LODG_DCHG_COST_AMT
	,	LODG_PORT_COST_AMT
	,	DCHG_PORT_COST_AMT
	,	PRE_PLN_CNTR_QTY
	,	COD_SIM_FLG
	,	COD_DCHG_PLN_FLG
	,	PRE_PLN_DCHG_LOC_CD
	,	CRE_USR_ID
	,	CRE_DT
	,	UPD_USR_ID
	,	UPD_DT
	) VALUES( 
		@[repo_pln_id]
	,	@[pln_yrwk]
	,	@[pln_seq]
	,	@[cntr_tpsz_cd]
	,	@[cntr_qty]
	,	@[pln_uc_amt]
	,	@[lodg_dchg_cost_amt]
	,	@[lodg_port_cost_amt]
	,	@[dchg_port_cost_amt]
	,	NULL
	,	'N'
	,	'N'
	,	NULL
	,	@[cre_usr_id]
	,	SYSDATE
	,	@[upd_usr_id]
	,	SYSDATE
	)			]]></sql>
			<params>
				<param name="repo_pln_id" type="12" value="" out="N"/>
				<param name="pln_yrwk" type="12" value="" out="N"/>
				<param name="pln_seq" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="cntr_qty" type="12" value="" out="N"/>
				<param name="lodg_dchg_cost_amt" type="12" value="" out="N"/>
				<param name="pln_uc_amt" type="12" value="" out="N"/>
				<param name="dchg_port_cost_amt" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="lodg_port_cost_amt" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
