<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerMovementMgtDBDAOExistEDIMovementListVORSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
SELECT A.* FROM CTM_MOVEMENT A
 WHERE A.CNTR_NO   = @[cntr_no]
   AND A.ORG_YD_CD = @[evnt_yd_cd]
   AND A.MVMT_CRE_TP_CD = 'A'
   AND A.MVMT_STS_CD = @[edi_mvmt_sts_cd]
   AND A.CNMV_EVNT_DT <= TO_DATE(@[evnt_dt],'YYYYMMDDHH24MISS') + 120/24
   AND TO_DATE(@[evnt_dt],'YYYYMMDDHH24MISS') BETWEEN
       (
         SELECT /*+INDEX_DESC(X XUK1CTM_MOVEMENT)*/
                X.CNMV_EVNT_DT
           FROM CTM_MOVEMENT X
          WHERE X.CNTR_NO = A.CNTR_NO
            AND X.CNMV_YR||LPAD(X.CNMV_SEQ,5,'0') < A.CNMV_YR||LPAD(A.CNMV_SEQ,5,'0')
            AND ROWNUM    = 1
       )
       AND
       (
         SELECT /*+INDEX(X XUK1CTM_MOVEMENT)*/
                X.CNMV_EVNT_DT
           FROM CTM_MOVEMENT X
          WHERE X.CNTR_NO = A.CNTR_NO
            AND X.CNMV_YR||LPAD(X.CNMV_SEQ,5,'0') > A.CNMV_YR||LPAD(A.CNMV_SEQ,5,'0')
            AND ROWNUM    = 1
       )
   AND ROWNUM = 1			]]></sql>
			<params>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="evnt_yd_cd" type="12" value="" out="N"/>
				<param name="edi_mvmt_sts_cd" type="12" value="" out="N"/>
				<param name="evnt_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
