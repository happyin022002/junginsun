<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CEDEXCodeMgtDBDAOsearchCodeRelationByLocationDataRSQL">
			<desc><![CDATA[조회 by Location]]></desc>
			<sql><![CDATA[
SELECT DECODE(C.TO_RLT_CD,@[eq_cmpo_cd],'Y','N')  G,
       C.EQ_LOC_CD  CODE,
       C.EQ_LOC_NM  DESCRIPTION,
       DECODE(C.EQ_CEDEX_RLT_TP_CD,NULL,'LTC',C.EQ_CEDEX_RLT_TP_CD) EQ_CEDEX_RLT_TP_CD,  
       DECODE(C.FM_RLT_CD,NULL,C.EQ_LOC_CD,C.FM_RLT_CD)  FM_RLT_CD,
       DECODE(C.TO_RLT_CD,NULL,@[eq_cmpo_cd],C.TO_RLT_CD)  TO_RLT_CD,
       C.CRE_USR_ID,
       C.CRE_DT,
       C.UPD_USR_ID,
       C.UPD_DT,
       @[eq_cmpo_cd] EQ_CMPO_CD
  FROM (   
				SELECT A.EQ_LOC_CD,
				       A.EQ_LOC_NM,
				       B.EQ_CEDEX_RLT_TP_CD,
				       B.FM_RLT_CD,
				       B.TO_RLT_CD,
				       B.CRE_USR_ID,
				       B.CRE_DT,
				       B.UPD_USR_ID,
				       B.UPD_DT  
				  FROM (SELECT EQ_LOC_CD,
				               EQ_LOC_NM
				          FROM MNR_EQ_LOC_CD
				         WHERE EQ_LOC_CD_LVL = '2') A,
				       (SELECT EQ_CEDEX_RLT_TP_CD,
				               FM_RLT_CD,
				               TO_RLT_CD,
				               CRE_USR_ID,
				               CRE_DT,
				               UPD_USR_ID,
				               UPD_DT
				          FROM MNR_CD_RLT
				         WHERE EQ_CEDEX_RLT_TP_CD = 'LTC'
                           AND TO_RLT_CD = @[eq_cmpo_cd]) B
				  WHERE A.EQ_LOC_CD = B.FM_RLT_CD(+)
	  	 ) C,
       ( SELECT @[eq_cmpo_cd] EQ_CMPO_CD
         FROM DUAL ) P
 WHERE C.TO_RLT_CD = P.EQ_CMPO_CD(+)
 ORDER BY G DESC, CODE			]]></sql>
			<params>
				<param name="eq_cmpo_cd" type="12" value="JNA" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
