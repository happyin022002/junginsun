<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RuLabelManagementDBDAOAddRuLabelAttachHistoryDataCSQL">
			<desc><![CDATA[RU Label History 저장]]></desc>
			<sql><![CDATA[
INSERT INTO MST_CNTR_RSTR_USG_HIS
(
    CNTR_NO
,   RSTR_USG_HIS_SEQ        --시퀀스
,   RSTR_USG_UPD_TP_CD      -- CUD
,   RSTR_USG_TP_CD          -- TYPE CODE
,   RSTR_USG_LBL_NM         -- VALUE
,	CNTR_RMK 
,   CNMV_YR                 -- CNTR MST MOVE키 값
,   CNMV_ID_NO              -- CNTR MST MOVE키 값
,   CNMV_SEQ                -- CNTR MST MOVE키 값
,   CNMV_SPLIT_NO           -- CNTR MST MOVE키 값
,   CRE_USR_ID
,   CRE_DT
,   UPD_USR_ID
,   UPD_DT
)
VALUES
(
  @[cntr_no]
, rstr_usg_his_seq.nextval
, DECODE(@[rstr_usg_upd_tp_cd], 'D', 'D'
                              , NVL((SELECT DECODE(SUBSTR(MAX(TO_CHAR(SUB.RSTR_USG_HIS_SEQ, '00000000')||TRIM(SUB.RSTR_USG_UPD_TP_CD)), 10, 1), 'D', 'C', NULL, 'C', 'U')
                                     FROM MST_CNTR_RSTR_USG_HIS SUB
                                     WHERE SUB.CNTR_NO        = @[cntr_no]
                                     AND   SUB.RSTR_USG_TP_CD = @[ru_label_type]
                                    ), 'C')
        )
, @[ru_label_type]
, @[ru_label_value]
, @[remark]
, (SELECT CNMV_YR       FROM MST_CONTAINER MC WHERE MC.CNTR_NO = @[cntr_no] AND ROWNUM=1)
, (SELECT CNMV_ID_NO    FROM MST_CONTAINER MC WHERE MC.CNTR_NO = @[cntr_no] AND ROWNUM=1)
, (SELECT CNMV_SEQ      FROM MST_CONTAINER MC WHERE MC.CNTR_NO = @[cntr_no] AND ROWNUM=1)
, (SELECT CNMV_SPLIT_NO FROM MST_CONTAINER MC WHERE MC.CNTR_NO = @[cntr_no] AND ROWNUM=1)
, @[cre_usr_id]
, SYSDATE
, @[upd_usr_id]
, SYSDATE
)			]]></sql>
			<params>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="rstr_usg_upd_tp_cd" type="12" value="" out="N"/>
				<param name="ru_label_type" type="12" value="" out="N"/>
				<param name="ru_label_value" type="12" value="" out="N"/>
				<param name="remark" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
