<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CimCommonDBDAOOscarBookingInformationListRSQL">
			<desc><![CDATA[OSCAR Booking Information Inquiry 화면에서 Booking Information조회]]></desc>
			<sql><![CDATA[
SELECT	BB.APP_CD ,
	#if (${s_cntr_no} != '')
        BC.CNMV_CYC_NO AS CNMV_CYC_NO,
    #end
        BB.VSL_CD||BB.SKD_VOY_NO||BB.SKD_DIR_CD AS TVVD,
        BB.POR_CD POR_CD,
        BB.POL_CD POL_CD,
        BB.POD_CD POD_CD,
        BB.DEL_CD DEL_CD,
        BB.BKG_NO,
        BB.BL_NO,
        BB.BKG_CGO_TP_CD,
		BB.SLAN_CD,
        BB.BKG_STS_CD,
        BB.RCV_TERM_CD,
        BB.DE_TERM_CD,
		NVL(TO_CHAR(BB.POL_ETD_DT, 'YYYY.MM.DD HH24:MI:SS'),'') AS POL_ETD_DT,
        TO_CHAR(NVL(BB.OSCA_CRE_DT, BB.CRE_DT), 'YYYY.MM.DD HH24:MI:SS') AS CRE_DT,
        TO_CHAR(NVL(BB.OSCAR_UPD_DT, BB.UPD_DT), 'YYYY.MM.DD HH24:MI:SS') AS UPD_DT       
	FROM CIM_BOOKING_V BB
	#if (${s_cntr_no} != '' && ${s_bkg_no} == '')
       , CIM_BKG_CNTR_V BC
	WHERE 1 = 1
	AND   BB.BKG_NO = BC.BKG_NO
    AND   BC.CNTR_NO = @[s_cntr_no]
    #elseif (${s_cntr_no} == '' && ${s_bkg_no} != '')
    WHERE  1 = 1
	AND    BB.BKG_NO = @[s_bkg_no] 
	#elseif (${s_cntr_no} != '' && ${s_bkg_no} != '')
       , CIM_BKG_CNTR_V BC
	WHERE 1 = 1
	AND   BB.BKG_NO = BC.BKG_NO
    AND   BC.CNTR_NO = @[s_cntr_no]
	AND    BB.BKG_NO = @[s_bkg_no] 
    #end

    ORDER BY  TO_CHAR(NVL(BB.OSCA_CRE_DT, BB.CRE_DT), 'YYYY.MM.DD HH24:MI:SS')  DESC			]]></sql>
			<params>
				<param name="s_cntr_no" type="12" value="" out="N"/>
				<param name="s_bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
