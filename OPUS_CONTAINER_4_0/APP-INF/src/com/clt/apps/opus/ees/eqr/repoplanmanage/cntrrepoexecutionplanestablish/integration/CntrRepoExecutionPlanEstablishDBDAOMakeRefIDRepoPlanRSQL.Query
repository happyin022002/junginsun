<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CntrRepoExecutionPlanEstablishDBDAOMakeRefIDRepoPlanRSQL">
			<desc><![CDATA[컨테이너 이송 실행 계획 조회/수정 SEQ 생성]]></desc>
			<sql><![CDATA[
SELECT SUBSTR(@[repo_plan_id] , 7, 4)
       ||SUBSTR(@[repo_plan_id] , 12, 4)
       ||@[onf_hir_div_cd]
       ||LTRIM(TO_CHAR(NVL(MAX(SUBSTR(REF_ID, -3))+1, 001), '000')) SEQ        
FROM 
    ${table_name}                                                           
WHERE REPO_PLN_ID            = @[repo_plan_id]  -- repo plan id                                                               
AND   REF_ID LIKE SUBSTR(@[repo_plan_id] , 7, 4)||SUBSTR(@[repo_plan_id] , 12, 4)||@[onf_hir_div_cd]||'%'
AND   LENGTH(REF_ID) = 12			]]></sql>
			<params>
				<param name="repo_plan_id" type="12" value="" out="N"/>
				<param name="onf_hir_div_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
