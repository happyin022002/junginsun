<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RepairMgtDBDAOsearchEDIInvoiceParkingLotDTLDataRSQL">
			<desc><![CDATA[searchEDIInvoiceParkingLotDTLData]]></desc>
			<sql><![CDATA[
SELECT MNR_RCV_ORD_INV_TMP_DTL_SEQ
	, EQ_KND_CD
	, EQ_NO, RPR_QTY, CURR_CD, INV_AMT, RPR_RSLT_DT
	, YD_CD, COST_CD, VNDR_SEQ, ORD_DTL_RMK
    , CASE WHEN DD IS NOT NULL THEN AA||';'||BB||';'||CC||';'||DD
           WHEN CC IS NOT NULL THEN AA||';'||BB||';'||CC
           WHEN BB IS NOT NULL THEN AA||';'||BB
           WHEN AA IS NOT NULL THEN AA
      END VRFY_RSLT_DESC
    , RQST_REF_NO, CRE_DT, INV_NO, MNR_RCV_ORD_INV_TMP_SEQ, UPD_USR_ID, UPD_DT, '' AS CELL_VALUE, '' AS CRE_FR_DT, '' AS CRE_TO_DT, '' AS RQST_EQ_NO
    ,(SELECT B.VNDR_LGL_ENG_NM
        FROM MDM_VENDOR B
       WHERE B.VNDR_SEQ = A.VNDR_SEQ) VNDR_NM
    ,COST_CD||COST_DTL_CD AS COST_CD_ALL
FROM (SELECT d.MNR_RCV_ORD_INV_TMP_DTL_SEQ
		, d.EQ_KND_CD
		, d.EQ_NO, d.RPR_QTY, d.CURR_CD, d.INV_AMT, TO_CHAR(d.RPR_RSLT_DT,'YYYY-MM-DD') AS RPR_RSLT_DT
		, d.YD_CD, d.COST_CD, d.VNDR_SEQ, d.ORD_DTL_RMK
    	, (SELECT MNR_CD_DP_DESC FROM MNR_GEN_CD WHERE PRNT_CD_ID = 'CD00004' AND MNR_CD_ID = SUBSTR(d.VRFY_RSLT_DESC, 1, 2))  AA
    	, (SELECT MNR_CD_DP_DESC FROM MNR_GEN_CD WHERE PRNT_CD_ID = 'CD00004' AND MNR_CD_ID = SUBSTR(d.VRFY_RSLT_DESC, 4, 2))  BB
    	, (SELECT MNR_CD_DP_DESC FROM MNR_GEN_CD WHERE PRNT_CD_ID = 'CD00004' AND MNR_CD_ID = SUBSTR(d.VRFY_RSLT_DESC, 7, 2))  CC
    	, (SELECT MNR_CD_DP_DESC FROM MNR_GEN_CD WHERE PRNT_CD_ID = 'CD00004' AND MNR_CD_ID = SUBSTR(d.VRFY_RSLT_DESC, 10, 2)) DD
    	, d.RQST_REF_NO, d.CRE_DT, h.INV_NO, h.MNR_RCV_ORD_INV_TMP_SEQ, d.UPD_USR_ID, d.UPD_DT, '' AS CELL_VALUE, '' AS CRE_FR_DT, '' AS CRE_TO_DT, '' AS RQST_EQ_NO, D.COST_DTL_CD
		FROM MNR_ORD_TMP_HDR h, MNR_ORD_TMP_DTL d 
		WHERE h.MNR_RCV_ORD_INV_TMP_SEQ = d.MNR_RCV_ORD_INV_TMP_SEQ
		) A
WHERE 1=1
#if(${mnr_rcv_ord_inv_tmp_seq} != '')
	AND MNR_RCV_ORD_INV_TMP_SEQ = @[mnr_rcv_ord_inv_tmp_seq]
#end
ORDER BY MNR_RCV_ORD_INV_TMP_DTL_SEQ			]]></sql>
			<params>
				<param name="mnr_rcv_ord_inv_tmp_seq" type="12" value="26" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
