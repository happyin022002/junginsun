<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TotalLossMgtDBDAOsearchTotalLossInfoByOFCListDataRSQL">
			<desc><![CDATA[Total Loss No Inquiry_Pop Up 화면 조회]]></desc>
			<sql><![CDATA[
SELECT A.TTL_LSS_NO
      ,A.RQST_OFC_CD
      ,A.APRO_OFC_CD
      ,A.RESPB_OFC_CD
      ,TO_CHAR(A.TTL_LSS_DT, 'yyyy-mm-dd') TTL_LSS_DT
      ,TO_CHAR(GLOBALDATE_PKG.TIME_CONV_OFC_FNC(MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(), A.RQST_DT,@[user_ofc_cd]), 'yyyy-mm-dd') RQST_DT
      ,A.TTL_LSS_STS_CD
      ,A.MNR_STS_REF_NO
      ,TO_CHAR(GLOBALDATE_PKG.TIME_CONV_OFC_FNC(MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(),A.TTL_LSS_CFM_DT,@[user_ofc_cd]), 'yyyy-mm-dd') TTL_LSS_CFM_DT
      ,A.TTL_LSS_CFM_ID
      ,A.TTL_LSS_RMK
      ,A.FILE_SEQ
      ,A.CRE_USR_ID
      ,TO_CHAR(A.CRE_DT, 'yyyy-mm-dd') CRE_DT
      ,A.UPD_USR_ID
      ,TO_CHAR(A.UPD_DT, 'yyyy-mm-dd') UPD_DT
  FROM MNR_TTL_LSS_RQST_HDR A
 WHERE A.RQST_OFC_CD = @[rqst_ofc_cd]
   AND A.CRE_DT BETWEEN GLOBALDATE_PKG.TIME_CONV_OFC_FNC(@[user_ofc_cd],TO_DATE(@[rqst_dt_fr], 'yyyy-mm-dd'),MNR_COMMON_PKG.MNR_GET_HOOFC_FNC())
	                 AND GLOBALDATE_PKG.TIME_CONV_OFC_FNC(@[user_ofc_cd],TO_DATE(@[rqst_dt_to]||'23:59:59','YYYY-MM-DD HH24:MI:SS'),MNR_COMMON_PKG.MNR_GET_HOOFC_FNC())
	#if (${rqst_eq_no} != '') 
   AND A.TTL_LSS_NO IN (SELECT TTL_LSS_NO
              FROM MNR_TTL_LSS_RQST_DTL
              WHERE RQST_EQ_NO LIKE @[rqst_eq_no] || '%')
	#end

	#if(${work_type} == 'request')
	AND A.TTL_LSS_STS_CD IN ('HJ','HS','HR')
	#end			]]></sql>
			<params>
				<param name="user_ofc_cd" type="12" value="" out="N"/>
				<param name="rqst_ofc_cd" type="12" value="" out="N"/>
				<param name="rqst_dt_fr" type="12" value="" out="N"/>
				<param name="rqst_dt_to" type="12" value="" out="N"/>
				<param name="rqst_eq_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
