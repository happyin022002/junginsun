<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChassisMgsetInventoryDBDAOsearchCHSInventoryByAgmtListDataRSQL">
			<desc><![CDATA[chungpa 20090729 1098 popup add]]></desc>
			<sql><![CDATA[
SELECT
    A.EQ_NO,
    A.EQ_TPSZ_CD,
    A.AGMT_LSTM_CD,
    A.AGMT_OFC_CTY_CD || LPAD(A.AGMT_SEQ, 6, '0') AS AGMT_NO,
    B.VNDR_LGL_ENG_NM VNDR_ABBR_NM,
    A.CHSS_MVMT_STS_CD,
    D.LCC_CD,
    C.SCC_CD,
    A.CRNT_YD_CD,
    A.ONH_DT,
    A.CHSS_MVMT_DT,
    TRUNC(SYSDATE - A.CHSS_MVMT_DT,0) AS LSDAYS
FROM    
	CGM_EQUIPMENT A,
	CGM_AGREEMENT t2,
    MDM_VENDOR B,
    MDM_LOCATION C,
    MDM_EQ_ORZ_CHT D
WHERE 
      A.AGMT_OFC_CTY_CD = t2.AGMT_OFC_CTY_CD
      AND A.AGMT_SEQ = t2.AGMT_SEQ
	  AND A.AGMT_VER_NO = t2.AGMT_VER_NO
      AND (A.AGMT_OFC_CTY_CD  || A.AGMT_SEQ ) = (t2.AGMT_OFC_CTY_CD  || t2.AGMT_SEQ )
	  AND A.EQ_KND_CD = 'Z'
	  AND A.ACIAC_DIV_CD = 'A'
      AND A.VNDR_SEQ = B.VNDR_SEQ (+)
      AND A.CRNT_LOC_CD = C.LOC_CD
      AND C.SCC_CD = D.SCC_CD

	  #if ( ${location} == 'RCC' )
	  AND  D.RCC_CD = (@[crnt_loc_cd])
	  #elseif ( ${location} == 'LCC' )
	  AND  D.LCC_CD = (@[crnt_loc_cd])
	  #elseif ( ${location} == 'SCC' )
	  AND  D.SCC_CD = (@[crnt_loc_cd])
	  #end

      AND C.DELT_FLG = 'N'
      AND D.DELT_FLG = 'N'
	  AND A.EQ_KND_CD = @[eq_knd_cd]

#if (${crnt_yd_cd} != '')
	AND A.CRNT_YD_CD IN ($crnt_yd_cd)
#end

#if (${include_np} != 'Y')
	AND A.AGMT_LSTM_CD <>'NP'
#end

#if (${agmt_no} != '')
	AND (t2.AGMT_OFC_CTY_CD,t2.AGMT_SEQ ) IN ($agmt_no) 
#end

#if (${vndr_seq} != '')
	AND t2.VNDR_SEQ IN ($vndr_seq)
#end

#if (${eq_tpsz_cd} != '')
	AND A.EQ_TPSZ_CD = @[eq_tpsz_cd]
#end

#if ( ${s3_gtotal} == 'GTOTAL' )

#else



#if (${group_value1} != '')
	AND A.CRNT_LOC_CD = @[group_value1]
#end

#if (${s2_group1} == 'SubSum')

#else


#if (${group_value2} != '')
  AND t2.AGMT_OFC_CTY_CD || LPAD(t2.AGMT_SEQ, 6, '0') = @[group_value2]
#end

#if (${group_value3} != '')
	AND t2.VNDR_SEQ = SUBSTR(@[group_value3], INSTR(@[group_value3],'(')+1, 6)
#end


#end



#end			]]></sql>
			<params>
				<param name="crnt_loc_cd" type="12" value="" out="N"/>
				<param name="eq_knd_cd" type="12" value="" out="N"/>
				<param name="eq_tpsz_cd" type="12" value="" out="N"/>
				<param name="group_value1" type="12" value="" out="N"/>
				<param name="group_value2" type="12" value="" out="N"/>
				<param name="group_value3" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
