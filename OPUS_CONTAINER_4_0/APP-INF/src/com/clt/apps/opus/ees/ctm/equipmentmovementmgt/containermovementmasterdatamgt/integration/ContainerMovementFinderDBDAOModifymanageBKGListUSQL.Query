<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerMovementFinderDBDAOModifymanageBKGListUSQL">
			<desc><![CDATA[Update]]></desc>
			<sql><![CDATA[
UPDATE CTM_BOOKING
SET VSL_CD = (SELECT VSL_CD
				FROM CTM_BKG_VVD
				WHERE BKG_NO = @[bkg_no]
				AND VSL_PRE_PST_CD = 'T'),
    SKD_VOY_NO = (SELECT SKD_VOY_NO
				FROM CTM_BKG_VVD
				WHERE BKG_NO = @[bkg_no]
				AND VSL_PRE_PST_CD = 'T'),
    SKD_DIR_CD = (SELECT SKD_DIR_CD
				FROM CTM_BKG_VVD
				WHERE BKG_NO = @[bkg_no]
				AND VSL_PRE_PST_CD = 'T'),
	SLAN_CD = (SELECT SLAN_CD
				FROM CTM_BKG_VVD
				WHERE BKG_NO = @[bkg_no]
				AND VSL_PRE_PST_CD = 'T'),
    POL_CD = (SELECT POL_CD FROM (SELECT POL_CD
				FROM CTM_BKG_VVD
				WHERE BKG_NO = @[bkg_no]
				AND ROWNUM=1
				ORDER BY VSL_PRE_PST_CD, VSL_SEQ)),
    POD_CD = (SELECT POD_CD FROM (SELECT POD_CD
				FROM CTM_BKG_VVD
				WHERE BKG_NO = @[bkg_no]
				AND ROWNUM=1
				ORDER BY VSL_PRE_PST_CD DESC, VSL_SEQ DESC)),
    UPD_USR_ID = @[upd_usr_id],
    UPD_DT = SYSDATE
WHERE BKG_NO = @[bkg_no]			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
