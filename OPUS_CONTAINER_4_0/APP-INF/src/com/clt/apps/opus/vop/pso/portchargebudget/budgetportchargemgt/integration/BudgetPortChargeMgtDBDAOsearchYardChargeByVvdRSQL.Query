<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BudgetPortChargeMgtDBDAOsearchYardChargeByVvdRSQL">
			<desc><![CDATA[searchYardChargeByVvd]]></desc>
			<sql><![CDATA[
SELECT MAX (YD_CHG_NO) YD_CHG_NO,
  MAX (YD_CHG_VER_SEQ) YD_CHG_VER_SEQ,
  YD_CD,
  LGS_COST_CD,
  VNDR_SEQ, 
  MAX(CURR_CD) CURR_CD /*2009.12.10 add*/
FROM PSO_YD_CHG
WHERE YD_CD in
  (SELECT NVL(YD_CD, VPS_PORT_CD)
  FROM VSK_VSL_PORT_SKD
  WHERE VSL_CD   = @[vsl_cd]
  AND SKD_VOY_NO = @[skd_voy_no]
  AND SKD_DIR_CD = @[skd_dir_cd]
  AND NVL(SKD_CNG_STS_CD, ' ') <> 'S'
  GROUP BY NVL(YD_CD, VPS_PORT_CD)
  )
AND CPLS_FLG = 'Y'
AND LST_FLG = 'Y'
AND replace(@[rev_yrmon],'-') BETWEEN TO_CHAR (EFF_DT, 'YYYYMM') AND TO_CHAR (EXP_DT, 'YYYYMM')
GROUP BY YD_CD,
  LGS_COST_CD,
  VNDR_SEQ			]]></sql>
			<params>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="rev_yrmon" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
