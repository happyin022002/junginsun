<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BudgetPortChargeMgtBCDBDAOmodifyErpDtlUSQL">
			<desc><![CDATA[modifyErpDtl]]></desc>
			<sql><![CDATA[
UPDATE GL_ESTM_IF_ERP
   SET ESTM_AMT     = @[estm_amt]
     , ACT_AMT      = @[act_amt]
     , ACCL_AMT     = (TO_NUMBER(@[estm_amt]) - TO_NUMBER(@[act_amt]))
     , UPD_RMK      = 'Y'|| NVL((SELECT '|Updated from last accrual. calculated amount ['||NVL(ESTM_AMT,0)||'].'
                                  FROM GL_ESTM_IF_ERP
                                 WHERE EXE_YRMON    = @[exe_yrmon]
                                   AND SYS_SRC_ID   = @[sys_src_id]
                                   AND REV_YRMON    = @[rev_yrmon]
                                   AND ACCT_CD      = @[acct_cd]
                                   AND ESTM_SEQ_NO  = @[estm_seq_no])
                                , NULL) /*2016.07.19 Add*/
     , UPD_USR_ID   = @[upd_usr_id]
     , UPD_DT       = SYSDATE
     , ACCL_FLG     = DECODE(SIGN(TO_NUMBER(@[estm_amt]) - TO_NUMBER(@[act_amt])), -1, 'N', NULL) /*2016.09.07 minus amount N flag*/
 WHERE EXE_YRMON    = @[exe_yrmon]
   AND SYS_SRC_ID   = @[sys_src_id]
   AND REV_YRMON    = @[rev_yrmon]
   AND ACCT_CD      = @[acct_cd]
   AND ESTM_SEQ_NO  = @[estm_seq_no]			]]></sql>
			<params>
				<param name="estm_amt" type="6" value="" out="N"/>
				<param name="act_amt" type="6" value="" out="N"/>
				<param name="exe_yrmon" type="12" value="" out="N"/>
				<param name="sys_src_id" type="12" value="" out="N"/>
				<param name="rev_yrmon" type="12" value="" out="N"/>
				<param name="acct_cd" type="12" value="" out="N"/>
				<param name="estm_seq_no" type="2" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
