<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="VesselScheduleMgtDBDAOCheckFirstDirForLaneRSQL">
			<desc><![CDATA[FIRST DIRECTION FOR LANE]]></desc>
			<sql><![CDATA[
SELECT   COUNT(1)  AS KNT
FROM     (
         --=============================================================
          SELECT   X.VSL_SLAN_CD
                ,  X.PF_SVC_TP_CD
                ,  X.SKD_DIR_CD
                ,  DECODE(X.MIN_PORT_ROTN_SEQ,1,1,2)  AS VSL_SLAN_DIR_SEQ
          FROM     (
                   -----------------------------------------------------         
                    SELECT   PD.VSL_SLAN_CD
                          ,  PD.PF_SVC_TP_CD
                          ,  PD.SKD_DIR_CD
                          ,  MIN(PD.PORT_ROTN_SEQ) AS MIN_PORT_ROTN_SEQ
                    FROM     VSK_PF_SKD_DTL     PD   
                    GROUP BY PD.VSL_SLAN_CD
                          ,  PD.PF_SVC_TP_CD
                          ,  PD.SKD_DIR_CD         
                   -----------------------------------------------------
                   ) X
         --=============================================================
         ) XX
WHERE    1 = 1
AND      XX.VSL_SLAN_DIR_SEQ   = '2'
AND      (XX.VSL_SLAN_CD,XX.PF_SVC_TP_CD,XX.SKD_DIR_CD)
         IN
         (
         --------------------------------------------
         SELECT             VS.VSL_SLAN_CD
                         ,  VS.PF_SKD_TP_CD
                         ,  VS.SKD_DIR_CD
         FROM               VSK_VSL_SKD   VS
         WHERE              VS.VSL_CD     = @[vsl_cd]
         AND                VS.SKD_VOY_NO = @[turn_skd_voy_no]
         AND                VS.SKD_DIR_CD = @[turn_skd_dir_cd]
         --------------------------------------------         
         )
         

--SELECT    	COUNT(1)	AS KNT
--FROM      	VSK_PF_SKD_DIR        	PR
--WHERE     	1 = 1
--AND       	PR.VSL_SLAN_DIR_SEQ   	= '2'      
--AND			(PR.VSL_SLAN_CD,PR.PF_SVC_TP_CD,PR.VSL_SLAN_DIR_CD)
--			IN
--			(SELECT VS.VSL_SLAN_CD, VS.PF_SKD_TP_CD, VS.SKD_DIR_CD 
--			 FROM	VSK_VSL_SKD 	VS 
--			 WHERE 	VS.VSL_CD 		= [vsl_cd]
--			 AND 	VS.SKD_VOY_NO 	= [turn_skd_voy_no]
--			 AND 	VS.SKD_DIR_CD 	= [turn_skd_dir_cd]
--			 )

--SELECT    	COUNT(1)	AS KNT
--FROM      	VSK_PF_SKD_DIR        	PR
--WHERE     	1 = 1
--AND       	PR.VSL_SLAN_DIR_SEQ   	= '1' 
--AND       	PR.VSL_SLAN_CD			= [vsl_slan_cd]
--AND			PR.PF_SVC_TP_CD			= NVL([pf_skd_tp_cd],[pf_svc_tp_cd])             
--AND       	PR.VSL_SLAN_DIR_CD     	= [skd_dir_cd]			]]></sql>
			<params>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="turn_skd_voy_no" type="12" value="" out="N"/>
				<param name="turn_skd_dir_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
