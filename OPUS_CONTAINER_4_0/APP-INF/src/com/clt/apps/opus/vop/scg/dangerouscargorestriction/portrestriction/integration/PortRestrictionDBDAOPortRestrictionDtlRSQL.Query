<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PortRestrictionDBDAOPortRestrictionDtlRSQL">
			<desc><![CDATA[DESC Enter..]]></desc>
			<sql><![CDATA[
SELECT 
		A.PORT_CD              ,
		A.IMDG_PORT_RSTR_SEQ   ,
		A.PORT_PROHI_TP_CD     ,
		A.IMDG_CMPTN_AUTH_CD   ,
		A.TON_OVR_VOL_QTY      ,
		A.ND_TM_HRS            ,
		A.TML_MAX_QTY          ,
		A.OBRD_MAX_QTY         ,
		A.ONE_TM_HNDL_MAX_QTY  ,
		A.DYS_STO_FLG          ,
		A.STO_DYS              ,
		A.PROHI_DESC           ,
		A.TXT_DESC             ,
		A.CRE_USR_ID           ,
		A.CRE_DT               ,
		A.UPD_USR_ID           ,
		A.UPD_DT               ,
	    CASE WHEN A.PORT_PROHI_TP_CD  = 'L' THEN STO_DYS END  LOAD_STO_DYS ,
        CASE WHEN A.PORT_PROHI_TP_CD  = 'D' THEN STO_DYS END  DIS_STO_DYS ,
        CASE WHEN A.PORT_PROHI_TP_CD  = 'T' THEN STO_DYS END  TS_STO_DYS  ,
        CASE WHEN A.PORT_PROHI_TP_CD  = 'L' THEN DYS_STO_FLG END  LOAD_DYS_STO_FLG , 
        CASE WHEN A.PORT_PROHI_TP_CD  = 'D' THEN DYS_STO_FLG END  DIS_DYS_STO_FLG ,
        CASE WHEN A.PORT_PROHI_TP_CD  = 'T' THEN DYS_STO_FLG END  TS_DYS_STO_FLG ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'L' THEN TXT_DESC END  LOAD_TXT_DESC ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'D' THEN TXT_DESC END  DIS_TXT_DESC,
        CASE WHEN A.PORT_PROHI_TP_CD = 'T' THEN TXT_DESC END TS_TXT_DESC  ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'P' THEN TXT_DESC END  PASS_TXT_DESC ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'L' THEN TML_MAX_QTY END LOAD_TML_MAX_QTY ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'D' THEN TML_MAX_QTY END DIS_TML_MAX_QTY ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'T' THEN TML_MAX_QTY END TS_TML_MAX_QTY ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'P' THEN TML_MAX_QTY END PASS_TML_MAX_QTY ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'L' THEN OBRD_MAX_QTY END  LOAD_OBRD_MAX_QTY ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'D' THEN OBRD_MAX_QTY END  DIS_OBRD_MAX_QTY,
        CASE WHEN A.PORT_PROHI_TP_CD = 'T' THEN OBRD_MAX_QTY END  TS_OBRD_MAX_QTY ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'P' THEN OBRD_MAX_QTY END  PASS_OBRD_MAX_QTY,

        CASE WHEN A.PORT_PROHI_TP_CD = 'L' THEN ONE_TM_HNDL_MAX_QTY END   LOAD_ONE_TM_HNDL_MAX_QTY ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'D' THEN ONE_TM_HNDL_MAX_QTY END   DIS_ONE_TM_HNDL_MAX_QTY,
        CASE WHEN A.PORT_PROHI_TP_CD = 'T' THEN ONE_TM_HNDL_MAX_QTY END   TS_ONE_TM_HNDL_MAX_QTY ,
        CASE WHEN A.PORT_PROHI_TP_CD = 'P' THEN ONE_TM_HNDL_MAX_QTY END   PASS_ONE_TM_HNDL_MAX_QTY ,

CASE WHEN A.PORT_PROHI_TP_CD = 'L' AND B.PROHI_LOD_FLG='N' THEN TON_OVR_VOL_QTY ELSE 0 END  LOAD_TON_OVR_VOL_QTY      ,
CASE WHEN A.PORT_PROHI_TP_CD = 'D' AND B.PROHI_DCHG_FLG='N' THEN TON_OVR_VOL_QTY ELSE 0  END  DIS_TON_OVR_VOL_QTY      ,
CASE WHEN A.PORT_PROHI_TP_CD = 'T' AND B.PROHI_TS_FLG='N' THEN TON_OVR_VOL_QTY ELSE 0  END  TS_TON_OVR_VOL_QTY      ,
CASE WHEN A.PORT_PROHI_TP_CD = 'P' AND B.PROHI_PASS_FLG='N' THEN TON_OVR_VOL_QTY  ELSE 0 END  PASS_TON_OVR_VOL_QTY      ,

CASE WHEN A.PORT_PROHI_TP_CD = 'L' AND B.PROHI_LOD_FLG='N' THEN ND_TM_HRS  ELSE 0 END  LOAD_ND_TM_HRS      ,
CASE WHEN A.PORT_PROHI_TP_CD = 'D' AND B.PROHI_DCHG_FLG='N' THEN ND_TM_HRS  ELSE 0 END  DIS_ND_TM_HRS      ,
CASE WHEN A.PORT_PROHI_TP_CD = 'T' AND B.PROHI_TS_FLG='N'    THEN ND_TM_HRS  ELSE 0 END  TS_ND_TM_HRS      ,
CASE WHEN A.PORT_PROHI_TP_CD = 'P' AND B.PROHI_PASS_FLG='N'  THEN ND_TM_HRS  ELSE 0 END  PASS_ND_TM_HRS    ,

CASE WHEN A.PORT_PROHI_TP_CD = 'L' AND B.PROHI_LOD_FLG='N' THEN IMDG_CMPTN_AUTH_CD END  LOAD_IMDG_CMPTN_AUTH_CD,
CASE WHEN A.PORT_PROHI_TP_CD = 'D' AND B.PROHI_DCHG_FLG='N' THEN IMDG_CMPTN_AUTH_CD END  DIS_IMDG_CMPTN_AUTH_CD ,
CASE WHEN A.PORT_PROHI_TP_CD = 'T' AND B.PROHI_TS_FLG='N' THEN IMDG_CMPTN_AUTH_CD END  TS_IMDG_CMPTN_AUTH_CD  ,
CASE WHEN A.PORT_PROHI_TP_CD = 'P' AND B.PROHI_PASS_FLG='N' THEN IMDG_CMPTN_AUTH_CD END  PASS_IMDG_CMPTN_AUTH_CD
		
FROM    SCG_IMDG_PORT_RSTR_DTL A, SCG_IMDG_PORT_RSTR B    
WHERE   
        A.PORT_CD = B.PORT_CD
  AND   A.IMDG_PORT_RSTR_SEQ = B.IMDG_PORT_RSTR_SEQ
  AND   A.PORT_CD = @[port_cd]
  AND   A.IMDG_PORT_RSTR_SEQ = @[imdg_port_rstr_seq]
#if (${port_prohi_tp_cd} != ''  ) 
  AND   A.PORT_PROHI_TP_CD   = @[port_prohi_tp_cd]
#end
ORDER BY (CASE WHEN A.PORT_PROHI_TP_CD='L' THEN 1 
               WHEN A.PORT_PROHI_TP_CD='D' THEN 2 
               WHEN A.PORT_PROHI_TP_CD='T' THEN 3 
               WHEN A.PORT_PROHI_TP_CD='P' THEN 4 END)			]]></sql>
			<params>
				<param name="port_cd" type="12" value="" out="N"/>
				<param name="imdg_port_rstr_seq" type="12" value="" out="N"/>
				<param name="port_prohi_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
