<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CarrierRestrictionDBDAOPortRotnSeqRSQL">
			<desc><![CDATA[PortRotnSeq 구하기]]></desc>
			<sql><![CDATA[
SELECT B.CLPT_SEQ
  FROM VSK_PF_SKD A
     , VSK_PF_SKD_DTL B
     , VSK_PF_CALL_PORT C
     , MDM_VSL_SVC_LANE_DIR D
WHERE A.SLAN_STND_FLG = 'Y'
  AND A.VSL_SLAN_CD   = B.VSL_SLAN_CD
  AND A.PF_SVC_TP_CD  = B.PF_SVC_TP_CD    
  AND B.VSL_SLAN_CD   = C.VSL_SLAN_CD(+)
  AND B.PF_SVC_TP_CD  = C.PF_SVC_TP_CD(+)
  AND B.SKD_DIR_CD    = C.SKD_DIR_CD(+)
  AND B.PORT_CD       = C.PORT_CD(+)
  AND B.PORT_ROTN_SEQ = C.PORT_ROTN_SEQ(+)
  AND B.VSL_SLAN_CD   = D.VSL_SLAN_CD
  AND B.SKD_DIR_CD    = D.VSL_SLAN_DIR_CD
  AND A.VSL_SLAN_CD   = @[slan_cd]      --:lane_cd
#if (${pol_port_cd} != '')
  AND B.TURN_PORT_IND_CD <> 'F'
  AND B.PORT_CD      = @[pol_port_cd]   --:pol_cd
#else
  AND B.PORT_ROTN_SEQ <> 1
  AND B.PORT_CD      = @[pod_port_cd]   --:pod_cd
#end
GROUP BY B.CLPT_SEQ
ORDER BY B.CLPT_SEQ
			]]></sql>
			<params>
				<param name="slan_cd" type="12" value="" out="N"/>
				<param name="pol_port_cd" type="12" value="" out="N"/>
				<param name="pod_port_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
