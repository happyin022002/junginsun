<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="IMDGCodeMgtDBDAOScgImdgUnNoSegrUSQL">
			<desc><![CDATA[ScgImdgUnNoSegr 수정]]></desc>
			<sql><![CDATA[
--UPDATE SCG_IMDG_UN_NO_SEGR SET 
--	IMDG_SEGR_CD = [imdg_segr_cd]
--,	UPD_USR_ID = [cre_usr_id]
--,	UPD_DT = sysdate
--WHERE	IMDG_UN_NO = [imdg_un_no]
--AND	IMDG_UN_NO_SEQ = [imdg_un_no_seq]
--AND	IMDG_CLSS_CD = [imdg_clss_cd]




MERGE INTO SCG_IMDG_UN_NO_SEGR X
USING      (SELECT     @[imdg_un_no]  		AS IMDG_UN_NO
                    ,  @[imdg_un_no_seq]    AS IMDG_UN_NO_SEQ
                    ,  @[imdg_clss_cd]   	AS IMDG_CLSS_CD
                    ,  @[imdg_segr_cd]     	AS IMDG_SEGR_CD
                    ,  @[cre_usr_id] 		AS UPD_USR_ID
            FROM       DUAL
           ) 	XX
ON         (	X.IMDG_UN_NO       			= XX.IMDG_UN_NO
       AND  	X.IMDG_UN_NO_SEQ   			= XX.IMDG_UN_NO_SEQ
       AND  	X.IMDG_CLSS_CD     			= XX.IMDG_CLSS_CD
           )
WHEN MATCHED THEN
UPDATE       SET               IMDG_SEGR_CD = @[imdg_segr_cd]
                            ,  UPD_USR_ID   = @[cre_usr_id]
                            ,  UPD_DT       = SYSDATE
WHEN NOT MATCHED THEN                       
INSERT       (X.IMDG_UN_NO
             ,X.IMDG_UN_NO_SEQ
             ,X.IMDG_CLSS_CD
             ,X.IMDG_SEGR_CD
             ,X.IMDG_SEGR_MNL_FLG
             ,X.CRE_USR_ID
             ,X.CRE_DT
             ,X.UPD_USR_ID
             ,X.UPD_DT
             )
VALUES       (XX.IMDG_UN_NO
             ,XX.IMDG_UN_NO_SEQ
             ,XX.IMDG_CLSS_CD
             ,XX.IMDG_SEGR_CD
             ,'Y'
             ,@[cre_usr_id]
             ,SYSDATE             
             ,@[cre_usr_id]
             ,SYSDATE  
             )             			]]></sql>
			<params>
				<param name="imdg_un_no" type="12" value="" out="N"/>
				<param name="imdg_un_no_seq" type="2" value="" out="N"/>
				<param name="imdg_clss_cd" type="12" value="" out="N"/>
				<param name="imdg_segr_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
