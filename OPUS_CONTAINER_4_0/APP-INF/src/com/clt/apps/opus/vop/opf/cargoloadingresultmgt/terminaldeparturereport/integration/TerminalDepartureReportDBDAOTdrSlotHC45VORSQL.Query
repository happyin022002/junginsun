<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TerminalDepartureReportDBDAOTdrSlotHC45VORSQL">
			<desc><![CDATA[DESC Enter..]]></desc>
			<sql><![CDATA[
SELECT OPR_CD,
       HC_LD_20,
       HC_BSA_20,
       HC_OR_20,
       HC_ADD_20,
       HC_LD_40,
       HC_BSA_40,
       HC_OR_40,
       HC_ADD_40,
       HC_LD_45,
       HC_BSA_45,
       HC_UR_45,
       HC_OR_45,
       HC_ADD_45
FROM   (SELECT DISTINCT
               OPR_CD,
               HC_LD_20,
               HC_BSA_20,
               HC_OR_20,
               HC_ADD_20,
               HC_LD_40,
               HC_BSA_40,
               HC_OR_40,
               HC_ADD_40,
               HC_LD_45,
               HC_BSA_45,
               HC_UR_45,
               HC_OR_45,
               HC_ADD_45
        FROM   ( SELECT B.OPR_CD,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), NULL), NULL)) HC_LD_20,
                        HC20_QTY HC_BSA_20,
                        HC20_RAT HC_OR_20,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), NULL))) HC_ADD_20,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), NULL), NULL)) HC_LD_40,
                        HC40_QTY HC_BSA_40,
                        HC40_RAT HC_OR_40,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), NULL))) HC_ADD_40,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), NULL), NULL)) HC_LD_45,
                        QTY_45 HC_BSA_45,
                        UN_RAT_45 HC_UR_45,
                        OV_RAT_45 HC_OR_45,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), NULL))) HC_ADD_45
                 FROM   VSK_VSL_PORT_SKD V,
                        TDR_HEADER H,
                        TDR_UTILIZE C,
                        TDR_BSA B 
                 WHERE  V.VSL_CD     = @[vsl_cd]
                 AND    V.SKD_VOY_NO = @[voy_no]
                 AND    V.SKD_DIR_CD = @[dir_cd]
                 AND    V.YD_CD      = @[yd_cd]
                 AND    V.CLPT_IND_SEQ = @[clpt_ind_seq]
                 
                 AND    V.VSL_CD = H.VSL_CD
                 AND    V.SKD_VOY_NO = H.VOY_NO
                 AND    V.SKD_DIR_CD = H.DIR_CD
                 AND    V.VPS_PORT_CD = H.PORT_CD
                 AND    V.CLPT_IND_SEQ = H.CALL_IND
                 AND    H.VSL_CD = B.VSL_CD(+)
                 AND    H.VOY_NO = B.VOY_NO(+)
                 AND    H.DIR_CD = B.DIR_CD(+)
                 AND    H.PORT_CD = B.PORT_CD(+)
                 AND    H.CALL_IND = B.CALL_IND(+)
                 AND    B.VSL_CD = C.VSL_CD(+)
                 AND    B.VOY_NO = C.VOY_NO(+)
                 AND    B.DIR_CD = C.DIR_CD(+)
                 AND    B.PORT_CD = C.PORT_CD(+)
                 AND    B.CALL_IND = C.CALL_IND(+)
                 AND    B.OPR_CD = C.OPR_CD(+)
                 GROUP BY B.OPR_CD, HC20_QTY, HC20_RAT, HC40_QTY, HC40_RAT, QTY_45, UN_RAT_45, OV_RAT_45
                 UNION ALL
                 SELECT C.OPR_CD,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), NULL), NULL)) HC_LD_20,
                        HC20_QTY HC_BSA_20,
                        HC20_RAT HC_OR_20,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, '3', C.QTY, NULL), NULL))) HC_ADD_20,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), NULL), NULL)) HC_LD_40,
                        HC40_QTY HC_BSA_40,
                        HC40_RAT HC_OR_40,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, 'H', C.QTY, NULL), NULL))) HC_ADD_40,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'F', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), 'E', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), NULL), NULL)) HC_LD_45,
                        QTY_45 HC_BSA_45,
                        UN_RAT_45 HC_UR_45,
                        OV_RAT_45 HC_OR_45,
                        SUM(DECODE(C.STATUS, 'SM', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), NULL), 'SI', DECODE(C.CNTR_TYPE, 'A', DECODE(C.CNTR_SIZE, 'L', C.QTY, NULL), NULL))) HC_ADD_45
                 FROM   VSK_VSL_PORT_SKD V,
                        TDR_HEADER H,
                        TDR_UTILIZE C,
                        TDR_BSA B 
                 WHERE  V.VSL_CD     = @[vsl_cd]
                 AND    V.SKD_VOY_NO = @[voy_no]
                 AND    V.SKD_DIR_CD = @[dir_cd]
                 AND    V.YD_CD      = @[yd_cd]
                 AND    V.CLPT_IND_SEQ = @[clpt_ind_seq]
                 AND    V.VSL_CD = H.VSL_CD
                 AND    V.SKD_VOY_NO = H.VOY_NO
                 AND    V.SKD_DIR_CD = H.DIR_CD
                 AND    V.VPS_PORT_CD = H.PORT_CD
                 AND    V.CLPT_IND_SEQ = H.CALL_IND
                 AND    H.VSL_CD = C.VSL_CD(+)
                 AND    H.VOY_NO = C.VOY_NO(+)
                 AND    H.DIR_CD = C.DIR_CD(+)
                 AND    H.PORT_CD = C.PORT_CD(+)
                 AND    H.CALL_IND = C.CALL_IND(+)
                 AND    C.VSL_CD = B.VSL_CD(+)
                 AND    C.VOY_NO = B.VOY_NO(+)
                 AND    C.DIR_CD = B.DIR_CD(+)
                 AND    C.PORT_CD = B.PORT_CD(+)
                 AND    C.CALL_IND = B.CALL_IND(+)
                 AND    C.OPR_CD = B.OPR_CD(+)  
                 GROUP BY C.OPR_CD, HC20_QTY, HC20_RAT, HC40_QTY, HC40_RAT, QTY_45, UN_RAT_45, OV_RAT_45 )
        WHERE OPR_CD IS NOT NULL )
 ORDER BY OPR_CD			]]></sql>
			<params>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="voy_no" type="12" value="" out="N"/>
				<param name="dir_cd" type="12" value="" out="N"/>
				<param name="yd_cd" type="12" value="" out="N"/>
				<param name="clpt_ind_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
