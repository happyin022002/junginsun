<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="VesselScheduleMgtDBDAOAddVskVslPortSkdCSQL">
			<desc><![CDATA[DESC Enter..]]></desc>
			<sql><![CDATA[
INSERT INTO VSK_VSL_PORT_SKD (
			VSL_CD
		,	SKD_VOY_NO
		,	SKD_DIR_CD
		,	VPS_PORT_CD
		,	CLPT_IND_SEQ
		,	CLPT_SEQ
		,	SLAN_CD
		,	PORT_SKD_STS_CD
		,	YD_CD
		,	CALL_YD_IND_SEQ
		,	PF_ETA_DT
		,	PF_ETB_DT
		,	PF_ETD_DT
		,	INIT_ETA_DT
		,	INIT_ETB_DT
		,	INIT_ETD_DT
		,	VPS_ETA_DT
		,	VPS_ETB_DT
		,	VPS_ETD_DT
		,	PORT_SKP_TP_CD
		,	PORT_SKP_RSN_CD
		,	PORT_SKP_RSN_OFFR_RMK
		,	TTL_DLAY_HRS
		,	TS_PORT_CD
		,	USD_FLG
		,	NOON_RPT_INP_FLG
		,	DEP_RPT_INP_FLG
		,	ACT_INP_FLG
		,	PRT_CHK_FLG
		,	CRE_USR_ID
		,	CRE_DT
		,	UPD_USR_ID
		,	UPD_DT
		,	SKD_AUTO_UPD_FLG
		,	VSL_DLAY_RSN_CD
		,	VSL_DLAY_RSN_DESC
		,	VSL_DLAY_RSN_LOC_CD
		,	SHP_CALL_NO
		,	SHP_CALL_NO_UPD_USR_ID
		,	SHP_CALL_NO_UPD_DT
		,	TML_VSL_CD
		,	TML_VOY_NO
		,	FT_DT
		,	PLISM_YD_CD
		,	PLISM_VSL_CD
		,	PLISM_VOY_NO
		,	SKD_CNG_STS_CD
		,	TURN_PORT_FLG
		,	TURN_PORT_IND_CD
		,	TURN_SKD_VOY_NO
		,	TURN_SKD_DIR_CD
		,	TURN_CLPT_IND_SEQ
		,	IB_CGO_QTY
		,	OB_CGO_QTY
		,	VPS_RMK
		,	PHS_IO_RSN_CD
		,	PHS_IO_RMK
		,	SKD_BRTH_NO
		,	INIT_SKD_INP_FLG
		,	OFC_INP_FLG
		,	EDI_SND_KNT
		,	AUTO_SKD_CNG_FLG
		,	LNK_SPD
		,	SEA_BUF_HRS
		,	PORT_BUF_HRS
		,	TZTM_HRS
		,	PORT_WRK_HRS
		,	LNK_DIST
		,	MNVR_OUT_HRS
		,	MNVR_IN_HRS
		
			--::ADD:2015-05-15:by TOP::--
		,	IB_CSSM_VOY_NO
		,	OB_CSSM_VOY_NO
		,	CSSM_VOY_INIT_CRE_FLG
			-----------------------------

			--::ADD:2015-06-26:by TOP::--
		,	VT_ADD_CALL_FLG
			-----------------------------

        , 	VSL_RENM_OLD_VSL_CD
        , 	VSL_RENM_OLD_VSL_ENG_NM
        , 	VSL_RENM_NEW_VSL_CD
        , 	VSL_RENM_NEW_VSL_ENG_NM
        , 	VSLD_WKS
        , 	ADD_CALL_FLG
        , 	SKP_CALL_FLG

		, 	ADD_CALL_XTER_FLG
		, 	PRIV_CALL_FLG
       
	) VALUES ( 
    
			@[vsl_cd]
		,	@[skd_voy_no]
		,	@[skd_dir_cd]
		,	@[vps_port_cd]
		,	@[new_clpt_ind_seq]
		,	@[clpt_seq]
		,	@[slan_cd]
		,	NVL(@[port_skd_sts_cd],'')
		,	@[yd_cd]
		,	@[call_yd_ind_seq]
		,	TO_DATE(TRIM(@[pf_eta_dt]), 'YYYYMMDDHH24MI')
		,	TO_DATE(TRIM(@[pf_etb_dt]), 'YYYYMMDDHH24MI')
		,	TO_DATE(TRIM(@[pf_etd_dt]), 'YYYYMMDDHH24MI')
		,	TO_DATE(@[init_eta_dt], 'YYYYMMDDHH24MI')
		,	TO_DATE(@[init_etb_dt], 'YYYYMMDDHH24MI')
		,	TO_DATE(@[init_etd_dt], 'YYYYMMDDHH24MI')
		,	TO_DATE(@[vps_eta_dt], 'YYYYMMDDHH24MI')
		,	TO_DATE(@[vps_etb_dt], 'YYYYMMDDHH24MI')
		,	TO_DATE(@[vps_etd_dt], 'YYYYMMDDHH24MI')
		,	@[port_skp_tp_cd]
		,	@[port_skp_rsn_cd]
		,	@[port_skp_rsn_offr_rmk]
		,	NVL(@[ttl_dlay_hrs], 0)
		,	@[ts_port_cd]
		,	NVL(@[usd_flg], 'N')
		,	NVL(@[noon_rpt_inp_flg], 'N')
		,	NVL(@[dep_rpt_inp_flg], 'N')
		,	NVL(@[act_inp_flg], 'N')
		,	NVL(@[prt_chk_flg], 'N')
		,	@[cre_usr_id]
		--,	NVL(TO_DATE([cre_dt], 'YYYYMMDDHH24MI'), SYSDATE)
		,   TO_DATE(CASE WHEN LENGTH(@[cre_dt])>=12 THEN SUBSTR(@[cre_dt],1,12) ELSE TO_CHAR(SYSDATE, 'YYYYMMDDHH24MI') END, 'YYYYMMDDHH24MI')
		,	@[upd_usr_id]
		,	SYSDATE
		,	NVL(@[skd_auto_upd_flg], 'N')
		,	@[vsl_dlay_rsn_cd]
		,	@[vsl_dlay_rsn_desc]
		,	@[vsl_dlay_rsn_loc_cd]
		,	@[shp_call_no]
		,	@[shp_call_no_upd_usr_id]
		,	TO_DATE(@[shp_call_no_upd_dt],'YYYYMMDDHH24MI')
		,	@[tml_vsl_cd]
		,	@[tml_voy_no]
		,	TO_DATE(@[ft_dt],'YYYYMMDDHH24MI')
		,	@[plism_yd_cd]
		,	@[plism_vsl_cd]
		,	@[plism_voy_no]
		,	LTRIM(@[skd_cng_sts_cd])
		,	NVL(@[turn_port_flg], 'N')
		,	@[turn_port_ind_cd]
		,	@[turn_skd_voy_no]
		,	@[turn_skd_dir_cd]
		,	@[turn_clpt_ind_seq]
		,	NVL(@[ib_cgo_qty], 0)
		,	NVL(@[ob_cgo_qty], 0)
		,	@[vps_rmk]
		,	@[phs_io_rsn_cd]
		,	@[phs_io_rmk]
		,	@[skd_brth_no]
		,	'Y'
		,	NVL(@[ofc_inp_flg], 'N')
		,	NVL(@[edi_snd_knt], 0)
		,	DECODE(NVL(@[auto_skd_cng_flg], '0'), '1', 'Y', '0', 'N', @[auto_skd_cng_flg])
		,	@[lnk_spd]
		,	@[sea_buf_hrs]
		,	@[port_buf_hrs]
		,	@[tztm_hrs]
		,	@[port_wrk_hrs]
		,	@[lnk_dist]
		,	@[mnvr_out_hrs]
		,	@[mnvr_in_hrs]
    
			--::ADD:2015-05-15:by TOP::--
		,	CASE 	--WHEN [cssm_voy_init_cre_flg] = 'N'															THEN [ib_cssm_voy_no]
					WHEN @[ib_cssm_voy_no]   IS NOT NULL    														THEN @[ib_cssm_voy_no]

					WHEN (SELECT SL.VSL_SVC_TP_CD FROM MDM_VSL_SVC_LANE SL WHERE SL.VSL_SLAN_CD = @[slan_cd]) = 'O' THEN
					--------------------------------------------- <FEEDER SERVICE LANE> ----------------------------------------------

					CASE
					WHEN @[turn_port_ind_cd] = 'N' 			AND @[turn_port_flg] = 'N' 			AND @[turn_skd_voy_no] IS NULL 		AND @[clpt_seq] = '1' THEN ''		-- FIRST ONE AMONG ALL PORTS --
					WHEN @[turn_port_ind_cd] = 'N' 			AND @[turn_port_flg] = 'N' 			AND @[turn_skd_voy_no] IS NULL 							  THEN @[skd_voy_no]||@[skd_dir_cd]
					WHEN @[turn_port_ind_cd] = 'N' 			AND @[turn_port_flg] = 'Y' 			AND @[turn_skd_voy_no] IS NOT NULL	THEN @[turn_skd_voy_no]||@[turn_skd_dir_cd]
					WHEN @[turn_port_ind_cd] = 'Y' 			AND @[turn_skd_voy_no] IS NOT NULL 	AND @[clpt_seq] = '1'				THEN @[turn_skd_voy_no]||@[turn_skd_dir_cd]
					WHEN @[turn_port_ind_cd] = 'Y' 			AND @[turn_skd_voy_no] IS NOT NULL 										THEN @[skd_voy_no]||@[skd_dir_cd] 	-- FIRST PORT AMONG SECOND DIR. PORTS --
					WHEN @[turn_port_ind_cd] = 'F'			AND @[turn_skd_voy_no] IS NOT NULL 										THEN @[skd_voy_no]||@[skd_dir_cd]	-- FIRST VIR. PORT --
					WHEN @[turn_port_ind_cd] IN ('D','V')	AND @[turn_skd_voy_no] IS NOT NULL 	AND @[first_vir_port_flg] = 'Y'		THEN @[skd_voy_no]||@[skd_dir_cd]	-- FIRST VIR. PORT --
					WHEN @[turn_port_ind_cd] IN ('D','V')	AND @[turn_skd_voy_no] IS NOT NULL 										THEN @[turn_skd_voy_no]||@[turn_skd_dir_cd]
					END
					------------------------------------------------------------------------------------------------------------------
			
					ELSE
					--------------------------------------------- <TRUNK SERVICE LANE> -----------------------------------------------
					CASE
					WHEN @[turn_port_ind_cd] = 'N' 			AND @[turn_port_flg] = 'N' 			AND @[turn_skd_voy_no] IS NULL 		AND @[clpt_seq] = '1' THEN ''		-- FIRST ONE AMONG ALL PORTS --
					WHEN @[turn_port_ind_cd] = 'N' 			AND @[turn_port_flg] = 'N' 			AND @[turn_skd_voy_no] IS NULL 							  THEN SUBSTR(@[skd_voy_no],2,4)||@[skd_dir_cd]
					WHEN @[turn_port_ind_cd] = 'N' 			AND @[turn_port_flg] = 'Y' 			AND @[turn_skd_voy_no] IS NOT NULL	THEN SUBSTR(@[turn_skd_voy_no],2,4)||@[turn_skd_dir_cd]
					WHEN @[turn_port_ind_cd] = 'Y' 			AND @[turn_skd_voy_no] IS NOT NULL 	AND @[clpt_seq] = '1'				THEN SUBSTR(@[turn_skd_voy_no],2,4)||@[turn_skd_dir_cd]
					WHEN @[turn_port_ind_cd] = 'Y' 			AND @[turn_skd_voy_no] IS NOT NULL 										THEN SUBSTR(@[skd_voy_no],2,4)||@[skd_dir_cd] 	-- FIRST PORT AMONG SECOND DIR. PORTS --
					WHEN @[turn_port_ind_cd] = 'F'			AND @[turn_skd_voy_no] IS NOT NULL 										THEN SUBSTR(@[skd_voy_no],2,4)||@[skd_dir_cd]	-- FIRST VIR. PORT --
					WHEN @[turn_port_ind_cd] IN ('D','V')	AND @[turn_skd_voy_no] IS NOT NULL 	AND @[first_vir_port_flg] = 'Y'		THEN SUBSTR(@[skd_voy_no],2,4)||@[skd_dir_cd]	-- FIRST VIR. PORT --
					WHEN @[turn_port_ind_cd] IN ('D','V')	AND @[turn_skd_voy_no] IS NOT NULL 										THEN SUBSTR(@[turn_skd_voy_no],2,4)||@[turn_skd_dir_cd]
					END
					------------------------------------------------------------------------------------------------------------------
			END
					
		,	CASE 	WHEN @[turn_port_ind_cd] IN ('D','V','F')														THEN ''
					WHEN @[ob_cssm_voy_no]   IS NOT NULL    														THEN @[ob_cssm_voy_no]
					WHEN (SELECT SL.VSL_SVC_TP_CD FROM MDM_VSL_SVC_LANE SL WHERE SL.VSL_SLAN_CD = @[slan_cd]) = 'O' THEN
					--------------------------------------------- <FEEDER SERVICE LANE> ----------------------------------------------
					CASE 	
					WHEN @[vt_add_call_flg]	 = 'Y'				THEN ''
					WHEN @[turn_port_ind_cd] IN ('Y','N')		THEN @[skd_voy_no]||@[skd_dir_cd]
					WHEN @[turn_port_ind_cd] IN ('D','V','F')	THEN ''
					END
					------------------------------------------------------------------------------------------------------------------
			
					ELSE
					--------------------------------------------- <TRUNK SERVICE LANE> -----------------------------------------------
					CASE 	
					WHEN @[vt_add_call_flg]	 = 'Y'				THEN ''
					WHEN @[turn_port_ind_cd] IN ('Y','N')		THEN SUBSTR(@[skd_voy_no],2,4)||@[skd_dir_cd]
					WHEN @[turn_port_ind_cd] IN ('D','V','F')	THEN ''
					END
					------------------------------------------------------------------------------------------------------------------
			END

		,	DECODE(@[cssm_voy_init_cre_flg],'N','N','Y')
			-----------------------------

			--::ADD:2015-06-26:by TOP::--
		,	@[vt_add_call_flg]
			-----------------------------

        ,   @[vsl_renm_old_vsl_cd]
        ,   @[vsl_renm_old_vsl_eng_nm]
        ,   @[vsl_renm_new_vsl_cd]
        ,   @[vsl_renm_new_vsl_eng_nm]
        ,   @[vsld_wks]
        ,   @[add_call_flg]
        ,   @[skp_call_flg]

        ,   DECODE(@[add_call_xter_flg],'1','Y','N')
		,	@[priv_call_flg]
		)			]]></sql>
			<params>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="vps_port_cd" type="12" value="" out="N"/>
				<param name="new_clpt_ind_seq" type="12" value="" out="N"/>
				<param name="clpt_seq" type="2" value="" out="N"/>
				<param name="slan_cd" type="12" value="" out="N"/>
				<param name="port_skd_sts_cd" type="12" value="" out="N"/>
				<param name="yd_cd" type="12" value="" out="N"/>
				<param name="call_yd_ind_seq" type="12" value="" out="N"/>
				<param name="pf_eta_dt" type="12" value="" out="N"/>
				<param name="pf_etb_dt" type="12" value="" out="N"/>
				<param name="pf_etd_dt" type="12" value="" out="N"/>
				<param name="init_eta_dt" type="12" value="" out="N"/>
				<param name="init_etb_dt" type="12" value="" out="N"/>
				<param name="init_etd_dt" type="12" value="" out="N"/>
				<param name="vps_eta_dt" type="12" value="" out="N"/>
				<param name="vps_etb_dt" type="12" value="" out="N"/>
				<param name="vps_etd_dt" type="12" value="" out="N"/>
				<param name="port_skp_tp_cd" type="12" value="" out="N"/>
				<param name="port_skp_rsn_cd" type="12" value="" out="N"/>
				<param name="port_skp_rsn_offr_rmk" type="12" value="" out="N"/>
				<param name="ttl_dlay_hrs" type="6" value="" out="N"/>
				<param name="ts_port_cd" type="12" value="" out="N"/>
				<param name="usd_flg" type="12" value="" out="N"/>
				<param name="noon_rpt_inp_flg" type="12" value="" out="N"/>
				<param name="dep_rpt_inp_flg" type="12" value="" out="N"/>
				<param name="act_inp_flg" type="12" value="" out="N"/>
				<param name="prt_chk_flg" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="cre_dt" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="skd_auto_upd_flg" type="12" value="" out="N"/>
				<param name="vsl_dlay_rsn_cd" type="12" value="" out="N"/>
				<param name="vsl_dlay_rsn_desc" type="12" value="" out="N"/>
				<param name="vsl_dlay_rsn_loc_cd" type="12" value="" out="N"/>
				<param name="shp_call_no" type="12" value="" out="N"/>
				<param name="shp_call_no_upd_usr_id" type="12" value="" out="N"/>
				<param name="shp_call_no_upd_dt" type="12" value="" out="N"/>
				<param name="tml_vsl_cd" type="12" value="" out="N"/>
				<param name="tml_voy_no" type="12" value="" out="N"/>
				<param name="ft_dt" type="12" value="" out="N"/>
				<param name="plism_yd_cd" type="12" value="" out="N"/>
				<param name="plism_vsl_cd" type="12" value="" out="N"/>
				<param name="plism_voy_no" type="12" value="" out="N"/>
				<param name="skd_cng_sts_cd" type="12" value="" out="N"/>
				<param name="turn_port_flg" type="12" value="" out="N"/>
				<param name="turn_port_ind_cd" type="12" value="" out="N"/>
				<param name="turn_skd_voy_no" type="12" value="" out="N"/>
				<param name="turn_skd_dir_cd" type="12" value="" out="N"/>
				<param name="turn_clpt_ind_seq" type="12" value="" out="N"/>
				<param name="ib_cgo_qty" type="6" value="" out="N"/>
				<param name="ob_cgo_qty" type="6" value="" out="N"/>
				<param name="vps_rmk" type="12" value="" out="N"/>
				<param name="phs_io_rsn_cd" type="12" value="" out="N"/>
				<param name="phs_io_rmk" type="12" value="" out="N"/>
				<param name="skd_brth_no" type="12" value="" out="N"/>
				<param name="ofc_inp_flg" type="12" value="" out="N"/>
				<param name="edi_snd_knt" type="2" value="" out="N"/>
				<param name="auto_skd_cng_flg" type="12" value="" out="N"/>
				<param name="lnk_spd" type="12" value="" out="N"/>
				<param name="sea_buf_hrs" type="12" value="" out="N"/>
				<param name="port_buf_hrs" type="12" value="" out="N"/>
				<param name="tztm_hrs" type="12" value="" out="N"/>
				<param name="port_wrk_hrs" type="12" value="" out="N"/>
				<param name="lnk_dist" type="12" value="" out="N"/>
				<param name="mnvr_out_hrs" type="12" value="" out="N"/>
				<param name="mnvr_in_hrs" type="12" value="" out="N"/>
				<param name="ib_cssm_voy_no" type="12" value="" out="N"/>
				<param name="first_vir_port_flg" type="12" value="" out="N"/>
				<param name="ob_cssm_voy_no" type="12" value="" out="N"/>
				<param name="vt_add_call_flg" type="12" value="" out="N"/>
				<param name="cssm_voy_init_cre_flg" type="12" value="" out="N"/>
				<param name="vsl_renm_old_vsl_cd" type="12" value="" out="N"/>
				<param name="vsl_renm_old_vsl_eng_nm" type="12" value="" out="N"/>
				<param name="vsl_renm_new_vsl_cd" type="12" value="" out="N"/>
				<param name="vsl_renm_new_vsl_eng_nm" type="12" value="" out="N"/>
				<param name="vsld_wks" type="12" value="" out="N"/>
				<param name="add_call_flg" type="12" value="" out="N"/>
				<param name="skp_call_flg" type="12" value="" out="N"/>
				<param name="add_call_xter_flg" type="12" value="" out="N"/>
				<param name="priv_call_flg" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
