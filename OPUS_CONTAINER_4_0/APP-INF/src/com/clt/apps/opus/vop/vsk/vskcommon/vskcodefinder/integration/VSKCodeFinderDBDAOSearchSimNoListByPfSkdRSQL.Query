<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="VSKCodeFinderDBDAOSearchSimNoListByPfSkdRSQL">
			<desc><![CDATA[SearchSimNoListByPfSkd]]></desc>
			<sql><![CDATA[
SELECT T1.SLAN_CD AS VSL_SLAN_CD
       , T2.VSL_SLAN_NM AS VSL_SLAN_NM
       , SUBSTR(T1.SIM_DT,0,4) ||'-' ||SUBSTR(T1.SIM_DT,5,2) ||'-' ||SUBSTR(T1.SIM_DT,7,2) ||'-' || DECODE(Length(T1.SIM_NO),0,'',1,'00'||T1.SIM_NO,2,'0'||T1.SIM_NO,T1.SIM_NO) AS SIMUL_NO
       , TO_CHAR(T1.CRE_DT,'YYYYMMDD HH24:MI') AS CRE_DT
       , T1.SIM_RMK AS PF_SKD_RMK
FROM   COA_SIM_INFO T1, MDM_VSL_SVC_LANE T2
WHERE  T1.SLAN_CD = T2.VSL_SLAN_CD(+)
AND    T1.SLAN_CD LIKE @[vsl_slan_cd]||'%'
AND    T2.VSL_TP_CD = 'C' /*컨테이너선*/
AND    EXISTS (	SELECT 'X'
    			FROM COA_SIM_TML_INFO S
			    WHERE 1 = 1
			    AND  T1.SIM_DT   = S.SIM_DT
			    AND  T1.SIM_NO   = S.SIM_NO
			   )
ORDER BY SIM_DT || SIM_NO DESC			]]></sql>
			<params>
				<param name="vsl_slan_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
