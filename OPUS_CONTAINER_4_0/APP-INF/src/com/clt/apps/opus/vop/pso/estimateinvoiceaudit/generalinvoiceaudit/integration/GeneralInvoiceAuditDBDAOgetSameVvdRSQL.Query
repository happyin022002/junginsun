<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralInvoiceAuditDBDAOgetSameVvdRSQL">
			<desc><![CDATA[getSameVvd
[2015.07.21]Virtual Add Calling 처리. VSK_VSL_PORT_SKD.NVL(VT_ADD_CALL_FLG, 'N') = 'N']]></desc>
			<sql><![CDATA[
SELECT NVL(MAX('''Y'''), '''Y''')
  FROM VSK_VSL_PORT_SKD A
     , VSK_VSL_PORT_SKD B
     , PSO_CHARGE P
     , PSO_CHG_DTL D
 WHERE A.VSL_CD = B.VSL_CD
   AND A.SKD_VOY_NO = B.SKD_VOY_NO
   AND A.SKD_DIR_CD = B.SKD_DIR_CD
   AND A.VPS_PORT_CD = B.VPS_PORT_CD
   AND B.VPS_PORT_CD = SUBSTR(@[yd_cd], 1, 5) --'KRPUS'
   AND A.VPS_ETD_DT < B.VPS_ETD_DT
   AND P.ISS_CTY_CD = D.ISS_CTY_CD
   AND P.SO_SEQ = D.SO_SEQ
   AND A.VSL_CD = D.VSL_CD
   AND A.SKD_VOY_NO = D.SKD_VOY_NO
   AND A.SKD_DIR_CD = D.SKD_DIR_CD
   AND A.YD_CD = P.YD_CD
   AND A.VSL_CD = SUBSTR(@[vvd], 1, 4)
   AND A.SKD_VOY_NO = SUBSTR(@[vvd], 5, 4)
   AND A.SKD_DIR_CD = SUBSTR(@[vvd], 9)
   AND NVL(A.VT_ADD_CALL_FLG, 'N') = 'N' /*2015.07.21 Add*/			]]></sql>
			<params>
				<param name="yd_cd" type="12" value="ACKT0024S" out="N"/>
				<param name="vvd" type="12" value="KRPUS01" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
