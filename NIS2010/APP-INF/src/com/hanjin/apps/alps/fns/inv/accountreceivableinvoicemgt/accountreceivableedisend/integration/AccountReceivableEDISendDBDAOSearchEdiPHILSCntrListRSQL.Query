<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableEDISendDBDAOSearchEdiPHILSCntrListRSQL">
			<desc><![CDATA[PHILS EDI 전송 Cntr List]]></desc>
			<sql><![CDATA[
SELECT IC.CNTR_NO, BC.PCK_TP_CD, BC.PCK_QTY, BC.CNTR_WGT, BC.WGT_UT_CD, BC.CNTR_TPSZ_CD,
       MAX(DECODE(BC.CNTR_SEAL_SEQ, 1, BC.CNTR_SEAL_NO, '')) SEAL_NO1,
       MAX(DECODE(BC.CNTR_SEAL_SEQ, 2, BC.CNTR_SEAL_NO, '')) SEAL_NO2,
       MAX(DECODE(BC.CNTR_SEAL_SEQ, 3, BC.CNTR_SEAL_NO, '')) SEAL_NO3
       
FROM   (
            SELECT BC.CNTR_NO, BC.PCK_TP_CD, BC.PCK_QTY, BC.CNTR_WGT, BC.WGT_UT_CD, BC.CNTR_TPSZ_CD, 
                   BCS.CNTR_SEAL_SEQ, BCS.CNTR_SEAL_NO
            FROM   BKG_CONTAINER BC,
                   BKG_CNTR_SEAL_NO BCS
            WHERE  BC.BKG_NO = BCS.BKG_NO
            AND    BC.CNTR_NO = BCS.CNTR_NO
            AND    BC.BKG_NO = @[bl_src_no] 
        ) BC,
        (
            SELECT CNTR.CNTR_NO,
                   CNTR.CNTR_TPSZ_CD
            FROM   INV_AR_CNTR CNTR,
                  (SELECT BL_SRC_NO, MAX(AR_IF_NO) AR_IF_NO
                   FROM  INV_AR_MN
                   WHERE AR_OFC_CD = @[ofc_cd]
                   AND   ACT_CUST_CNT_CD = @[act_cust_cnt_cd]
                   AND   ACT_CUST_SEQ = @[act_cust_seq]
                   AND   INV_DELT_DIV_CD <> 'Y'
                   AND   REV_TP_CD <> 'M'
                   AND   BL_SRC_NO = @[bl_src_no]
                   GROUP BY BL_SRC_NO
                  ) MN
                WHERE MN.AR_IF_NO = CNTR.AR_IF_NO
        ) IC
WHERE    BC.CNTR_NO(+) = IC.CNTR_NO 
GROUP BY IC.CNTR_NO, BC.PCK_TP_CD, BC.PCK_QTY, BC.CNTR_WGT, BC.WGT_UT_CD, BC.CNTR_TPSZ_CD
ORDER BY IC.CNTR_NO			]]></sql>
			<params>
				<param name="bl_src_no" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="act_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="act_cust_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
