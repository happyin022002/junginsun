<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ARInvoiceCorrectionDBDAOSearchMarkingReverseChargeByIfNoRSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
SELECT M.AR_IF_NO
      ,ACT_CUST_CNT_CD||LPAD(ACT_CUST_SEQ,6,0) ACT_CUST_CD
      ,REV_TP_CD||REV_SRC_CD REV_TP_SRC
      ,BL_INV_IF_DT
      ,BL_INV_CFM_DT
      ,INV_NO
      ,C.CURR_CD
      ,SUM(C.CHG_AMT) CHG_AMT
      ,C.INV_XCH_RT
      ,ROUND(SUM(C.CHG_AMT)*C.INV_XCH_RT,2) LOCL_AMT
      ,NVL(M.RVS_CHG_FLG,'N') RVS_CHG_FLG
	  ,M.AR_IF_NO MERGE_CHK
  FROM INV_AR_MN M
      ,INV_AR_CHG C
 WHERE M.AR_IF_NO = C.AR_IF_NO
   AND M.BL_SRC_NO = @[bl_src_no]
   AND M.AR_OFC_CD = @[ar_ofc_cd]
   AND NVL(M.INV_CLR_FLG,'N') = 'N'
 GROUP BY M.AR_IF_NO
      ,ACT_CUST_CNT_CD||LPAD(ACT_CUST_SEQ,6,0)
      ,REV_TP_CD
      ,REV_SRC_CD
      ,BL_INV_IF_DT
      ,BL_INV_CFM_DT
      ,INV_NO
      ,C.CURR_CD
      ,C.INV_XCH_RT
      ,LOCL_CURR_CD
      ,NVL(M.RVS_CHG_FLG,'N')
      ,M.CRE_DT
 ORDER BY DECODE(REV_TP_CD,'M',1,0), AR_IF_NO, DECODE(CURR_CD, 'USD', 1, LOCL_CURR_CD, 2, 3), CURR_CD, M.CRE_DT			]]></sql>
			<params>
				<param name="bl_src_no" type="12" value="" out="N"/>
				<param name="ar_ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
