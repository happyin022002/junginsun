<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TOTFindCodeDBDAOPortVORSQL">
			<desc><![CDATA[port code 조회]]></desc>
			<sql><![CDATA[
SELECT VPS_PORT_CD code
     , VPS_PORT_CD name
 FROM(
		SELECT MIN(NVL(P.PORT_ROTN_SEQ,A.CLPT_SEQ)), A.SKD_DIR_CD, A.VPS_PORT_CD
		  FROM VSK_VSL_PORT_SKD A, VSK_PF_SKD_DTL P
		 WHERE A.SLAN_CD = @[slan_cd]
		   AND A.SKD_DIR_CD = @[skd_dir_cd]
		   AND A.SLAN_CD = P.VSL_SLAN_CD(+)
		   AND A.SKD_DIR_CD = P.SKD_DIR_CD(+)
		   AND A.VPS_PORT_CD  = P.PORT_CD(+)
		   AND A.VPS_ETD_DT BETWEEN ADD_MONTHS(TO_DATE(@[vps_etd_dt],'YYYY-MM'), - 3) AND LAST_DAY(TO_DATE(@[vps_etd_dt],'YYYY-MM'))+0.99999
		GROUP BY A.SKD_DIR_CD,A.VPS_PORT_CD
		ORDER BY A.SKD_DIR_CD, MIN(NVL(P.PORT_ROTN_SEQ,99)),  A.VPS_PORT_CD
     )			]]></sql>
			<params>
				<param name="slan_cd" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="vps_etd_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
