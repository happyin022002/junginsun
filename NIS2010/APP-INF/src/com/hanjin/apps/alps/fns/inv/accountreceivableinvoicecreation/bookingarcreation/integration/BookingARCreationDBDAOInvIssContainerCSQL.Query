<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingARCreationDBDAOInvIssContainerCSQL">
			<desc><![CDATA[InvIssContainer]]></desc>
			<sql><![CDATA[
INSERT INTO INV_AR_CNTR 
(AR_IF_NO, CNTR_SEQ, CNTR_NO, CNTR_TPSZ_CD, CRE_USR_ID, CRE_DT, UPD_USR_ID, UPD_DT)                  
SELECT B.AR_IF_NO
      ,ROW_NUMBER() OVER (PARTITION BY B.AR_IF_NO ORDER BY B.AR_IF_NO,C.CNTR_NO)
      ,C.CNTR_NO,C.CNTR_TPSZ_CD,@[user_id],SYSDATE,@[user_id],SYSDATE
  FROM INV_AR_MN B
      ,BKG_CONTAINER C
 WHERE B.BKG_NO = C.BKG_NO 
   AND B.AR_IF_NO IN (SELECT V1.AR_IF_NO 
                        FROM INV_AR_ISS_FTR V1
                       WHERE INV_ISS_WRK_NO = @[wrk_no]
                       GROUP BY V1.ACT_CUST_CNT_CD
                           , V1.ACT_CUST_SEQ
                           , V1.VSL_CD
                           , V1.SKD_VOY_NO
                           , V1.SKD_DIR_CD
                           , V1.IO_BND_CD
                           , V1.PORT_CD
                           , V1.SVC_SCP_CD
                      #if (${inv_mlt_bl_iss_flg} != 'Y') 
                           , V1.BL_SRC_NO
                      #end
                           , V1.INV_ISS_TP_CD
                           , V1.INV_SPLIT_CD
                           , V1.USD_XCH_RT
                           , V1.AR_OFC_CD
                           , V1.AR_IF_NO 
                        )			]]></sql>
			<params>
				<param name="user_id" type="12" value="" out="N"/>
				<param name="wrk_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
