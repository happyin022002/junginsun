<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ARInvoiceInquiryDBDAOARInvoiceErpErrorListVORSQL">
			<desc><![CDATA[ERP IF Error Inquiry]]></desc>
			<sql><![CDATA[
SELECT C.AR_HD_QTR_OFC_CD
     , A.AR_OFC_CD
     , B.INV_ERP_IF_STS_CD
     , B.AR_IF_NO
     , B.AR_IF_SER_NO
     , A.BL_SRC_NO
     , A.INV_NO
     , DECODE(A.REV_TP_CD, 'B', 'B/L', 'C', 'C/A', 'M', 'MRI') AS REV_TP
     , A.REV_TP_CD||A.REV_SRC_CD  AS REV_TP_SRC
     , B.TJ_SRC_NM
     , B.CURR_CD
     , B.INV_AMT
     , TO_CHAR(TO_DATE(A.BL_INV_IF_DT, 'YYYYMMDD'), 'YYYY-MM-DD') AS IF_DT
     , TO_CHAR(TO_DATE(A.BL_INV_CFM_DT, 'YYYYMMDD'), 'YYYY-MM-DD') AS GOOD_DT
     , TO_CHAR(TO_DATE(B.ERP_IF_GL_DT, 'YYYYMMDD'), 'YYYY-MM-DD') AS GL_DT
     , A.CRE_DT
     , B.ERR_DESC
FROM INV_AR_MN A, 
     INV_AR_AMT B, 
     MDM_ORGANIZATION C
WHERE A.AR_IF_NO = B.AR_IF_NO
AND   A.AR_OFC_CD = C.OFC_CD
AND   A.BL_INV_CFM_DT IS NOT NULL
AND   NVL(A.INV_DELT_DIV_CD,'N') <> 'Y' 
#if (${date_option} == 'I') 
    AND A.BL_INV_IF_DT BETWEEN REPLACE(@[from_date],'-','') AND REPLACE(@[to_date],'-','')
#elseif (${date_option} == 'C') 
    AND A.BL_INV_CFM_DT BETWEEN REPLACE(@[from_date],'-','') AND REPLACE(@[to_date],'-','')
#elseif (${date_option} == 'G') 
    AND B.ERP_IF_GL_DT BETWEEN REPLACE(@[from_date],'-','') AND REPLACE(@[to_date],'-','')
#end
#if ((${if_flag} != 'A' && ${if_flag} != '') && (${if_no} == '' && ${bl_no} == '' && ${inv_no} == ''))
    AND DECODE(NVL(B.INV_ERP_IF_STS_CD,'N'),'U','E',NVL(B.INV_ERP_IF_STS_CD,'N')) = @[if_flag]
#end
#if (${if_no} == '' && ${bl_no} == '' && ${inv_no} == '')
    AND NVL(B.INV_ERP_IF_STS_CD,'N') <> 'Y'
#end
#if (${ar_hd_qtr_ofc_cd} != 'ALL' && ${ar_hd_qtr_ofc_cd} != '')
    AND C.AR_HD_QTR_OFC_CD = @[ar_hd_qtr_ofc_cd]
#end
#if (${ar_ofc_cd} != 'ALL' && ${ar_ofc_cd} != '')
    AND A.AR_OFC_CD = @[ar_ofc_cd]
#end
#if (${if_no} != '')
    AND A.AR_IF_NO = @[if_no]
#end
#if (${bl_no} != '')
    AND A.BL_SRC_NO = @[bl_no]
#end
#if (${inv_no} != '')
    AND A.INV_NO = @[inv_no]
#end
#if (${rev_tp_cd} != 'A' && ${rev_tp_cd} != '')
    AND A.REV_TP_CD = @[rev_tp_cd]
#end
#if (${rev_src_cd} != 'A' && ${rev_src_cd} != '')
    AND A.REV_SRC_CD IN (@[rev_src_cd])
#end
ORDER BY C.AR_HD_QTR_OFC_CD, A.AR_OFC_CD, B.INV_ERP_IF_STS_CD, B.AR_IF_NO, B.AR_IF_SER_NO			]]></sql>
			<params>
				<param name="from_date" type="12" value="" out="N"/>
				<param name="to_date" type="12" value="" out="N"/>
				<param name="if_flag" type="12" value="" out="N"/>
				<param name="ar_hd_qtr_ofc_cd" type="12" value="" out="N"/>
				<param name="ar_ofc_cd" type="12" value="" out="N"/>
				<param name="if_no" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="inv_no" type="12" value="" out="N"/>
				<param name="rev_tp_cd" type="12" value="" out="N"/>
				<param name="rev_src_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
