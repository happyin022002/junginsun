<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CarrierSettlementProcessDBDAOGetOusTdrSlotPriceRSQL">
			<desc><![CDATA[OUS TDR의 경우 VVD, From Port, To Port변경시 Slot Price정보를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT MAX(CD.UC_AMT) AS BSA_SLT_PRC
  FROM BSA_OVR_USD_MST CM,
       BSA_OVR_USD_SLT_PRC CD
 WHERE CM.OVR_USD_SLT_PRC_SEQ = CD.OVR_USD_SLT_PRC_SEQ
   AND CD.UC_AMT    <> 0
   AND CM.DELT_FLG   = 'N' 
   AND CD.CRR_CD     = @[jo_crr_cd]
   AND CM.TRD_CD     = @[trd_cd]
   AND CM.RLANE_CD   = @[rlane_cd]
   AND CM.DIR_CD     = @[skd_dir_cd]
   AND SUBSTR(@[uc_bss_port_etd_dt],1,8) BETWEEN CM.BSA_SLT_PRC_FM_DT AND CM.BSA_SLT_PRC_TO_DT
   AND CM.FM_PORT_CD = @[fm_port_cd]
   AND CM.TO_PORT_CD = @[to_port_cd]
--2010.03.02 박효숙 차장...TDR의 OverUsedSlotPrice는 R/E상관없이 MAX값을 가져와라
--if(re_divr_cd =='R')
--   AND CD.BSA_OP_JB_CD IN ('001','002','004')
--elseif(re_divr_cd =='E')
--   AND CD.BSA_OP_JB_CD IN ('000','003','005')
--end			]]></sql>
			<params>
				<param name="jo_crr_cd" type="12" value="KKL" out="N"/>
				<param name="trd_cd" type="12" value="TPS" out="N"/>
				<param name="rlane_cd" type="12" value="SJXTP" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="uc_bss_port_etd_dt" type="12" value="" out="N"/>
				<param name="fm_port_cd" type="12" value="USLGB" out="N"/>
				<param name="to_port_cd" type="12" value="VNVUN" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
