<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralARInvoiceCreationDBDAOsearchCutOffLaneOfficebyOldRSQL">
			<desc><![CDATA[searchCutOffLaneOfficebyOld]]></desc>
			<sql><![CDATA[
SELECT A.NEW_AR_OFC_CD ar_ofc_cd
  FROM INV_CUT_OFF_LANE A, MDM_ORGANIZATION B
 WHERE A.OLD_AR_OFC_CD = @[ar_ofc_cd]
   AND (A.IO_BND_CD='A' OR A.IO_BND_CD = @[io_bnd_cd])
   AND (A.SLAN_CD = 'ALL' OR A.SLAN_CD = (SELECT VSL_SLAN_CD
                                            FROM VSK_VSL_SKD 
                                           WHERE VSL_CD = SUBSTR(@[vvd], 1, 4)
                                             AND SKD_VOY_NO = SUBSTR(@[vvd], 5, 4)
                                             AND SKD_DIR_CD = SUBSTR(@[vvd], 9, 1)))
   AND (A.PORT_CD = 'ALL' OR A.PORT_CD = DECODE(@[io_bnd_cd], 'I', @[pod_cd], 'O', @[pol_cd]))
   AND A.NEW_AR_OFC_CD = B.OFC_CD 
   AND A.APLY_DT <= DECODE(A.cut_off_aply_dt_tp_cd,'S',@[sail_arr_dt],'I', TO_CHAR(SYSDATE,'YYYYMMDD'))
   AND NVL(B.DELT_FLG,'N') ='N'
UNION ALL
SELECT A.OLD_AR_OFC_CD ar_ofc_cd
  FROM INV_CUT_OFF_LANE A, MDM_ORGANIZATION B
 WHERE A.OLD_AR_OFC_CD = @[ar_ofc_cd]
   AND (A.IO_BND_CD='A' OR A.IO_BND_CD = @[io_bnd_cd])
   AND (A.SLAN_CD = 'ALL' OR A.SLAN_CD = (SELECT VSL_SLAN_CD
                                            FROM VSK_VSL_SKD 
                                           WHERE VSL_CD = SUBSTR(@[vvd], 1, 4)
                                             AND SKD_VOY_NO = SUBSTR(@[vvd], 5, 4)
                                             AND SKD_DIR_CD = SUBSTR(@[vvd], 9, 1)))
   AND (A.PORT_CD = 'ALL' OR A.PORT_CD = DECODE(@[io_bnd_cd], 'I', @[pod_cd], 'O', @[pol_cd]))
   AND A.OLD_AR_OFC_CD = B.OFC_CD 
   AND A.APLY_DT > DECODE(A.cut_off_aply_dt_tp_cd,'S',@[sail_arr_dt],'I', TO_CHAR(SYSDATE,'YYYYMMDD'))
   AND NVL(B.DELT_FLG,'N') ='N'
			]]></sql>
			<params>
				<param name="ar_ofc_cd" type="12" value="" out="N"/>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
				<param name="sail_arr_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
