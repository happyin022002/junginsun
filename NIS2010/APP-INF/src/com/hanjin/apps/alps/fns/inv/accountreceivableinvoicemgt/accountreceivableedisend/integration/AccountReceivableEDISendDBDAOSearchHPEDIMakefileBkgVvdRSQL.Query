<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AccountReceivableEDISendDBDAOSearchHPEDIMakefileBkgVvdRSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
SELECT  BV.VSL_CD||BV.SKD_VOY_NO||BV.SKD_DIR_CD AS VSL_BVVD1
        ,MV.LLOYD_NO AS VSL_LLOYDCODE
        ,MV.VSL_ENG_NM AS VSL_FULLNAME
        ,BC.CUST_CTY_NM AS VSL_ORIGIN
        ,BB.POR_CD AS VSL_POR
        ,BV.POL_CD AS VSL_POL
        ,(SELECT M1.LOC_NM FROM MDM_LOCATION M1 WHERE M1.LOC_CD = BV.POL_CD) AS VSL_POL_FULLNAME
        ,BV.POD_CD AS VSL_POD
        ,BB.DEL_CD AS VSL_DEL
		,BB.PRE_RLY_PORT_CD AS TS_PRE
        ,BB.PST_RLY_PORT_CD AS TS_POST
        ,(SELECT M2.LOC_NM FROM MDM_LOCATION M2 WHERE M2.LOC_CD = BV.POD_CD) AS VSL_POD_FULLNAME
       ,(SELECT TO_CHAR(POL.VPS_ETD_DT, 'yyyymmddhh24mi')	
          FROM VSK_VSL_PORT_SKD POL
          WHERE BV.VSL_CD = POL.VSL_CD
          AND BV.SKD_VOY_NO = POL.SKD_VOY_NO
          AND BV.SKD_DIR_CD = POL.SKD_DIR_CD
          AND BV.POL_CD = POL.VPS_PORT_CD
          AND POL.CLPT_IND_SEQ = 1 ) AS VSL_POLETD
       ,(SELECT TO_CHAR(POD.VPS_ETD_DT, 'yyyymmddhh24mi')
          FROM VSK_VSL_PORT_SKD POD
          WHERE BV.VSL_CD = POD.VSL_CD
          AND BV.SKD_VOY_NO = POD.SKD_VOY_NO
          AND BV.SKD_DIR_CD = POD.SKD_DIR_CD
          AND BV.POL_CD = POD.VPS_PORT_CD
          AND POD.CLPT_IND_SEQ = 1 ) AS VSL_PODETD
FROM  BKG_VVD BV
     ,MDM_VSL_CNTR MV
     ,BKG_BOOKING BB
	 ,BKG_CUSTOMER BC
WHERE BV.BKG_NO = @[bkg_no]   --'AEVZ9225006'
AND BV.VSL_PRE_PST_CD ='T'
AND BV.VSL_CD = MV.VSL_CD
AND BV.BKG_NO = BB.BKG_NO
AND BV.BKG_NO = BC.BKG_NO(+)
AND BC.BKG_CUST_TP_CD(+) = 'S'			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
