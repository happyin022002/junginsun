<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ARInvoiceCustomerMgtDBDAOsearchAutoInvCustomerListRSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
SELECT  A.AR_OFC_CD AS OFC_CD,
        DECODE(A.IO_BND_CD, 'I', 'I/B', 'O/B') IO_BND_CD,
        A.CUST,
        A.CUST_NM,
        DECODE(A.HJS_CUST_SVC_PIC_TP_CD, 'G','Group E-mail','Indi. Ref')HJS_CUST_SVC_PIC_TP_CD,
        A.AUTO_INV_HJS_REF_NO,
        DECODE(A.AUTO_INV_CUST_REF_NO_FLG, 'Y', 'YES', 'NO') AUTO_INV_CUST_REF_NO_FLG,
        DECODE(A.AUTO_INV_LOCL_CHG_FLG, 'Y', 'YES', 'NO') AUTO_INV_LOCL_CHG_FLG,
        A.AUTO_INV_EML,
        TO_CHAR(A.UPD_DT, 'YYYY-MM-DD HH24:MI:SS') AS UPD_DT,
        A.UPD_USR_ID 
FROM   (
        SELECT MR.OFC_CD AR_OFC_CD,
               MR.IO_BND_CD IO_BND_CD,
               MR.CUST_CNT_CD||LPAD(MR.CUST_SEQ,6,'0') AS CUST,
               MC.CUST_LGL_ENG_NM AS CUST_NM,
               MR.HJS_CUST_SVC_PIC_TP_CD,
               MR.HJS_REF_NO AS AUTO_INV_HJS_REF_NO,
               MR.CUST_REF_NO_FLG AS AUTO_INV_CUST_REF_NO_FLG,
               MR.LOCL_CHG_FLG AS AUTO_INV_LOCL_CHG_FLG,
               MR.AUTO_INV_EML AS AUTO_INV_EML,
               MR.UPD_DT,
               MR.UPD_USR_ID
        FROM   MDM_CUSTOMER MC,
               MDM_CUST_REP  MR,
               MDM_ORGANIZATION MO
        WHERE  MC.CUST_CNT_CD = MR.CUST_CNT_CD
        AND    MC.CUST_SEQ = MR.CUST_SEQ
        AND    MC.OFC_CD = MO.OFC_CD
        AND    MC.DELT_FLG = 'N'
        AND    MR.DELT_FLG ='N'
        AND    MR.AUTO_INV_FLG = 'Y' 
		#if (${act_cust_cnt_cd} != '') 
		AND    MR.CUST_CNT_CD = @[act_cust_cnt_cd]
		#end
		#if (${act_cust_seq} != '') 
        AND    MR.CUST_SEQ = @[act_cust_seq]
		#end
		#if (${ar_ofc_cd} == 'ALL') 
		AND    MR.OFC_CD IN (SELECT DISTINCT AR_OFC_CD 
							 	FROM   MDM_ORGANIZATION
							 	WHERE  AR_HD_QTR_OFC_CD = (SELECT AR_HD_QTR_OFC_CD 
							  		                       FROM   MDM_ORGANIZATION
							                            	WHERE  OFC_CD = @[user_ofc_cd])
							 	AND    DELT_FLG = 'N'
								AND AR_OFC_CD IS NOT NULL )
		#else
        AND    MR.OFC_CD = @[ar_ofc_cd]
		#end
       ) A
WHERE  1=1
#if (${io_bnd_cd} != 'A')
AND    A.IO_BND_CD = @[io_bnd_cd]
#end
ORDER BY A.AR_OFC_CD, A.IO_BND_CD, A.CUST			]]></sql>
			<params>
				<param name="act_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="act_cust_seq" type="12" value="" out="N"/>
				<param name="user_ofc_cd" type="12" value="" out="N"/>
				<param name="ar_ofc_cd" type="12" value="" out="N"/>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
