<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ARInvoiceCustomerMgtDBDAOsearchAgentByVesselListVORSQL">
			<desc><![CDATA[FNS_INF_0080 by vessel]]></desc>
			<sql><![CDATA[
SELECT A.AR_OFC_CD,
	   A.AGN_CD,
	   A.VSL_CD,
	   B.VSL_ENG_NM,
	   DECODE(A.CUST_CNT_CD,'','',DECODE(A.CUST_SEQ,'','',A.CUST_CNT_CD || '-' || LPAD(A.CUST_SEQ,6,0))) CUST_CD,
	   A.CUST_CNT_CD CUST_CNT_CD,
	   LPAD(A.CUST_SEQ,6,0) CUST_SEQ,
	   DECODE(A.VNDR_CNT_CD,'','',DECODE(A.VNDR_SEQ,'','',A.VNDR_CNT_CD || '-' || LPAD(A.VNDR_SEQ,6,0))) VNDR_CD,
	   A.VNDR_CNT_CD VNDR_CNT_CD,
	   LPAD(A.VNDR_SEQ,6,0) VNDR_SEQ,
	   TO_CHAR(A.UPD_DT,'YYYY-MM-DD HH24:MI:SS') UPD_DT,
	   A.AGN_CD AGN_CD1
  FROM INV_VSL_AGN_CUST_CD A, MDM_VSL_CNTR B
 WHERE A.VSL_CD = B.VSL_CD
#if (${ar_ofc_cd} != 'ALL') 
   AND A.AR_OFC_CD = @[ar_ofc_cd]
#else
   AND A.AR_OFC_CD IN (SELECT A.AR_OFC_CD
                         FROM MDM_ORGANIZATION A,			  
                              (SELECT SUBSTR(LOC_CD,1,2) CNT_CD, AR_HD_QTR_OFC_CD 
                                 FROM MDM_ORGANIZATION 
                                WHERE OFC_CD = @[ofc_cd]) B
                        WHERE A.AR_HD_QTR_OFC_CD = B.AR_HD_QTR_OFC_CD 
                          AND SUBSTR(A.LOC_CD,1,2) = B.CNT_CD)
#end			]]></sql>
			<params>
				<param name="ar_ofc_cd" type="12" value="NKGBB" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
