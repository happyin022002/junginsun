<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="JOOFindCodeAndCheckDBDAOSearchCarrierListByCsrRSQL">
			<desc><![CDATA[20160712 HongSeongPil 최초생성]]></desc>
			<sql><![CDATA[
SELECT DISTINCT JO_CRR_CD CODE
     , JO_CRR_CD NAME
  FROM JOO_STL_CMB A
WHERE EXISTS (
       SELECT 'X'
         FROM JOO_CSR B
        WHERE A.SLP_TP_CD = B.SLP_TP_CD
          AND A.SLP_FUNC_CD = B.SLP_FUNC_CD
          AND A.SLP_OFC_CD = B.SLP_OFC_CD
          AND A.SLP_ISS_DT = B.SLP_ISS_DT
          AND A.SLP_SER_NO = B.SLP_SER_NO
          AND B.CXL_FLG     = 'N'
#if (${csr_no} != '')
          AND B.SLP_TP_CD   = SUBSTR(@[csr_no], 1,2)
          AND B.SLP_FUNC_CD = SUBSTR(@[csr_no], 3,1)
          AND B.SLP_OFC_CD  = DECODE(LENGTH(@[csr_no]),20,SUBSTR(@[csr_no],4,6),SUBSTR(@[csr_no],4,5))
          AND B.SLP_ISS_DT  = TO_CHAR(TO_DATE(DECODE(LENGTH(@[csr_no]),20,SUBSTR(@[csr_no],10,6),SUBSTR(@[csr_no],9,6)),'RRMMDD'),'YYYYMMDD')
          AND B.SLP_SER_NO  = DECODE(LENGTH(@[csr_no]),20,SUBSTR(@[csr_no],16),SUBSTR(@[csr_no],15))
#else
	#if (${gubun} == '0')
          AND B.SLP_ISS_DT  >= REPLACE(@[fr_dt],'-','')
          AND B.SLP_ISS_DT  <= REPLACE(@[to_dt],'-','')
	#elseif(${gubun} == '1')
          AND B.EFF_DT  >= TO_DATE(REPLACE(@[fr_dt],'-',''),'YYYYMMDD')
          AND B.EFF_DT  <= TO_DATE(REPLACE(@[to_dt],'-',''),'YYYYMMDD')
	#end
	#if (${slp_ofc_cd} != '')
          AND (B.SLP_OFC_CD = @[slp_ofc_cd] OR B.SLP_ISS_OFC_CD  = @[slp_ofc_cd])
	#end
#end
)
ORDER BY A.JO_CRR_CD			]]></sql>
			<params>
				<param name="csr_no" type="12" value="" out="N"/>
				<param name="fr_dt" type="12" value="" out="N"/>
				<param name="to_dt" type="12" value="" out="N"/>
				<param name="slp_ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
