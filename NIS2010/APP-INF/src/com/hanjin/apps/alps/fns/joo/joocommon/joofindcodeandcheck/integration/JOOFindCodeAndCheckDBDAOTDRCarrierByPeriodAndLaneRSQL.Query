<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="JOOFindCodeAndCheckDBDAOTDRCarrierByPeriodAndLaneRSQL">
			<desc><![CDATA[2012.05.11 김창헌 [CHM-201217413-01]
                   [ALPS JOO] TDR Inquiry by VVD 및 RDR Inquiry by Lane
                   - Sum 기능 추가, 정렬순서 및 표시형식 변경]]></desc>
			<sql><![CDATA[
SELECT DISTINCT P.OPR_CD CODE
FROM VSK_VSL_PORT_SKD S, BAY_PLAN P
WHERE 1 = 1
AND ( (S.VPS_ETA_DT BETWEEN TO_DATE (REPLACE (@[pre_fr], '-', ''), 'YYYYMMDD')
                        AND TO_DATE (REPLACE (@[pre_to], '-', ''), 'YYYYMMDD') + 0.99999) OR S.VPS_ETA_DT IS NULL )
AND S.SLAN_CD LIKE @[rlane_cd] || '%'
AND S.VSL_CD = P.VSL_CD
AND S.SKD_VOY_NO = P.VOY_NO
AND S.SKD_DIR_CD = P.DIR_CD
AND S.VPS_PORT_CD = P.PORT_CD
#if (${rlane_cd} == 'QIS')
UNION ALL
SELECT
 'DYP' AS CODE
FROM DUAL
#end
ORDER BY 1			]]></sql>
			<params>
				<param name="pre_fr" type="12" value="" out="N"/>
				<param name="pre_to" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
