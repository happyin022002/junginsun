<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GEMPlanningPerformanceDBDAOSearchSlpCtrRSQL">
			<desc><![CDATA[품의서의 Office Code 와 Center Code 중 실제 실적 반영 조직을 조회한다.]]></desc>
			<sql><![CDATA[
SELECT DECODE(COUNT(*), 0, @[csr_ctr_cd], @[slp_ctr_cd]) code
FROM   GEM_OFC_EXPT A ,
(
   SELECT DECODE(Y.GEN_EXPN_CD, '', X.GEN_EXPN_CD, Y.GEN_EXPN_CD) EXPN_CD
     FROM GEM_ACCT_MTX X, GEM_ACCT_EXPT Y
    WHERE X.ACCT_CD     = @[acct_cd]
      AND X.DELT_FLG = 'N'
      AND Y.OFC_CD(+)   = @[csr_ofc_cd]
      AND X.ACCT_CD     = Y.ACCT_CD(+)
      AND X.GEN_EXPN_CD = Y.SPRT_GEN_EXPN_CD(+)
      AND Y.DELT_FLG(+) = 'N'
      AND Y.SPRT_YRMON(+) <= SUBSTR(@[gl_eff_dt],1,6)
) B
WHERE A.SND_OFC_CD = (
               SELECT OFC_CD
                 FROM GEM_OFFICE
                WHERE CTR_CD  = @[csr_ctr_cd]
                  AND DELT_FLG   = 'N'
              )
AND A.RCV_OFC_CD IN (@[csr_ofc_cd], 'ALL')
AND A.GEN_EXPN_CD IN (B.EXPN_CD,'ALL')
AND A.DELT_FLG = 'N'			]]></sql>
			<params>
				<param name="csr_ctr_cd" type="12" value="" out="N"/>
				<param name="slp_ctr_cd" type="12" value="" out="N"/>
				<param name="acct_cd" type="12" value="" out="N"/>
				<param name="csr_ofc_cd" type="12" value="" out="N"/>
				<param name="gl_eff_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
