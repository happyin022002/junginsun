<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GEMMasterCodeMgtDBDAOSearchSubsidiaryAccountMatrixInfoRSQL">
			<desc><![CDATA[2012.04.09 [CHM-201217079-01] 이준범
1.Expense Code Maintenance for subsidiary  신규 기능 추가
  : 조회 SQL]]></desc>
			<sql><![CDATA[
SELECT A.OFC_CD
      ,A.SUBS_ACCT_CD
      ,A.SUBS_ACCT_KRN_NM
      ,A.SUBS_ACCT_ENG_NM
      ,A.SUBS_ACCT_KRN_DESC
      ,A.SUBS_ACCT_ENG_DESC
      ,A.GEN_EXPN_CD
      ,(SELECT B.TIC_CD FROM GEM_EXPENSE B WHERE B.GEN_EXPN_CD = A.GEN_EXPN_CD ) AS TIC_CD
      ,A.DELT_FLG
      ,A.CRE_USR_ID
      ,TO_CHAR (A.CRE_DT, 'YYYYMMDD') AS CRE_DT
      ,A.UPD_USR_ID
      ,TO_CHAR (A.UPD_DT, 'YYYYMMDD') AS UPD_DT
  FROM GEM_SUBS_ACCT_MTX A
 WHERE 1=1
#if(${sch_hohq_gbn} != '')
   AND A.OFC_CD IN (   
                     SELECT DISTINCT L_4 AS CODE
                       FROM GEM_OFC_LEVEL_V
                      WHERE 1=1
                     #if(${sch_hohq_gbn} != '')
                        AND RGN_OFC_FLG LIKE @[sch_hohq_gbn]||'%'
		             #end			
		             #if(${sch_lvl1} != '' && ${sch_lvl2} != '' && ${sch_lvl3} != '')
                        AND L_4 LIKE @[sch_lvl3]||'%' 
                     #end
	              	 #if(${sch_lvl1} != '' && ${sch_lvl2} != '' && ${sch_lvl3} == '') 
                        AND L_3 LIKE @[sch_lvl2]||'%' 
                     #end
		             #if(${sch_lvl1} != '' && ${sch_lvl2} == '' && ${sch_lvl3} == '') 
                        AND L_2 LIKE @[sch_lvl1]||'%' 
                     #end
                   )
#end

#if(${sch_office_gbn} == 'Y')
   #if(${sch_office_code} != '')
   AND A.OFC_CD LIKE @[sch_office_code]||'%'
   #end
#end

#if(${sch_office_gbn} == 'N')
   #if(${sch_office_code} != '')
   AND A.GEN_EXPN_CD LIKE @[sch_office_code]||'%'
   #end
#end

#if(${sch_delt_flg} == 'Y')
   AND A.DELT_FLG = 'Y'
#else
   AND A.DELT_FLG = 'N'
#end			]]></sql>
			<params>
				<param name="sch_hohq_gbn" type="12" value="" out="N"/>
				<param name="sch_lvl3" type="12" value="" out="N"/>
				<param name="sch_lvl2" type="12" value="" out="N"/>
				<param name="sch_lvl1" type="12" value="" out="N"/>
				<param name="sch_office_code" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
