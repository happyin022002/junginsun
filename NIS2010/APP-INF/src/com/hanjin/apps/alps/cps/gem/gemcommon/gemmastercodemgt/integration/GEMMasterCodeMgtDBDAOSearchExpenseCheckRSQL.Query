<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GEMMasterCodeMgtDBDAOSearchExpenseCheckRSQL">
			<desc><![CDATA[일반관리비 계획비용 요청시 사용할 일반관리비 비용코드(Expense Code)가 집행단위에서 사용할수 있는 코드인지 체크한다.]]></desc>
			<sql><![CDATA[
#if(${sch_gbn} == 'lvlCheck')
SELECT DECODE (count(*), '0', 'FALSE', 'TRUE') code
FROM   GEM_EXPENSE
WHERE  GEN_EXPN_CD = @[gen_expn_cd]
AND    GEN_EXPN_GRP_LVL = '4'
#end

#if(${sch_gbn} == 'dupCheck')
SELECT DECODE (count(*), '0', 'TRUE', 'FALSE') code
FROM   GEM_OFC_MTX A, GEM_EXPENSE B
WHERE  A.GEN_EXPN_CD = B.GEN_EXPN_CD
AND    B.GEN_EXPN_CD = @[gen_expn_cd]
AND    A.OFC_CD = @[ofc_cd]
#end

#if(${sch_gbn} == 'etc')
SELECT DECODE (A.GEN_EXPN_SLS_DIV_CD,'Y', DECODE (B.SLS_OFC_FLG, 'Y', 'TRUE','FALSE')
                                    ,'N', DECODE (B.SLS_OFC_FLG, 'N', 'TRUE','FALSE')
                                    ,'C', 'TRUE'
                                    ,'FALSE') code
FROM   (SELECT GEN_EXPN_SLS_DIV_CD
        FROM   GEM_EXPENSE
        WHERE  GEN_EXPN_CD = @[gen_expn_cd]
        AND    DELT_FLG = 'N') A
      ,(SELECT SLS_OFC_FLG
        FROM   GEM_OFFICE
        WHERE  OFC_CD = @[ofc_cd]
        AND    DELT_FLG = 'N') B
#end			]]></sql>
			<params>
				<param name="gen_expn_cd" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
