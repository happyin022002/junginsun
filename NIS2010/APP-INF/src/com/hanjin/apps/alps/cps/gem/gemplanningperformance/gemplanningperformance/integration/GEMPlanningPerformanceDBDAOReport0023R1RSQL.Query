<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GEMPlanningPerformanceDBDAOReport0023R1RSQL">
			<desc><![CDATA[init 레포트 Query1]]></desc>
			<sql><![CDATA[
SELECT A.GEN_EXPN_RQST_NO
      ,B.GEM_EXPN_GRP_CD1
      ,B.GEM_EXPN_GRP_CD2
      ,DECODE (@[lang_div], 'KOR', B.KRN_ABBR_NM_1, B.ENG_ABBR_NM_1) EXPN_GRP_ABBR_NM1
      ,DECODE (@[lang_div], 'KOR', B.KRN_ABBR_NM_2, B.ENG_ABBR_NM_2) EXPN_GRP_ABBR_NM2
      ,A.GEN_EXPN_CD
      ,A.GEN_EXPN_ITM_NO
      ,A.GEN_EXPN_ITM_DESC
      ,A.GEN_EXPN_CALC_BSS_DESC
      ,A.RQST_OPIN_RMK
      ,A.JAN_AMT ASG_JAN_AMT
      ,A.FEB_AMT ASG_FEB_AMT
      ,A.MAR_AMT ASG_MAR_AMT
      ,A.APR_AMT ASG_APR_AMT
      ,A.MAY_AMT ASG_MAY_AMT
      ,A.JUN_AMT ASG_JUN_AMT
      ,A.JUL_AMT ASG_JUL_AMT
      ,A.AUG_AMT ASG_AUG_AMT
      ,A.SEP_AMT ASG_SEP_AMT
      ,A.OCT_AMT ASG_OCT_AMT
      ,A.NOV_AMT ASG_NOV_AMT
      ,A.DEC_AMT ASG_DEC_AMT
      ,(  A.JAN_AMT
         + A.FEB_AMT
         + A.MAR_AMT
         + A.APR_AMT
         + A.MAY_AMT
         + A.JUN_AMT
         + A.JUL_AMT
         + A.AUG_AMT
         + A.SEP_AMT
         + A.OCT_AMT
         + A.NOV_AMT
         + A.DEC_AMT ) ASG_SUM_AMT
      ,G.RQST_OFC_CD
      ,DECODE(  F.GEN_EXPN_APRO_STEP_CD , 'RQ', (  F.JAN_AMT
         + F.FEB_AMT
         + F.MAR_AMT
         + F.APR_AMT
         + F.MAY_AMT
         + F.JUN_AMT
         + F.JUL_AMT
         + F.AUG_AMT
         + F.SEP_AMT
         + F.OCT_AMT
         + F.NOV_AMT
         + F.DEC_AMT
        )  , 0 ) SUM_AMT
      ,DECODE(  F.GEN_EXPN_APRO_STEP_CD , A.CRNT_GEN_EXPN_APRO_STEP_CD, ( F.JAN_AMT
         + F.FEB_AMT
         + F.MAR_AMT
         + F.APR_AMT
         + F.MAY_AMT
         + F.JUN_AMT
         + F.JUL_AMT
         + F.AUG_AMT
         + F.SEP_AMT
         + F.OCT_AMT
         + F.NOV_AMT
         + F.DEC_AMT
        )  , 0 ) AD_AMT
      ,C.LOCL_CURR_CD
      ,C.RQST_UT_VAL
      ,D.ACCT_XCH_RT_YRMON
      ,D.USD_LOCL_XCH_RT
      ,D.LOCL_KRW_XCH_RT
      ,E.TIC_CD
      ,F.GEN_EXPN_RQST_SEQ      
      ,F.OFC_CD
      ,F.GEN_EXPN_TRNS_DIV_CD
      ,DECODE (@[lang_div], 'KOR', E.KRN_ABBR_NM, E.ENG_ABBR_NM) EXPN_ABBR_NM
      ,'0' USD_AMT
FROM   GEM_ITEM A, GEM_EXPN_GRP_V B, GEM_OFFICE C, GEM_XCH_RT D, GEM_EXPENSE E, GEM_APRO_STEP F, GEM_REQUEST G
WHERE  1 = 1
AND    A.GEN_EXPN_RQST_NO = @[gen_expn_rqst_no]
AND    A.GEN_EXPN_CD = B.GEN_EXPN_CD
AND    A.GEN_EXPN_CD = E.GEN_EXPN_CD
AND    A.OFC_CD = C.OFC_CD
AND    D.ACCT_XCH_RT_YRMON(+) =    @[acct_xch_rt_yrmon] || '00'                                
AND    D.CURR_CD(+) = C.LOCL_CURR_CD
AND    D.GEN_EXPN_XCH_RT_DIV_CD(+) = 'I'
AND    F.GEN_EXPN_RQST_NO = A.GEN_EXPN_RQST_NO
AND    G.GEN_EXPN_RQST_NO = A.GEN_EXPN_RQST_NO
AND    F.OFC_CD = A.OFC_CD
AND    F.GEN_EXPN_CD = A.GEN_EXPN_CD
AND    F.GEN_EXPN_ITM_NO = A.GEN_EXPN_ITM_NO
AND    F.GEN_EXPN_TRNS_DIV_CD = A.GEN_EXPN_TRNS_DIV_CD
AND    F.GEN_EXPN_RQST_SEQ = A.GEN_EXPN_RQST_SEQ
AND    F.GEN_EXPN_APRO_STEP_CD = 'RQ'
#if (${gen_expn_rqst_seq} != '') 
AND    A.GEN_EXPN_RQST_SEQ = @[gen_expn_rqst_seq]
#end
ORDER BY
B.GEM_EXPN_GRP_CD1 ,
F.GEN_EXPN_RQST_SEQ ,
F.GEN_EXPN_TRNS_DIV_CD , 
A.GEN_EXPN_CD, 
SUM_AMT			]]></sql>
			<params>
				<param name="lang_div" type="12" value="" out="N"/>
				<param name="gen_expn_rqst_no" type="12" value="" out="N"/>
				<param name="acct_xch_rt_yrmon" type="12" value="" out="N"/>
				<param name="gen_expn_rqst_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
