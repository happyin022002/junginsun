<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CodeMgtDBDAOAddCNIUserRoleInfoListCSQL">
			<desc><![CDATA[CNI User별 Role 정보를 생성 합니다.]]></desc>
			<sql><![CDATA[
-- merge문을 사용한 이유는 화면에서 User ID, Role Code를 중복 Check를 할 수 없다.
-- 조회 후 PK를 변경할 수 있는 화면 구조이다.
-- 기 동록되어 있는 정보에 대해서는 Update 처리한다.
MERGE INTO CNI_USR_ROLE_MTCH
USING DUAL
ON    (     USR_ID      = @[usr_id]
      AND   CGO_CLM_USR_ROLE_CD = @[usr_role_cd]
      )
WHEN MATCHED THEN
UPDATE SET     
       UPD_DT       = SYSDATE
     , UPD_USR_ID   = @[cre_usr_id]
WHEN NOT MATCHED THEN
INSERT
(
        USR_ID
      , CGO_CLM_USR_ROLE_CD
      , CRE_USR_ID
      , CRE_DT
      , UPD_USR_ID
      , UPD_DT
)
VALUES
(
        @[usr_id]
      , @[usr_role_cd]
      , @[cre_usr_id]
      , SYSDATE
      , @[cre_usr_id]
      , SYSDATE
)			]]></sql>
			<params>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="usr_role_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
