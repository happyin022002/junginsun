<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ClaimMainDBDAOSearchContractCarriageRSQL">
			<desc><![CDATA[ContractCarriage 조회]]></desc>
			<sql><![CDATA[
SELECT
    CLM.CGO_CLM_NO                   AS CGO_CLM_NO
  , CLM.CLM_AREA_CD                  AS CLM_AREA_CD   
  , CLM.HDLR_OFC_CD                  AS HDLR_OFC_CD     
  , CLM.HDLR_USR_ID                  AS HDLR_USR_ID   
  , TO_CHAR (CLM.UPD_DT, 'YYYY-MM-DD') AS UPD_DT    /*UPDATED*/
  , CLM.CGO_CLM_INCI_NO              AS CGO_CLM_INCI_NO  
  , CLM.CRM_VOC_NO                   AS CRM_VOC_NO  /*CLM_MISC_CD*/    
  , MISC.CLM_MISC_CD                 AS CLM_MISC_CD   /*CLM_STS_CD*/
  , MISC.CLM_MISC_NM                 AS CLM_MISC_NM        /* STATUS */
  , (TO_DATE(NVL(CLM.CS_CLZ_DT, TO_CHAR(SYSDATE,'YYYYMMDD')),'YYYYMMDD') - TO_DATE(CLM.PRLM_CLM_NTC_DT,'YYYYMMDD')) + 1 AS HPC
  , (TO_DATE(NVL(CLM.CGO_CLM_STL_DT, TO_CHAR(SYSDATE,'YYYYMMDD')),'YYYYMMDD') -  TO_DATE(CLM.FMAL_CLM_RCV_DT,'YYYYMMDD')) + 1  AS NHP 
  , CLM.CGO_CLM_STL_TP_CD            AS CGO_CLM_STL_TP_CD   
  , TO_CHAR (TO_DATE(CLM.CS_CLZ_DT,'YYYYMMDD'), 'YYYY-MM-DD')                    AS CS_CLZ_DT    /* Date of Formal Claim */
  , TO_CHAR (TO_DATE(CLM.CLM_TM_BAR_DT,'YYYYMMDD'), 'YYYY-MM-DD')                AS CLM_TM_BAR_DT  /* Time Bar Date */
  , TO_CHAR (TO_DATE(CLM.SMNS_SVE_DT,'YYYYMMDD'), 'YYYY-MM-DD')                  AS SMNS_SVE_DT

  , CLM.CLMT_CLM_PTY_NO  AS CLMT_CLM_PTY_NO
  , PARTY.CLM_PTY_ABBR_NM  AS CLM_PTY_ABBR_NM
  , PARTY.PTY_NM  AS PTY_NM
  , CLM.CLMT_CLM_TP_CD  AS CLMT_CLM_TP_CD
  , CLM.FMAL_CLM_RCV_OFC_CD  AS  FMAL_CLM_RCV_OFC_CD     /*ROFC*/ 
  , TO_CHAR (TO_DATE(CLM.FMAL_CLM_RCV_DT,'YYYYMMDD'), 'YYYY-MM-DD')	  AS  FMAL_CLM_RCV_DT  /*DOF */ 
  , CLM.CGO_CLM_TP_CD                AS CGO_CLM_TP_CD    /*TOC*/    
  , CLM.MJR_CLM_DMG_LSS_CD           AS MJR_CLM_DMG_LSS_CD   /*CODL1*/
  , CLM.N3RD_LABL_PTY_CD          AS N3RD_LABL_PTY_CD   /*CODL2*/  
  , CLM.INCI_PLC_TP_CD		         AS INCI_PLC_TP_CD   /*POI*/
  , TO_CHAR (TO_DATE(CLM.INCI_OCCR_DT,'YYYYMMDD'), 'YYYY-MM-DD')		         AS INCI_OCCR_DT  /*DOI*/ 
  , CLM.CLMT_USD_AMT			     AS CLMT_USD_AMT  
   
   , CTRT.TRNK_REF_VVD_NO	AS TRNK_REF_VVD_NO
   , CLM.SLAN_CD	         AS SLAN_CD
   , CTRT.CRR_TERM_CD		AS CRR_TERM_CD
   , CTRT.POR_CD		AS POR_CD
   , TO_CHAR (TO_DATE(CTRT.RCT_DT,'YYYYMMDD'), 'YYYY-MM-DD')			AS RCT_DT
   , CTRT.POL_CD		AS POL_CD
   , TO_CHAR (TO_DATE(CTRT.LODG_DT,'YYYYMMDD'), 'YYYY-MM-DD')		AS LODG_DT
   , CTRT.POD_CD		AS POD_CD
   , TO_CHAR (TO_DATE(CTRT.DCHG_DT,'YYYYMMDD'), 'YYYY-MM-DD')		AS DCHG_DT
   , CTRT.DEL_CD		AS DEL_CD
   , TO_CHAR (TO_DATE(CTRT.DE_DT,'YYYYMMDD'), 'YYYY-MM-DD')			AS DE_DT  
   , CTRT.SHPR_NM		AS SHPR_NM
   , CTRT.CNEE_NM		AS CNEE_NM
   , CTRT.NTFY_NM		AS NTFY_NM
   , CTRT.CLM_CGO_TP_CD		AS CLM_CGO_TP_CD	
   , CTRT.CGO_QLTY_DESC		AS CGO_QLTY_DESC   
   , CTRT.CLM_OFRT_AMT		AS CLM_OFRT_AMT
   , CTRT.CLM_OFRT_TERM_CD	AS CLM_OFRT_TERM_CD
   , CTRT.CLM_OFRT_FLG		AS CLM_OFRT_FLG
   , CTRT.N1ST_PRE_REF_VVD_NO	AS N1ST_PRE_REF_VVD_NO
   , CTRT.N2ND_PRE_REF_VVD_NO	AS N2ND_PRE_REF_VVD_NO
   , CTRT.N3RD_PRE_REF_VVD_NO	AS N3RD_PRE_REF_VVD_NO
   , CTRT.N1ST_PRE_TS_LOC_CD	AS N1ST_PRE_TS_LOC_CD
   , TO_CHAR (TO_DATE(CTRT.N1ST_PRE_TS_DT,'YYYYMMDD'), 'YYYY-MM-DD')	AS N1ST_PRE_TS_DT 	
   , CTRT.N2ND_PRE_TS_LOC_CD	AS N2ND_PRE_TS_LOC_CD
   , TO_CHAR (TO_DATE(CTRT.N2ND_PRE_TS_DT,'YYYYMMDD'), 'YYYY-MM-DD')	AS  N2ND_PRE_TS_DT
   , CTRT.N3RD_PRE_TS_LOC_CD	AS N3RD_PRE_TS_LOC_CD
   , TO_CHAR (TO_DATE(CTRT.N3RD_PRE_TS_DT,'YYYYMMDD'), 'YYYY-MM-DD')	AS N3RD_PRE_TS_DT
   , CTRT.N1ST_PST_REF_VVD_NO	AS N1ST_PST_REF_VVD_NO
   , CTRT.N2ND_PST_REF_VVD_NO	AS N2ND_PST_REF_VVD_NO
   , CTRT.N3RD_PST_REF_VVD_NO	AS N3RD_PST_REF_VVD_NO
   , CTRT.N1ST_PST_TS_LOC_CD	AS N1ST_PST_TS_LOC_CD
   , TO_CHAR (TO_DATE(CTRT.N1ST_PST_TS_DT,'YYYYMMDD'), 'YYYY-MM-DD')	AS N1ST_PST_TS_DT
   , CTRT.N2ND_PST_TS_LOC_CD	AS N2ND_PST_TS_LOC_CD
   , TO_CHAR (TO_DATE(CTRT.N2ND_PST_TS_DT,'YYYYMMDD'), 'YYYY-MM-DD')	AS N2ND_PST_TS_DT
   , CTRT.N3RD_PST_TS_LOC_CD	AS N3RD_PST_TS_LOC_CD
   , TO_CHAR (TO_DATE(CTRT.N3RD_PST_TS_DT,'YYYYMMDD'), 'YYYY-MM-DD')	AS N3RD_PST_TS_DT
   , CTRT.REP_CMDT_CD		AS REP_CMDT_CD
   , CTRT.N3RD_REF_VVD_NO	AS N3RD_REF_VVD_NO   

FROM
    CNI_CLM_V CLM
  , (
        SELECT
            *
        FROM
            CNI_MISC_CD
        WHERE
            CLSS_CLM_MISC_CD = '08'
    )
    MISC
  , CNI_PARTY PARTY
  , CNI_CGO_CLM_CTRT CTRT
  
WHERE
    CLM.CGO_CLM_STS_CD  = MISC.CLM_MISC_CD
    AND CLM.CGO_CLM_NO  = CTRT.CGO_CLM_NO(+) 
	AND CLM.CLMT_CLM_PTY_NO= PARTY.CLM_PTY_NO(+) 
    AND CLM.CGO_CLM_NO  = @[cgo_clm_no]			]]></sql>
			<params>
				<param name="cgo_clm_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
