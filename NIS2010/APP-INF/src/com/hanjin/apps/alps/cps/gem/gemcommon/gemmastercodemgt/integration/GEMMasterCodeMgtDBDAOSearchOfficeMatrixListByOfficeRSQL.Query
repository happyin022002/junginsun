<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GEMMasterCodeMgtDBDAOSearchOfficeMatrixListByOfficeRSQL">
			<desc><![CDATA[Fm Office 에서 일반관리비 비용코드(Expense Code) 사용시 To Office로 집계 되도록 정의된 정보]]></desc>
			<sql><![CDATA[
SELECT A.SND_OFC_CD SND_OFC_CD
      ,A.RCV_OFC_CD RCV_OFC_CD
      , (SELECT DISTINCT L_1 
         FROM            GEM_EXPN_LEVEL_V
         WHERE           L_4 = A.GEN_EXPN_CD) GEN_EXPN_CD_GRP
      ,A.GEN_EXPN_CD GEN_EXPN_CD
      ,(SELECT DECODE (@[sch_lang], 'K', KRN_ABBR_NM, 'E', ENG_ABBR_NM) FROM GEM_EXPENSE WHERE GEN_EXPN_CD = A.GEN_EXPN_CD) GEN_EXPN_NM
      ,A.CRE_USR_ID CRE_USR_ID
      ,A.DELT_FLG DELT_FLG
FROM   GEM_OFC_EXPT A
WHERE  1=1
#if(${sch_office_gbn} == 'Y')
   #if(${sch_office_code} != '')
AND    A.SND_OFC_CD LIKE @[sch_office_code] || '%'
   #end
#end

#if(${sch_office_gbn} == 'N')
   #if(${sch_office_code} != '')
AND    A.GEN_EXPN_CD LIKE @[sch_office_code] || '%'
   #end
#end

#if (${sch_expn_group} != '')
AND    A.GEN_EXPN_CD IN (SELECT L_4
                         FROM   GEM_EXPN_LEVEL_V
                         WHERE  1 = 1
                         AND    L_1 like @[sch_expn_group]||'%')
#end

#if(${sch_delt_flg} == 'Y')
   AND A.DELT_FLG = 'Y'
#else
   AND A.DELT_FLG = 'N'
#end
ORDER BY A.SND_OFC_CD, A.RCV_OFC_CD			]]></sql>
			<params>
				<param name="sch_lang" type="12" value="" out="N"/>
				<param name="sch_office_code" type="12" value="" out="N"/>
				<param name="sch_expn_group" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
