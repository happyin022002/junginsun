<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PaymentInvoiceDBDAOSearchPaymentInvoiceListRSQL">
			<desc><![CDATA[클레임별 인보이스 리스트]]></desc>
			<sql><![CDATA[
SELECT
    A.INV_RGST_NO
  , A.CGO_CLM_PAY_NO
  , A.CGO_CLM_NO
  , CNI_GET_CLM_MISC_NM_FNC ('30', A.CLM_COST_TP_CD, '2') CLM_COST_TP_NM
  , CNI_GET_PTY_NM_FNC (A.CLM_PTY_NO, '2') CLM_PTY_NM
  , A.INV_NO
  , A.INV_DT
  , A.LOCL_CURR_CD
  , A.INV_AMT
  , B.CSR_NO
  , B.INV_STS_CD
  , TO_CHAR(B.AP_CXL_DT, 'YYYYMMDD') AP_CXL_DT
  , B.AP_PAY_FLG
  , TO_CHAR(B.AP_PAY_DT, 'YYYYMMDD') AP_PAY_DT
  , B.AP_PAY_AMT
  , A.COST_DESC
  , TO_CHAR(A.PAY_DT , 'YYYYMMDD') PAY_DT
  , TO_CHAR(B.INV_EFF_DT , 'YYYYMMDD') INV_EFF_DT
  , A.INV_XCH_RT
  , A.INV_USD_AMT
  , A.INV_RMK
  , C.CLM_AREA_CD
  , C.HDLR_OFC_CD
  , C.HDLR_USR_ID
  , CNI_GET_CLM_MISC_NM_FNC ('08', C.CGO_CLM_STS_CD, '2') CGO_CLM_STS_NM
  , CNI_GET_CLM_MISC_NM_FNC ('37', C.CGO_CLM_DIV_CD, '2') CGO_CLM_DIV_NM
FROM
    CNI_CGO_CLM_COST A
LEFT OUTER JOIN AP_PAY_INV B
ON
    A.INV_RGST_NO  = B.INV_RGST_NO
    AND B.DELT_FLG = 'N'
INNER JOIN CNI_CLM_V C
ON
    A.CGO_CLM_NO = C.CGO_CLM_NO
    AND C.HDLR_USR_ID = @[hdlr_usr_id]
    AND A.CGO_CLM_NO  = @[cgo_clm_no]	


				]]></sql>
			<params>
				<param name="hdlr_usr_id" type="12" value="" out="N"/>
				<param name="cgo_clm_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
