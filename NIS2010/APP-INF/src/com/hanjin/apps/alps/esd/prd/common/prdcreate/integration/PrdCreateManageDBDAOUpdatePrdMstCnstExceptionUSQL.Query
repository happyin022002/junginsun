<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PrdCreateManageDBDAOUpdatePrdMstCnstExceptionUSQL">
			<desc><![CDATA[PrdCreateManageDBDAOUpdatePrdMstCnstExceptionUSQL
--1. POL : ASIA,  POD : US%/CA%, DEL : CA%, Type/Size : D7인 모든 BKG 을 Block
--2. Only CAVAN port/local 허용, 타 CA port 의 경우는(CAVAN등) Port/Local Block (Hard coding 이 필요한 부분)]]></desc>
			<sql><![CDATA[
UPDATE PRD_PROD_CTL_MST M
SET CNST_FLG = 'X'
WHERE M.PCTL_NO LIKE DECODE(@[hd_pctl_no], NULL, NULL, @[hd_pctl_no]||'%') --R12081003113716
AND EXISTS (
    SELECT 'X' FROM PRD_PROD_CTL_MST MST , PRD_PROD_CTL_QTY Q
    WHERE MST.PCTL_NO = M.PCTL_NO 
    AND MST.PCTL_NO = Q.PCTL_NO
    AND 'A' = (SELECT CONTI_CD FROM MDM_LOCATION WHERE LOC_CD = MST.POL_CD )
    AND (MST.POD_CD LIKE 'US%' OR MST.POD_CD LIKE 'CA%' )
    AND MST.DEL_CD LIKE 'CA%'
    AND Q.CNTR_TPSZ_CD ='D7'
    AND (MST.POD_CD NOT IN ('CAVAN') OR  MST.DEL_CD NOT IN ('CAVAN'))
)			]]></sql>
			<params>
				<param name="hd_pctl_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
