<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TariffConditionManageDBDAOSearchTariffCondHdrRSQL">
			<desc><![CDATA[condition hdr 정보 조회]]></desc>
			<sql><![CDATA[
SELECT 
C.*
, (
    SELECT 
    CASE
    WHEN COUNT(COND_NO) > 0 
    THEN 'Y'
    ELSE 'N'
    END CHK_COND_NO_REF
    FROM (
        SELECT COND_NO, TML_AWK_CGO_TRF_TP_CD TP
        FROM TES_AWK_CGO_TRF_DTL
        WHERE 1=1
        AND COND_NO = @[cond_no]
        UNION ALL
        SELECT COND_NO, TML_AWK_CGO_TRF_TP_CD TP
        FROM TES_AWK_CGO_TRF_TP_SZ
        WHERE 1=1
        AND COND_NO = @[cond_no]
        UNION ALL
        SELECT COND_NO, 'A' TP
        FROM TES_AWK_CGO_ADON_HDR
        WHERE 1=1
        AND COND_NO = @[cond_no]
        UNION ALL
        SELECT COND_NO, 'A' TP
        FROM TES_AWK_CGO_ADON_TP_SZ
        WHERE 1=1
        AND COND_NO = @[cond_no]
        UNION ALL
        SELECT COND_NO, TRSP_AWK_CGO_TRF_TP_CD TP
        FROM TRS_AWK_CGO_TRF_HDR
        WHERE 1=1
        AND COND_NO = @[cond_no]
        UNION ALL
        SELECT COND_NO, TRSP_AWK_CGO_TRF_TP_CD TP
        FROM TRS_AWK_CGO_TRF_TP_SZ
        WHERE 1=1
        AND COND_NO = @[cond_no]
    )
) CHK_COND_NO_REF
FROM TES_TRF_COND C
WHERE 1=1
AND NVL(C.DELT_FLG,'N') <> 'Y'
AND C.COND_NO = @[cond_no]
#if (${cond_tp_cd} != '') 
AND C.TML_AWK_CGO_COND_TP_CD = @[cond_tp_cd]
#else 
#end			]]></sql>
			<params>
				<param name="cond_no" type="12" value="" out="N"/>
				<param name="cond_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
