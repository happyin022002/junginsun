<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WorkOrderPreviewDBDAOSearchEdi102297ShDgRSQL">
			<desc><![CDATA[searchEdi_102297_SH_DG]]></desc>
			<sql><![CDATA[
#if (${trsp_bnd_cd} == 'O' && ${trsp_cst_dtl_mod_cd} == 'DR')

SELECT DISTINCT	dg.imdg_clss_cd dg_imo_class
	  ,dg.imdg_un_no dg_unno
	  ,NVL(dg.psa_no,' ') dg_psa_class 
	  ,NVL(dg.psa_no,' ') dg_psa              
  FROM bkg_dg_cgo dg
      ,trs_trsp_wrk_ord wo
      ,BKG_TRO_SPCL_CGO_SEQ DG_SEQ
      ,trs_spcl_cgo_pck_cd pck
      ,trs_trsp_svc_ord so
 WHERE so.delt_flg <> 'Y'
   AND wo.trsp_wo_ofc_cty_cd = @[trsp_wo_ofc_cty_cd]
   AND wo.trsp_wo_seq = @[trsp_wo_seq]
   AND wo.trsp_wo_ofc_cty_cd = so.trsp_wo_ofc_cty_cd
   AND wo.trsp_wo_seq = so.trsp_wo_seq
   AND so.hjl_no IS NULL
   AND wo.hjl_no IS NULL
   AND so.bkg_no = dg.bkg_no
   AND dg.out_imdg_pck_cd1 = pck.spcl_cgo_pck_cd(+)
   AND SO.BKG_NO           = DG_SEQ.BKG_NO
   AND SO.TRSP_BND_CD      = DG_SEQ.IO_BND_CD
   AND SO.TRO_SEQ          = DG_SEQ.TRO_SEQ
   AND DG.DCGO_SEQ         = DG_SEQ.TRO_SPCL_CGO_SEQ    

#else

SELECT DISTINCT	dg.imdg_clss_cd dg_imo_class
	  ,dg.imdg_un_no dg_unno
	  ,NVL(dg.psa_no,' ') dg_psa_class 
	  ,NVL(dg.psa_no,' ') dg_psa              
  FROM bkg_dg_cgo dg
      ,trs_trsp_wrk_ord wo
      ,trs_spcl_cgo_pck_cd pck
      ,trs_trsp_svc_ord so
 WHERE so.delt_flg <> 'Y'
   AND wo.trsp_wo_ofc_cty_cd = @[trsp_wo_ofc_cty_cd]
   AND wo.trsp_wo_seq = @[trsp_wo_seq]
   AND wo.trsp_wo_ofc_cty_cd = so.trsp_wo_ofc_cty_cd
   AND wo.trsp_wo_seq = so.trsp_wo_seq
   AND dg.out_imdg_pck_cd1 = pck.spcl_cgo_pck_cd(+)
   AND SO.BKG_NO           = DG.BKG_NO
   AND SO.EQ_NO            = DG.CNTR_NO
   AND so.hjl_no IS NULL
   AND wo.hjl_no IS NULL

#end			]]></sql>
			<params>
				<param name="trsp_wo_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="trsp_wo_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
