<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EacMgtDBDAOSearchVerifyTpbIfRSQL">
			<desc><![CDATA[I/F 전에 중복 여부를 체크한다]]></desc>
			<sql><![CDATA[
SELECT 'TPB No : '||WM_CONCAT(DISTINCT N3PTY_NO) N3PTY_NO, COUNT(*) CNT
  FROM TPB_OTS_DTL A
 WHERE N3PTY_SRC_SUB_SYS_CD IN ('TES', 'TRS') -- 하드코딩
   AND N3PTY_SRC_SUB_SYS_CD = @[eac_expn_tp_cd] -- EAS_EXPN_AUD_CS_MGMT.EAC_EXPN_TP_CD 
   AND SRC_VNDR_SEQ = @[vndr_seq]    -- EAS_EXPN_AUD_CS_MGMT.VNDR_SEQ
   AND N3PTY_SRC_NO = @[n3pty_src_no]  -- EAS_EXPN_AUD_CS_MGMT.N3PTY_SRC_NO
   AND BKG_NO = @[bkg_no]  -- EAS_EXPN_AUD_CS_N3RD_PTY.BKG_NO
UNION ALL
SELECT 'TPB No : '||WM_CONCAT(DISTINCT N3PTY_NO) N3PTY_NO, COUNT(*) CNT
  FROM TPB_OTS_DTL A
 WHERE N3PTY_SRC_SUB_SYS_CD IN ('PSO', 'MNR') -- 하드코딩
   AND N3PTY_SRC_SUB_SYS_CD = @[eac_expn_tp_cd] -- EAS_EXPN_AUD_CS_MGMT.EAC_EXPN_TP_CD 
   AND SRC_VNDR_SEQ = @[vndr_seq]       -- VNDR_SEQ  EAS_EXPN_AUD_CS_MGMT.VNDR_SEQ
   AND N3PTY_SRC_NO = @[n3pty_src_no] -- INV_NO    EAS_EXPN_AUD_CS_MGMT.N3PTY_SRC_NO

			]]></sql>
			<params>
				<param name="eac_expn_tp_cd" type="12" value="" out="N"/>
				<param name="vndr_seq" type="12" value="" out="N"/>
				<param name="n3pty_src_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
