<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpecialCargoQuotationManageDBDAOremoveAwkCgoAddOnTrfHdrDSQL">
			<desc><![CDATA[removeAwkCgoAddOnTrfHdr]]></desc>
			<sql><![CDATA[
DELETE FROM TES_AWK_CGO_ADON_HDR D
WHERE 1=1
AND FM_LOC_CD = @[fm_loc_cd]
AND FM_NOD_YD_NO = DECODE(@[fm_nod_yd_no],'',' ',@[fm_nod_yd_no])
AND TO_LOC_CD = @[to_loc_cd]
AND TO_NOD_YD_NO = DECODE(@[to_nod_yd_no],'',' ',@[to_nod_yd_no])
AND COND_NO = @[cond_no]
AND NOT EXISTS (
    SELECT 'X'
    FROM TES_AWK_CGO_ADON_TP_SZ T, PRI_SCQ_AWK_ROUT_DTL PD
    WHERE 1=1
    AND T.FM_LOC_CD = D.FM_LOC_CD
    AND T.FM_NOD_YD_NO = D.FM_NOD_YD_NO
    AND T.TO_LOC_CD = D.TO_LOC_CD
    AND T.TO_NOD_YD_NO = D.TO_NOD_YD_NO
    AND T.COND_NO = D.COND_NO
    AND T.TML_AWK_ADON_VER_NO = D.TML_AWK_ADON_VER_NO
    AND T.SPCL_CGO_REF_SEQ = PD.SPCL_CGO_REF_SEQ
	UNION ALL
	SELECT 'X'
    FROM TES_AWK_CGO_ADON_TP_SZ T, PRI_SCQ_AWK_ROUT_DTL_TMP PM
    WHERE 1=1
    AND T.FM_LOC_CD = D.FM_LOC_CD
    AND T.FM_NOD_YD_NO = D.FM_NOD_YD_NO
    AND T.TO_LOC_CD = D.TO_LOC_CD
    AND T.TO_NOD_YD_NO = D.TO_NOD_YD_NO
    AND T.COND_NO = D.COND_NO
    AND T.TML_AWK_ADON_VER_NO = D.TML_AWK_ADON_VER_NO
    AND T.SPCL_CGO_REF_SEQ = PM.SPCL_CGO_REF_SEQ
)			]]></sql>
			<params>
				<param name="fm_loc_cd" type="12" value="" out="N"/>
				<param name="fm_nod_yd_no" type="12" value="" out="N"/>
				<param name="to_loc_cd" type="12" value="" out="N"/>
				<param name="to_nod_yd_no" type="12" value="" out="N"/>
				<param name="cond_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
