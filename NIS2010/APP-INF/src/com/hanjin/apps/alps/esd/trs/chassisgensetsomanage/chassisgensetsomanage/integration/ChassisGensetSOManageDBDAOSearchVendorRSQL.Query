<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChassisGensetSOManageDBDAOSearchVendorRSQL">
			<desc><![CDATA[Vendor List Retrieve]]></desc>
			<sql><![CDATA[
SELECT X.VNDR_SEQ AS VNDR_NO
      ,X.VNDR_LGL_ENG_NM AS VNDR_NM_ENG
      ,NVL(Y.CURR_CD, X.PAY_CURR_CD) AS VNDR_CNT_CURR_CD
      ,NVL(Z.HZD_MTRL_FLG,'N') HZD_MTRL_FLG
      ,NVL(Z.OVWT_TRI_AXL_FLG,'N') OVWT_TRI_AXL_FLG
      ,(SELECT VNDR_EML FROM MDM_VNDR_CNTC_PNT WHERE 1=1 AND PRMRY_CHK_FLG = 'Y' AND DELT_FLG = 'N' AND VNDR_SEQ = X.VNDR_SEQ AND CNTC_DIV_CD = 'EMAIL' AND ROWNUM = 1) AS VNDR_EML
      ,NVL((SELECT MAX(MAX(SP_EXIST_FLG) KEEP(DENSE_RANK LAST ORDER BY SP_USR_IF_SEQ)) FROM TRS_SVC_PROV_PTAL_USR_IF WHERE SP_VNDR_SEQ = X.VNDR_SEQ GROUP BY SP_USR_ID), 'N') AS SP_PTAL_EXIST_FLG
      ,DECODE((SELECT COUNT(1) FROM TRS_SPOT_BID_CNDDT_VNDR WHERE 1=1 AND SPOT_BID_CNDDT_TERM_SEQ = @[SPOT_BID_CNDDT_TERM_SEQ] AND VNDR_SEQ = X.VNDR_SEQ AND DELT_FLG = 'N'), 0, 'N', 'Y') AS CNDDT_VNDR_FLG
  FROM MDM_VENDOR X
      ,(SELECT /*+ INDEX_DESC(C XPKTRS_AGMT_EQ_RT) */
              A.VNDR_SEQ
             ,C.CURR_CD
         FROM TRS_AGMT_APLY_VNDR A
             ,TRS_AGMT_EQ_RT C
        WHERE A.TRSP_AGMT_OFC_CTY_CD = C.TRSP_AGMT_OFC_CTY_CD
          AND A.TRSP_AGMT_SEQ = C.TRSP_AGMT_SEQ
          AND A.VNDR_SEQ = @[VNDR_SEQ]
          AND ROWNUM = 1
      ) Y
      ,TRS_SPCL_CGO_AVAL_SVC_PROV Z
 WHERE X.VNDR_SEQ = Y.VNDR_SEQ(+)
   AND X.VNDR_SEQ = @[VNDR_SEQ]
   AND X.delt_flg = 'N'
   AND X.VNDR_SEQ = Z.VNDR_SEQ(+)
   AND @[OFC_CD]  = Z.SO_CRE_OFC_CD(+)
   AND ROWNUM = 1			]]></sql>
			<params>
				<param name="SPOT_BID_CNDDT_TERM_SEQ" type="12" value="" out="N"/>
				<param name="VNDR_SEQ" type="12" value="155277" out="N"/>
				<param name="OFC_CD" type="12" value="RTMSC" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
