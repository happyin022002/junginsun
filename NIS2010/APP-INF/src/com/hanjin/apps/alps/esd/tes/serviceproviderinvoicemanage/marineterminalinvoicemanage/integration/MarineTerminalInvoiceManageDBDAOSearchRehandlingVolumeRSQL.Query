<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="MarineTerminalInvoiceManageDBDAOSearchRehandlingVolumeRSQL">
			<desc><![CDATA[SearchRehandlingVolume]]></desc>
			<sql><![CDATA[
SELECT A.CNTR_NO RVIS_CNTR_NO,                                                      
       A.RHND_RSN_CD RVIS_RHND_RSN_CD,                                                  
       A.CUZ_CNTR_NO RVIS_CUZ_CNTR_NO,                                             
       A.CNTR_TPSZ_CD RVIS_CNTR_TPSZ_CD,                                                 
       A.RVIS_IND_FLG,                                                 
       A.TML_SO_DTL_SEQ RVIS_TML_SO_DTL_SEQ,                                               
       A.TML_SO_RVIS_LIST_SEQ RVIS_TML_SO_RVIS_LIST_SEQ,                                         
       A.LGS_COST_CD RVIS_LGS_COST_CD	                                                
FROM(                                                                  
--        SELECT CD.CNTR_NO, 									        
--               CD.SHIFT_RSN  RHND_RSN_CD, 								        
--               '' CUZ_CNTR_NO,							        
--               RL.CNTR_TPSZ_CD,								        
--               DECODE(RL.CNTR_NO, NULL, '0','1') RVIS_IND_FLG,         
--               RL.TML_SO_DTL_SEQ,                                      
--               RL.TML_SO_RVIS_LIST_SEQ,                                
--               RL.LGS_COST_CD  			                            
--        FROM   TDR_CNTR_DETAIL CD, TES_TML_SO_RVIS_LIST RL 		        
--        WHERE  TRIM(CD.PRECELL) IS NOT NULL               				        
--        AND    CD.VSL_CD		= SUBSTR([vvd],1,4)  					        
--        AND    CD.VOY_NO		= SUBSTR([vvd],5,4)  					        
--        AND    CD.DIR_CD		= SUBSTR([vvd],9,1) 					        
--        AND    CD.PORT_CD		= SUBSTR([yd_cd],1,5)  
--        AND    DECODE([cntr_tpsz_cd],'','X',[cntr_tpsz_cd]) = DECODE([cntr_tpsz_cd],'','X',CD.sztp)   
--        AND    CD.VSL_CD     	= RL.VSL_CD(+)           			        
--        AND    CD.VOY_NO 		= RL.SKD_VOY_NO(+)       			        
--        AND    CD.DIR_CD 		= RL.SKD_DIR_CD(+)				        
--        AND    CD.CNTR_NO 		= RL.CNTR_NO(+)						        
--        AND    [tml_so_seq] 	= RL.TML_SO_SEQ(+)							        
--        AND    [tml_so_ofc_cty_cd] = RL.TML_SO_OFC_CTY_CD(+)						        
--        AND    [lgs_cost_cd] = RL.LGS_COST_CD(+)							        
--        AND    NVL([tml_so_dtl_seq],0) = RL.TML_SO_DTL_SEQ(+)
--        UNION                                                       
        SELECT DISTINCT R.CNTR_NO,                                     
                R.RHND_RSN_CD,                                         
                R.CUZ_CNTR_NO,                        
                R.CNTR_TPSZ_CD,                                        
                DECODE(R.CNTR_NO, NULL, '0','1') RVIS_IND_FLG,         
                R.TML_SO_DTL_SEQ,                                      
                R.TML_SO_RVIS_LIST_SEQ,                                
                R.LGS_COST_CD                                          
		FROM TES_TML_SO_RVIS_LIST R                                     
		WHERE  R.TML_SO_OFC_CTY_CD = @[tml_so_ofc_cty_cd]                                  
		AND    R.TML_SO_SEQ = @[tml_so_seq]                                         
		AND    R.TML_SO_DTL_SEQ = @[tml_so_dtl_seq]                                     
		AND    R.VSL_CD     = SUBSTR(@[vvd],1,4)                             
		AND    R.SKD_VOY_NO = SUBSTR(@[vvd],5,4)                             
		AND    R.SKD_DIR_CD = SUBSTR(@[vvd],9,1)                             
		AND    R.LGS_COST_CD = @[lgs_cost_cd]                                        
		--AND    DECODE([cntr_tpsz_cd],'','X',[cntr_tpsz_cd]) = DECODE([cntr_tpsz_cd],'','X',R.CNTR_TPSZ_CD)  
     )A                                                                
ORDER BY  A.CNTR_NO			]]></sql>
			<params>
				<param name="tml_so_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="tml_so_seq" type="12" value="" out="N"/>
				<param name="tml_so_dtl_seq" type="12" value="" out="N"/>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="lgs_cost_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
