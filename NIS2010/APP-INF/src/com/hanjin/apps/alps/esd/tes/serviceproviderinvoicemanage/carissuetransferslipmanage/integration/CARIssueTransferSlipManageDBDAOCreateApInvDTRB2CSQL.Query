<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CARIssueTransferSlipManageDBDAOCreateApInvDTRB2CSQL">
			<desc><![CDATA[CreateApInvDTRB2]]></desc>
			<sql><![CDATA[
INSERT INTO AP_INV_DTRB (
 CSR_NO,
 LINE_SEQ,
 LINE_NO,
 LINE_TP_LU_CD,
 INV_AMT,
 INV_DESC,
 INV_TAX_CD,
 DTRB_COA_CO_CD,
 DTRB_COA_RGN_CD,
 DTRB_COA_CTR_CD,
 DTRB_COA_ACCT_CD,
 DTRB_COA_VVD_CD,
 DTRB_COA_INTER_CO_CD,
 DTRB_COA_FTU_N1ST_CD,
 DTRB_COA_FTU_N2ND_CD,
 ATTR_CATE_NM,
 ATTR_CTNT1,
 ATTR_CTNT2,
 ATTR_CTNT3,
 ATTR_CTNT4,
 ATTR_CTNT5,
 ATTR_CTNT6,
 ATTR_CTNT7,
 ATTR_CTNT8,
 ATTR_CTNT9,
 ATTR_CTNT10,
 ATTR_CTNT11,
 ATTR_CTNT12,
 ATTR_CTNT13,
 ATTR_CTNT14,
 ATTR_CTNT15,
 BKG_NO,
 CNTR_TPSZ_CD,
 ACT_VVD_CD,
 PLN_SCTR_DIV_CD,
 SO_CRR_CD,
 YD_CD,
 FTU_USE_CTNT1,
 FTU_USE_CTNT2,
 FTU_USE_CTNT3,
 FTU_USE_CTNT4,
 FTU_USE_CTNT5,
 CRE_DT,
 CRE_USR_ID,
 EAI_EVNT_DT
 )
 SELECT CSR_NO,
 LINE_SEQ,
 ROWNUM LINE_NO,
 LINE_TP_LU_CD,
 INV_AMT,
 INV_DESC,
 INV_TAX_CD,
 DTRB_COA_CO_CD,
 DTRB_COA_RGN_CD,
 DTRB_COA_CTR_CD,
 DTRB_COA_ACCT_CD,
 DTRB_COA_VVD_CD,
 DTRB_COA_INTER_CO_CD,
 DTRB_COA_FTU_N1ST_CD,
 DTRB_COA_FTU_N2ND_CD,
 ATTR_CATE_NM,
 ATTR_CTNT1||'_'||AP_INV_DTRB_SEQ1.NEXTVAL  ATTR_CTNT1,
 ATTR_CTNT2,
 ATTR_CTNT3,
 ATTR_CTNT4,
 ATTR_CTNT5,
 ATTR_CTNT6,
 ATTR_CTNT7,
 ATTR_CTNT8,
 ATTR_CTNT9,
 ATTR_CTNT10,
 ATTR_CTNT11,
 ATTR_CTNT12,
 ATTR_CTNT13,
 ATTR_CTNT14,
 ATTR_CTNT15,
 BKG_NO,
 CNTR_TPSZ_CD,
 ACT_VVD_CD,
 PLN_SCTR_DIV_CD,
 SO_CRR_CD,
 YD_CD,
 FTU_USE_CTNT1,
 FTU_USE_CTNT2,
 FTU_USE_CTNT3,
 FTU_USE_CTNT4,
 FTU_USE_CTNT5,
 CRE_DT,
 CRE_USR_ID,
 EAI_EVNT_DT
 FROM (
	 SELECT
	 @[new_csr_no] CSR_NO,
	 LINE_SEQ,
	 '' LINE_NO,
	 LINE_TP_LU_CD,
	 -INV_AMT INV_AMT,
	 INV_DESC,
	 INV_TAX_CD,
	 DTRB_COA_CO_CD,
	 DTRB_COA_RGN_CD,
	 DTRB_COA_CTR_CD,
	 DTRB_COA_ACCT_CD,
	 DTRB_COA_VVD_CD,
	 DTRB_COA_INTER_CO_CD,
	 DTRB_COA_FTU_N1ST_CD,
	 DTRB_COA_FTU_N2ND_CD,
	 ATTR_CATE_NM,
	 'SELCOT_'||ATTR_CTNT1 ATTR_CTNT1,
	 ATTR_CTNT2,
	 ATTR_CTNT3,
	 ATTR_CTNT4,
	 ATTR_CTNT5,
	 ATTR_CTNT6,
	 ATTR_CTNT7,
	 ATTR_CTNT8,
	 ATTR_CTNT9,
	 ATTR_CTNT10,
	 ATTR_CTNT11,
	 ATTR_CTNT12,
	 ATTR_CTNT13,
	 ATTR_CTNT14,
	 ATTR_CTNT15,
	 BKG_NO,
	 CNTR_TPSZ_CD,
	 ACT_VVD_CD,
	 PLN_SCTR_DIV_CD,
	 SO_CRR_CD,
	 YD_CD,
	 FTU_USE_CTNT1,
	 FTU_USE_CTNT2,
	 FTU_USE_CTNT3,
	 FTU_USE_CTNT4,
	 FTU_USE_CTNT5,
	 SYSDATE CRE_DT,
	 @[usr_id] CRE_USR_ID,
	 EAI_EVNT_DT
	 FROM   AP_INV_DTRB
	 WHERE  CSR_NO = @[csr_no]
	 AND    BKG_NO = @[bkg_no]
	 AND    DTRB_COA_VVD_CD = @[old_vsl_cd]||@[old_skd_voy_no]||@[old_skd_dir_cd]||@[old_rev_dir_cd]
	 UNION ALL
	 SELECT
	 @[new_csr_no] CSR_NO,
	 LINE_SEQ,
	 '' LINE_NO,
	 LINE_TP_LU_CD,
	 INV_AMT INV_AMT,
	 INV_DESC,
	 INV_TAX_CD,
	 DTRB_COA_CO_CD,
	 DTRB_COA_RGN_CD,
	 DTRB_COA_CTR_CD,
	 DTRB_COA_ACCT_CD,
	 @[New_vsl_cd]||@[new_skd_voy_no]||@[new_skd_dir_cd]||@[new_rev_dir_cd] DTRB_COA_VVD_CD,
	 DTRB_COA_INTER_CO_CD,
	 DTRB_COA_FTU_N1ST_CD,
	 DTRB_COA_FTU_N2ND_CD,
	 ATTR_CATE_NM,
	 'SELCOT_'||ATTR_CTNT1 ATTR_CTNT1,
	 ATTR_CTNT2,
	 ATTR_CTNT3,
	 ATTR_CTNT4,
	 ATTR_CTNT5,
	 ATTR_CTNT6,
	 ATTR_CTNT7,
	 ATTR_CTNT8,
	 ATTR_CTNT9,
	 ATTR_CTNT10,
	 ATTR_CTNT11,
	 ATTR_CTNT12,
	 ATTR_CTNT13,
	 ATTR_CTNT14,
	 ATTR_CTNT15,
	 BKG_NO,
	 CNTR_TPSZ_CD,
	 ACT_VVD_CD,
	 PLN_SCTR_DIV_CD,
	 SO_CRR_CD,
	 YD_CD,
	 FTU_USE_CTNT1,
	 FTU_USE_CTNT2,
	 FTU_USE_CTNT3,
	 FTU_USE_CTNT4,
	 FTU_USE_CTNT5,
	 SYSDATE CRE_DT,
	 @[usr_id] CRE_USR_ID,
	 EAI_EVNT_DT
	 FROM   AP_INV_DTRB
	 WHERE  CSR_NO = @[csr_no]
	 AND    BKG_NO = @[bkg_no]
	 AND    DTRB_COA_VVD_CD = @[old_vsl_cd]||@[old_skd_voy_no]||@[old_skd_dir_cd]||@[old_rev_dir_cd]
 )			]]></sql>
			<params>
				<param name="new_csr_no" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="csr_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="old_vsl_cd" type="12" value="" out="N"/>
				<param name="old_skd_voy_no" type="12" value="" out="N"/>
				<param name="old_skd_dir_cd" type="12" value="" out="N"/>
				<param name="old_rev_dir_cd" type="12" value="" out="N"/>
				<param name="New_vsl_cd" type="12" value="" out="N"/>
				<param name="new_skd_voy_no" type="12" value="" out="N"/>
				<param name="new_skd_dir_cd" type="12" value="" out="N"/>
				<param name="new_rev_dir_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
