<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WorkOrderSheetDBDAOsearchSpecialCargoSummaryDGRSQL">
			<desc><![CDATA[search Special Cargo Summary DG]]></desc>
			<sql><![CDATA[
SELECT
        ROW_ID                                    AS DG_RNUM,
        CNTR.EQ_NO                                AS DG_EQ_NO,
        DG.HCDG_FLG                          AS DG_HCDG,
        DG.IMDG_UN_NO                             AS DG_UN_NO ,
        DG.IMDG_CLSS_CD                      AS DG_IMO_CLASS,
        DG.IMDG_SUBS_RSK_LBL_CD1             AS DG_SUB_LABEL,
        DG.FLSH_PNT_CDO_TEMP            AS DG_FLASH_POINT,
        DG.IMDG_PCK_GRP_CD                   AS DG_PGK_GRP,
        DG.EMS_NO                            AS DG_EMS_NO,
        DG.PRP_SHP_NM                        AS DG_PROP_SHIP_NM,
        DG.HZD_DESC                          AS DG_HAZ_CONTS,
        DG.OUT_IMDG_PCK_QTY1||'/'||DG.OUT_IMDG_PCK_CD1
                                                  AS DG_OUTER_PKG_QTY_TYPE,
        DG.IN_IMDG_PCK_QTY1||'/'||DG.IN_IMDG_PCK_CD1
                                                  AS DG_INNER_PKG_QTY_TYPE,
        DG.GRS_WGT||'/'||DG.NET_WGT||'('||DG.WGT_UT_CD||')'
                                                  AS DG_GROS_NET_WEIGHT
FROM
  (
  SELECT
          SO.EQ_NO                                ,
          SO.BKG_NO AS BKG_NO                     ,
          SO.TRO_SEQ                           ,
          SO.SPCL_CGO_CNTR_TP_CD                  ,
          ROWNUM AS ROW_ID
  FROM
          TRS_TRSP_WRK_ORD                        WO,
          TRS_TRSP_SVC_ORD                        SO
 WHERE    WO.TRSP_WO_OFC_CTY_CD                   = SO.TRSP_WO_OFC_CTY_CD
      AND WO.TRSP_WO_SEQ                          = SO.TRSP_WO_SEQ
	  AND (wo.TRSP_WO_OFC_CTY_CD,wo.TRSP_WO_SEQ)	= ((@[trsp_wo_ofc_cty_cd],@[trsp_wo_seq]))
#if (${wo_vndr_seq} != '')
	and   wo.wo_vndr_seq  =  @[wo_vndr_seq]
#end
  ) CNTR,
BKG_DG_CGO DG
WHERE
      CNTR.BKG_NO                                 = DG.BKG_NO
      AND   DG.DCGO_SEQ                           = DECODE(SUBSTR(CNTR.TRO_SEQ,2,1),'E'
                                                    ,TO_NUMBER(SUBSTR(CNTR.TRO_SEQ,3,LENGTH(CNTR.TRO_SEQ)-4)),DG.DCGO_SEQ)
      AND   NVL(CNTR.EQ_NO,'-STORMBOY-')          = DECODE(SUBSTR(CNTR.TRO_SEQ,2,1),'E'
                                                    ,NVL(CNTR.EQ_NO,'-STORMBOY-'),DG.CNTR_NO)
      AND   NVL(SPCL_CGO_CNTR_TP_CD,'-STORMBOY-') = DECODE(SUBSTR(CNTR.TRO_SEQ,2,1),'E'
                                                    ,NVL(SPCL_CGO_CNTR_TP_CD,'-STORMBOY-'),'DG')			]]></sql>
			<params>
				<param name="trsp_wo_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="trsp_wo_seq" type="2" value="" out="N"/>
				<param name="wo_vndr_seq" type="2" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
