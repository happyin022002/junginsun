CREATE OR REPLACE FUNCTION TRS_OOG_GET_AUTH_YN_FNC (    in_login_ofc_cd IN MDM_ORGANIZATION.OFC_CD%type,    in_cre_ofc_cd IN MDM_ORGANIZATION.OFC_CD%type) RETURN varchar2AUTHID CURRENT_USERIS/*******************************************************************************   1. Object Name      : TRS_OOG_GET_AUTH_YN_FNC   2. Version          : 1.0   3. Create Date      : 2013.04.08   4. Sub System       : ESD/TRS   5. Author           : yoo   6. Description      : TRS AWK CARGO TARIFF 생성/수정 화면에서의 OFC기준으로 생성/수정 권한 부여를 위한 DB FUNCTION                        - 특이사항                         (1) HQ : 전체 권한 부여                        (2) RHQ : 하위 OFC들에만 권한 부여                        (3) OFC : 동일 OFC에만 권한 부여   7. Revision History : 2013.04.08 yoo 최초 생성*******************************************************************************/v_auth_yn varchar2(1) := NULL; BEGIN    IF in_cre_ofc_cd IS NOT NULL AND in_login_ofc_cd IS NOT NULL THEN                SELECT         NVL((            SELECT                NVL(        		CASE                WHEN B.OFC_TP_CD IN ('HT')                THEN 'Y'                WHEN B.OFC_TP_CD IN ('HQ','QT')                THEN                   (SELECT                        CASE                        WHEN COUNT(X.OFC_CD) > 0 THEN 'Y'                        ELSE 'N'                        END                    FROM (                        SELECT OFC_CD                        FROM MDM_ORGANIZATION                        WHERE DELT_FLG = 'N'                        CONNECT BY NOCYCLE PRIOR OFC_CD = PRNT_OFC_CD                        START WITH OFC_CD = (SELECT DISTINCT AR_HD_QTR_OFC_CD FROM MDM_ORGANIZATION WHERE OFC_CD = in_cre_ofc_cd)                        ) X                    WHERE X.OFC_CD = in_login_ofc_cd)                ELSE                   (SELECT                        CASE                        WHEN COUNT(X.OFC_CD) > 0 THEN 'Y'                        ELSE 'N'                        END                    FROM (                        SELECT OFC_CD                        FROM MDM_ORGANIZATION                        WHERE DELT_FLG = 'N'                        CONNECT BY NOCYCLE PRIOR OFC_CD = PRNT_OFC_CD                        START WITH OFC_CD = in_login_ofc_cd                        ) X                    WHERE X.OFC_CD = in_cre_ofc_cd)                END, 'X') AUTH_OFCS            FROM MDM_ORGANIZATION B            WHERE 1 = 1            AND B.OFC_CD = in_login_ofc_cd            AND NVL(B.DELT_FLG,'N') <> 'Y'        ),'X') INTO v_auth_yn        FROM DUAL        ;    END IF;        RETURN v_auth_yn;    EXCEPTION        WHEN NO_DATA_FOUND THEN            NULL;      END TRS_OOG_GET_AUTH_YN_FNC;