<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CSRIssueTransferSlipManageDBDAOSearchGwApprAgmtAttach2RSQL">
			<desc><![CDATA[GW Approval 관련 정보]]></desc>
			<sql><![CDATA[
SELECT  DISTINCT  AA.CSR_NO AS CSR_NO
      , AA.INV_NO AS INV_NO
      , AA.INV_VNDR_SEQ  AS VNDR_SEQ
      , BB.AGMT_DOC_NO   AS L_ASSETCD
      , BB.AGMT_DOC_DESC AS L_DOCUMENT_TITLE
  FROM (
        SELECT A.TRSP_AGMT_OFC_CTY_CD
              ,A.TRSP_AGMT_SEQ
              ,B.INV_NO
              ,B.INV_VNDR_SEQ
              ,B.CSR_NO
          FROM TRS_TRSP_SVC_ORD A
              ,TRS_TRSP_INV_WRK B
         WHERE A.INV_NO = B.INV_NO
           AND A.INV_VNDR_SEQ = B.INV_VNDR_SEQ
           AND B.CSR_NO = @[csr_no]
        GROUP BY A.TRSP_AGMT_OFC_CTY_CD
                ,A.TRSP_AGMT_SEQ
                ,B.INV_NO
                ,B.INV_VNDR_SEQ
                ,B.CSR_NO
        UNION
        SELECT A.TRSP_AGMT_OFC_CTY_CD
              ,A.TRSP_AGMT_SEQ
              ,B.INV_NO
              ,B.INV_VNDR_SEQ
              ,B.CSR_NO
          FROM TRS_TRSP_RAIL_BIL_VNDR_SET A
              ,TRS_TRSP_RAIL_INV_WRK      B
         WHERE A.INV_NO = B.INV_NO
           AND A.INV_VNDR_SEQ = B.INV_VNDR_SEQ
           AND B.CSR_NO = @[csr_no]
         GROUP BY A.TRSP_AGMT_OFC_CTY_CD
                 ,A.TRSP_AGMT_SEQ 
                 ,B.INV_NO
                 ,B.INV_VNDR_SEQ
                 ,B.CSR_NO               
       ) AA
      , TRS_AGMT_CTRT_ATCH BB
 WHERE AA.TRSP_AGMT_OFC_CTY_CD = BB.TRSP_AGMT_OFC_CTY_CD
   AND AA.TRSP_AGMT_SEQ        = BB.TRSP_AGMT_SEQ
   --AND BB.AGMT_DOC_NO IS NOT NULL			]]></sql>
			<params>
				<param name="csr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
