<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GuaranteeCommonDBDAOSearchUSGuaranteeCntrDupChkRSQL">
			<desc><![CDATA[Guarantee Creation Grid에 CNTR NO, BKG NO, Vendor code, Cust Code로 기존에 존재하는 data가 있는지 여부를 확인함]]></desc>
			<sql><![CDATA[
SELECT
    	(CASE WHEN COUNT(*) > 0
            THEN 'Y'
            ELSE 'N'
            END ) cntr_dup_chk
FROM TES_GNTE_HDR GH ,
        TES_GNTE_CNTR_LIST GL
WHERE 1 = 1
AND NVL(GH.DMY_FLG, 'N') <> 'Y'
AND GH.GNTE_NO = GL.GNTE_NO
and GH.VNDR_SEQ = @[vndr_seq]
AND GH.GNTE_CUST_CD = @[gnte_cust_cd]
AND GH.GNTE_TP_CD = @[gnte_tp_cd] --2012.07.23 US Guarantee 중복 입력 check에 비용 Type 포함 
AND GL.bkg_no = @[bkg_no]
AND GL.cntr_no = @[cntr_no]
AND NVL(GH.delt_flg,'N') <> 'Y'
AND GL.cre_dt between TO_DATE(to_char(sysdate - 730, 'yyyymmdd'), 'YYYY-MM-DD')  and  TO_DATE(to_char(sysdate, 'yyyymmdd'),'YYYY-MM-DD') + 0.99999			]]></sql>
			<params>
				<param name="vndr_seq" type="12" value="" out="N"/>
				<param name="gnte_cust_cd" type="12" value="" out="N"/>
				<param name="gnte_tp_cd" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
