<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PopupDBDAOSearchSPListRSQL">
			<desc><![CDATA[Service Provider 를 조회한다]]></desc>
			<sql><![CDATA[
#if (${search_type} == 'A')
	SELECT DISTINCT VNDR_SEQ
	     , OFC_CD
	     , VNDR_LGL_ENG_NM
	     , VNDR_ABBR_NM
	     , PRNT_VNDR_SEQ
	     , VNDR_CNT_CD
	     , ORG_VNDR_SEQ
	     , ENG_ADDR
	     , EV_SVC_CATE_CD
	     , EG_ID
	     , EG_NM
	FROM (SELECT ROW_NUMBER() OVER (ORDER BY A.VNDR_SEQ) NO
		       , LPAD(A.VNDR_SEQ, 6, '0') VNDR_SEQ
		       , A.OFC_CD
		       , A.VNDR_LGL_ENG_NM
    		   , A.VNDR_ABBR_NM
    		   , LPAD(A.PRNT_VNDR_SEQ, 6, '0') PRNT_VNDR_SEQ
    		   , A.VNDR_CNT_CD
    		   , A.VNDR_CNT_CD||LPAD(VNDR_SEQ, 6, '0') ORG_VNDR_SEQ
    		   , A.ENG_ADDR
    		   , '' AS EV_SVC_CATE_CD
    		   , B.EG_ID
    		   , C.EG_NM
	        FROM MDM_VENDOR A
		       , SPE_SP_BZC_EV_GRP B 
               , SPE_EV_GRP C   
	       WHERE A.VNDR_SEQ = B.SP_SEQ
             AND B.EG_ID = C.EG_ID
             AND EV_YR = @[s_ev_yr]
	         AND NVL(A.DELT_FLG, 'N') <> 'Y'
             
	#if (${s_eg_rhq_cd} != '')
		 AND C.EG_RHQ_CD = @[s_eg_rhq_cd]
	#end
	#if (${s_eg_ofc_cd} != '')
		 AND C.EG_OFC_CD = @[s_eg_ofc_cd]
	#end
	#if (${s_ev_svc_cate_cd} != '')
		 AND C.EV_SVC_CATE_CD = @[s_ev_svc_cate_cd]
	#end
	#if (${eg_id} != '')
		 AND C.eg_id = @[eg_id]
	#end        
	#if (${cnt_cd} != '')
		 AND UPPER(VNDR_CNT_CD) like UPPER(@[cnt_cd]) || '%'
	#end    
	#if (${ofc_cd} != '')
		 AND UPPER(OFC_CD) like UPPER(@[ofc_cd]) || '%'
	#end    
	#if (${vndr_nm_eng} != '')
		 AND UPPER(VNDR_LGL_ENG_NM) like '%' || UPPER(@[vndr_nm_eng]) || '%'
	#end    
	#if (${pts_vndr_cd} != '')
		 AND LPAD(PRNT_VNDR_SEQ, 6, '0') = LPAD(@[pts_vndr_cd], 6, '0')
	#end    
	#if (${vndr_cd} != '')
		 AND LPAD(VNDR_SEQ, 6, '0') = LPAD(@[vndr_cd], 6, '0')
	#end
	#if (${lgs_flg} == 'Y')
		AND LGS_FLG = 'Y'
	#end
	  )
#else

	SELECT VNDR_SEQ
	     , OFC_CD
	     , VNDR_LGL_ENG_NM
	     , VNDR_ABBR_NM
	     , PRNT_VNDR_SEQ
	     , VNDR_CNT_CD
	     , ORG_VNDR_SEQ
	     , ENG_ADDR
	     , EV_SVC_CATE_CD
	FROM (SELECT ROW_NUMBER() OVER (ORDER BY A.VNDR_SEQ) NO
		   , LPAD(A.VNDR_SEQ, 6, '0') VNDR_SEQ
		   , A.OFC_CD
		   , A.VNDR_LGL_ENG_NM
		   , A.VNDR_ABBR_NM
		   , LPAD(A.PRNT_VNDR_SEQ, 6, '0') PRNT_VNDR_SEQ
		   , A.VNDR_CNT_CD
		   , A.VNDR_CNT_CD||LPAD(VNDR_SEQ, 6, '0') ORG_VNDR_SEQ
		   , A.ENG_ADDR
		   , B.EV_SVC_CATE_CD
		FROM MDM_VENDOR A
		   , SPE_SP_SVC_CATE_STUP B     
	       WHERE A.VNDR_SEQ = B.SP_SEQ
		 AND NVL(A.DELT_FLG, 'N') <> 'Y'

	#if (${s_ev_svc_cate_cd} != '')
		 AND B.EV_SVC_CATE_CD = @[s_ev_svc_cate_cd]
	#end    
	#if (${cnt_cd} != '')
		 AND UPPER(VNDR_CNT_CD) like UPPER(@[cnt_cd]) || '%'
	#end    
	#if (${ofc_cd} != '')
		 AND UPPER(OFC_CD) like UPPER(@[ofc_cd]) || '%'
	#end    
	#if (${vndr_nm_eng} != '')
		 AND UPPER(VNDR_LGL_ENG_NM) like '%' || UPPER(@[vndr_nm_eng]) || '%'
	#end    
	#if (${pts_vndr_cd} != '')
		 AND LPAD(PRNT_VNDR_SEQ, 6, '0') = LPAD(@[pts_vndr_cd], 6, '0')
	#end    
	#if (${vndr_cd} != '')
		 AND LPAD(VNDR_SEQ, 6, '0') = LPAD(@[vndr_cd], 6, '0')
	#end
	#if (${lgs_flg} == 'Y')
		AND LGS_FLG = 'Y'
	#end
	  )
#end			]]></sql>
			<params>
				<param name="s_ev_yr" type="12" value="" out="N"/>
				<param name="s_eg_rhq_cd" type="12" value="" out="N"/>
				<param name="s_eg_ofc_cd" type="12" value="" out="N"/>
				<param name="s_ev_svc_cate_cd" type="12" value="" out="N"/>
				<param name="eg_id" type="12" value="" out="N"/>
				<param name="cnt_cd" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="vndr_nm_eng" type="12" value="" out="N"/>
				<param name="pts_vndr_cd" type="12" value="" out="N"/>
				<param name="vndr_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
