<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EurOceanFeederCostManageDBDAOSearchFeederCostRSQL">
			<desc><![CDATA[searchFeederCost

* History
2015.02.03 전지예 CHM-201533794 [AOC] 45' Cost 추가]]></desc>
			<sql><![CDATA[
SELECT  D.FM_NOD_CD
      , D.TO_NOD_CD
      , DECODE(D.PCTL_IO_BND_CD, 'O', 'Pre', 'I', 'Post') PCTL_IO_BND_NM
      , D.DIR_CD
      , D.WTR_RCV_TERM_CD
      , D.WTR_DE_TERM_CD
	  , D.CURR_CD
      , D.FDR_20FT_TTL_AMT
      , D.FDR_40FT_TTL_AMT
      , D.FDR_45FT_TTL_AMT -- 45' Cost 추가
      , D.SCC_CD
      , D.MB_20FT_RTO
      , D.MB_40FT_RTO
      , D.MB_45FT_RTO -- 45' Cost 추가
      , D.TRSP_20FT_COST_SYS_SRC_CD
      , COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD03050', D.TRSP_20FT_COST_SYS_SRC_CD) TRSP_20FT_COST_SYS_SRC_NM
      , D.TRSP_20FT_COST_AMT
      , D.TRSP_20FT_ADJ_COST_AMT
      , DECODE(TRSP_20FT_AGMT_WGT,999999.99,'MAX',TO_CHAR(TRSP_20FT_AGMT_WGT))  AGMT_WGT_20FT
      , D.TRSP_20FT_TTL_COST_AMT
      , D.TRSP_40FT_COST_SYS_SRC_CD
      , COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD03050', D.TRSP_40FT_COST_SYS_SRC_CD) TRSP_40FT_COST_SYS_SRC_NM
      , D.TRSP_40FT_COST_AMT
      , D.TRSP_40FT_ADJ_COST_AMT
      , DECODE(TRSP_40FT_AGMT_WGT,999999.99,'MAX',TO_CHAR(TRSP_40FT_AGMT_WGT))  AGMT_WGT_40FT
      , D.TRSP_40FT_TTL_COST_AMT
      -- 45' Cost 추가 start
      , D.TRSP_45FT_COST_SYS_SRC_CD
      , COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD03050', D.TRSP_45FT_COST_SYS_SRC_CD) TRSP_45FT_COST_SYS_SRC_NM
      , D.TRSP_45FT_COST_AMT
      , D.TRSP_45FT_ADJ_COST_AMT
      , DECODE(TRSP_45FT_AGMT_WGT,999999.99,'MAX',TO_CHAR(TRSP_45FT_AGMT_WGT))  AGMT_WGT_45FT
      , D.TRSP_45FT_TTL_COST_AMT
      -- 45' Cost 추가 end
      , D.MTY_TRSP_20FT_COST_SYS_SRC_CD
      , COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD03050', D.MTY_TRSP_20FT_COST_SYS_SRC_CD) MTY_TRSP_20FT_COST_SYS_SRC_NM
      , D.MTY_TRSP_20FT_COST_AMT
      , D.MTY_TRSP_20FT_ADJ_COST_AMT
      , D.MTY_TRSP_20FT_TTL_COST_AMT
      , D.MTY_TRSP_40FT_COST_SYS_SRC_CD
      , COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD03050', D.MTY_TRSP_40FT_COST_SYS_SRC_CD) MTY_TRSP_40FT_COST_SYS_SRC_NM
      , D.MTY_TRSP_40FT_COST_AMT
      , D.MTY_TRSP_40FT_ADJ_COST_AMT
      , D.MTY_TRSP_40FT_TTL_COST_AMT
      -- 45' Cost 추가 start
      , D.MTY_TRSP_45FT_COST_SYS_SRC_CD
      , COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD03050', D.MTY_TRSP_45FT_COST_SYS_SRC_CD) MTY_TRSP_45FT_COST_SYS_SRC_NM
      , D.MTY_TRSP_45FT_COST_AMT
      , D.MTY_TRSP_45FT_ADJ_COST_AMT
      , D.MTY_TRSP_45FT_TTL_COST_AMT
      -- 45' Cost 추가 end
      , D.TML_20FT_COST_SYS_SRC_CD
      , COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD03050', D.TML_20FT_COST_SYS_SRC_CD) TML_20FT_COST_SYS_SRC_NM
      , D.TML_20FT_COST_AMT
      , D.TML_20FT_ADJ_COST_AMT
      , D.TML_20FT_TTL_COST_AMT
      , D.TML_40FT_COST_SYS_SRC_CD
      , COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD03050', D.TML_40FT_COST_SYS_SRC_CD) TML_40FT_COST_SYS_SRC_NM
      , D.TML_40FT_COST_AMT
      , D.TML_40FT_ADJ_COST_AMT
      , D.TML_40FT_TTL_COST_AMT
      -- 45' Cost 추가 start
      , D.TML_45FT_COST_SYS_SRC_CD
      , COMMCODE_PKG.GET_COMDTL_NAME_FNC('CD03050', D.TML_45FT_COST_SYS_SRC_CD) TML_45FT_COST_SYS_SRC_NM
      , D.TML_45FT_COST_AMT
      , D.TML_45FT_ADJ_COST_AMT
      , D.TML_45FT_TTL_COST_AMT
      -- 45' Cost 추가 end
      , D.VNDR_SEQ
      , ( SELECT VNDR_LGL_ENG_NM FROM MDM_VENDOR V WHERE V.VNDR_SEQ = D.VNDR_SEQ ) VNDR_NM
      , GREATEST( NVL(D.TRSP_20FT_AGMT_OLD_FLG,'N'), NVL(D.TRSP_40FT_AGMT_OLD_FLG,'N'), NVL(D.TRSP_45FT_AGMT_OLD_FLG,'N') ) AGMT_OLD_FLG
      , D.COST_TRF_ROUT_SEQ
      , D.COST_TRF_NO
      , '' UPD_USR_ID
FROM    AOC_EUR_FDR_TRF_HDR M
      , AOC_EUR_FDR_TRF_DTL D
WHERE   M.COST_TRF_NO = D.COST_TRF_NO
AND     M.COST_TRF_STS_CD IN ('B','U','C')
AND     D.COST_TRF_NO = @[in_cost_trf_no]

#if (${in_from_nod_cd} != '') 
AND     D.FM_NOD_CD LIKE @[in_from_nod_cd]||'%'
#end

#if (${in_to_nod_cd} != '') 
AND     D.TO_NOD_CD LIKE @[in_to_nod_cd]||'%'
#end			]]></sql>
			<params>
				<param name="in_cost_trf_no" type="12" value="" out="N"/>
				<param name="in_from_nod_cd" type="12" value="" out="N"/>
				<param name="in_to_nod_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
