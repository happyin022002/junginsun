<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TrsAdvanceAuditDBDAOTrsPreAudCrteListUSQL">
			<desc><![CDATA[TrsPreAudCrteList]]></desc>
			<sql><![CDATA[
MERGE INTO EAS_TRSP_AUTO_AUD_CRTE K USING(
        SELECT
           @[aud_ofc_cd]      AS AUD_OFC_CD
          ,@[trsp_crr_mod_cd] AS TRSP_CRR_MOD_CD
          ,@[cgo_tp_cd]       AS CGO_TP_CD
          ,@[expn_aud_crte_tp_cd] AS EXPN_AUD_CRTE_TP_CD
         FROM DUAL 
        ) B
        ON( K.AUD_OFC_CD            = B.AUD_OFC_CD
        AND K.TRSP_CRR_MOD_CD       = B.TRSP_CRR_MOD_CD
        AND K.CGO_TP_CD             = B.CGO_TP_CD
        AND K.EXPN_AUD_CRTE_TP_CD   = B.EXPN_AUD_CRTE_TP_CD
        ) 
        WHEN MATCHED THEN
        UPDATE
        SET K.EXPN_AUD_TGT_FLG  = DECODE(@[expn_aud_tgt_flg],'0','N','Y')
           ,K.EXPN_MAX_PRMT_RTO = @[expn_max_prmt_rto]
           ,K.EXPN_PRMT_RTO_RSN = @[expn_prmt_rto_rsn]
           ,K.CRE_OFC_CD        = @[cre_ofc_cd]
           ,K.UPD_DT            = SYSDATE
           ,K.UPD_USR_ID        = @[upd_usr_id]
        WHEN NOT MATCHED THEN
        INSERT(
             K.AUD_OFC_CD
            ,K.TRSP_CRR_MOD_CD
            ,K.CGO_TP_CD
            ,K.EXPN_AUD_CRTE_TP_CD
            ,K.EXPN_MAX_PRMT_RTO
            ,K.EXPN_AUD_TGT_FLG
            ,K.EXPN_PRMT_RTO_RSN
            ,K.CRE_OFC_CD
            ,K.CRE_USR_ID
            ,K.CRE_DT
            ,K.UPD_USR_ID
            ,K.UPD_DT
        ) VALUES(
             @[aud_ofc_cd]
            ,@[trsp_crr_mod_cd]
            ,@[cgo_tp_cd]
            ,@[expn_aud_crte_tp_cd]
            ,@[expn_max_prmt_rto]
            ,DECODE(@[expn_aud_tgt_flg],'0','N','Y')
            ,@[expn_prmt_rto_rsn]
            ,@[cre_ofc_cd]
            ,@[upd_usr_id]
            ,SYSDATE
            ,@[upd_usr_id]
            ,SYSDATE
        )			]]></sql>
			<params>
				<param name="aud_ofc_cd" type="12" value="" out="N"/>
				<param name="trsp_crr_mod_cd" type="12" value="" out="N"/>
				<param name="cgo_tp_cd" type="12" value="" out="N"/>
				<param name="expn_aud_crte_tp_cd" type="12" value="" out="N"/>
				<param name="expn_aud_tgt_flg" type="12" value="" out="N"/>
				<param name="expn_max_prmt_rto" type="12" value="" out="N"/>
				<param name="expn_prmt_rto_rsn" type="12" value="" out="N"/>
				<param name="cre_ofc_cd" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
