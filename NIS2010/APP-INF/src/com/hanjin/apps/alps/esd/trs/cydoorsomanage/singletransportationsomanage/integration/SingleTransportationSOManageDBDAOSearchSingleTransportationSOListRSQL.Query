<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SingleTransportationSOManageDBDAOSearchSingleTransportationSOListRSQL">
			<desc><![CDATA[CY&DOOR S/O Correction 조회]]></desc>
			<sql><![CDATA[
SELECT  AAA.REPO_PLN_ID
      , AAA.PLN_YRWK
      , AAA.REF_ID
      , AAA.REF_SEQ
      , AAA.TRSP_SO_CMB_TP_CD
      , (AAA.TRSP_SO_OFC_CTY_CD||AAA.TRSP_SO_SEQ)   AS TRSP_SO_OFC_SEQ
      , AAA.PRE_PULL_FLG
      , DECODE(AAA.PRE_PULL_FLG, 'Y', 1, 0) AS PRE_PULL_CHK
      , AAA.COP_NO
      , AAA.TRSP_SO_SEQ
      , AAA.COST_ACT_GRP_SEQ
      , AAA.EQ_NO
      , AAA.EQ_TPSZ_CD
      , AAA.ORG_EQ_TPSZ_CD
      , (AAA.TRSP_WO_OFC_CTY_CD||AAA.TRSP_WO_SEQ)   AS TRSP_WO_OFC_SEQ
      , AAA.COST_ACT_GRP_CD
      , AAA.VNDR_SEQ
      , AAA.TRSP_COST_DTL_MOD_CD
      , AAA.TRSP_CRR_MOD_CD
      , AAA.TRSP_CRR_MOD_CD TRSP_CRR_MOD_CD2
      , AAA.FM_NOD_CD
      , AAA.FM_NOD_YARD
      , AAA.TO_NOD_CD
      , AAA.TO_NOD_YARD
      , AAA.VIA_NOD_CD
      , AAA.VIA_NOD_YARD
      , AAA.DOR_NOD_CD
      , AAA.DOR_NOD_YARD
      , '' FM_NOD_CD2
      , '' FM_NOD_YARD2
      , '' TO_NOD_CD2
      , '' TO_NOD_YARD2
      , '' VIA_NOD_CD2
      , '' VIA_NOD_YARD2
      , '' DOR_NOD_CD2
      , '' DOR_NOD_YARD2
      , AAA.BKG_NO
      , AAA.BL_NO
      , AAA.CONTI_CD
      , SUBSTR(AAA.CNEE_CUST_INFO,1,2)                  AS CNEE_CUST_CNT_CD
      , TO_NUMBER(TRIM(SUBSTR(AAA.CNEE_CUST_INFO,3,8))) AS CNEE_CUST_SEQ
      , SUBSTR(AAA.CNEE_CUST_INFO,11,500)               AS CNEE_CUST_NM
      , SUBSTR(AAA.SHPR_CUST_INFO,1,2)                  AS SHPR_CUST_CNT_CD
      , TO_NUMBER(TRIM(SUBSTR(AAA.SHPR_CUST_INFO,3,8))) AS SHPR_CUST_SEQ
      , SUBSTR(AAA.SHPR_CUST_INFO,11,500)               AS SHPR_CUST_NM
      , AAA.NTFY_CUST_NM
      , AAA.N1ST_NOD_PLN_DT
      , AAA.N1ST_NOD_PLN_DT_HMS
      , AAA.LST_NOD_PLN_DT
      , AAA.LST_NOD_PLN_DT_HMS
      , AAA.DOR_NOD_PLN_DT
      , AAA.DOR_NOD_PLN_DT_HMS
      , AAA.TRSP_BND_CD
      , AAA.CUST_NOMI_TRKR_FLG
      , AAA.TRSP_SO_CMB_SEQ
      , AAA.CGO_TP_CD
      , AAA.CNTR_WGT
      , AAA.WGT_MEAS_UT_CD
      , AAA.CMDT_CD
      , AAA.CNTR_KGS_WGT
      , AAA.CNTR_LBS_WGT
      , AAA.TRUNKVVD
      , AAA.CUST_CNT_CD
      , AAA.ACT_CUST_CD
      , AAA.DOR_DE_ADDR
      , AAA.MLT_STOP_DE_FLG
      , AAA.SPOT_BID_FLG
	  , AAA.SPOT_BID_NO
      , AAA.SPOT_BID_DUE_DT
	  , AAA.SPOT_BID_DUE_DT_HMS
      , AAA.DOR_SVC_TP_CD
      , AAA.DOR_SVC_TP_CD AS DOR_SVC_TP_CD2
      , AAA.INTER_RMK
      , AAA.CRE_USR_ID
      --, AAA.UPD_USR_ID
      , AAA.TRSP_SO_OFC_CTY_CD
      , AAA.IB_VVD_CD
      , AAA.OB_VVD_CD
      , AAA.SPCL_INSTR_RMK
      , AAA.BKG_RCVDE_TERM_CD
      , AAA.SLAN_CD
      , AAA.POR_CD
      , AAA.POL_CD
      , AAA.POD_CD
      , AAA.DEL_CD
      , AAA.CRE_OFC_CD
      , AAA.SPCL_CGO_CNTR_TP_CD
      , SUBSTR(AAA.FOC, 1, 1) AS CGOR_FRT_PAY_IND_FLG
      , SUBSTR(AAA.FOC, 2, 1) AS CGOR_ORG_BL_RCVR_IND_FLG
      , SUBSTR(AAA.FOC, 3, 1) AS CGOR_CSTMS_ACPT_RE_IND_FLG
      , AAA.IBD_CSTMS_CLR_LOC_CD
      , AAA.OWNR_CO_CD
      , SUBSTR(AAA.MST_CNTR, 1, 1) AS IMDT_EXT_FLG
      , SUBSTR(AAA.MST_CNTR, 2)    AS LSTM_CD
      , AAA.LST_LOC_CD
      , '' LSTM_EXP_FLG
      , AAA.SEALNO
      , AAA.SEALNO2
      , SUBSTR(PKGCODE_NOOFPKG,1,2)        AS PKGCODE
      , TRIM(SUBSTR(PKGCODE_NOOFPKG,3,12)) AS NOOFPKG
      , AAA.SC_NO
      , AAA.RFANO
      , AAA.TRSP_COST_DTL_MOD_SEP
      , TRIM(SUBSTR(TRO_CNFM,1,3))   AS DCGO_SEQ
      , TRIM(SUBSTR(TRO_CNFM,4,3))   AS RC_SEQ
      , TRIM(SUBSTR(TRO_CNFM,7,3))   AS AWK_CGO_SEQ
      , TRIM(SUBSTR(TRO_CNFM,10,50)) AS CUSTOMSCLEARANCENO
      , DECODE(TRIM(SUBSTR(TRO_CNFM,10,50)),NULL,'','Y') CUSTOMSCLEARANCE
      , DECODE(AAA.CONTI_CD, 'E', TRIM(SUBSTR(TRO_CNFM,60)), MDM_CO_CMDT_NM) CMDT_NAME
      , AAA.CNTR_PKUP_NO
      , AAA.AVAL_DT
      , AAA.AVAL_DT_HMS
      , AAA.LST_FREE_DT
      , AAA.LST_FREE_DT_HMS
      , AAA.TRO_CNFM
      , AAA.TRO_SEQ
      , AAA.BKG_QTY
      , '' TRSP_RQST_BKG_FLG
      , AAA.SUB_EQ_TPSZ_CD
      , AAA.CNTR_SUB_FLG
      , AAA.FCTRY_NM
      , AAA.CNTC_PSON_NM
      , AAA.CNTC_PSON_PHN_NO
      , AAA.CNTC_PSON_FAX_NO
      , AAA.DOR_PST_CD
      , AAA.TRO_CFM_OFC_CD
      , AAA.TRO_CFM_USR_ID
      , TO_CHAR(AAA.TRO_CFM_UPD_DT, 'YYYYMMDD')  AS  TRO_CFM_UPD_DT1
      , TO_CHAR(AAA.TRO_CFM_UPD_DT, 'HH24MISS')  AS  TRO_CFM_UPD_DT2
      , AAA.TRO_LOD_REF_NO
      , AAA.BKG_STS_CD
      , AAA.REV_CURR_CD
      , AAA.TRSP_RQST_ORD_REV_AMT
      , '' TRSP_CRR_MOD_CD2
      , '' LSE_CNTR_FLG
      , AAA.RPLN_UMCH_FLG
      , SUBSTR(AAA.RQST_INFO, 1, INSTR(AAA.RQST_INFO, '^', 1, 1) -1) AS TRNS_RQST_OFC_CD
      , SUBSTR(AAA.RQST_INFO, INSTR(AAA.RQST_INFO, '^', 1, 1) + 1, INSTR(AAA.RQST_INFO, '^', 1, 2) - INSTR(AAA.RQST_INFO, '^', 1, 1) - 1) AS TRNS_RQST_USR_ID
      , SUBSTR(AAA.RQST_INFO, INSTR(AAA.RQST_INFO, '^', 1, 2) + 1, INSTR(AAA.RQST_INFO, '^', 1, 3) - INSTR(AAA.RQST_INFO, '^', 1, 2) - 1) AS TRNS_RQST_RSN
#if (${rad_wo_issued} == 'YES')
      , AAA.TTL_DIST      
      , AAA.LNK_DIST_DIV_CD
#else
	  ,SUBSTR(AAA.PRD_DIST, INSTR(AAA.PRD_DIST, '/') + 1) TTL_DIST
      ,SUBSTR(AAA.PRD_DIST, 1, INSTR(AAA.PRD_DIST, '/') - 1) LNK_DIST_DIV_CD
#end
	  , AAA.CNG_RSN_DESC 
	  , AAA.CNG_RSN_DESC AS CNG_RSN_DESC2
	  , AAA.NON_RT_STS_CD
  FROM (
    SELECT (SELECT  RPAD(NVL(TO_CHAR(DCGO_SEQ), ' '), 3, ' ')
                  ||RPAD(NVL(TO_CHAR(RC_SEQ), ' '), 3, ' ')
                  ||RPAD(NVL(TO_CHAR(AWK_CGO_SEQ), ' '), 3, ' ')
                  ||RPAD(NVL(CSTMS_CLR_NO, ' '), 50, ' ')
                  ||NVL(REP_CMDT_DESC, ' ')
              FROM BKG_EUR_TRO
             WHERE BKG_NO    = AA.BKG_NO
               AND IO_BND_CD = AA.TRSP_BND_CD
               AND TRO_SEQ   = AA.TRO_SEQ) TRO_HD
           ,DECODE(AA.TRO_SEQ, NULL, 'N', 'Y') AS TRO_CNFM
           ,(
            SELECT  SC.TRNS_RQST_OFC_CD
                  || '^' ||SC.TRNS_RQST_USR_ID
                  || '^' ||SC.TRNS_RQST_RSN
                  || '^'
              FROM SCE_PLN_SO_LIST SC
             WHERE SC.COP_NO = AA.COP_NO
               AND SC.COST_ACT_GRP_SEQ = AA.COST_ACT_GRP_SEQ
            ) RQST_INFO
           ,AA.*
      FROM (
            SELECT
                  A.REPO_PLN_ID
                , A.CONTI_CD
                , A.PLN_YRWK
                , A.REF_ID
                , A.REF_SEQ
                , A.TRSP_SO_CMB_TP_CD
                , A.COP_NO
                , A.TRSP_SO_SEQ
                , A.PRE_PULL_FLG
                , A.TRSP_WO_OFC_CTY_CD
                , A.TRSP_WO_SEQ
                , A.CNTR_KGS_WGT
                , A.CNTR_LBS_WGT
                , A.COST_ACT_GRP_SEQ
                , A.EQ_NO
                , A.EQ_TPSZ_CD
                , A.ORG_EQ_TPSZ_CD
                , A.COST_ACT_GRP_CD
                , A.VNDR_SEQ
                , DECODE(A.TRSP_COST_DTL_MOD_CD, 'CY', 'CY', 'DR', 'DOOR', 'CY') TRSP_COST_DTL_MOD_CD
                , A.TRSP_COST_DTL_MOD_CD TRSP_COST_DTL_MOD_SEP
                , A.TRSP_CRR_MOD_CD
                , SUBSTR(A.FM_NOD_CD,1,5) FM_NOD_CD
                , SUBSTR(A.FM_NOD_CD,6,2) FM_NOD_YARD
                , SUBSTR(A.TO_NOD_CD,1,5) TO_NOD_CD
                , SUBSTR(A.TO_NOD_CD,6,2) TO_NOD_YARD
                , SUBSTR(A.VIA_NOD_CD,1,5) VIA_NOD_CD
                , SUBSTR(A.VIA_NOD_CD,6,2) VIA_NOD_YARD
                , SUBSTR(A.DOR_NOD_CD,1,5) DOR_NOD_CD
                , SUBSTR(A.DOR_NOD_CD,6,2) DOR_NOD_YARD
                , A.BKG_NO BKG_NO
                , A.BL_NO
                , TO_CHAR(A.N1ST_NOD_PLN_DT, 'YYYYMMDD')   N1ST_NOD_PLN_DT
                , TO_CHAR(A.N1ST_NOD_PLN_DT, 'HH24:MI:SS') N1ST_NOD_PLN_DT_HMS
                , TO_CHAR(A.LST_NOD_PLN_DT, 'YYYYMMDD')    LST_NOD_PLN_DT
                , TO_CHAR(A.LST_NOD_PLN_DT, 'HH24:MI:SS')  LST_NOD_PLN_DT_HMS
                , TO_CHAR(A.DOR_NOD_PLN_DT, 'YYYYMMDD')    DOR_NOD_PLN_DT
                , TO_CHAR(A.DOR_NOD_PLN_DT, 'HH24:MI:SS')  DOR_NOD_PLN_DT_HMS
                , A.TRSP_BND_CD
                , A.CUST_NOMI_TRKR_FLG                     CUST_NOMI_TRKR_FLG
                , (A.CUST_CNT_CD||A.CUST_SEQ)              CUST_CNT_CD
                , (A.ACT_CUST_CNT_CD||A.ACT_CUST_SEQ)      ACT_CUST_CD
                , A.ACT_CUST_CNT_CD
                , A.ACT_CUST_SEQ
                , A.ACT_CUST_ADDR_SEQ
                , A.TRSP_SO_CMB_SEQ
                , A.CGO_TP_CD
                , A.CNTR_WGT
                , A.WGT_MEAS_UT_CD
                , A.CMDT_CD
                , (A.VSL_CD||A.SKD_VOY_NO||A.SKD_DIR_CD) TRUNKVVD
                , A.DOR_DE_ADDR
                , A.MLT_STOP_DE_FLG
                , A.DOR_SVC_TP_CD
                , A.INTER_RMK
                , A.CRE_USR_ID
                , A.UPD_USR_ID
                , A.TRSP_SO_OFC_CTY_CD
                , A.IB_VVD_CD
                , A.OB_VVD_CD
                , REPLACE(A.SPCL_INSTR_RMK, CHR(13)||CHR(10), ' ') SPCL_INSTR_RMK
                , A.BKG_RCVDE_TERM_CD
                , A.SLAN_CD
                , A.POR_CD
                , A.POL_CD
                , A.POD_CD
                , A.DEL_CD
                , A.CRE_OFC_CD
                , A.SPCL_CGO_CNTR_TP_CD
                , A.IBD_CSTMS_CLR_LOC_CD
                , A.OWNR_CO_CD
                , A.LST_LOC_CD
                , B.SC_NO SC_NO
                , A.CNTR_PKUP_NO
                , TO_CHAR(A.AVAL_DT, 'YYYYMMDD')       AVAL_DT
                , TO_CHAR(A.AVAL_DT, 'HH24:MI:SS')     AVAL_DT_HMS
                , TO_CHAR(A.LST_FREE_DT, 'YYYYMMDD')   LST_FREE_DT
                , TO_CHAR(A.LST_FREE_DT, 'HH24:MI:SS') LST_FREE_DT_HMS
                , A.SUB_EQ_TPSZ_CD
                , A.CNTR_SUB_FLG
                , A.FCTRY_NM
                , A.CNTC_PSON_NM
                , A.CNTC_PSON_PHN_NO
                , A.CNTC_PSON_FAX_NO
                , A.DOR_PST_CD
                , A.TRO_CFM_OFC_CD
                , A.TRO_CFM_USR_ID
                , A.TRO_CFM_UPD_DT
                , A.TRO_LOD_REF_NO
                , A.REV_CURR_CD
                , A.TRSP_RQST_ORD_REV_AMT
                , B.MTY_BKG_STS_CD AS BKG_STS_CD
                , B.RFA_NO AS RFANO
                ,(SELECT LPAD(PCK_TP_CD, 2, ' ') || LPAD(TO_CHAR(PCK_QTY), 12, ' ')
                    FROM BKG_CONTAINER
                   WHERE BKG_NO  = A.BKG_NO
                     AND CNTR_NO = A.EQ_NO) AS PKGCODE_NOOFPKG
                ,(SELECT CNTR_SEAL_NO FROM BKG_CNTR_SEAL_NO WHERE BKG_NO  = A.BKG_NO AND CNTR_NO = A.EQ_NO AND CNTR_SEAL_SEQ = 1) AS SEALNO
                ,(SELECT CNTR_SEAL_NO FROM BKG_CNTR_SEAL_NO WHERE BKG_NO  = A.BKG_NO AND CNTR_NO = A.EQ_NO AND CNTR_SEAL_SEQ = 2) AS SEALNO2
                , (SELECT TRO_SEQ
                     FROM SCE_TRO_MAPG
                    WHERE COP_NO        = A.COP_NO
                      AND IO_BND_CD     = A.TRSP_BND_CD
                      AND AREA_CONTI_CD = A.CONTI_CD) AS TRO_SEQ
                , (SELECT CMDT_NM
                     FROM MDM_COMMODITY
                    WHERE CMDT_CD = A.CMDT_CD) AS MDM_CO_CMDT_NM
                , (SELECT LPAD(BC.CUST_CNT_CD, 2, ' ') || LPAD(TO_CHAR(BC.CUST_SEQ), 8, ' ') || LPAD(BC.CUST_NM, 500, ' ')
                     FROM BKG_CUSTOMER BC
                    WHERE BC.BKG_NO = A.BKG_NO
                      AND BC.BKG_CUST_TP_CD = 'C')    CNEE_CUST_INFO
                , (SELECT LPAD(BC.CUST_CNT_CD, 2, ' ') || LPAD(TO_CHAR(BC.CUST_SEQ), 8, ' ') || LPAD(BC.CUST_NM, 500, ' ')
                     FROM BKG_CUSTOMER BC
                    WHERE BC.BKG_NO = A.BKG_NO
                      AND BC.BKG_CUST_TP_CD = 'S')    SHPR_CUST_INFO
                , (SELECT BC.CUST_NM
                     FROM BKG_CUSTOMER BC
                    WHERE BC.BKG_NO = A.BKG_NO
                      AND BC.BKG_CUST_TP_CD = 'N')    NTFY_CUST_NM
                , (SELECT NVL(FRT_CLT_FLG, ' ')||NVL(OBL_RDEM_FLG, ' ')||DECODE(CSTMS_CLR_CD, 'Y', 'Y', 'N')
                  FROM BKG_CGO_RLSE
                 WHERE BL_NO = A.BL_NO) FOC
                , (SELECT NVL(IMDT_EXT_FLG, ' ')||NVL(LSTM_CD, ' ')
                     FROM MST_CONTAINER
                    WHERE CNTR_NO  = A.EQ_NO) MST_CNTR
                , (SELECT DECODE(NVL(QTY.EQ_SUBST_CGO_QTY, 0), 0, QTY.CNTR_TPSZ_CD
                          ||' '||QTY.OP_CNTR_QTY, QTY.CNTR_TPSZ_CD||' '||QTY.OP_CNTR_QTY
                          ||'-SUB '||QTY.EQ_SUBST_CNTR_TPSZ_CD||' '||QTY.EQ_SUBST_CGO_QTY
                          )
                     FROM BKG_QUANTITY QTY
                    WHERE A.BKG_NO  = QTY.BKG_NO
                      AND A.EQ_TPSZ_CD   = QTY.CNTR_TPSZ_CD) BKG_QTY
                , A.RPLN_UMCH_FLG
				, A.TTL_DIST
				, A.LNK_DIST_DIV_CD
   		   		,TRS_COMMON_PKG.GET_PRD_DISTANCE_FNC (A.FM_NOD_CD
													 ,A.TO_NOD_CD
													 ,A.VIA_NOD_CD
													 ,A.DOR_NOD_CD
													 ,A.TRSP_BND_CD
													 ,A.TRSP_COST_DTL_MOD_CD
													 ,A.TRSP_CRR_MOD_CD
	                                                 ) PRD_DIST
				, REPLACE(A.CNG_RSN_DESC, CHR(13)||CHR(10), ' ') CNG_RSN_DESC
                ,B.NON_RT_STS_CD
			    ,A.SPOT_BID_FLG
                ,A.SPOT_BID_NO
			    ,TO_CHAR(A.SPOT_BID_DUE_DT, 'YYYYMMDD')   SPOT_BID_DUE_DT
                ,TO_CHAR(A.SPOT_BID_DUE_DT, 'HH24:MI:SS') SPOT_BID_DUE_DT_HMS
         FROM  TRS_TRSP_SVC_ORD            A
              ,BKG_BOOKING                 B
              #if (${frm_plandate} != '' && ${dateCondition} == 'W')
                 ,TRS_TRSP_WRK_ORD C
              #end
        WHERE  A.BKG_NO        = B.BKG_NO
        AND    A.CRE_OFC_CD      = @[form_usr_ofc_cd]
              #if (${frm_plandate} != '' && ${to_plandate} != '' )
                  #if (${dateCondition} == 'S')
                      AND A.LOCL_CRE_DT BETWEEN TO_DATE(@[frm_plandate], 'YYYYMMDD') AND TO_DATE(@[to_plandate], 'YYYYMMDD')+0.99999
                  #elseif (${dateCondition} == 'P')
                      AND A.N1ST_NOD_PLN_DT BETWEEN TO_DATE(@[frm_plandate], 'YYYYMMDD') AND TO_DATE(@[to_plandate], 'YYYYMMDD')+0.99999
                  #elseif (${dateCondition} == 'D')
                      AND A.DOR_NOD_PLN_DT BETWEEN TO_DATE(@[frm_plandate], 'YYYYMMDD') AND TO_DATE(@[to_plandate], 'YYYYMMDD')+0.99999
                  #elseif (${dateCondition} == 'W')
                      AND A.TRSP_WO_OFC_CTY_CD 					= C.TRSP_WO_OFC_CTY_CD
                      AND A.TRSP_WO_SEQ        					= C.TRSP_WO_SEQ
                      AND C.LOCL_CRE_DT BETWEEN TO_DATE(@[frm_plandate], 'YYYYMMDD') AND TO_DATE(@[to_plandate], 'YYYYMMDD')+0.99999
				  #elseif (${dateCondition} == 'B')
                      AND A.SPOT_BID_DUE_DT BETWEEN TO_DATE(@[frm_plandate], 'YYYYMMDD') AND TO_DATE(@[to_plandate], 'YYYYMMDD')+0.99999
                  #end
              #end
        AND  A.HJL_NO          IS NULL
        AND  A.DELT_FLG        = 'N'
        AND  A.TRSP_SO_TP_CD   = 'Y'

        #if (${svc_provider} != '')
            AND A.VNDR_SEQ  = @[svc_provider]
        #end

        #if (${bound} != 'ALL')
            AND A.TRSP_BND_CD  = @[bound]
        #end

        #if (${transmode} != 'ALL')
            AND A.TRSP_CRR_MOD_CD  = @[transmode]
        #end

        #if (${costmode} != 'ALL')
            AND A.TRSP_COST_DTL_MOD_CD  = @[costmode]
        #end

        #if (${frmnode} != '')
            AND A.FM_NOD_CD LIKE @[frmnode] ||'%'
        #end
        #if (${vianode} != '')
            AND A.VIA_NOD_CD LIKE @[vianode] ||'%'
        #end
        #if (${tonode} != '')
            AND A.TO_NOD_CD LIKE @[tonode] ||'%'
        #end
        #if (${dorloc} != '')
            AND A.DOR_NOD_CD LIKE @[dorloc] ||'%'
        #end

        #if (${rad_wo_issued} == 'YES')
           AND A.TRSP_SO_STS_CD = 'I' 
        #else
           AND A.TRSP_SO_STS_CD IN ('C', 'R')
        #end

        #if ($arr_bkgno.size() > 0) 
            AND A.BKG_NO in (
            #foreach( ${key} in ${arr_bkgno}) 
	            #if($velocityCount < $arr_bkgno.size()) 
		            '$key', 
	            #else 
		            '$key' 
	            #end 
            #end
		    )
        #end

        #if ($arr_billno.size() > 0) 
            AND A.BL_NO in (
            #foreach( ${key} in ${arr_billno}) 
	            #if($velocityCount < $arr_billno.size()) 
		            '$key', 
	            #else 
		            '$key' 
	            #end 
            #end
		    )
        #end

        #if ($arr_cntrno.size() > 0) 
            AND A.EQ_NO in (
            #foreach( ${key} in ${arr_cntrno}) 
	            #if($velocityCount < $arr_cntrno.size()) 
		            '$key', 
	            #else 
		            '$key' 
	            #end 
            #end
		    )
        #end

        #if ($arr_trunkvvd.size() > 0) 
            AND (A.VSL_CD,A.SKD_VOY_NO,A.SKD_DIR_CD) in (
            #foreach( ${key} in ${arr_trunkvvd}) 
	            #if($velocityCount < $arr_trunkvvd.size()) 
		            (SUBSTR('$key',1,4),SUBSTR('$key',5,4),SUBSTR('$key',9,1)),
	            #else 
		            (SUBSTR('$key',1,4),SUBSTR('$key',5,4),SUBSTR('$key',9,1))
	            #end 
            #end
		    )
        #end

        #if ($arr_so_no.size() > 0) 
            AND (A.TRSP_SO_OFC_CTY_CD, A.TRSP_SO_SEQ) in (
            #foreach( ${key} in ${arr_so_no}) 
	            #if($velocityCount < $arr_so_no.size()) 
		            (SUBSTR('$key',1,3),SUBSTR('$key',4)),
	            #else 
		            (SUBSTR('$key',1,3),SUBSTR('$key',4))
	            #end 
            #end
		    )
        #end

        #if ($arr_wo_no.size() > 0) 
            AND (A.TRSP_WO_OFC_CTY_CD, A.TRSP_WO_SEQ) in (
            #foreach( ${key} in ${arr_wo_no}) 
	            #if($velocityCount < $arr_wo_no.size()) 
		            (SUBSTR('$key',1,3),SUBSTR('$key',4)),
	            #else 
		            (SUBSTR('$key',1,3),SUBSTR('$key',4))
	            #end 
            #end
		    )
        #end

        #if ($arr_zip_code.size() > 0) 
            AND A.DOR_PST_CD in (
            #foreach( ${key} in ${arr_zip_code}) 
	            #if($velocityCount < $arr_zip_code.size()) 
		            '$key', 
	            #else 
		            '$key' 
	            #end 
            #end
		    )
        #end
		#if(${spot_bid_flg} == 'N')
           AND A.SPOT_BID_FLG <> 'Y'
	    #elseif(${spot_bid_flg} == 'Y')
           AND A.SPOT_BID_FLG = 'Y'
	    #end
		#if(${spot_bid_no} != '')
           AND A.SPOT_BID_NO = @[spot_bid_no]
		#end

     ) AA
 ) AAA			]]></sql>
			<params>
				<param name="form_usr_ofc_cd" type="12" value="" out="N"/>
				<param name="frm_plandate" type="12" value="20080520" out="N"/>
				<param name="to_plandate" type="12" value="20080603" out="N"/>
				<param name="svc_provider" type="12" value="1" out="N"/>
				<param name="bound" type="12" value="1" out="N"/>
				<param name="transmode" type="12" value="1" out="N"/>
				<param name="costmode" type="12" value="1" out="N"/>
				<param name="frmnode" type="12" value="1" out="N"/>
				<param name="vianode" type="12" value="1" out="N"/>
				<param name="tonode" type="12" value="1" out="N"/>
				<param name="dorloc" type="12" value="1" out="N"/>
				<param name="spot_bid_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
