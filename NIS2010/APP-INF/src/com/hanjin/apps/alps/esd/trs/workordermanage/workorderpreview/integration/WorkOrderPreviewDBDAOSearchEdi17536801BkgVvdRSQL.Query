<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WorkOrderPreviewDBDAOSearchEdi17536801BkgVvdRSQL">
			<desc><![CDATA[EDI BKGVVD GROUP
VENDOR [114745] UNIFEEDER A/S 가 사용]]></desc>
			<sql><![CDATA[
SELECT DECODE(VVD.VSL_PRE_PST_CD,'S','PRE','T','TRUNK','U','POST','') VVDTYPE
      ,VVD.SLAN_CD        LANE_CD
      ,VVD.VSL_CD||VVD.SKD_VOY_NO||VVD.SKD_DIR_CD VVD
      ,VSL.CALL_SGN_NO    VSL_CALLSIGN
      ,VSL.LLOYD_NO       VSL_LLOYDCODE
      ,VSL.VSL_ENG_NM     VSL_NAME
      ,VSL.VSL_CLSS_FLG   VSL_FLAG
      ,VVD.POL_CD         POL
      ,POL_LOC.LOC_NM     POL_NAME
      ,VVD.POL_YD_CD      POL_YD  
      ,POL_YD.YD_NM       POL_YDNAME
      ,VVD.POD_CD         POD
      ,POD_LOC.LOC_NM     POD_NAME
      ,VVD.POD_YD_CD 	  POD_YD
      ,POD_YD.YD_NM 	  POD_YDNAME
      ,(SELECT TO_CHAR(POL_VSK.VPS_ETA_DT,'YYYYMMDDHH24MI')
          FROM  VSK_VSL_PORT_SKD POL_VSK
         WHERE VVD.VSL_CD = POL_VSK.VSL_CD
           AND VVD.SKD_VOY_NO = POL_VSK.SKD_VOY_NO
           AND VVD.SKD_DIR_CD = POL_VSK.SKD_DIR_CD
           AND VVD.POL_CD =POL_VSK.VPS_PORT_CD
           AND VVD.POL_CLPT_IND_SEQ = POL_VSK.CLPT_IND_SEQ) POLETA
      ,(SELECT TO_CHAR(POL_VSK.VPS_ETD_DT,'YYYYMMDDHH24MI')
          FROM VSK_VSL_PORT_SKD POL_VSK
         WHERE VVD.VSL_CD = POL_VSK.VSL_CD
           AND VVD.SKD_VOY_NO = POL_VSK.SKD_VOY_NO
           AND VVD.SKD_DIR_CD = POL_VSK.SKD_DIR_CD
           AND VVD.POL_CD =POL_VSK.VPS_PORT_CD
           AND VVD.POL_CLPT_IND_SEQ = POL_VSK.CLPT_IND_SEQ) POLETD     
      ,(SELECT TO_CHAR(POD_VSK.VPS_ETA_DT,'YYYYMMDDHH24MI')
          FROM VSK_VSL_PORT_SKD POD_VSK
         WHERE VVD.VSL_CD = POD_VSK.VSL_CD
           AND VVD.SKD_VOY_NO = POD_VSK.SKD_VOY_NO
           AND VVD.SKD_DIR_CD = POD_VSK.SKD_DIR_CD
           AND VVD.POD_CD =POD_VSK.VPS_PORT_CD
           AND VVD.POD_CLPT_IND_SEQ = POD_VSK.CLPT_IND_SEQ ) PODETA
      ,(SELECT TO_CHAR(POD_VSK.VPS_ETD_DT,'YYYYMMDDHH24MI')
          FROM VSK_VSL_PORT_SKD POD_VSK
         WHERE VVD.VSL_CD = POD_VSK.VSL_CD
           AND VVD.SKD_VOY_NO = POD_VSK.SKD_VOY_NO
           AND VVD.SKD_DIR_CD = POD_VSK.SKD_DIR_CD
           AND VVD.POD_CD =POD_VSK.VPS_PORT_CD
           AND VVD.POD_CLPT_IND_SEQ = POD_VSK.CLPT_IND_SEQ  ) PODETD
      ,VSL.CRR_CD         OP_CODE
  FROM BKG_BOOKING BKG
      ,BKG_VVD VVD
      ,MDM_VSL_CNTR VSL
      ,TRS_TRSP_SVC_ORD SO
      ,MDM_LOCATION POL_LOC
      ,MDM_LOCATION POD_LOC
      ,MDM_YARD POL_YD
      ,MDM_YARD POD_YD
  WHERE 1=1
    AND BKG.BKG_NO = VVD.BKG_NO
    AND VVD.VSL_CD = VSL.VSL_CD(+)
    AND BKG.BKG_NO = SO.BKG_NO
    AND VVD.POL_CD = POL_LOC.LOC_CD
    AND VVD.POD_CD = POD_LOC.LOC_CD
    AND VVD.POL_YD_CD = POL_YD.YD_CD
    AND VVD.POD_YD_CD = POD_YD.YD_CD
    AND SO.DELT_FLG = 'N'
    AND SO.TRSP_SO_OFC_CTY_CD = @[trsp_so_ofc_cty_cd]
    AND SO.TRSP_SO_SEQ  = @[trsp_so_seq]
  ORDER BY VVD.VSL_PRE_PST_CD,VVD.VSL_SEQ			]]></sql>
			<params>
				<param name="trsp_so_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="trsp_so_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
