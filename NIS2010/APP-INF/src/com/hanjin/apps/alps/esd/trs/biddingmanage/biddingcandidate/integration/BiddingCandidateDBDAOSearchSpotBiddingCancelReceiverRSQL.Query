<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BiddingCandidateDBDAOSearchSpotBiddingCancelReceiverRSQL">
			<desc><![CDATA[Spot Bidding Cancel e-mail 받을  Address]]></desc>
			<sql><![CDATA[
SELECT REPLACE(WM_CONCAT(DISTINCT MODI_SPOT_BID_VNDR_EML), ',', ';') VNDR_EML_ADDR
  FROM (SELECT SPOT_BID_NO,
               VNDR_SEQ,
               REGEXP_SUBSTR( MODI_SPOT_BID_VNDR_EML, '[^;]+', 1, LEVEL ) AS MODI_SPOT_BID_VNDR_EML ,
               LEVEL AS LV ,
               LAG( LEVEL, 1, 0 ) OVER( PARTITION BY SPOT_BID_NO, VNDR_SEQ
                 ORDER BY LEVEL ) AS LG
          FROM (SELECT SPOT_BID_NO,
                       VNDR_SEQ,
                       MODI_SPOT_BID_VNDR_EML
                  FROM TRS_SPOT_BID_IVT_VNDR
                 WHERE SPOT_BID_NO IN ( 
	#foreach( ${key} in ${arr_bid_no}) 
		#if($velocityCount == 1)						
			'$key'
		#else
	    	,'$key'
		#end
	#end
		)
    AND VNDR_SEQ = @[vndr_seq]
 ) CONNECT BY REGEXP_SUBSTR( MODI_SPOT_BID_VNDR_EML, '[^;]+', 1, LEVEL ) IS NOT NULL )
 WHERE 1=1
   AND LV <> LG
			]]></sql>
			<params>
				<param name="vndr_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
