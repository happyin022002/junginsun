<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="InvoiceInquiryDBDAOsearchInvoiceEquipmentListRSQL">
			<desc><![CDATA[search Invoice Equipment List]]></desc>
			<sql><![CDATA[
SELECT ROWNUM,
	INV.trsp_inv_aud_sts_cd status,
	SVC.trsp_wo_ofc_cty_cd || SVC.trsp_wo_seq wo_no,
	SVC.trsp_cost_dtl_mod_cd,
	SVC.eq_knd_cd,
	SVC.eq_no,
	SVC.eq_tpsz_cd,
	SVC.bkg_no,
	SVC.bl_no,
	SVC.vndr_seq,
	to_char(SVC.apnt_dt,'YYYY-MM-DD') apnt_dt,
	to_char(SVC.de_dt,'YYYY-MM-DD') de_dt,
	SVC.trsp_so_ofc_cty_cd || SVC.trsp_so_seq so_no,
	SVC.trsp_so_sts_cd,
	SVC.trsp_so_tp_cd,
	SVC.inv_no,
	SVC.trsp_inv_act_sts_cd
FROM trs_trsp_inv_wrk INV, trs_trsp_svc_ord SVC
WHERE INV.inv_no IS NOT NULL
	AND INV.inv_no = SVC.inv_no
	AND INV.delt_flg = 'N'
	AND INV.inv_no = TRIM(@[inv_no])
	AND INV.wo_vndr_seq IS NOT NULL
	AND INV.inv_vndr_seq = (select prnt_vndr_seq from mdm_vendor where vndr_seq = @[wo_vndr_seq])
#if ($sp_cd.size() == 1)
	AND INV.inv_vndr_seq = (select prnt_vndr_seq from mdm_vendor where vndr_seq = @[wo_vndr_seq])
#elseif ($sp_cd.size() > 1)
 	AND INV.inv_vndr_seq in (select distinct(prnt_vndr_seq) from mdm_vendor where (1,vndr_seq) in (
		#foreach($sp_cd_key in ${sp_cd}) 
			#if($velocityCount < $sp_cd.size()) 
				(1,'$sp_cd_key'),
			#else 
				(1,'$sp_cd_key')
			#end 
		#end 
	))
#end


ORDER BY wo_no, eq_no			]]></sql>
			<params>
				<param name="inv_no" type="12" value="" out="N"/>
				<param name="wo_vndr_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
