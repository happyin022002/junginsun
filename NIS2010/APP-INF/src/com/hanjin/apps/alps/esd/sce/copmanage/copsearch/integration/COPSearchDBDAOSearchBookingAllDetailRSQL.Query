<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="COPSearchDBDAOSearchBookingAllDetailRSQL">
			<desc><![CDATA[booking info]]></desc>
			<sql><![CDATA[
SELECT bl_no	
       ,(SELECT cust_ref_no_ctnt 
          FROM bkg_reference 
         WHERE bkg_ref_tp_cd = 'EBRF' AND bkg_no = 	b.bkg_no) AS ref_no																	
       , vsl_cd																			
       , skd_voy_no --skd_voyage_no,														
       , skd_dir_cd																		
       , b.por_cd --por_loc , 															
       , b.pol_cd --pol_loc, 																
       , b.pod_cd --pod_loc, 																
       , b.del_cd --del_loc, 																
       , rcv_term_cd --bkg_rcv_term,														
       , de_term_cd --bkg_dlv_term, 														
       , doc.meas_qty AS bkg_meas_qty --bkg_mea_qty,	 --삭제														
       , doc.meas_ut_cd AS bkg_meas_tp_cd --bkg_mea_tp,	  --삭제														
       , doc.act_wgt AS act_bkg_wgt --bkg_actwgt_qty,	No-Match!												
       , doc.wgt_ut_cd AS act_bkg_wgt_tp_cd --bkg_actwgt_tp,	--삭제											
       , hot_de_flg AS bkg_hot_de_flg --bkg_hot,  	--삭제															
       , dcgo_flg--, spcl_dg_cgo_fl --bkg_spe_dg, 													
       , rc_flg--, spcl_rc_flg --bkg_spe_rf, 														
       , awk_cgo_flg--, b.spcl_awk_cgo_flg --bkg_spe_ak, 												
       , bb_cgo_flg--, spcl_bb_cgo_flg --bkg_spe_bb, 													
       , rd_cgo_flg--, spcl_rd_cgo_flg --bkg_spe_rd,													
       , b.bkg_ofc_cd --bkg_ofc, 															
       , ob_sls_ofc_cd--, bkg_sls_ofc_cd --sal_ofc, 														
       , doc_usr_id--, bkg_doc_usr_id --bkg_stf,														
       , ob_srep_cd--, sl_rep_cd --srep_cd,																
       , b.rep_cmdt_cd --rep_cmdt_desc,													
       , sh.cust_cnt_cd as sh_cust_cnt_cd
       , lpad(sh.cust_seq, 6, '0') as sh_cust_seq 		
       , sh.cust_nm as sh_cust_nm  														
       , cn.cust_cnt_cd as cn_cust_cnt_cd
       , lpad(cn.cust_seq, 6, '0') as cn_cust_seq		
       , cn.cust_nm as cn_cust_nm 														
       , nf.cust_cnt_cd as nf_cust_cnt_cd
       , lpad(nf.cust_seq, 6, '0') as nf_cust_seq		
       , nf.cust_nm as nf_cust_nm															
       , to_char(bkg_cre_dt,'yyyy-mm-dd') as bkg_cre_dt									
       , cntr_tpsz_cd
			
   FROM  bkg_booking b, bkg_customer sh, bkg_customer cn, bkg_customer nf, sce_cop_hdr c	
        ,bkg_bl_doc doc
  WHERE  b.bkg_no = sh.bkg_no																
    AND  b.bkg_no = cn.bkg_no																
    AND  b.bkg_no = nf.bkg_no	
    AND  b.bkg_no = doc.bkg_no															
    AND  sh.bkg_cust_tp_cd = 'S'															
    AND  cn.bkg_cust_tp_cd = 'C'															
    AND  nf.bkg_cust_tp_cd = 'N'	
    AND  B.bkg_no = @[bkg_no] 
#if (${cop_no} != '')   
    AND c.cop_no =  @[cop_no] 	
#else
    AND ROWNUM = 1 	
#end			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cop_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
