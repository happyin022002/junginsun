<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CopDetailReciveDBDAOcheckShuttleBargeRSQL">
			<desc><![CDATA[T/S 지역 Barge Case인지 체크한다.]]></desc>
			<sql><![CDATA[
SELECT  NVL( MAX(1), 0 ) -- 1 : TRUE , 0 : FALSE
FROM    SCE_COP_DTL	D
WHERE   D.COP_NO	=		@[cop_no]
AND     D.NOD_CD	LIKE    SUBSTR(@[nod_cd],1,5) ||'%'
AND		D.ACT_CD	=   
                        CASE    
                            WHEN @[act_cd] = 'FTWMDO'   THEN    'FTWMAD'
                            WHEN @[act_cd] = 'FTWMAD'   THEN    'FTWMDO'
                            ELSE                                'ERROR'
                        END  
AND		D.COP_DTL_SEQ	=  
                        CASE    
                            WHEN @[act_cd] = 'FTWMDO'   THEN 
                                (
                                    SELECT	MIN(DD.COP_DTL_SEQ)
                                    FROM	SCE_COP_DTL	DD
                                    WHERE	DD.COP_NO		=	D.COP_NO
                                    AND		DD.COP_DTL_SEQ	>	@[cop_dtl_seq] 
                                )
                            WHEN @[act_cd] = 'FTWMAD'   THEN   
                                (
                                    SELECT	MAX(DD.COP_DTL_SEQ)
                                    FROM	SCE_COP_DTL	DD
                                    WHERE	DD.COP_NO		=	D.COP_NO
                                    AND		DD.COP_DTL_SEQ	<	@[cop_dtl_seq]
                                )
                            ELSE	0                               
                        END  			]]></sql>
			<params>
				<param name="cop_no" type="12" value="" out="N"/>
				<param name="nod_cd" type="12" value="" out="N"/>
				<param name="act_cd" type="12" value="" out="N"/>
				<param name="cop_dtl_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
