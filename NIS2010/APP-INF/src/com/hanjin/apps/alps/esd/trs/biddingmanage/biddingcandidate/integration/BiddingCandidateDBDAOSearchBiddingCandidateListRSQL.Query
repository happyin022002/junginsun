<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BiddingCandidateDBDAOSearchBiddingCandidateListRSQL">
			<desc><![CDATA[Spot Bidding Candidate Vendor 조회]]></desc>
			<sql><![CDATA[
SELECT A.SPOT_BID_CNDDT_TERM_SEQ
      ,A.TRSP_CRR_MOD_CD
      ,A.FM_NOD_CD
      ,A.VIA_NOD_CD
      ,A.DOR_NOD_CD
      ,A.TO_NOD_CD
      ,B.VNDR_SEQ
      ,(SELECT VNDR_LGL_ENG_NM
          FROM MDM_VENDOR X 
         WHERE X.VNDR_SEQ = B.VNDR_SEQ
           AND X.DELT_FLG  = 'N') VNDR_NM
      ,B.SPOT_BID_VNDR_EML AS VNDR_EML_ADDR
      ,B.SP_PTAL_EXIST_FLG AS SPP_FLG
      ,A.SPOT_BID_OFC_CD
  FROM TRS_SPOT_BID_CNDDT_TERM A
      ,TRS_SPOT_BID_CNDDT_VNDR B
      ,TRS_TRSP_SVC_ORD C
 WHERE A.SPOT_BID_CNDDT_TERM_SEQ = B.SPOT_BID_CNDDT_TERM_SEQ
   AND A.SPOT_BID_OFC_CD = C.CRE_OFC_CD
   AND A.TRSP_CRR_MOD_CD = C.TRSP_CRR_MOD_CD
   AND A.FM_NOD_CD IS NULL
   AND A.VIA_NOD_CD IS NULL
   AND A.DOR_NOD_CD IS NULL
   AND A.TO_NOD_CD IS NULL
--   AND B.SP_PTAL_EXIST_FLG = 'Y'
   AND A.DELT_FLG ='N'
   AND B.DELT_FLG = 'N'
   AND A.CRE_OFC_CD = @[usr_ofc_cd]
   AND A.TRSP_CRR_MOD_CD = C.TRSP_CRR_MOD_CD
#if ($arr_so_no.size() > 0)
	AND (C.TRSP_SO_OFC_CTY_CD,C.TRSP_SO_SEQ) IN (
	#foreach( ${key} in ${arr_so_no}) 
		#if($velocityCount == 1)						
		(SUBSTR('$key',1,3),SUBSTR('$key',4))
		#else
    	,(SUBSTR('$key',1,3),SUBSTR('$key',4))
		#end
	#end
	)  
#end
 GROUP BY A.SPOT_BID_CNDDT_TERM_SEQ
	     ,A.TRSP_CRR_MOD_CD
	     ,A.FM_NOD_CD
	     ,A.VIA_NOD_CD
	     ,A.DOR_NOD_CD
	     ,A.TO_NOD_CD
	     ,B.VNDR_SEQ
	     ,B.SPOT_BID_VNDR_EML
         ,B.SP_PTAL_EXIST_FLG
	     ,A.SPOT_BID_OFC_CD
  ORDER BY B.VNDR_SEQ			]]></sql>
			<params>
				<param name="usr_ofc_cd" type="12" value=" " out="N"/>
			</params>
		</query>
	</querys>
</sqls>
