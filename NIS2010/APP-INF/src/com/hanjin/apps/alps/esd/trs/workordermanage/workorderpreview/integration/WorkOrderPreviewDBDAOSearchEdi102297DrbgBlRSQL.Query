<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WorkOrderPreviewDBDAOSearchEdi102297DrbgBlRSQL">
			<desc><![CDATA[searchEdi_102297_DRBG_BL]]></desc>
			<sql><![CDATA[
SELECT b.bl_no
		,RPAD(NVL(B.BL_NO,' '),12,' ') bl_no
		--,mf.msn_no	확인 필요!!!
		-- ,msn_no		확인 필요!!!
		,RPAD(MAX(NVL(so.fm_nod_cd,' ')), 7, ' ') from_yd
		,RPAD(MAX(NVL(SUBSTR(so.dor_nod_cd,1,5)  ,' ')), 5, ' ')	door
		,RPAD(MAX(TRIM(SUBSTR(REPLACE(REPLACE(REPLACE(T.cust_nm,CHR(13)||CHR(10),' '), '\"','*'),CHR(9),' '),1,30))), 30, ' ') cust_c
		,RPAD(MAX(TRIM(SUBSTR(REPLACE(REPLACE(REPLACE(T2.cust_nm,CHR(13)||CHR(10),' '), '\"','*'),CHR(9),' '),1,30))), 14, ' ') cust_n
	FROM bkg_booking b
		,bkg_customer t
		,bkg_customer t2
  		,trs_trsp_wrk_ord wo
  		,trs_trsp_svc_ord so
  		--,trs_mf_seq_no mf
   WHERE so.delt_flg <> 'Y'
 	 AND wo.trsp_wo_ofc_cty_cd	= @[trsp_wo_ofc_cty_cd]
 	 AND wo.trsp_wo_seq	= @[trsp_wo_seq]
 	 AND wo.trsp_wo_ofc_cty_cd = so.trsp_wo_ofc_cty_cd
	 AND wo.trsp_wo_seq = so.trsp_wo_seq
	 AND so.bkg_no	= b.bkg_no(+)
	 AND so.bkg_no = t.bkg_no(+)
	 AND so.bkg_no	= t2.bkg_no(+)
	 AND t.bkg_cust_tp_cd(+)	= 'C'
	 AND t2.bkg_cust_tp_cd(+) = 'N'
	 --AND so.bkg_no = mf.bkg_no(+)   확인 필요!!!
	 --AND mf.msn_bd_tp_cd(+) ='E'		확인 필요!!!
	 --AND mf.msn_cfm_cd(+) = 'Y'		확인 필요!!!
	 AND so.hjl_no IS NULL
	 AND wo.hjl_no IS NULL
GROUP BY b.bl_no
		--,mf.msn_no				확인 필요!!!			]]></sql>
			<params>
				<param name="trsp_wo_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="trsp_wo_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
