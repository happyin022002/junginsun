<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WorkOrderPreviewDBDAOSearchEdi10514701TrdAddrRSQL">
			<desc><![CDATA[searchEdi_105147_01_TRD_ADDR]]></desc>
			<sql><![CDATA[
SELECT TROA.TRO_SUB_SEQ	TRD_ADDR_SEQ
	  ,TROA.DOR_ADDR_TP_CD TRD_TYPE
	  ,TROA.LOC_CD TRD_DOOR_LOC
	  ,(SELECT UPPER(LOC_NM) FROM MDM_LOCATION WHERE LOC_CD = TROA.LOC_CD) AS TRD_DOOR_LOC_NM
      ,CASE WHEN TROA.UPD_DT < (SELECT TO_DATE(ATTR_CTNT1, 'YYYYMMDDHH24MISS')
                		     	  FROM BKG_HRD_CDG_CTNT    				
                  		   		 WHERE HRD_CDG_ID = 'EUR_TRO_ADDRESS') THEN 
        		 TRIM(SUBSTR(TROA.DOR_ADDR,1,30))||' '|| TRIM(SUBSTR(TROA.DOR_ADDR,31,30))||' '||TRIM(SUBSTR(TROA.DOR_ADDR,61,30))||' '||TRIM(SUBSTR(TROA.DOR_ADDR,91,30))  
       	    ELSE    															
          		 TRIM(SUBSTR(TROA.DOR_ADDR,1,50))||' '|| TRIM(SUBSTR(TROA.DOR_ADDR,51,50))||' '||TRIM(SUBSTR(TROA.DOR_ADDR,101,50))||' '||TRIM(SUBSTR(TROA.DOR_ADDR,151,50))
 		END AS TRD_DOOR_ADDR
	  ,UPPER(CASE WHEN TROA.UPD_DT < (SELECT TO_DATE(ATTR_CTNT1, 'YYYYMMDDHH24MISS') FROM BKG_HRD_CDG_CTNT WHERE HRD_CDG_ID = 'EUR_TRO_ADDRESS') THEN
			TRIM(SUBSTR(TROA.DOR_ADDR,1,30))
       ELSE 
			TRIM(SUBSTR(TROA.DOR_ADDR,1,50))
	   END) AS TRD_DOOR_ADDR1
	  ,UPPER(CASE WHEN TROA.UPD_DT < (SELECT TO_DATE(ATTR_CTNT1, 'YYYYMMDDHH24MISS') FROM BKG_HRD_CDG_CTNT WHERE HRD_CDG_ID = 'EUR_TRO_ADDRESS') THEN
			TRIM(SUBSTR(TROA.DOR_ADDR,31,30))
       ELSE 
			TRIM(SUBSTR(TROA.DOR_ADDR,51,50))
	   END) AS TRD_DOOR_ADDR2
	  ,UPPER(CASE WHEN TROA.UPD_DT < (SELECT TO_DATE(ATTR_CTNT1, 'YYYYMMDDHH24MISS') FROM BKG_HRD_CDG_CTNT WHERE HRD_CDG_ID = 'EUR_TRO_ADDRESS') THEN
			TRIM(SUBSTR(TROA.DOR_ADDR,61,30))
       ELSE 
			TRIM(SUBSTR(TROA.DOR_ADDR,101,50))
	   END) AS TRD_DOOR_ADDR3
	  ,UPPER(CASE WHEN TROA.UPD_DT < (SELECT TO_DATE(ATTR_CTNT1, 'YYYYMMDDHH24MISS') FROM BKG_HRD_CDG_CTNT WHERE HRD_CDG_ID = 'EUR_TRO_ADDRESS') THEN
			TRIM(SUBSTR(TROA.DOR_ADDR,91,30))
       ELSE 
			TRIM(SUBSTR(TROA.DOR_ADDR,151,50))
	   END) AS TRD_DOOR_ADDR4
	  ,TO_CHAR(SO.DOR_NOD_PLN_DT,'YYYYMMDDHH24MI') AS	TRD_DOOR_DT
	  ,TROA.DOR_ZIP_ID TRD_DOOR_POSTAL
	  ,TROA.CNTC_PSON_NM TRD_PERSON
	  ,TROA.CNTC_PHN_NO TRD_TEL
  FROM BKG_EUR_TRO_DTL TROA
	  ,TRS_TRSP_SVC_ORD SO
 WHERE SO.DELT_FLG <> 'Y'    
   AND SO.TRSP_SO_OFC_CTY_CD = @[trsp_so_ofc_cty_cd]
   AND SO.TRSP_SO_SEQ  = @[trsp_so_seq]
   AND SO.HJL_NO IS NULL
   AND SO.BKG_NO = TROA.BKG_NO
   AND TROA.TRO_SEQ = SO.TRO_SEQ			]]></sql>
			<params>
				<param name="trsp_so_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="trsp_so_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
