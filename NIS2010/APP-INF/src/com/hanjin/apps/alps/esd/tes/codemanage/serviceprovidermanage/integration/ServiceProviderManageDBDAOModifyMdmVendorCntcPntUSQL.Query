<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ServiceProviderManageDBDAOModifyMdmVendorCntcPntUSQL">
			<desc><![CDATA[ModifyMdmVendorCntcPnt]]></desc>
			<sql><![CDATA[
MERGE INTO MDM_VNDR_CNTC_PNT MVA
USING (
        SELECT COUNT(VNDR_SEQ) CNT
        FROM MDM_VNDR_CNTC_PNT
        WHERE VNDR_SEQ = @[ida_vndr_seq]
        AND CNTC_DIV_CD = 'IDA'
       ) MVB
ON ( MVB.CNT > 0 )
WHEN MATCHED THEN
    UPDATE SET MVA.VNDR_EML = @[ida_vndr_eml], MVA.UPD_USR_ID = @[upd_usr_id], MVA.UPD_DT = SYSDATE
    WHERE VNDR_SEQ = @[ida_vndr_seq]
    AND CNTC_DIV_CD = 'IDA'
WHEN NOT MATCHED THEN
    INSERT (
			VNDR_SEQ, 
			VNDR_CNTC_PNT_SEQ, 
			VNDR_EML, 
			DELT_FLG, 
			CRE_USR_ID, 
			CRE_DT, 
			UPD_USR_ID, 
			UPD_DT, 
			CNTC_DIV_CD
			)
    VALUES (
			@[ida_vndr_seq], 
			( SELECT NVL(MAX(VNDR_CNTC_PNT_SEQ)+1,1) FROM MDM_VNDR_CNTC_PNT WHERE VNDR_SEQ = @[ida_vndr_seq] ),
            @[ida_vndr_eml],
			'N',
			@[upd_usr_id],
			SYSDATE,
			@[upd_usr_id],
			SYSDATE,
			'IDA'
			)			]]></sql>
			<params>
				<param name="ida_vndr_seq" type="12" value="" out="N"/>
				<param name="ida_vndr_eml" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
