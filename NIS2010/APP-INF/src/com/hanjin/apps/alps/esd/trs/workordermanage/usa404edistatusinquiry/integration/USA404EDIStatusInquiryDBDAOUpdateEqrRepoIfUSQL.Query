<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="USA404EDIStatusInquiryDBDAOUpdateEqrRepoIfUSQL">
			<desc><![CDATA[SO 정보를 EQR IF 테이블에 수정 SQL]]></desc>
			<sql><![CDATA[
UPDATE EQR_REPO_EXE_SO_IF T  
 SET ( WO_EXE_FLG,TRSP_SO_STS_CD ,WO_EXE_DT, REPO_COST_AMT ) = 
	( SELECT 'Y',		
			 'I', 		
			 TO_CHAR(GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[ctrlOfcCd]), 'YYYYMMDD'), 
			 SUM( NVL(B.BZC_AMT,0)+NVL(B.FUEL_SCG_AMT,0) )   
	  FROM TRS_TRSP_RAIL_BIL_ORD A, TRS_TRSP_RAIL_CONV_AMT B 
	  WHERE 
	  A.TRSP_SO_OFC_CTY_CD=B.TRSP_SO_OFC_CTY_CD 
	  AND A.TRSP_SO_SEQ=B.TRSP_SO_SEQ 
	  AND A.REPO_PLN_ID= T.REPO_PLN_ID
	  AND A.PLN_YRWK=T.PLN_YRWK 
	  AND A.REF_ID=T.REF_ID 
	  AND A.REF_SEQ=T.REF_SEQ 
	  AND B.CURR_CD = 'USD' 
	 ) 
WHERE T.REPO_PLN_ID = @[repo_pln_id]
AND T.PLN_YRWK = @[pln_yrwk]
AND T.REF_ID = @[ref_id]
AND T.REF_SEQ = @[ref_seq]			]]></sql>
			<params>
				<param name="ctrlOfcCd" type="12" value="" out="N"/>
				<param name="repo_pln_id" type="12" value="" out="N"/>
				<param name="pln_yrwk" type="12" value="" out="N"/>
				<param name="ref_id" type="12" value="" out="N"/>
				<param name="ref_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
