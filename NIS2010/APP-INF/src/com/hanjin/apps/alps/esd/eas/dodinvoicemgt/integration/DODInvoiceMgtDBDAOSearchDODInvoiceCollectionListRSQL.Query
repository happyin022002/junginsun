<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DODInvoiceMgtDBDAOSearchDODInvoiceCollectionListRSQL">
			<desc><![CDATA[DODInvoiceMgtDBDAOSearchDODInvoiceCollectionListRSQL]]></desc>
			<sql><![CDATA[
SELECT TO_CHAR(E.AR_IF_DT,'YYYY-MM-DD') AS AR_IF_DT,  
       E.DOD_INV_NO, 
       E.BL_NO, 
       D.CNTR_NO, 
       D.CNTR_TPSZ_CD,
       E.CRE_OFC_CD, 
       D.DOD_LOC_CD,
       D.INV_AMT, D.TAX_AMT, D.BIL_AMT, D.ADD_AMT,
	   B.POR_CD,  B.POL_CD,  B.POD_CD,  B.DEL_CD,
	  (	SELECT K.CUST_NM  
        FROM   BKG_CUSTOMER K
	   	WHERE  K.BKG_NO = B.BKG_NO 
  	    AND    K.BKG_CUST_TP_CD ='C' ) AS CNEE ,
	  ( SELECT K.CUST_NM
	    FROM   BKG_CUSTOMER K
		WHERE  K.BKG_NO = B.BKG_NO
  	    AND    K.BKG_CUST_TP_CD ='N' ) AS NFTY,
       PA.PAYR_NM  PAYER
FROM EAS_DOD_INV_MN E,
     BKG_BOOKING B, 
     EAS_DOD_INV_DTL D,
     MDM_LOCATION M,
     EAS_PAYR_INFO PA
WHERE E.DOD_INV_NO = D.DOD_INV_NO
AND   E.DOD_INV_STS_CD = 'I'
#if(${do_loc} != '' && ${do_loc} != 'null' && ${do_loc} != 'A' )
AND  D.DOD_LOC_CD IN (${do_loc})
#end
#if(${cre_ofc_cd} != '' && ${cre_ofc_cd} != 'null' && ${cre_ofc_cd} != 'A' )
AND  E.CRE_OFC_CD = @[cre_ofc_cd]
#end
AND E.AR_IF_DT >= to_date(@[fm_ar_if_dt],'yyyy-mm-dd')
AND E.AR_IF_DT <= to_date(@[to_ar_if_dt],'yyyy-mm-dd')+0.99999
AND E.BKG_NO = B.BKG_NO
AND B.POR_CD = nvl(@[por_cd] , B.POR_CD)
AND B.POL_CD = nvl(@[pol_cd] , B.POL_CD)
AND B.POD_CD = nvl(@[pod_cd] , B.POD_CD)
AND B.DEL_CD = nvl(@[del_cd] , B.DEL_CD)
AND B.POL_CD = m.loc_cd
AND M.CONTI_CD    = DECODE(@[conti_cd],'X', M.CONTI_CD, @[conti_cd])
AND E.CUST_CNT_CD = PA.CUST_CNT_CD
AND E.CUST_SEQ    = PA.CUST_SEQ
ORDER BY E.AR_IF_DT			]]></sql>
			<params>
				<param name="cre_ofc_cd" type="12" value="" out="N"/>
				<param name="fm_ar_if_dt" type="12" value="" out="N"/>
				<param name="to_ar_if_dt" type="12" value="" out="N"/>
				<param name="por_cd" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
				<param name="del_cd" type="12" value="" out="N"/>
				<param name="conti_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
