<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DoNotificationSettingDBDAOSearchDoNotificationSettingListRSQL">
			<desc><![CDATA[D/o Notification Setting List 조회]]></desc>
			<sql><![CDATA[
SELECT A.NTFC_ACT_FLG
	  ,A.BKG_CTRT_DIV_CD CTRT_TP_CD
	  ,A.SC_NO
	  ,A.CTRT_CUST_CNT_CD || A.CTRT_CUST_SEQ CTRT_CUST_CD
      ,(SELECT X.CUST_LGL_ENG_NM FROM MDM_CUSTOMER X WHERE X.CUST_CNT_CD = A.CTRT_CUST_CNT_CD AND X.CUST_SEQ = A.CTRT_CUST_SEQ) CTRT_CUST_NM
	  ,TO_CHAR(A.CTRT_EFF_DT,'YYYYMMDD') CTRT_EFF_DT
	  ,TO_CHAR(A.CTRT_EXP_DT,'YYYYMMDD') CTRT_EXP_DT
	  ,SUBSTR(A.DEST_NOD_CD,1,5) DEST_NOD_CD
	  ,SUBSTR(A.DEST_NOD_CD,6) DEST_NOD_YD
	  ,( SELECT ZN_NM FROM MDM_ZONE WHERE ZN_CD  = A.DEST_NOD_CD AND DELT_FLG   = 'N' UNION SELECT YD_NM  FROM MDM_YARD WHERE YD_CD = A.DEST_NOD_CD AND DELT_FLG   = 'N' ) DEST_NOD_NM
	  ,TO_CHAR(A.UPD_DT,'YYYYMMDD') UPD_DT
	  ,(SELECT USR_NM FROM COM_USER WHERE USR_ID = A.UPD_USR_ID) UPD_USR_NM
	  ,A.DO_NTFC_SET_SEQ
	  ,A.CTRT_CUST_CNT_CD 
      ,A.CTRT_CUST_SEQ
	  ,A.UPD_USR_ID
  FROM TRS_DO_NTFC_SET A
 WHERE A.DELT_FLG = 'N'
#if(${ctrt_tp_cd}!='')
   AND A.BKG_CTRT_DIV_CD = @[ctrt_tp_cd]
#end
#if(${sc_no}!='')
   AND A.SC_NO = @[sc_no]
#end
#if(${eff_dt}!='')
   AND TO_DATE(@[eff_dt],'YYYYMMDD') BETWEEN A.CTRT_EFF_DT AND A.CTRT_EXP_DT
#end
#if(${dor_nod_cd}!='' && ${dor_nod_yd}=='')
   AND A.DEST_NOD_CD LIKE @[dor_nod_cd]||'%'
#elseif(${dor_nod_cd}!='' && ${dor_nod_yd} !='')
   AND A.DEST_NOD_CD = @[dor_nod_cd]||@[dor_nod_yd]
#end
#if(${act_flg}!='')
   AND A.NTFC_ACT_FLG = @[act_flg]
#end			]]></sql>
			<params>
				<param name="ctrt_tp_cd" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="eff_dt" type="12" value="" out="N"/>
				<param name="dor_nod_cd" type="12" value="" out="N"/>
				<param name="dor_nod_yd" type="12" value="" out="N"/>
				<param name="act_flg" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
