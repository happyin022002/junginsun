<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SingleTransportationSOManageDBDAOSearchSingleTransportationSOCandidatesListUptUSQL">
			<desc><![CDATA[Customer 자료 UPDATE]]></desc>
			<sql><![CDATA[
UPDATE TRS_TRSP_SVC_ORD_TMP X
   SET (X.SHPR_CUST_CNT_CD, X.SHPR_CUST_SEQ, X.SHPR_CUST_NM) = 
           (SELECT U.CUST_CNT_CD,
                   U.CUST_SEQ,
                   REPLACE(NVL(U.CUST_NM, ' '),CHR(13)||CHR(10),' ')
              FROM BKG_CUSTOMER U
             WHERE U.BKG_NO = X.BKG_NO
               AND U.BKG_CUST_TP_CD = 'S')
      ,(X.CNEE_CUST_CNT_CD, X.CNEE_CUST_SEQ, X.CNEE_CUST_NM) = 
           (SELECT U.CUST_CNT_CD,
                   U.CUST_SEQ,
                   REPLACE(NVL(U.CUST_NM, ' '),CHR(13)||CHR(10),' ')
              FROM BKG_CUSTOMER U
             WHERE U.BKG_NO = X.BKG_NO
               AND U.BKG_CUST_TP_CD = 'C')
      ,(X.NTFY_CUST_NM) = 
           (SELECT REPLACE(NVL(U.CUST_NM, ' '),CHR(13)||CHR(10),' ')
              FROM BKG_CUSTOMER U
             WHERE U.BKG_NO = X.BKG_NO
               AND U.BKG_CUST_TP_CD = 'N')
      #if (${ui_conti_cd} == 'M' )
      ,(X.CNTR_PKUP_NO, X.AVAL_DT, X.LST_FREE_DT) = 
           (SELECT PU.PKUP_NO, PU.PKUP_AVAL_DT, PU.LST_FREE_DT
              FROM BKG_PKUP_NTC_PKUP_NO PU
                  ,MDM_LOCATION LOC
             WHERE LOC.LOC_CD = PU.DEL_CD
               AND PU.BKG_NO  = X.BKG_NO
               AND PU.CNTR_NO = X.EQ_NO
               AND PU.PKUP_YD_CD = X.FM_NOD_CD||X.FM_NOD_YD_NO
               AND LOC.DELT_FLG = 'N'
               AND TRS_GET_FOC_INFO_FNC(X.BL_NO, NULL, NULL, NULL) = 'YYY'
               AND PU.UPD_DT = (SELECT MAX(Y.UPD_DT)
                                  FROM BKG_PKUP_NTC_PKUP_NO Y
                                 WHERE Y.BKG_NO  = PU.BKG_NO
                                   AND Y.CNTR_NO = PU.CNTR_NO
                                   AND Y.PKUP_YD_CD = PU.PKUP_YD_CD
                                )
               AND ROWNUM = 1
            )
      #end
WHERE TRSP_TMP_SEQ = @[trsp_tmp_seq]			]]></sql>
			<params>
				<param name="trsp_tmp_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
