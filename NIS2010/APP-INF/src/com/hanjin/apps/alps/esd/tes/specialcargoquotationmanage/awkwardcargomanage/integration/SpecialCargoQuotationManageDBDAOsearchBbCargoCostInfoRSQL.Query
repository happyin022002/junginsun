<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpecialCargoQuotationManageDBDAOsearchBbCargoCostInfoRSQL">
			<desc><![CDATA[searchBbCargoCostInfo]]></desc>
			<sql><![CDATA[
SELECT 
BC.BB_CGO_TP_SEQ, BC.LGS_COST_CD, BC.BB_CGO_DESC, D.INV_AMT, D.BB_CGO_RMK, 
CASE
WHEN EXISTS (
    SELECT 'Y'
    FROM TES_TML_SO_COST TC, MDM_YARD MY
    WHERE 1=1
    AND TC.MRN_TML_FLG = 'Y'
    AND TC.CFS_FLG      IN (DECODE(MY.YD_FCTY_TP_CFS_FLG,'N','N','Y'),'N')
    AND TC.RAIL_RMP_FLG IN (DECODE(MY.YD_FCTY_TP_RAIL_RMP_FLG,'N','N','Y'),'N')
    AND TC.XCLD_TML_FLG IN (DECODE(MY.YD_OSHP_CD,'O','Y','N'),'N')
	#if(${yd_cd} != '' )
    AND	MY.YD_CD = @[yd_cd]
	#end
    AND TC.LGS_COST_CD = BC.LGS_COST_CD )
THEN 'Y'
ELSE 'N'
END CHK_YD_USE_YN,
CASE
WHEN NVL(BC.DELT_FLG,'N') = 'Y'
THEN 'Y'
ELSE 'N'
END CHK_DEL_YN
FROM TES_BB_SO_COST BC, (
    SELECT BD.* 
    FROM TES_TML_SO_DTL DD, TES_TML_SO_BB_DTL BD
    WHERE 1=1
    AND DD.TML_SO_OFC_CTY_CD = BD.TML_SO_OFC_CTY_CD
    AND DD.TML_SO_SEQ = BD.TML_SO_SEQ
    AND DD.TML_SO_DTL_SEQ = BD.TML_SO_DTL_SEQ
    AND DD.BKG_NO = BD.BKG_NO
	#if(${tml_so_ofc_cty_cd} != '' )
    AND DD.TML_SO_OFC_CTY_CD = @[tml_so_ofc_cty_cd]
	#else
	AND DD.TML_SO_OFC_CTY_CD = ''
	#end	
	#if(${tml_so_seq} != '' )
	AND DD.TML_SO_SEQ = @[tml_so_seq]
	#else
	AND DD.TML_SO_SEQ = ''
	#end
	#if(${bkg_no} != '' )
    AND DD.BKG_NO = @[bkg_no]
	#else
	AND DD.BKG_NO = ''
	#end
) D
WHERE 1=1
AND BC.BB_CGO_TP_SEQ = D.BB_CGO_TP_SEQ(+)
ORDER BY BC.BB_CGO_TP_SEQ			]]></sql>
			<params>
				<param name="yd_cd" type="12" value="" out="N"/>
				<param name="tml_so_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="tml_so_seq" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
