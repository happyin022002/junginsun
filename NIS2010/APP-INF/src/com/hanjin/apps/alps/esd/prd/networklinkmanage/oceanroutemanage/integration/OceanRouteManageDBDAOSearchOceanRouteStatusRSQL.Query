<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OceanRouteManageDBDAOSearchOceanRouteStatusRSQL">
			<desc><![CDATA[SearchOceanRouteStatus]]></desc>
			<sql><![CDATA[
SELECT /*+ USE_NL( SL, PS, TL) */ 
                       ps.vsl_slan_cd, ps.pf_svc_tp_cd,  
                 	   ps.svc_dur_dys, ps.stnd_svc_spd, 
                       TO_CHAR (ps.cre_dt, 'YYYY-MM-DD') cre_dt, 
                       TO_CHAR (ps.upd_dt, 'YYYY-MM-DD') upd_dt,  
                 	   ps.slan_stnd_flg, 
                       NVL (ps.mml_usd_flg, 'N') prod_ocn_rout_use_flg,  
                 	   NVL (tl.pctl_svc_mod_cd, 'OCN') pctl_svc_mod_cd, 
                       NVL (tl.upd_ind_cd, 'N') upd_ind_cd, 
                       ps.pf_skd_rmk 
				 FROM   VSK_PF_SKD ps, mdm_vsl_svc_lane sl, prd_svc_lane tl 
				 WHERE  sl.vsl_slan_cd = ps.vsl_slan_cd 
				 AND    sl.vsl_svc_tp_cd <> 'O' 
				 AND    sl.delt_flg <> 'Y' 
				 AND    DECODE(NVL(tl.upd_ind_cd, 'N'), 'N', ps.mml_usd_flg || NVL(ps.mml_usd_flg, 'N'), 'YY') <> 'NN' 
				 AND    ps.pf_svc_tp_cd <> 'OFFL' 
				 AND    ps.pf_svc_tp_cd <> 'PTPL' 
				 AND    sl.vsl_slan_cd LIKE @[lane_cd]  || '%' 
		
#if(${ocn_ipc_flag} !='')		
				AND    tl.pctl_svc_mod_cd LIKE @[ocn_ipc_flag]  || '%' 
#end

#if(${multi_ind} !='')	
				AND    ps.mml_usd_flg LIKE @[multi_ind]  || '%'
#end

#if(${status} =='')	
			  AND    ps.vsl_slan_cd = tl.vsl_slan_cd(+)       
			  AND    ps.pf_svc_tp_cd = tl.pctl_svc_tp_cd(+) 
#elseif(${status} =='N')
			  AND    ps.vsl_slan_cd = tl.vsl_slan_cd(+)    

			  AND    ps.pf_svc_tp_cd = tl.pctl_svc_tp_cd(+)  
			  AND    NOT EXISTS (SELECT 'X'  
								FROM   prd_svc_lane a 
								WHERE  ps.vsl_slan_cd = a.vsl_slan_cd AND ps.pf_svc_tp_cd = a.pctl_svc_tp_cd) 
#elseif(${status} == 'C')	
			  AND    ps.vsl_slan_cd = tl.vsl_slan_cd(+) 
			  AND    ps.pf_svc_tp_cd = tl.pctl_svc_tp_cd(+)  
			  AND    tl.upd_ind_cd IN ('I', 'U')  
#elseif(${status} == 'D')
			  AND    ps.vsl_slan_cd = tl.vsl_slan_cd(+)  
			  AND    ps.pf_svc_tp_cd = tl.pctl_svc_tp_cd(+)  
			  AND    tl.upd_ind_cd = 'D'  
#end			]]></sql>
			<params>
				<param name="lane_cd" type="12" value="" out="N"/>
				<param name="ocn_ipc_flag" type="12" value="" out="N"/>
				<param name="multi_ind" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
