<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TPBInterfaceDBDAOSearchTpbTesDltFlgRSQL">
			<desc><![CDATA[TES로부터 I/F된 데이터 중에서 Delete 가능 여부 Flag Search]]></desc>
			<sql><![CDATA[
SELECT MAX(DECODE(B.DLT_FLG,NULL,'O',B.DLT_FLG)) DLT_FLG
  FROM
       (
            SELECT @[tml_if_ofc_cd] IF_OFC_CD, @[tml_if_seq] SRC_IF_SEQ_NO
              FROM DUAL
       ) A,
       (
            SELECT IF_OFC_CD
                  ,SRC_IF_SEQ_NO
                  ,CASE WHEN N3PTY_NO IS NOT NULL THEN 'X'
                        WHEN N3PTY_DELT_TP_CD IN ('D','S') THEN 'Y'
                        WHEN N3PTY_CFM_CD = 'N' THEN 'Y'
                        ELSE 'N' END DLT_FLG
              FROM TPB_OTS_DTL
             WHERE 1 = 1
               AND MNL_INP_TP_CD = 'G'
               AND N3PTY_EXPN_TP_CD = 'TES'
               AND IF_OFC_CD = @[tml_if_ofc_cd]
               AND SRC_IF_SEQ_NO = @[tml_if_seq]
       ) B
 WHERE A.IF_OFC_CD = B.IF_OFC_CD(+)
   AND A.SRC_IF_SEQ_NO = B.SRC_IF_SEQ_NO(+)			]]></sql>
			<params>
				<param name="tml_if_ofc_cd" type="12" value="" out="N"/>
				<param name="tml_if_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
