<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RailTransitReportDBDAOSearchTRCListRSQL">
			<desc><![CDATA[SearchTRCList 조회용 조건 VO]]></desc>
			<sql><![CDATA[
SELECT  t2.cntr_no, 
        t2.cntr_tpsz_cd, 
        t2.trn_no, 
        t2.fcar_no, 
        t2.page ,
        t2.tot_cnt
FROM    ( SELECT  t1.cntr_no, 
                  t1.cntr_tpsz_cd, 
                  t1.trn_no, 
                  t1.fcar_no, 
                  CEIL(rownum/50) page , COUNT(1) OVER() tot_cnt 
          FROM    ( SELECT  sc.cntr_no,
                            mc.cntr_tpsz_cd,
                            sc.trn_no,
                            sc.fcar_no
                    FROM    sce_clm sc,
                            mst_container mc
                    WHERE   sc.cntr_no = mc.cntr_no 
AND     sc.cntr_no = mc.cntr_no

#if(${trn_no} != '')
AND     trn_no = @[trn_no]
#end

#if(${fcar_no} != '')
AND     fcar_no = @[fcar_no]
#end

#if(${arr_dt1} !='') 
AND     sc.arr_dt >=  TO_DATE(@[arr_dt1], 'yyyy-MM-dd')
#end

#if(${arr_dt2} !='') 
AND     sc.arr_dt <  TO_DATE(@[arr_dt2], 'yyyy-MM-dd')+1
#end
                    ORDER BY sc.arr_dt DESC ) t1 ) t2
WHERE   
     1=1
#if(${i_page} !='')
AND page = @[i_page]
#else
AND page = 1
#end			]]></sql>
			<params>
				<param name="trn_no" type="12" value="" out="N"/>
				<param name="fcar_no" type="12" value="" out="N"/>
				<param name="arr_dt1" type="12" value="" out="N"/>
				<param name="arr_dt2" type="12" value="" out="N"/>
				<param name="i_page" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
