<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DwellNotificationDBDAOAddDwllNtfcExptCntCSQL">
			<desc><![CDATA[데이터 저장,update]]></desc>
			<sql><![CDATA[
MERGE INTO SCE_DWLL_CNTR_EXPT T
USING ( SELECT  @[cntr_no]            CNTR_NO
               ,@[cnmv_yr]            CNMV_YR
               ,@[cnmv_id_no]         CNMV_ID_NO
               ,@[cnmv_cyc_no]        CNMV_CYC_NO
               ,@[mst_bkg_no]         MST_BKG_NO
               ,DECODE(@[cntr_tml_dwll_flg],'1','Y','N')  CNTR_TML_DWLL_FLG
               ,DECODE(@[cntr_enr_dwll_flg],'1','Y','N')  CNTR_ENR_DWLL_FLG
               ,DECODE(@[cntr_dest_dwll_flg],'1','Y','N') CNTR_DEST_DWLL_FLG
               ,DECODE(@[cntr_vsl_dlay_flg],'1','Y','N')  CNTR_VSL_DLAY_FLG
               ,@[expt_set_ofc_cd]    EXPT_SET_OFC_CD
               ,@[dwll_expt_rmk]      DWLL_EXPT_RMK
              ,DECODE(@[cntr_dwll_expt_flg],'1','Y','N') CNTR_DWLL_EXPT_FLG
        FROM DUAL )S
ON (  T.CNTR_NO     =  S.CNTR_NO    
    AND T.CNMV_YR     =  S.CNMV_YR    
    AND T.CNMV_ID_NO  =  S.CNMV_ID_NO 
    AND T.CNMV_CYC_NO =  S.CNMV_CYC_NO
    AND T.MST_BKG_NO  =  S.MST_BKG_NO 
)
WHEN MATCHED THEN
UPDATE
SET T.CNTR_TML_DWLL_FLG  = S.CNTR_TML_DWLL_FLG   
  , T.CNTR_ENR_DWLL_FLG  = S.CNTR_ENR_DWLL_FLG   
  , T.CNTR_DEST_DWLL_FLG = S.CNTR_DEST_DWLL_FLG  
  , T.CNTR_VSL_DLAY_FLG  = S.CNTR_VSL_DLAY_FLG   
  , T.EXPT_SET_OFC_CD    = S.EXPT_SET_OFC_CD     
  , T.EXPT_SET_USR_ID    = @[user_id]   
  , T.EXPT_SET_DT        = SYSDATE
  , T.DWLL_EXPT_RMK      = @[dwll_expt_rmk]        
  , T.CRE_USR_ID         = @[user_id]
  , T.CRE_DT             = SYSDATE   
  , T.UPD_USR_ID         = @[user_id]   
  , T.UPD_DT             = SYSDATE  
  , T.CNTR_DWLL_EXPT_FLG = S.CNTR_DWLL_EXPT_FLG
WHEN NOT MATCHED THEN   
INSERT (T.CNTR_NO            
        ,T.CNMV_YR           
        ,T.CNMV_ID_NO        
        ,T.CNMV_CYC_NO       
        ,T.MST_BKG_NO        
        ,T.CNTR_TML_DWLL_FLG 
        ,T.CNTR_ENR_DWLL_FLG 
        ,T.CNTR_DEST_DWLL_FLG
        ,T.CNTR_VSL_DLAY_FLG 
        ,T.EXPT_SET_OFC_CD   
        ,T.EXPT_SET_USR_ID   
        ,T.EXPT_SET_DT       
        ,T.DWLL_EXPT_RMK     
        ,T.DELT_FLG          
        ,T.CRE_USR_ID        
        ,T.CRE_DT            
        ,T.UPD_USR_ID        
        ,T.UPD_DT            
        ,T.CNTR_DWLL_EXPT_FLG)
 VALUES (S.CNTR_NO           
         ,S.CNMV_YR           
         ,S.CNMV_ID_NO        
         ,S.CNMV_CYC_NO       
         ,S.MST_BKG_NO        
         ,S.CNTR_TML_DWLL_FLG 
         ,S.CNTR_ENR_DWLL_FLG 
         ,S.CNTR_DEST_DWLL_FLG
         ,S.CNTR_VSL_DLAY_FLG 
         ,S.EXPT_SET_OFC_CD   
         ,@[user_id]   
         ,SYSDATE       
         ,S.DWLL_EXPT_RMK     
         ,'N'          
         ,@[user_id]        
         ,SYSDATE            
         ,@[user_id]        
         ,SYSDATE            
         ,S.CNTR_DWLL_EXPT_FLG
         )			]]></sql>
			<params>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cnmv_yr" type="12" value="" out="N"/>
				<param name="cnmv_id_no" type="12" value="" out="N"/>
				<param name="cnmv_cyc_no" type="12" value="" out="N"/>
				<param name="mst_bkg_no" type="12" value="" out="N"/>
				<param name="cntr_tml_dwll_flg" type="12" value="" out="N"/>
				<param name="cntr_enr_dwll_flg" type="12" value="" out="N"/>
				<param name="cntr_dest_dwll_flg" type="12" value="" out="N"/>
				<param name="cntr_vsl_dlay_flg" type="12" value="" out="N"/>
				<param name="expt_set_ofc_cd" type="12" value="" out="N"/>
				<param name="dwll_expt_rmk" type="12" value="" out="N"/>
				<param name="cntr_dwll_expt_flg" type="12" value="" out="N"/>
				<param name="user_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
