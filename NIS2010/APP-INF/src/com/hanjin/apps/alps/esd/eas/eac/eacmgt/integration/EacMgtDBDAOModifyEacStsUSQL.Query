<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EacMgtDBDAOModifyEacStsUSQL">
			<desc><![CDATA[등록된 EAC 자료의 상태를 변경한다]]></desc>
			<sql><![CDATA[
UPDATE EAS_EXPN_AUD_CS_MGMT
SET    EAC_STS_CD = @[eac_sts_cd]
      ,UPD_USR_ID = @[usr_id]
      ,UPD_DT = SYSDATE
#if (${eac_sts_cd} == 'SC') 
     , DELT_FLG    = 'Y'
#elseif (${eac_sts_cd} == 'RC') 
     , EAC_YRMON = CASE WHEN TO_CHAR(TPB_GET_LCL_DATE_FNC(SYSDATE,@[ofc_cd]), 'DD') <= '05' THEN TO_CHAR(ADD_MONTHS(TPB_GET_LCL_DATE_FNC(SYSDATE,@[ofc_cd]), -1), 'YYYYMM')
                        ELSE TO_CHAR(TPB_GET_LCL_DATE_FNC(SYSDATE,@[ofc_cd]), 'YYYYMM')
                   END
#end
#if (${eac_sts_cd} == 'SC' || ${eac_sts_cd} == 'RR' || ${eac_sts_cd} == 'HR')
     , EAC_CMPL_CD = 'X'
     , EAC_CMPL_USR_ID = NULL
#end
WHERE  EAC_NO = @[eac_no]			]]></sql>
			<params>
				<param name="eac_sts_cd" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="eac_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
