<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="Edi315SendDBDAOSearchEdiStsForPrtlBkgRSQL">
			<desc><![CDATA[Pratil Bkg를 포함하여 EDI Status를 조회]]></desc>
			<sql><![CDATA[
SELECT
COUNT(R.EDI_GRP_CD) SEND_CNT
FROM
  SCE_EDI_SND_RSLT R
, SCE_COP_HDR A
WHERE 1=1
AND R.EDI_GRP_CD = @[v_edi_grp_cd] --'USA00094'
AND R.EDI_STS_CD = 'OAN'
AND R.BKG_NO = A.BKG_NO
AND R.CNTR_NO =A.CNTR_NO
AND A.COP_STS_CD IN ('C', 'T', 'F')
AND EXISTS
( 
  SELECT 'X' FROM
  SCE_COP_HDR B
  WHERE 1=1
  AND B.CNTR_NO = A.CNTR_NO
  AND B.TRNK_VSL_CD = A.TRNK_VSL_CD
  AND B.TRNK_SKD_VOY_NO = A.TRNK_SKD_VOY_NO
  AND B.TRNK_SKD_DIR_CD = B.TRNK_SKD_DIR_CD
  AND B.BKG_NO =  @[v_bkg_no]
  AND B.CNTR_NO = @[v_cntr_no]
  AND B.COP_STS_CD IN ('C', 'T', 'F')
)

			]]></sql>
			<params>
				<param name="v_edi_grp_cd" type="12" value="" out="N"/>
				<param name="v_bkg_no" type="12" value="" out="N"/>
				<param name="v_cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
