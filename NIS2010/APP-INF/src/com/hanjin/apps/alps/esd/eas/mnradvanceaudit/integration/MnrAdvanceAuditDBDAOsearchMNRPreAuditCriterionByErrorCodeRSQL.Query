<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="MnrAdvanceAuditDBDAOsearchMNRPreAuditCriterionByErrorCodeRSQL">
			<desc><![CDATA[Error Code ë³„ Pre Audit]]></desc>
			<sql><![CDATA[
SELECT 
    'MNR' MODULE,
    MNR_COMMON_PKG.MNR_GET_RHQ_OFC_FNC(A.AUD_OFC_CD) RHQ_OFC_CD,
    A.AUD_OFC_CD OFC_CD,
    (SELECT CD.INTG_CD_VAL_DP_DESC
          FROM COM_INTG_CD_DTL CD
         WHERE CD.INTG_CD_ID = 'CD03412'
           AND CD.INTG_CD_VAL_CTNT = A.EXPN_AUD_MNR_VRFY_TP_CD ) EXPN_VRFY_TP_CD,
    A.MNR_VRFY_TP_CD MNR_VRFY_TP_CD,
    B.MNR_CD_DP_DESC MNR_VRFY_TP_CD_NM,
    A.MNR_VRFY_TP_AUD_FLG OBJ_PRE_AUD,
    A.UPD_OFC_CD UPT_OFC_CD,
    TO_CHAR(A.UPD_DT, 'YYYY-MM-DD') UPT_DT,
    A.VRFY_RMK AUT_RMK,
	DECODE(A.MNR_VRFY_TP_CD, 'UT', '-1', B.MNR_CD_DP_SEQ) MNR_CD_DP_SEQ,
	B.MNR_CD_DP_SEQ MNR_CD_DP_SEQ2,
	DECODE(A.AUD_OFC_CD, MNR_COMMON_PKG.MNR_GET_RHQ_OFC_FNC(A.AUD_OFC_CD), '-1', '0') MNR_CD_DP_SEQ3
FROM 
    EAS_MNR_PRE_AUD_VRFY_CFG A,
    MNR_GEN_CD B
WHERE
	1 = 1
	AND A.MNR_VRFY_TP_CD = B.MNR_CD_ID
	AND PRNT_CD_ID = 'CD00004'
#if(${s_rhq_ofc_cd} != '')
	AND	MNR_COMMON_PKG.MNR_GET_RHQ_OFC_FNC(A.AUD_OFC_CD) = @[s_rhq_ofc_cd]
#if(${s_ofc_cd} != '')
	AND	A.AUD_OFC_CD = @[s_ofc_cd]
#end
#end
#if(${s_type} != '')
	AND	A.EXPN_AUD_MNR_VRFY_TP_CD = @[s_type]
#end
#if(${s_set_data_only} == '1')
AND A.MNR_VRFY_TP_AUD_FLG = 'Y'
#end
#if(${s_type} == 'W')
ORDER BY RHQ_OFC_CD, MNR_CD_DP_SEQ3, A.AUD_OFC_CD, EXPN_VRFY_TP_CD, MNR_CD_DP_SEQ
#end
#if(${s_type} != 'W')
ORDER BY RHQ_OFC_CD, MNR_CD_DP_SEQ3, A.AUD_OFC_CD, EXPN_VRFY_TP_CD, MNR_CD_DP_SEQ2
#end			]]></sql>
			<params>
				<param name="s_rhq_ofc_cd" type="12" value="" out="N"/>
				<param name="s_ofc_cd" type="12" value="" out="N"/>
				<param name="s_type" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
