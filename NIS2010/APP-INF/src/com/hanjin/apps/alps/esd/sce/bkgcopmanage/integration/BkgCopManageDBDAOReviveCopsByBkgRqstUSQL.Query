<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BkgCopManageDBDAOReviveCopsByBkgRqstUSQL">
			<desc><![CDATA[booking 모듈의 호출에 따라 COP status 를 'X' 에서 복원 한다. 본 query 수행 후 container confirm 로직을 수행해서 cop 를 정리한다.]]></desc>
			<sql><![CDATA[
UPDATE SCE_COP_HDR A
SET COP_STS_CD = CASE WHEN CNTR_NO != 'SMCU0000000'
  AND EXISTS (
    SELECT '1'
    FROM SCE_COP_DTL
    WHERE COP_NO = A.COP_NO
      AND ACT_DT IS NOT NULL) THEN 'T' ELSE 'C' END
WHERE BKG_NO = @[bkg_no]
AND (CNTR_NO = 'SMCU0000000' OR EXISTS (SELECT '1' FROM BKG_CONTAINER WHERE BKG_NO = A.BKG_NO) )			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
