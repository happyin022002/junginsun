<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PendingListDBDAOSearchPendingListListRSQL">
			<desc><![CDATA[Pending List Search]]></desc>
			<sql><![CDATA[
SELECT																									
		     'FULL' cargo,																							
		     to_char(A.N1ST_NOD_PLN_DT,'YYYYMMDD') duedate,				
		     decode(A.PCTL_IO_BND_CD,'O','Out','I','In')	bound,												
		     C.VSL_CD truckvvd,																						
		     decode(SUBSTR(A.COST_ACT_GRP_CD,2,1),'Y','CY','D','DOOR')    cost,										
		     decode(SUBSTR(A.COST_ACT_GRP_CD,3,2),'TD','Truck','RD','Rail','WT','WT','WR','WR') trans,				
		     COUNT(A.CTRL_OFC_CD) qty																				
		   FROM SCE_PLN_SO_LIST A, SCE_COP_HDR B, BKG_BOOKING C													
		   WHERE 1=1																		
             AND A.TRSP_SO_STS_CD IN ('P')
             AND A.PCTL_COST_MOD_CD IN ('C', 'Z')
		#if (${from_date} != '' && ${to_date} != '')
             AND A.N1ST_NOD_PLN_DT BETWEEN TO_DATE(@[from_date], 'YYYYMMDD') AND TO_DATE(@[to_date], 'YYYYMMDD')+0.99999
	    #end

		#if (${bound} != 'ALL' && ${bound} != '' )
			 AND A.PCTL_IO_BND_CD = @[bound]														
        #end

		#if (${hid_cost} != 'ALL' && ${hid_cost} != '' )
			 AND SUBSTR(A.COST_ACT_GRP_CD,2,1) = @[hid_cost]											
        #end

		#if (${sel_transmode} != 'ALL' && ${sel_transmode} != '' )
			 AND SUBSTR(A.COST_ACT_GRP_CD,3,2) = @[sel_transmode]											
        #end

		#if ($OfcCd.size() > 0) 
		   AND   A.CTRL_OFC_CD  in (
		#foreach( ${key} in ${OfcCd}) 
			 #if($velocityCount < $OfcCd.size()) 
				 UPPER('$key'), 
			 #else 
				 UPPER('$key')
			 #end 
		#end
				)
		#end		

		#if ( ${trunk_vvd} != '' )
			AND C.VSL_CD = @[trunk_vvd1]
            AND C.SKD_VOY_NO = @[trunk_vvd2]
            AND C.SKD_DIR_CD = @[trunk_vvd3]											
        #end

		  AND A.COP_NO=B.COP_NO																					
		  AND B.BKG_NO=C.BKG_NO																																					
		  GROUP BY to_char(A.N1ST_NOD_PLN_DT,'YYYYMMDD'),decode(A.PCTL_IO_BND_CD,'O','Out','I','In'),
		           C.VSL_CD,decode(SUBSTR(A.COST_ACT_GRP_CD,2,1),'Y','CY','D','DOOR'),
		           decode(SUBSTR(A.COST_ACT_GRP_CD,3,2),'TD','Truck','RD','Rail','WT','WT','WR','WR')		
		  ORDER BY to_char(A.N1ST_NOD_PLN_DT,'YYYYMMDD'),decode(A.PCTL_IO_BND_CD,'O','Out','I','In'),
		           C.VSL_CD,decode(SUBSTR(A.COST_ACT_GRP_CD,2,1),'Y','CY','D','DOOR'),
		           decode(SUBSTR(A.COST_ACT_GRP_CD,3,2),'TD','Truck','RD','Rail','WT','WT','WR','WR')			]]></sql>
			<params>
				<param name="from_date" type="12" value="" out="N"/>
				<param name="to_date" type="12" value="" out="N"/>
				<param name="bound" type="12" value="" out="N"/>
				<param name="hid_cost" type="12" value="" out="N"/>
				<param name="sel_transmode" type="12" value="" out="N"/>
				<param name="trunk_vvd1" type="12" value="" out="N"/>
				<param name="trunk_vvd2" type="12" value="" out="N"/>
				<param name="trunk_vvd3" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
