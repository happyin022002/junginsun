<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CSRIssueTransferSlipManageDBDAOModifyApInvDtrbLineNoUSQL">
			<desc><![CDATA[Line정보를 Update]]></desc>
			<sql><![CDATA[
 MERGE INTO AP_INV_DTRB A	                                        									
 USING                           																		
			(SELECT		CSR_NO				CSR_NO														
					,	ATTR_CTNT1			ATTR_CTNT1													
					,	DTRB_COA_ACCT_CD	DTRB_COA_ACCT_CD											
					,	DTRB_COA_VVD_CD		DTRB_COA_VVD_CD												
					,	ROWNUM 				LINE_NO														
			 FROM		(SELECT		DISTINCT 															
									ATTR_CTNT1															
								,	CSR_NO																
								,	DTRB_COA_ACCT_CD													
								,	DTRB_COA_VVD_CD														
						 FROM		AP_INV_DTRB                                           				
						 WHERE		CSR_NO		= @[CSR_NO]														
						 ORDER BY	DTRB_COA_VVD_CD DESC												
						)																				
			) B                   																		
 ON                        																				
			(																							
					A.CSR_NO			= B.CSR_NO                     									
		 AND	A.ATTR_CTNT1		= B.ATTR_CTNT1                     								
		 AND	A.DTRB_COA_ACCT_CD	= B.DTRB_COA_ACCT_CD                    						
		 AND	A.DTRB_COA_VVD_CD	= B.DTRB_COA_VVD_CD												
			)																							
WHEN 		MATCHED THEN		                                  										
UPDATE  	SET LINE_NO					= B.LINE_NO																	]]></sql>
			<params>
				<param name="CSR_NO" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
