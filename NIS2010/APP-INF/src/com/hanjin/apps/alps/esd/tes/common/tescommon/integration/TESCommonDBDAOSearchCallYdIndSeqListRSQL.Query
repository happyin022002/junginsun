<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TESCommonDBDAOSearchCallYdIndSeqListRSQL">
			<desc><![CDATA[SearchCallYdIndSeqList]]></desc>
			<sql><![CDATA[
#if (${vsl_cd} == 'CNTC') 
SELECT '1' CALL_YD_IND_SEQ
FROM DUAL
#else
SELECT 
    (SELECT LTRIM(MAX(SYS_CONNECT_BY_PATH(CALL_YD_IND_SEQ,'|')),'|')
    FROM (
        SELECT ROWNUM ROW_ID,
               V.CALL_YD_IND_SEQ
        FROM   VSK_VSL_PORT_SKD V
        WHERE   1=1
        AND     V.VSL_CD = SUBSTR(@[vvd],1,4)
        AND     V.SKD_VOY_NO = SUBSTR(@[vvd],5,4)
        AND     V.SKD_DIR_CD = SUBSTR(@[vvd],9,1)
        AND     V.VPS_PORT_CD = SUBSTR(@[yd_cd],0,5)
		AND		V.YD_CD = @[yd_cd]
        )
    CONNECT BY PRIOR ROW_ID = ROW_ID - 1
    START WITH ROW_ID = 1    
    ) CALL_YD_IND_SEQ
FROM DUAL
#end			]]></sql>
			<params>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="yd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
