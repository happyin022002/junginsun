<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CombinedTransportationCaseTwoSOManageDBDAOsearch02CombinedTransportationCaseTwoSOManageRSQL">
			<desc><![CDATA[Matchmaking One Popup조회]]></desc>
			<sql><![CDATA[
SELECT  NULL REPO_PLN_ID
, NULL PLN_YRWK
, NULL REF_SEQ
, NULL REF_ID
, 'COP' AS SOURCE
, AAA.TRSP_SO_SEQ
, AAA.COP_NO
, AAA.COST_ACT_GRP_SEQ
, AAA.EQ_NO
, AAA.EQ_TPSZ_CD
, AAA.COST_ACT_GRP_CD
, AAA.VNDR_SEQ
, AAA.TRSP_COST_DTL_MOD_CD
, AAA.TRSP_CRR_MOD_CD
, AAA.FM_NOD_CD
, AAA.FM_NOD_YARD
, AAA.TO_NOD_CD
, AAA.TO_NOD_YARD
, AAA.VIA_NOD_CD
, AAA.VIA_NOD_YARD
, AAA.DOR_NOD_CD
, AAA.DOR_NOD_YARD
, '' FM_NOD_CD2
, '' FM_NOD_YARD2 
, '' TO_NOD_CD2
, '' TO_NOD_YARD2 
, '' VIA_NOD_CD2
, '' VIA_NOD_YARD2
, '' DOR_NOD_CD2
, '' DOR_NOD_YARD2
, AAA.BKG_NO
, AAA.BL_NO
, AAA.N1ST_NOD_PLN_DT
, AAA.N1ST_NOD_PLN_DT_HMS
, AAA.LST_NOD_PLN_DT
, AAA.LST_NOD_PLN_DT_HMS
, AAA.DOR_NOD_PLN_DT
, AAA.DOR_NOD_PLN_DT_HMS
, AAA.TRSP_BND_CD
, AAA.CUST_NOMI_TRKR_FLG
, AAA.TRSP_SO_CMB_SEQ
, AAA.CGO_TP_CD
, AAA.CNTR_WGT
, AAA.WGT_MEAS_UT_CD
, AAA.CMDT_CD
, AAA.TRUNKVVD
, AAA.CUST_CNT_CD
, AAA.DOR_DE_ADDR
, AAA.MLT_STOP_DE_FLG
, AAA.DOR_SVC_TP_CD
, AAA.DOR_SVC_TP_CD DOR_SVC_TP_CD2
, AAA.INTER_RMK 
, AAA.CRE_USR_ID
, AAA.UPD_USR_ID
, AAA.TRSP_SO_OFC_CTY_CD
, AAA.FEEDERVVD
, AAA.SPCL_INSTR_RMK
, AAA.BKG_RCVDE_TERM_CD
, AAA.SLAN_CD
, AAA.POR_CD
, AAA.POL_CD
, AAA.POD_CD
, AAA.DEL_CD
, AAA.CRE_OFC_CD
, AAA.SPCL_CGO_CNTR_TP_CD
, SUBSTR(AAA.SHPR_CUST_INFO, INSTR(AAA.SHPR_CUST_INFO, '$', 1, 2) + 1) SHPR_CUST_NM
, SUBSTR(AAA.CNEE_CUST_INFO, INSTR(AAA.CNEE_CUST_INFO, '$', 1, 2) + 1) CNEE_CUST_NM
, AAA.NTFY_CUST_NM
, SUBSTR(AAA.FOC, 1, INSTR(AAA.FOC, '$', 1, 1) - 1) CGOR_FRT_PAY_IND_FLG
, SUBSTR(AAA.FOC, INSTR(AAA.FOC, '$', 1, 1) + 1, INSTR(AAA.FOC, '$', 1, 2) - instr(AAA.FOC, '$', 1, 1) - 1) CGOR_ORG_BL_RCVR_IND_FLG
, SUBSTR(AAA.FOC, INSTR(AAA.FOC, '$', 1, 2) + 1) CGOR_CSTMS_ACPT_RE_IND_FLG
, AAA.IBD_CSTMS_CLR_LOC_CD
, AAA.OWNR_CO_CD
, SUBSTR(AAA.MST_CNTR, 1, INSTR(AAA.MST_CNTR, '$', 1, 1) - 1) IMDT_EXT_FLG
, SUBSTR(AAA.MST_CNTR, INSTR(AAA.MST_CNTR, '$', 1, 1) + 1) LSTM_CD
, AAA.LST_LOC_CD
, '' LSTM_EXP_FLG
, DECODE(AAA.CONTI_CD, 'E', SUBSTR(AAA.TRO_INFO, INSTR(AAA.TRO_INFO, '$', 1, 4) + 1), MDM_CO_CMDT_NM) CMDT_NAME
, SUBSTR(AAA.PKGCODE_NOOFPKG, 1, INSTR(AAA.PKGCODE_NOOFPKG, '$', 1, 1) - 1) PKGCODE
, AAA.SEALNO
, AAA.SEALNO2
, SUBSTR(AAA.PKGCODE_NOOFPKG, INSTR(AAA.PKGCODE_NOOFPKG, '$', 1, 1) + 1) NOOFPKG
, AAA.SC_NO
, AAA.RFANO
, SUBSTR(AAA.TRO_INFO, INSTR(AAA.TRO_INFO, '$', 1, 3) + 1, INSTR(AAA.TRO_INFO, '$', 1, 4) - INSTR(AAA.TRO_INFO, '$', 1, 3) - 1) CUSTOMSCLEARANCENO
, DECODE(SUBSTR(AAA.TRO_INFO, INSTR(AAA.TRO_INFO, '$', 1, 3) + 1, INSTR(AAA.TRO_INFO, '$', 1, 4) - INSTR(AAA.TRO_INFO, '$', 1, 3) - 1) ,NULL,'','Y') CUSTOMSCLEARANCE
, AAA.LST_LOC_CD2
, AAA.TRSP_COST_DTL_MOD_SEP
, AAA.CNTR_PKUP_NO
, AAA.AVAL_DT
, AAA.AVAL_DT_HMS
, AAA.LST_FREE_DT
, AAA.LST_FREE_DT_HMS
, AAA.SUB_EQ_TPSZ_CD
, AAA.CNTR_SUB_FLG
, AAA.FCTRY_NM
, AAA.CNTC_PSON_NM
, AAA.CNTC_PSON_PHN_NO
, AAA.CNTC_PSON_FAX_NO 
, AAA.DOR_PST_CD
, AAA.TRO_CFM_OFC_CD
, AAA.TRO_CFM_USR_ID
, TO_CHAR(AAA.TRO_CFM_UPD_DT, 'YYYYMMDD') TRO_CFM_UPD_DT1
, TO_CHAR(AAA.TRO_CFM_UPD_DT, 'HH24MISS') TRO_CFM_UPD_DT2
, AAA.TRO_LOD_REF_NO 
, AAA.TRSP_BND_CD TRSP_BND_CD
, AAA.TRO_SEQ TRSP_RQST_ORD_SEQ
, AAA.ORG_EQ_TPSZ_CD
, '' LSE_CNTR_FLG
, DECODE(AAA.TRO_SEQ, NULL, 'N', 'Y') AS TRO_CNFM
, AAA.CNTR_KGS_WGT
, AAA.CNTR_LBS_WGT
, AAA.IB_VVD_CD
, AAA.OB_VVD_CD
  FROM (
    SELECT (SELECT  NVL(TO_CHAR(DCGO_SEQ), ' ')
                  ||'$'||NVL(TO_CHAR(RC_SEQ), ' ')
                  ||'$'||NVL(TO_CHAR(AWK_CGO_SEQ), ' ')
                  ||'$'||NVL(CSTMS_CLR_NO, ' ')
                  ||'$'||NVL(REP_CMDT_DESC, ' ')
              FROM BKG_EUR_TRO
             WHERE BKG_NO    = AA.BKG_NO
               AND IO_BND_CD = AA.TRSP_BND_CD
               AND TRO_SEQ   = AA.TRO_SEQ) AS TRO_INFO
           ,AA.*
      FROM (
            SELECT
                  A.REPO_PLN_ID
                , A.CONTI_CD
                , A.PLN_YRWK
                , A.REF_ID
                , A.REF_SEQ
                , A.TRSP_SO_CMB_TP_CD
                , A.COP_NO
                , A.TRSP_SO_SEQ
                , A.TRSP_WO_OFC_CTY_CD
                , A.TRSP_WO_SEQ
                , A.CNTR_KGS_WGT
                , A.CNTR_LBS_WGT
                , A.COST_ACT_GRP_SEQ
                , A.EQ_NO
                , A.EQ_TPSZ_CD
                , A.ORG_EQ_TPSZ_CD
                , A.COST_ACT_GRP_CD
                , A.VNDR_SEQ
                , DECODE(A.TRSP_COST_DTL_MOD_CD, 'CY', 'CY', 'DR', 'DOOR', 'CY') TRSP_COST_DTL_MOD_CD
                , A.TRSP_COST_DTL_MOD_CD TRSP_COST_DTL_MOD_SEP
                , A.TRSP_CRR_MOD_CD
                , SUBSTR(A.FM_NOD_CD,1,5) FM_NOD_CD
                , SUBSTR(A.FM_NOD_CD,6,2) FM_NOD_YARD
                , SUBSTR(A.TO_NOD_CD,1,5) TO_NOD_CD
                , SUBSTR(A.TO_NOD_CD,6,2) TO_NOD_YARD
                , SUBSTR(A.VIA_NOD_CD,1,5) VIA_NOD_CD
                , SUBSTR(A.VIA_NOD_CD,6,2) VIA_NOD_YARD
                , SUBSTR(A.DOR_NOD_CD,1,5) DOR_NOD_CD
                , SUBSTR(A.DOR_NOD_CD,6,2) DOR_NOD_YARD
                , A.BKG_NO BKG_NO
                , A.BL_NO
                , TO_CHAR(A.N1ST_NOD_PLN_DT, 'YYYYMMDD')   N1ST_NOD_PLN_DT
                , TO_CHAR(A.N1ST_NOD_PLN_DT, 'HH24:MI:SS') N1ST_NOD_PLN_DT_HMS
                , TO_CHAR(A.LST_NOD_PLN_DT, 'YYYYMMDD')    LST_NOD_PLN_DT
                , TO_CHAR(A.LST_NOD_PLN_DT, 'HH24:MI:SS')  LST_NOD_PLN_DT_HMS
                , TO_CHAR(A.DOR_NOD_PLN_DT, 'YYYYMMDD')    DOR_NOD_PLN_DT
                , TO_CHAR(A.DOR_NOD_PLN_DT, 'HH24:MI:SS')  DOR_NOD_PLN_DT_HMS
                , A.TRSP_BND_CD
                , A.CUST_NOMI_TRKR_FLG                     CUST_NOMI_TRKR_FLG
                , (A.CUST_CNT_CD||A.CUST_SEQ)              CUST_CNT_CD
                , (A.ACT_CUST_CNT_CD||A.ACT_CUST_SEQ)      ACT_CUST_CD
                , A.ACT_CUST_CNT_CD
                , A.ACT_CUST_SEQ
                , A.ACT_CUST_ADDR_SEQ
                , A.TRSP_SO_CMB_SEQ
                , A.CGO_TP_CD
                , A.CNTR_WGT
                , A.WGT_MEAS_UT_CD
                , A.CMDT_CD
                , (A.VSL_CD||A.SKD_VOY_NO||A.SKD_DIR_CD) TRUNKVVD
                , A.DOR_DE_ADDR
                , A.MLT_STOP_DE_FLG
                , A.DOR_SVC_TP_CD
                , A.INTER_RMK
                , A.CRE_USR_ID
                , A.UPD_USR_ID
                , A.TRSP_SO_OFC_CTY_CD
                , A.IB_VVD_CD
                , A.OB_VVD_CD
                , REPLACE(A.SPCL_INSTR_RMK, CHR(13)||CHR(10), ' ') SPCL_INSTR_RMK
                , A.BKG_RCVDE_TERM_CD
                , A.SLAN_CD
                , A.POR_CD
                , A.POL_CD
                , A.POD_CD
                , A.DEL_CD
                , A.CRE_OFC_CD
                , A.SPCL_CGO_CNTR_TP_CD
                , A.IBD_CSTMS_CLR_LOC_CD
                , A.OWNR_CO_CD
                , A.LST_LOC_CD
                , B.SC_NO SC_NO
                , A.CNTR_PKUP_NO
                , TO_CHAR(A.AVAL_DT, 'YYYYMMDD')       AVAL_DT
                , TO_CHAR(A.AVAL_DT, 'HH24:MI:SS')     AVAL_DT_HMS
                , TO_CHAR(A.LST_FREE_DT, 'YYYYMMDD')   LST_FREE_DT
                , TO_CHAR(A.LST_FREE_DT, 'HH24:MI:SS') LST_FREE_DT_HMS
                , A.SUB_EQ_TPSZ_CD
                , A.CNTR_SUB_FLG
                , A.FCTRY_NM
                , A.CNTC_PSON_NM
                , A.CNTC_PSON_PHN_NO
                , A.CNTC_PSON_FAX_NO
                , A.DOR_PST_CD
                , A.TRO_CFM_OFC_CD
                , A.TRO_CFM_USR_ID
                , A.TRO_CFM_UPD_DT
                , A.TRO_LOD_REF_NO
                , A.REV_CURR_CD
                , A.TRSP_RQST_ORD_REV_AMT
                , B.MTY_BKG_STS_CD AS BKG_STS_CD
                , B.RFA_NO AS RFANO
                , (A.FDR_VSL_CD||A.FDR_SKD_VOY_NO||A.FDR_SKD_DIR_CD) FEEDERVVD
                , (SELECT PCK_TP_CD ||'$'|| TO_CHAR(PCK_QTY)
                     FROM BKG_CONTAINER
                    WHERE BKG_NO  = A.BKG_NO
                      AND CNTR_NO = A.EQ_NO) AS PKGCODE_NOOFPKG
                , (SELECT CNTR_SEAL_NO FROM BKG_CNTR_SEAL_NO WHERE BKG_NO  = A.BKG_NO AND CNTR_NO = A.EQ_NO AND CNTR_SEAL_SEQ = 1) AS SEALNO
                , (SELECT CNTR_SEAL_NO FROM BKG_CNTR_SEAL_NO WHERE BKG_NO  = A.BKG_NO AND CNTR_NO = A.EQ_NO AND CNTR_SEAL_SEQ = 2) AS SEALNO2
                , (SELECT TRO_SEQ
                     FROM SCE_TRO_MAPG
                    WHERE COP_NO        = A.COP_NO
                      AND IO_BND_CD     = A.TRSP_BND_CD
                      AND AREA_CONTI_CD = A.CONTI_CD) AS TRO_SEQ
                , (SELECT CMDT_NM
                     FROM MDM_COMMODITY
                    WHERE CMDT_CD = A.CMDT_CD) AS MDM_CO_CMDT_NM
                , (SELECT BC.CUST_CNT_CD ||'$'|| TO_CHAR(BC.CUST_SEQ) ||'$'|| BC.CUST_NM
                     FROM BKG_CUSTOMER BC
                    WHERE BC.BKG_NO = A.BKG_NO
                      AND BC.BKG_CUST_TP_CD = 'C')    CNEE_CUST_INFO
                , (SELECT BC.CUST_CNT_CD ||'$'|| TO_CHAR(BC.CUST_SEQ) ||'$'|| BC.CUST_NM
                     FROM BKG_CUSTOMER BC
                    WHERE BC.BKG_NO = A.BKG_NO
                      AND BC.BKG_CUST_TP_CD = 'S')    SHPR_CUST_INFO
                , (SELECT BC.CUST_NM
                     FROM BKG_CUSTOMER BC
                    WHERE BC.BKG_NO = A.BKG_NO
                      AND BC.BKG_CUST_TP_CD = 'N')    NTFY_CUST_NM
                , (SELECT NVL(FRT_CLT_FLG, ' ')||'$'||NVL(OBL_RDEM_FLG, ' ')||'$'||DECODE(CSTMS_CLR_CD, 'Y', 'Y', 'N')
                     FROM BKG_CGO_RLSE
                    WHERE BL_NO = A.BL_NO) FOC
                , (SELECT NVL(IMDT_EXT_FLG, ' ')||'$'||NVL(LSTM_CD, ' ')
                     FROM MST_CONTAINER
                    WHERE CNTR_NO  = A.EQ_NO) MST_CNTR
                , (SELECT DECODE(NVL(QTY.EQ_SUBST_CGO_QTY, 0), 0, QTY.CNTR_TPSZ_CD
                          ||' '||QTY.OP_CNTR_QTY, QTY.CNTR_TPSZ_CD||' '||QTY.OP_CNTR_QTY
                          ||'-SUB '||QTY.EQ_SUBST_CNTR_TPSZ_CD||' '||QTY.EQ_SUBST_CGO_QTY
                          )
                     FROM BKG_QUANTITY QTY
                    WHERE A.BKG_NO  = QTY.BKG_NO
                      AND  A.EQ_TPSZ_CD   = QTY.CNTR_TPSZ_CD) BKG_QTY
                , TRS_CYDOOR_COMM_PKG.GET_MULTI_LST_LOC(A.FM_NOD_CD, A.TO_NOD_CD) LST_LOC_CD2
         FROM  TRS_TRSP_SVC_ORD            A
              ,BKG_BOOKING                 B
        WHERE  A.BKG_NO          = B.BKG_NO
          AND  A.HJL_NO          IS NULL
          AND  A.DELT_FLG        = 'N'
          AND  A.CRE_OFC_CD      = @[cre_ofc_cd]
          AND  A.TRSP_SO_TP_CD = 'Y' 
          AND  A.HJL_NO       IS NULL                      
          AND  A.TRSP_CRR_MOD_CD IN ( 'TD', 'DT', 'RT', 'TR', 'WT', 'TW' ) 
          AND  A.TRSP_SO_STS_CD IN  ('C', 'R') 

    #if( ${strCostMode}=='CY' ) 
        AND TO_CHAR(A.N1ST_NOD_PLN_DT, 'YYYYMMDDHH24MISS') BETWEEN @[sFtime] AND @[sTtime]  
        AND A.FM_NOD_CD = @[sNodeL]  
    #elseif( ${strCostMode}=='DOOR' ) 
        AND TO_CHAR(A.DOR_NOD_PLN_DT, 'YYYYMMDDHH24MISS') BETWEEN @[sFtime] AND @[sTtime]   
        AND A.TRSP_BND_CD = 'O' 
        AND A.DOR_NOD_CD = @[sNodeL]    
    #end
    AND A.EQ_TPSZ_CD = @[eq_tpsz_cd] 
     ) AA
 ) AAA

#if ( ${strCostMode}=='CY' ) 
UNION ALL
SELECT 
   BB.REPO_PLN_ID, 
   BB.PLN_YRWK,
   BB.REF_SEQ, 
   BB.REF_ID, 
   BB.SOURCE, 
   BB.TRSP_SO_SEQ ,
   BB.COP_NO, 
   BB.COST_ACT_GRP_SEQ,
   BB.EQ_NO, 
   BB.EQ_TPSZ_CD, 
   BB.COST_ACT_GRP_CD,
   BB.VNDR_SEQ, 
   BB.TRSP_COST_DTL_MOD_CD, 
   BB.TRSP_CRR_MOD_CD, 
   BB.FM_NOD_CD,
   BB.FM_NOD_YARD, 
   BB.TO_NOD_CD,
   BB.TO_NOD_YARD, 
   BB.VIA_NOD_CD, 
   BB.VIA_NOD_YARD, 
   BB.DOR_NOD_CD, 
   BB.DOR_NOD_YARD, 
   BB.FM_NOD_CD2, 
   BB.FM_NOD_YARD2,
   BB.TO_NOD_CD2,
   BB.TO_NOD_YARD2, 
   BB.VIA_NOD_CD2, 
   BB.VIA_NOD_YARD2, 
   BB.DOR_NOD_CD2, 
   BB.DOR_NOD_YARD2, 
   BB.BKG_NO, 
   BB.BL_NO,
   BB.N1ST_NOD_PLN_DT, 
   BB.N1ST_NOD_PLN_DT_HMS, 
   BB.LST_NOD_PLN_DT, 
   BB.LST_NOD_PLN_DT_HMS, 
   BB.DOR_NOD_PLN_DT, 
   BB.DOR_NOD_PLN_DT_HMS, 
   BB.TRSP_BND_CD,
   BB.CUST_NOMI_TRKR_FLG, 
   BB.TRSP_SO_CMB_SEQ, 
   BB.CGO_TP_CD, 
   BB.CNTR_WGT, 
   BB.WGT_MEAS_UT_CD, 
   BB.CMDT_CD, 
   BB.TRUNKVVD, 
   BB.CUST_CNT_CD, 
   BB.DOR_DE_ADDR, 
   BB.MLT_STOP_DE_FLG, 
   BB.DOR_SVC_TP_CD, 
   BB.DOR_SVC_TP_CD DOR_SVC_TP_CD2, 
   BB.INTER_RMK, 
   BB.CRE_USR_ID, 
   BB.UPD_USR_ID, 
   BB.TRSP_SO_OFC_CTY_CD, 
   BB.FEEDERVVD, 
   BB.SPCL_INSTR_RMK, 
   BB.BKG_RCVDE_TERM_CD, 
   BB.SLAN_CD, 
   BB.POR_CD, 
   BB.POL_CD, 
   BB.POD_CD, 
   BB.DEL_CD, 
   BB.CRE_OFC_CD, 
   BB.SPCL_CGO_CNTR_TP_CD,
   SUBSTR(BB.CNEE_CUST_INFO, INSTR(BB.CNEE_CUST_INFO, '$', 1, 2) + 1) CNEE_CUST_NM,
   SUBSTR(BB.SHPR_CUST_INFO, INSTR(BB.SHPR_CUST_INFO, '$', 1, 2) + 1) SHPR_CUST_NM,
   BB.NTFY_CUST_NM,    
   SUBSTR(BB.FOC, 1, INSTR(BB.FOC, '$', 1, 1) - 1) CGOR_FRT_PAY_IND_FLG,
   SUBSTR(BB.FOC, INSTR(BB.FOC, '$', 1, 1) + 1, INSTR(BB.FOC, '$', 1, 2) - instr(BB.FOC, '$', 1, 1) - 1) CGOR_ORG_BL_RCVR_IND_FLG,
   SUBSTR(BB.FOC, INSTR(BB.FOC, '$', 1, 2) + 1) CGOR_CSTMS_ACPT_RE_IND_FLG,
   BB.IBD_CSTMS_CLR_LOC_CD, 
   BB.OWNR_CO_CD,  
   SUBSTR(BB.MST_CNTR, 1, INSTR(BB.MST_CNTR, '$', 1, 1) - 1) IMDT_EXT_FLG,   
   SUBSTR(BB.MST_CNTR, INSTR(BB.MST_CNTR, '$', 1, 1) + 1) LSTM_CD,
   BB.LST_LOC_CD,  
   BB.LSTM_EXP_FLG, 
   BB.CMDT_NAME, 
   BB.PKGCODE,
   BB.SEALNO, 
   BB.SEALNO2, 
   BB.NOOFPKG,
   BB.SC_NO, 
   BB.RFANO,
   BB.CUSTOMSCLEARANCENO, 
   BB.CUSTOMSCLEARANCE,
   BB.LST_LOC_CD2, 
   BB.TRSP_COST_DTL_MOD_CD TRSP_COST_DTL_MOD_SEP, 
   BB.CNTR_PKUP_NO, 
   BB.AVAL_DT, 
   BB.AVAL_DT_HMS, 
   BB.LST_FREE_DT, 
   BB.LST_FREE_DT_HMS, 
   BB.SUB_EQ_TPSZ_CD, 
   BB.CNTR_SUB_FLG,
   BB.FCTRY_NM,
   BB.CNTC_PSON_NM, 
   BB.CNTC_PSON_PHN_NO, 
   BB.CNTC_PSON_FAX_NO, 
   BB.DOR_PST_CD, 
   BB.TRO_CFM_OFC_CD, 
   BB.TRO_CFM_USR_ID, 
   BB.TRO_CFM_UPD_DT1,
   BB.TRO_CFM_UPD_DT2, 
   BB.TRO_LOD_REF_NO,  
   BB.TRSP_BND_CD,
   BB.TRSP_RQST_ORD_SEQ,
   BB.ORG_EQ_TPSZ_CD,
   '' LSE_CNTR_FLG,
   DECODE(BB.TRSP_RQST_ORD_SEQ, NULL, 'N', 'Y') AS TRO_CNFM,
   NULL CNTR_KGS_WGT,
   NULL CNTR_LBS_WGT,
   NULL IB_VVD_CD,
   NULL OB_VVD_CD
FROM
(
SELECT
  B.REPO_PLN_ID, B.PLN_YRWK, B.REF_SEQ, B.REF_ID, 
  DECODE(B.TRSP_MTY_COST_MOD_CD, 'CN', 'On-Hire', 'CF', 'Off-Hire', 'Empty Repo') SOURCE, 
  B.TRSP_SO_SEQ TRSP_SO_SEQ, B.COP_NO, B.COST_ACT_GRP_SEQ, B.EQ_NO, B.EQ_TPSZ_CD, 
  B.COST_ACT_GRP_CD, B.VNDR_SEQ, 
  DECODE(B.TRSP_COST_DTL_MOD_CD, 'CY', 'CY', 'DR', 'DOOR', '') TRSP_COST_DTL_MOD_CD, 
  B.TRSP_CRR_MOD_CD, 
  SUBSTR(B.FM_NOD_CD,1,5) FM_NOD_CD, SUBSTR(B.FM_NOD_CD,6,2) FM_NOD_YARD, 
  SUBSTR(B.TO_NOD_CD,1,5) TO_NOD_CD, SUBSTR(B.TO_NOD_CD,6,2) TO_NOD_YARD, 
  SUBSTR(B.VIA_NOD_CD,1,5) VIA_NOD_CD, SUBSTR(B.VIA_NOD_CD,6,2) VIA_NOD_YARD, 
  SUBSTR(B.DOR_NOD_CD,1,5) DOR_NOD_CD, SUBSTR(B.DOR_NOD_CD,6,2) DOR_NOD_YARD, 
  '' FM_NOD_CD2,  '' FM_NOD_YARD2, '' TO_NOD_CD2,  '' TO_NOD_YARD2, 
  '' VIA_NOD_CD2, '' VIA_NOD_YARD2, '' DOR_NOD_CD2, '' DOR_NOD_YARD2, 
  B.BKG_NO, 
  TO_CHAR(B.N1ST_NOD_PLN_DT, 'YYYYMMDD') N1ST_NOD_PLN_DT, 
  TO_CHAR(B.N1ST_NOD_PLN_DT, 'HH24:MI:SS') N1ST_NOD_PLN_DT_HMS, 
  TO_CHAR(B.LST_NOD_PLN_DT, 'YYYYMMDD') LST_NOD_PLN_DT, 
  TO_CHAR(B.LST_NOD_PLN_DT, 'HH24:MI:SS') LST_NOD_PLN_DT_HMS, 
  TO_CHAR(B.DOR_NOD_PLN_DT, 'YYYYMMDD') DOR_NOD_PLN_DT, 
  TO_CHAR(B.DOR_NOD_PLN_DT, 'HH24:MI:SS') DOR_NOD_PLN_DT_HMS, 
  B.TRSP_BND_CD, B.CUST_NOMI_TRKR_FLG, B.TRSP_SO_CMB_SEQ, B.CGO_TP_CD, 
  B.CNTR_WGT, B.WGT_MEAS_UT_CD, B.CMDT_CD, 
  (B.VSL_CD||B.SKD_VOY_NO||B.SKD_DIR_CD) TRUNKVVD, (B.CUST_CNT_CD||B.CUST_SEQ) CUST_CNT_CD, 
  B.DOR_DE_ADDR, B.MLT_STOP_DE_FLG, B.DOR_SVC_TP_CD, B.DOR_SVC_TP_CD DOR_SVC_TP_CD2, B.INTER_RMK, B.CRE_USR_ID, 
  B.UPD_USR_ID, B.TRSP_SO_OFC_CTY_CD, 
  (B.FDR_VSL_CD||B.FDR_SKD_VOY_NO||B.FDR_SKD_DIR_CD) FEEDERVVD, 
  REPLACE(B.SPCL_INSTR_RMK, CHR(13)||CHR(10), ' ') SPCL_INSTR_RMK, 
  B.BKG_RCVDE_TERM_CD, B.SLAN_CD, B.POR_CD, B.POL_CD, B.POD_CD, B.DEL_CD, 
  B.CRE_OFC_CD, B.SPCL_CGO_CNTR_TP_CD,  
  B.BL_NO BL_NO,
  (SELECT NVL(LSTM_CD, ' ')||'$'||NVL(IMDT_EXT_FLG, ' ')
     FROM MST_CONTAINER
    WHERE CNTR_NO  = B.EQ_NO) MST_CNTR,
  (SELECT NVL(FRT_CLT_FLG, ' ')||'$'||NVL(OBL_RDEM_FLG, ' ')||'$'||DECODE(CSTMS_CLR_CD, 'Y', 'Y', 'N')
     FROM BKG_CGO_RLSE
    WHERE BL_NO = B.BL_NO) FOC,  
  (SELECT BC.CUST_NM
     FROM BKG_CUSTOMER BC
    WHERE BC.BKG_NO = B.BKG_NO
      AND BC.BKG_CUST_TP_CD = 'N')    NTFY_CUST_NM,                                   
  (SELECT BC.CUST_CNT_CD ||'$'|| TO_CHAR(BC.CUST_SEQ) ||'$'|| BC.CUST_NM
     FROM BKG_CUSTOMER BC
    WHERE BC.BKG_NO = B.BKG_NO
      AND BC.BKG_CUST_TP_CD = 'C')    CNEE_CUST_INFO,
  (SELECT BC.CUST_CNT_CD ||'$'|| TO_CHAR(BC.CUST_SEQ) ||'$'|| BC.CUST_NM
     FROM BKG_CUSTOMER BC
    WHERE BC.BKG_NO = B.BKG_NO
      AND BC.BKG_CUST_TP_CD = 'S')    SHPR_CUST_INFO , 
  B.IBD_CSTMS_CLR_LOC_CD, B.OWNR_CO_CD,   '' LST_LOC_CD,  
  '' LSTM_EXP_FLG, '' CMDT_NAME, 
  '' PKGCODE, '' SEALNO, '' SEALNO2, NULL NOOFPKG, '' SC_NO, '' RFANO, '' CUSTOMSCLEARANCENO, 
  '' CUSTOMSCLEARANCE,
  '' LST_LOC_CD2, 
  B.TRSP_COST_DTL_MOD_CD TRSP_COST_DTL_MOD_SEP, B.CNTR_PKUP_NO, 
  TO_CHAR(B.AVAL_DT, 'YYYYMMDD') AVAL_DT, TO_CHAR(B.AVAL_DT, 'HH24:MI:SS') AVAL_DT_HMS, 
  TO_CHAR(B.LST_FREE_DT, 'YYYYMMDD') LST_FREE_DT, TO_CHAR(B.LST_FREE_DT, 'HH24:MI:SS') LST_FREE_DT_HMS, 
  B.SUB_EQ_TPSZ_CD, B.CNTR_SUB_FLG, B.FCTRY_NM, B.CNTC_PSON_NM, B.CNTC_PSON_PHN_NO, B.CNTC_PSON_FAX_NO, 
  '' DOR_PST_CD, '' TRO_CFM_OFC_CD, '' TRO_CFM_USR_ID, 
  '' TRO_CFM_UPD_DT1, '' TRO_CFM_UPD_DT2, '' TRO_LOD_REF_NO,  
  NULL TRSP_RQST_ORD_SEQ,
  B.ORG_EQ_TPSZ_CD
FROM TRS_TRSP_SVC_ORD B 
WHERE B.TRSP_SO_TP_CD = 'M' 
AND B.TRSP_SO_STS_CD IN ('C', 'R') 
AND B.DELT_FLG = 'N' 
AND B.HJL_NO       IS NULL                      
AND B.CRE_OFC_CD = @[cre_ofc_cd]
AND TO_CHAR(B.N1ST_NOD_PLN_DT, 'YYYYMMDD') = @[lst_nod_pln_dt]
AND B.FM_NOD_CD = @[sNodeL]
AND B.EQ_TPSZ_CD = @[eq_tpsz_cd]
)BB
#end			]]></sql>
			<params>
				<param name="cre_ofc_cd" type="12" value="a" out="N"/>
				<param name="sFtime" type="12" value="20090909" out="N"/>
				<param name="sTtime" type="12" value="20090909" out="N"/>
				<param name="sNodeL" type="12" value="b" out="N"/>
				<param name="eq_tpsz_cd" type="12" value="c" out="N"/>
				<param name="lst_nod_pln_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
