<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TrsAudDBDAOSearchTrffCmprsnByTRSAgrmntRSQL">
			<desc><![CDATA[Tariff Comparison by TRS Agreement 조회]]></desc>
			<sql><![CDATA[
SELECT	  E.WO_RHQ_CD
     	, E.WO_OFC_CD
     	, E.INLND_COST_YRMON
     	, ( SELECT B.INTG_CD_VAL_DP_DESC FROM COM_INTG_CD_DTL B WHERE INTG_CD_ID = 'CD00279' AND B.INTG_CD_VAL_CTNT = E.TRSP_SO_TP_CD) 			AS TRSP_SO_TP_CD
		, ( SELECT B.INTG_CD_VAL_DP_DESC FROM COM_INTG_CD_DTL B WHERE INTG_CD_ID = 'CD00594' AND B.INTG_CD_VAL_CTNT = E.TRSP_COST_DTL_MOD_CD) 	AS TRSP_COST_DTL_MOD_CD
		, E.TRSP_CRR_MOD_CD
		, ( SELECT B.INTG_CD_VAL_DP_DESC FROM COM_INTG_CD_DTL B WHERE INTG_CD_ID = 'CD00591' AND B.INTG_CD_VAL_CTNT = E.TRSP_BND_CD) 			AS TRSP_BND_CD
     	, E.FM_NOD_CD
     	, E.VIA_NOD_CD
     	, E.TO_NOD_CD
     	, E.DOR_NOD_CD
     	, E.VNDR_SEQ
     	, ( SELECT b.VNDR_LGL_ENG_NM FROM MDM_VENDOR B WHERE B.VNDR_SEQ = E.VNDR_SEQ) AS VNDR_NM
     	, E.TRSP_SO_KNT
     	, E.AGMT_CURR_CD
     	, E.AGMT_20FT_DRY_AMT
     	, E.AGMT_40FT_DRY_AMT
     	, E.AGMT_20FT_RF_AMT
     	, E.AGMT_40FT_RF_AMT
     	, E.AGMT_20FT_DRY_USD_AMT
     	, E.AGMT_40FT_DRY_USD_AMT
     	, E.AGMT_20FT_RF_USD_AMT
     	, E.AGMT_40FT_RF_USD_AMT
     	, E.TRSP_AVG_20FT_DRY_USD_AMT
     	, E.TRSP_AVG_40FT_DRY_USD_AMT
     	, E.TRSP_AVG_20FT_RF_USD_AMT
     	, E.TRSP_AVG_40FT_RF_USD_AMT
     	, E.SO_20FT_VOL_KNT
     	, E.SO_40FT_VOL_KNT
     	, E.SO_TEU_QTY
     	, E.SO_BX_QTY
     	, E.WO_CURR_CD
     	, E.WO_20FT_DRY_AVG_AMT
     	, E.WO_40FT_DRY_AVG_AMT
     	, E.WO_45FT_DRY_AVG_AMT
     	, E.WO_20FT_RF_AVG_AMT
     	, E.WO_40FT_RF_AVG_AMT
     	, E.WO_20FT_DG_AVG_AMT
     	, E.WO_40FT_DG_AVG_AMT
     	, E.WO_20FT_AWK_AVG_AMT
     	, E.WO_40FT_AWK_AVG_AMT
  FROM 	EAS_EXPN_AUD_CS_INLND_COST E
 WHERE 	1=1
   		AND E.WO_OFC_CD IN (	SELECT	OFC_CD
                       			FROM 	MDM_ORGANIZATION
                      			WHERE 	DELT_FLG = 'N'
                    			CONNECT BY 	NOCYCLE PRIOR OFC_CD = PRNT_OFC_CD
                      			START WITH 	OFC_CD = @[s_rhq_ofc_cd]
                    	 	)
 	#if (${s_wo_ofc_cd} != '')
		AND E.WO_OFC_CD = @[s_wo_ofc_cd]
	#end
   	AND INLND_COST_YRMON BETWEEN REPLACE(@[s_fm_yrmon],'-','') AND REPLACE(@[s_to_yrmon],'-','')
 	#if (${s_so_tp_cd} != '')
   		AND E.TRSP_SO_TP_CD = @[s_so_tp_cd]
	#end
	#if (${s_trsp_cost_dtl_mod_cd} != '')
   		AND E.TRSP_COST_DTL_MOD_CD = @[s_trsp_cost_dtl_mod_cd]
	#end
	#if (${s_trsp_crr_mod_cd} != '')
   		AND E.TRSP_CRR_MOD_CD = @[s_trsp_crr_mod_cd]
	#end
	#if (${s_trsp_bnd_cd} != '')
   		AND E.TRSP_BND_CD = @[s_trsp_bnd_cd]
	#end
	#if (${s_fm_nod_cd} != '')
   		AND E.FM_NOD_CD   = @[s_fm_nod_cd]
	#end
	#if (${s_via_nod_cd} != '')
   		AND E.VIA_NOD_CD  = @[s_via_nod_cd]
	#end
	#if (${s_to_nod_cd} != '')
		AND E.TO_NOD_CD   = @[s_to_nod_cd]
	#end
	#if (${s_dor_nod_cd} != '')
   		AND E.DOR_NOD_CD  = @[s_dor_nod_cd]
	#end			]]></sql>
			<params>
				<param name="s_rhq_ofc_cd" type="12" value="" out="N"/>
				<param name="s_wo_ofc_cd" type="12" value="" out="N"/>
				<param name="s_fm_yrmon" type="12" value="" out="N"/>
				<param name="s_to_yrmon" type="12" value="" out="N"/>
				<param name="s_so_tp_cd" type="12" value="" out="N"/>
				<param name="s_trsp_cost_dtl_mod_cd" type="12" value="" out="N"/>
				<param name="s_trsp_crr_mod_cd" type="12" value="" out="N"/>
				<param name="s_trsp_bnd_cd" type="12" value="" out="N"/>
				<param name="s_fm_nod_cd" type="12" value="" out="N"/>
				<param name="s_via_nod_cd" type="12" value="" out="N"/>
				<param name="s_to_nod_cd" type="12" value="" out="N"/>
				<param name="s_dor_nod_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
