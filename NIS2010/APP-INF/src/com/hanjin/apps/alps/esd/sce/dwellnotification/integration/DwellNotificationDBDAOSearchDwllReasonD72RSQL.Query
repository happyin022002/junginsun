<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DwellNotificationDBDAOSearchDwllReasonD72RSQL">
			<desc><![CDATA[Reason D72 조회]]></desc>
			<sql><![CDATA[
SELECT 
    CASE WHEN DWLL_RSN_TP_CD='A' THEN 'Available for Pick up'||CHR(10)
         WHEN INSTR_RMK IS NULL AND NVL(DWLL_RSN_TP_CD,'N') <> 'D' THEN ''
         ELSE 'Cntr Delay Reason : '||DECODE(DWLL_RSN_TP_CD,'D','Demurrage Pending')||NVL2(INSTR_RMK,', '||INSTR_RMK,'') END AS DWLL_RSN
FROM
(
    SELECT
      (SELECT /*+ INDEX_DESC(INS XPKBKG_USA_CUST_SVC_INSTR) */ INSTR_RMK FROM BKG_USA_CUST_SVC_INSTR I WHERE H.BKG_NO = I.BKG_NO AND I.DELT_FLG = 'N' AND INSTR_RMK_TP_CD='72D' AND ROWNUM=1) INSTR_RMK               
    ,@[dwll_rsn_tp_cd] DWLL_RSN_TP_CD           
    FROM
      SCE_DWLL_NTFC_CNDDT H              
    WHERE 1=1
    AND H.EML_SND_DT=@[eml_snd_dt]
    AND H.DWLL_TM_TP_CD=@[dwll_tm_tp_cd]
    AND H.CNTR_NO=@[cntr_no]
    AND H.BKG_NO=@[bkg_no]
) Z			]]></sql>
			<params>
				<param name="dwll_rsn_tp_cd" type="12" value="" out="N"/>
				<param name="eml_snd_dt" type="12" value="" out="N"/>
				<param name="dwll_tm_tp_cd" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
