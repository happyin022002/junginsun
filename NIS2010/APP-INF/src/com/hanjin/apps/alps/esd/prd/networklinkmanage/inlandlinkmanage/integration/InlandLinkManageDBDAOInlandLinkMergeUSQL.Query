<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="InlandLinkManageDBDAOInlandLinkMergeUSQL">
			<desc><![CDATA[InlandLinkMerge]]></desc>
			<sql><![CDATA[
MERGE INTO PRD_INLND_EACH_LNK E 
      USING (SELECT @[lnk_org_nod_cd] LNK_ORG_NOD_CD, @[lnk_dest_nod_cd] LNK_DEST_NOD_CD,  
                    @[trsp_mod_cd] TRSP_MOD_CD, to_number( @[vndr_seq] )  VNDR_SEQ, @[tztm_hrs] TZTM_HRS, 
                    @[lnk_dist] LNK_DIST, @[dist_ut_cd] DIST_UT_CD, @[cty_cd] trsp_agmt_ofc_cty_cd, to_number(@[i_agmt_seq] ) trsp_agmt_seq 
               FROM DUAL    
            ) D ON (E.LNK_ORG_NOD_CD= D.LNK_ORG_NOD_CD 
                    AND E.LNK_DEST_NOD_CD=D.LNK_DEST_NOD_CD 
                    AND E.TRSP_MOD_CD = D.TRSP_MOD_CD) 
WHEN MATCHED THEN  
     UPDATE SET VNDR_SEQ= D.VNDR_SEQ, 
                TZTM_HRS= D.TZTM_HRS, 
                LNK_DIST = D.LNK_DIST, 

                CRE_OFC_CD = @[cre_ofc_cd], 
                CRE_USR_ID = @[cre_usr_id], 
                CRE_DT = SYSDATE, 

                DELT_FLG = 'N', 
                DIST_UT_CD = D.DIST_UT_CD, 		
                UPD_USR_ID = @[upd_usr_id], 
                UPD_DT= SYSDATE, 
                trsp_agmt_ofc_cty_cd= d.trsp_agmt_ofc_cty_cd, 
                trsp_agmt_seq= d.trsp_agmt_seq 
WHEN NOT MATCHED THEN  
     INSERT(LNK_ORG_NOD_CD,LNK_DEST_NOD_CD,TRSP_MOD_CD,VNDR_SEQ,TZTM_HRS, 
            LNK_DIST,DIST_UT_CD,RAIL_CRR_TP_CD,LNK_RMK,CRE_OFC_CD, 
            CRE_USR_ID,CRE_DT,UPD_USR_ID,UPD_DT,DELT_FLG,trsp_agmt_ofc_cty_cd, trsp_agmt_seq)  
     VALUES(D.LNK_ORG_NOD_CD,D.LNK_DEST_NOD_CD,D.TRSP_MOD_CD,D.VNDR_SEQ,D.TZTM_HRS, 
            D.LNK_DIST,D.DIST_UT_CD,'','', @[cre_ofc_cd], 
            @[cre_usr_id] ,SYSDATE, @[upd_usr_id] ,SYSDATE,'N',d.trsp_agmt_ofc_cty_cd, d.trsp_agmt_seq)			]]></sql>
			<params>
				<param name="lnk_org_nod_cd" type="12" value="" out="N"/>
				<param name="lnk_dest_nod_cd" type="12" value="" out="N"/>
				<param name="trsp_mod_cd" type="12" value="" out="N"/>
				<param name="vndr_seq" type="12" value="" out="N"/>
				<param name="tztm_hrs" type="12" value="" out="N"/>
				<param name="lnk_dist" type="12" value="" out="N"/>
				<param name="dist_ut_cd" type="12" value="" out="N"/>
				<param name="cty_cd" type="12" value="" out="N"/>
				<param name="i_agmt_seq" type="12" value="" out="N"/>
				<param name="cre_ofc_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
