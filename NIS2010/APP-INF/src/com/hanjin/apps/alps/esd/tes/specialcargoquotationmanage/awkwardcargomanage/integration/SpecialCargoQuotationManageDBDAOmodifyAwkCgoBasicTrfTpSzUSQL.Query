<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpecialCargoQuotationManageDBDAOmodifyAwkCgoBasicTrfTpSzUSQL">
			<desc><![CDATA[modifyAwkCgoBasicTrfTpSz]]></desc>
			<sql><![CDATA[
MERGE INTO TES_AWK_CGO_TRF_TP_SZ V
USING  DUAL
ON (    V.YD_CD = @[yd_cd]
        AND V.TML_AWK_CGO_TRF_TP_CD = @[tml_awk_cgo_trf_tp_cd]
        AND V.IO_BND_CD = @[io_bnd_cd]
        AND V.IO_GA_CD = @[io_ga_cd]
        AND V.TML_AWK_TS_CD = @[tml_awk_ts_cd]
        AND V.COND_NO = @[cond_no]
        AND V.TML_AWK_TRF_VER_NO = (SELECT NVL(MAX(TML_AWK_TRF_VER_NO),0)
        							FROM TES_AWK_CGO_TRF_DTL 
        							WHERE YD_CD = @[yd_cd]
        							AND TML_AWK_CGO_TRF_TP_CD = @[tml_awk_cgo_trf_tp_cd]
        							AND IO_BND_CD = @[io_bnd_cd]
        							AND IO_GA_CD = @[io_ga_cd]
        							AND TML_AWK_TS_CD = @[tml_awk_ts_cd]
        							AND COND_NO = @[cond_no]
        							)
        AND V.TML_AWK_UC_CALC_TP_CD = @[tml_awk_uc_calc_tp_cd]
        AND V.CNTR_SZ_CD = @[cntr_tpsz_cd]
)
WHEN MATCHED THEN
    UPDATE SET 
        LOCL_CURR_CD = @[locl_curr_cd],
        LOCL_CURR_AMT = @[locl_curr_amt],
        USD_AMT = @[usd_amt],
        USD_XCH_DT = @[usd_xch_dt],
        UPD_USR_ID =  @[upd_usr_id],
        UPD_DT = SYSDATE
WHEN NOT MATCHED THEN
    INSERT (
        YD_CD,
        TML_AWK_CGO_TRF_TP_CD,
        IO_BND_CD,
        IO_GA_CD,
        TML_AWK_TS_CD,
        COND_NO,
        TML_AWK_TRF_VER_NO,
        TML_AWK_UC_CALC_TP_CD,
        CNTR_SZ_CD,
        LOCL_CURR_CD,
        LOCL_CURR_AMT,
        USD_AMT,
        USD_XCH_DT,
        SPCL_CGO_REF_SEQ,
        CRE_USR_ID,
        CRE_DT,
    	UPD_USR_ID,
    	UPD_DT
	) VALUES (
    	@[yd_cd],
        @[tml_awk_cgo_trf_tp_cd],
        @[io_bnd_cd],
        @[io_ga_cd],
        @[tml_awk_ts_cd],
 		@[cond_no],
        (SELECT NVL(MAX(TML_AWK_TRF_VER_NO),0)
        FROM TES_AWK_CGO_TRF_DTL 
        WHERE YD_CD = @[yd_cd]
        AND TML_AWK_CGO_TRF_TP_CD = @[tml_awk_cgo_trf_tp_cd]
        AND IO_BND_CD = @[io_bnd_cd]
        AND IO_GA_CD = @[io_ga_cd]
        AND TML_AWK_TS_CD = @[tml_awk_ts_cd]
        AND COND_NO = @[cond_no]
        ),
        @[tml_awk_uc_calc_tp_cd],
        @[cntr_tpsz_cd],
        @[locl_curr_cd],
        @[locl_curr_amt],
        @[usd_amt],
        @[usd_xch_dt],
		DECODE(@[tml_awk_uc_calc_tp_cd],'S',TES_SPCL_CGO_REF_SEQ.nextval,0),
        (SELECT 
		Y.OFC_CD
		FROM MDM_YARD Y
		WHERE 1=1
		AND Y.YD_CD LIKE @[yd_cd]), 
        SYSDATE, 
        @[upd_usr_id],
        SYSDATE)			]]></sql>
			<params>
				<param name="yd_cd" type="12" value="" out="N"/>
				<param name="tml_awk_cgo_trf_tp_cd" type="12" value="" out="N"/>
				<param name="io_bnd_cd" type="12" value="" out="N"/>
				<param name="io_ga_cd" type="12" value="" out="N"/>
				<param name="tml_awk_ts_cd" type="12" value="" out="N"/>
				<param name="cond_no" type="12" value="" out="N"/>
				<param name="tml_awk_uc_calc_tp_cd" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="locl_curr_cd" type="12" value="" out="N"/>
				<param name="locl_curr_amt" type="12" value="" out="N"/>
				<param name="usd_amt" type="12" value="" out="N"/>
				<param name="usd_xch_dt" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
