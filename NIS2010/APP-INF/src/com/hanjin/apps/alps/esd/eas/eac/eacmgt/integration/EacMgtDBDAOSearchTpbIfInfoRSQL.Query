<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EacMgtDBDAOSearchTpbIfInfoRSQL">
			<desc><![CDATA[TPB I/F 내역을 조회회한다.]]></desc>
			<sql><![CDATA[
SELECT -- 공통
      TPB_OTS_DTL_SEQ1.NEXTVAL AS OTS_DTL_SEQ
      ,'' as ibflag
       -- CreateTPBCandidateVO (TPB 데이타 등록용)
      ,B.VNDR_CUST_DIV_CD AS s_vndr_cust_div_cd
      ,B.VNDR_CNT_CD AS s_vndr_cnt_cd
      ,B.VNDR_SEQ AS s_vndr_seq
      ,B.CUST_CNT_CD AS s_cust_cnt_cd
      ,B.CUST_SEQ AS s_cust_seq
      ,B.N3PTY_BIL_TP_CD AS s_n3pty_bil_tp_cd
      ,A.RESPB_OFC_CD    AS s_if_ofc_cd
      ,A.RESPB_OFC_CD    AS user_ofc_cd
      ,B.N3PTY_EXPN_TP_CD AS s_n3pty_expn_tp_cd
      ,A.N3PTY_SRC_NO AS s_n3pty_src_no
      ,'' AS s_so_no
      ,B.BKG_NO AS s_bkg_no
      ,B.BKG_NO AS s_bkg_no_all
      ,B.BL_NO  AS s_bl_no
      ,C.EQ_NO  AS eq_no
      ,C.EQ_NO as s_vvd
      ,SUBSTR(C.EQ_NO, 0,4) AS s_vsl_cd
      ,SUBSTR(C.EQ_NO, 5,4) AS s_skd_voy_no
      ,SUBSTR(C.EQ_NO, 9,1) AS s_skd_dir_cd
      ,A.CURR_CD AS s_curr_cd
      ,'' AS s_file_no
      ,C.DIFF_INV_AMT AS if_amt
      ,'' AS s_if_rmk
      ,C.EQ_KND_CD AS eq_knd_cd
      ,C.EQ_TPSZ_CD AS eq_tpsz_cd
      ,B.N3PTY_OFC_CD AS s_n3pty_ofc_cd
      ,A.YD_CD AS s_yd_cd
      ,(SELECT X.VNDR_CNT_CD FROM MDM_VENDOR X WHERE X.VNDR_SEQ = A.VNDR_SEQ) AS s_src_vndr_cnt_cd
      ,A.VNDR_SEQ AS s_src_vndr_seq
      ,'' s_mnl_inp_tp_cd
      ,(SELECT X.VNDR_LGL_ENG_NM FROM MDM_VENDOR X WHERE X.VNDR_SEQ = B.VNDR_SEQ) AS s_vndr_lgl_eng_nm
      ,(SELECT X.CUST_LGL_ENG_NM FROM MDM_CUSTOMER X WHERE X.CUST_CNT_CD = B.CUST_CNT_CD AND X.CUST_SEQ = B.CUST_SEQ) AS s_vndr_lgl_eng_nm
       -- SearchCandidateListVO (TPB Confirm용)
      ,'1' AS cfm_g
      ,''  AS cfm_rmk
      ,''  AS n3pty_non_cfm_rsn_cd
      ,A.CURR_CD AS if_curr_cd
      ,C.DIFF_INV_AMT AS cfm_amt      
      ,CASE WHEN B.VNDR_CUST_DIV_CD = 'V' THEN TO_CHAR(B.VNDR_SEQ)
            WHEN B.VNDR_CUST_DIV_CD = 'C' THEN B.CUST_CNT_CD||B.CUST_SEQ
            WHEN B.VNDR_CUST_DIV_CD = 'S' THEN B.N3PTY_OFC_CD
       END AS trd_party_val
      ,'S' AS s_n3pty_if_tp_cd
      ,'' as cfm_i
      ,'' as cfm_n
      ,'' as cfm_r
      ,'' as cfm_d
      ,B.VNDR_CUST_DIV_CD AS vndr_cust_div_cd
      ,B.VNDR_CNT_CD AS vndr_cnt_cd
      ,B.VNDR_SEQ AS vndr_seq
      ,B.CUST_CNT_CD AS cust_cnt_cd
      ,B.CUST_SEQ AS cust_seq
  FROM EAS_EXPN_AUD_CS_MGMT A
      ,EAS_EXPN_AUD_CS_N3RD_PTY B
      ,EAS_EXPN_AUD_N3RD_PTY_DTL C
 WHERE A.EAC_NO = B.EAC_NO
   AND A.EAC_NO = C.EAC_NO
   AND A.EAC_NO =  @[eac_no] -- EAC NO

			]]></sql>
			<params>
				<param name="eac_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
