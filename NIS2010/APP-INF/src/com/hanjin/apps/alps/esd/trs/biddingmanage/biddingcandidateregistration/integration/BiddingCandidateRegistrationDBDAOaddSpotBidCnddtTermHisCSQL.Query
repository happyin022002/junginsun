<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BiddingCandidateRegistrationDBDAOaddSpotBidCnddtTermHisCSQL">
			<desc><![CDATA[addSpotBidCnddtTermHis]]></desc>
			<sql><![CDATA[
INSERT
  INTO TRS_SPOT_BID_CNDDT_TERM_HIS (SPOT_BID_CNDDT_TERM_SEQ, SPOT_BID_CNDDT_TERM_HIS_SEQ, SPOT_BID_OFC_CD, TRSP_CRR_MOD_CD , FM_NOD_CD , VIA_NOD_CD , DOR_NOD_CD , TO_NOD_CD , LOCL_CRE_DT , CRE_OFC_CD , DELT_FLG , CRE_USR_ID , CRE_DT , UPD_USR_ID , UPD_DT)
SELECT SPOT_BID_CNDDT_TERM_SEQ,
       (SELECT NVL(MAX(SPOT_BID_CNDDT_TERM_HIS_SEQ)+1, 1)
          FROM TRS_SPOT_BID_CNDDT_TERM_HIS
         WHERE SPOT_BID_CNDDT_TERM_SEQ = SBCT.SPOT_BID_CNDDT_TERM_SEQ),
       SPOT_BID_OFC_CD,
       TRSP_CRR_MOD_CD ,
       FM_NOD_CD ,
       VIA_NOD_CD ,
       DOR_NOD_CD ,
       TO_NOD_CD ,
       GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[cre_ofc_cd]) LOCL_CRE_DT ,
       @[cre_ofc_cd] CRE_OFC_CD ,
       DELT_FLG ,
       @[cre_usr_id] CRE_USR_ID ,
       SYSDATE CRE_DT ,
       @[cre_usr_id] UPD_USR_ID ,
       SYSDATE UPD_DT
  FROM TRS_SPOT_BID_CNDDT_TERM SBCT
 WHERE 1=1
   AND SPOT_BID_OFC_CD = @[spot_bid_ofc_cd]
   AND TRSP_CRR_MOD_CD = @[trsp_crr_mod_cd]
   AND NVL(FM_NOD_CD, ' ') = NVL(@[fm_nod_cd], ' ')
   AND NVL(VIA_NOD_CD, ' ') = NVL(@[via_nod_cd], ' ')
   AND NVL(DOR_NOD_CD, ' ') = NVL(@[dor_nod_cd], ' ')
   AND NVL(TO_NOD_CD, ' ') = NVL(@[to_nod_cd], ' ')			]]></sql>
			<params>
				<param name="cre_ofc_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="spot_bid_ofc_cd" type="12" value="" out="N"/>
				<param name="trsp_crr_mod_cd" type="12" value="" out="N"/>
				<param name="fm_nod_cd" type="12" value="" out="N"/>
				<param name="via_nod_cd" type="12" value="" out="N"/>
				<param name="dor_nod_cd" type="12" value="" out="N"/>
				<param name="to_nod_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
