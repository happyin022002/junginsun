<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpecialSOCheckDBDAOsearchOtherSOCheckListRSQL">
			<desc><![CDATA[Special S/O of Transport에서 Other S/O sheet조회]]></desc>
			<sql><![CDATA[
SELECT 	DISTINCT											
A.TRSP_SO_OFC_CTY_CD||A.TRSP_SO_SEQ SO_NO 					,	
A.EQ_NO														,	
A.EQ_TPSZ_CD												,	
DECODE(A.TRSP_BND_CD, 'I','In','O','Out',A.TRSP_BND_CD)	TRSP_BND_CD	,	
DECODE(A.CGO_TP_CD, 'F','Full','M','Empty',	A.CGO_TP_CD) CGO_TP_CD	,	
A.CNTR_WGT													,	
A.WGT_MEAS_UT_CD											,	
A.TRSP_COST_DTL_MOD_CD										,	
A.TRSP_CRR_MOD_CD											,	
A.CMDT_CD													,	
DECODE(A.CUST_NOMI_TRKR_FLG, 'Y', 'CNT', 'SML')	CUST_NOMI_TRKR_FLG_NM,	
A.CUST_CNT_CD||A.CUST_SEQ	cust_cnt_cd_seq					,	
A.TRSP_OTR_COST_MON_DT										,	
SUBSTR(A.FM_NOD_CD,1,5) FM_LOC_VALUE						,	
SUBSTR(A.FM_NOD_CD,6,2) FM_YARD_VALUE 						,	
SUBSTR(A.VIA_NOD_CD,1,5) VIA_LOC_VALUE						,	
SUBSTR(A.VIA_NOD_CD,6,2) VIA_YARD_VALUE 					,	
SUBSTR(A.TO_NOD_CD,1,5) TO_LOC_VALUE						,	
SUBSTR(A.TO_NOD_CD,6,2) TO_YARD_VALUE 						,	 
SUBSTR(A.DOR_NOD_CD,1,5) DR_LOC_VALUE						,	
SUBSTR(A.DOR_NOD_CD,6,2) DR_YARD_VALUE 						,	
A.ACT_CUST_CNT_CD||A.ACT_CUST_SEQ ACT_CUST_CNT_CD_SEQ  		,	
A.DOR_DE_ADDR												,	
A.VNDR_SEQ													,	
B.VNDR_ABBR_NM												,	
A.CURR_CD													,	
A.BZC_AMT													,	
A.NEGO_AMT													,	
A.FUEL_SCG_AMT												,	
A.ETC_ADD_AMT												,	
NVL(A.BZC_AMT+A.NEGO_AMT+A.FUEL_SCG_AMT+A.ETC_ADD_AMT, 0) TOTAL_AMT,	
A.REF_BKG_NO												,	
--A.REF_BKG_NO_SPLIT											,	
A.REF_BL_NO													,	
A.TRSP_PURP_RSN													
FROM TRS_TRSP_SVC_ORD A										,	
MDM_VENDOR B													
WHERE 															
A.VNDR_SEQ = B.VNDR_SEQ(+)										
AND	A.TRSP_SO_TP_CD = 'O'										
AND A.CRE_OFC_CD  = @[so_ofc_cd]												


#if(${io_bound}!='A')
 AND NVL(A.TRSP_BND_CD, 'N/A')	= NVL(@[io_bound], NVL(A.TRSP_BND_CD, 'N/A')) 	
#end

#if (${so_month}!='' && ${so_month}!='YYYYMM') 
 AND TO_CHAR(A.LOCL_CRE_DT, 'YYYYMM')  = @[so_month]

#end
	
#if ((${fm_so_date}!='') && (${to_so_date}!='')&& (${fm_so_date}!='YYYYMMDD')&& (${to_so_date}!='YYYYMMDD')) 
 AND A.LOCL_CRE_DT >= TO_DATE(NVL( @[fm_so_date], @[to_so_date]),'YYYYMMDD')			
 AND A.LOCL_CRE_DT <= TO_DATE(NVL( @[to_so_date], @[fm_so_date]),'YYYYMMDD')			
#end
	
AND NVL(A.DELT_FLG,'N') = 'N'									
ORDER BY A.EQ_NO			]]></sql>
			<params>
				<param name="so_ofc_cd" type="12" value="a" out="N"/>
				<param name="io_bound" type="12" value="b" out="N"/>
				<param name="so_month" type="12" value="c" out="N"/>
				<param name="fm_so_date" type="12" value="20090909" out="N"/>
				<param name="to_so_date" type="12" value="20090910" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
