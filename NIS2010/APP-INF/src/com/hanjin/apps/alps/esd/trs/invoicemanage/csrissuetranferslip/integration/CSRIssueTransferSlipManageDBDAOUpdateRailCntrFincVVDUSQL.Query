<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CSRIssueTransferSlipManageDBDAOUpdateRailCntrFincVVDUSQL">
			<desc><![CDATA[Rail CNTR VVD를 업데이트한다]]></desc>
			<sql><![CDATA[
UPDATE    	TRS_TRSP_RAIL_INV_DTL   D																					
SET       	D.FINC_VVD_CD = NVL2(
									(SELECT X.ORG_BKG_NO  
										FROM TRS_TRSP_RAIL_BIL_ORD X 
										WHERE X.TRSP_SO_OFC_CTY_CD = D.TRSP_SO_OFC_CTY_CD 
											AND X.TRSP_SO_SEQ = D.TRSP_SO_SEQ)	
									,TRS_COMMON_PKG.GET_BKG_REV_VVD2_FNC(
                                                                        @[AP_OFC_CD]
																		,@[INV_DT]
																		,(SELECT X.ORG_BKG_NO 
																			FROM TRS_TRSP_RAIL_BIL_ORD X 
																			WHERE X.TRSP_SO_OFC_CTY_CD = D.TRSP_SO_OFC_CTY_CD 
																			AND X.TRSP_SO_SEQ = D.TRSP_SO_SEQ)
																	)
									,'CNTC'||SUBSTR(TRS_GET_GL_DT_FNC( '', @[AP_OFC_CD], @[INV_DT], '15'),3,4)||'MM'	
								)																					
WHERE     	D.INV_VNDR_SEQ = @[INV_VNDR_SEQ]

#if ($INV_NO.size() > 0) 
	AND	D.INV_NO	IN	(
		#foreach( ${key} in ${INV_NO}) 
			#if($velocityCount < $INV_NO.size()) 
				'$key', 
			#else 
				'$key' 
			#end 
		#end
	)
#end			]]></sql>
			<params>
				<param name="AP_OFC_CD" type="12" value="" out="N"/>
				<param name="INV_DT" type="12" value="" out="N"/>
				<param name="INV_VNDR_SEQ" type="2" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
