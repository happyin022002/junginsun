<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SingleTransportationSOManageDBDAOSearchContiCodeCheckRSQL">
			<desc><![CDATA[Control Office를 기준으로 Conti code를 체크한다.]]></desc>
			<sql><![CDATA[
SELECT CONTI_CD, COUNT(DISTINCT CONTI_CD) CNT
  FROM (
        SELECT A.OFC_CD
              ,LEVEL
              ,SYS_CONNECT_BY_PATH(A.OFC_CD, '/') FULL_PATH
              ,(SELECT Y.CONTI_CD 
                  FROM MDM_ORGANIZATION X,
                       MDM_LOCATION     Y
                 WHERE X.LOC_CD   = Y.LOC_CD
                   AND X.OFC_CD = A.OFC_CD
               ) CONTI_CD
          FROM MDM_ORGANIZATION A
         WHERE A.OFC_KND_CD = 2
         START WITH A.OFC_CD IN (
         #foreach( ${key} in ${arr_so_office}) 
	        #if($velocityCount < $arr_so_office.size()) 
		       '$key', 
	        #else 
		       '$key' 
	        #end 
         #end
         )
     CONNECT BY A.OFC_CD = PRIOR A.PRNT_OFC_CD
) 
GROUP BY CONTI_CD			]]></sql>
			<params>
			</params>
		</query>
	</querys>
</sqls>
