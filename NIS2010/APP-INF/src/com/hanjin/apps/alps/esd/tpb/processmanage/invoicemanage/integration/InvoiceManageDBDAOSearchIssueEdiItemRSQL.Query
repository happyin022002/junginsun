<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="InvoiceManageDBDAOSearchIssueEdiItemRSQL">
			<desc><![CDATA[SearchIssueEdiItem]]></desc>
			<sql><![CDATA[
SELECT  D.N3PTY_BIL_TP_CD                                           TYPE_CODE
       ,TRIM(REPLACE(REPLACE(UPPER(TPB_GET_N3PTY_BIL_TP_NM_FNC(D.N3PTY_BIL_TP_CD)) ,CHR(13)||CHR(10),' '),CHR(9),' ')) N3PTY_BIL_TP_NM
       ,D.N3PTY_INV_RVIS_DTL_SEQ                                    SEQNO
       ,D.EQ_KND_CD                                                 EQKIND
       ,D.EQ_NO                                                     EQ_NO
       ,D.EQ_TPSZ_CD                                                EQTYPE
       ,D.BKG_NO	                                                BKGNO
       ,D.BL_NO	                                                    BLNO
       ,D.VSL_CD||D.SKD_VOY_NO||D.SKD_DIR_CD	                    VVD
       ,D.YD_CD                                                 	YARD
       ,D.FM_NOD_CD||D.VIA_NOD_CD||D.TO_NOD_CD||D.DOR_NOD_CD	    ROUTE
       ,( SELECT NVL(D.LOD_ID, NVL(MAX(CUST_REF_NO_CTNT),'')) 
          FROM BKG_REFERENCE R 
          WHERE R.BKG_NO(+)  = D.BKG_NO 
          AND   R.CNTR_NO(+) = D.EQ_NO 
          AND   R.BKG_REF_TP_CD = 'MSLD' )  LOAD_ID   
       ,D.NEW_EQ_NO	                                                NEW_EQNO
       ,D.NEW_CNTR_SEAL_NO	                                        NEW_SEAL
       ,D.LST_FREE_DT	                                            LASTFREE_DATE
       ,D.INV_DTL_AMT                                               AMT_ITEM
       ,D.VAT_DTL_AMT                                               AMT_ITEM_VAT
       ,D.PKUP_DT                                                   PICKUP_DATE
       ,D.FT_OVR_DYS                                                FREETIME_OVER
       ,D.CITA_NO                                                   CITATION
       ,D.CNTR_WGT                                                  CNTR_WGT
       ,D.N3PTY_CNTR_WGT_UT_CD                                      CNTR_WUNIT
       ,D.WT_HRS	                                                WAIT_HRS
       ,D.OCCR_DT	                                                OCCUR_DATE
       ,D.NEW_VSL_CD||D.NEW_SKD_VOY_NO||D.NEW_BKG_NO	            NEW_VVD
       ,D.NEW_BKG_NO	                                            NEW_BKGNO
       ,D.ACCT_CD	                                                ACCT
       ,D.LGS_COST_CD	                                            LOG_COST
       ,D.SO_NO                                                     SONO
       ,D.CSR_NO                                                    CSRNO
       ,D.GL_DT                                                     GL_DATE
       ,D.VVD_CD                                                    VVD_CD
       ,D.ACT_ATD_INP_DT                                            ATD_INPUT_DATE
       ,TRIM(REPLACE(REPLACE(UPPER(D.TML_NM) ,CHR(13)||CHR(10),' '),CHR(9),' '))  TERMINAL
       ,TRIM(REPLACE(REPLACE(UPPER(D.ACCT_NM) ,CHR(13)||CHR(10),' '),CHR(9),' ')) ACCOUNT_CD       
FROM TPB_INV_RVIS R, TPB_INVOICE V, TPB_INV_RVIS_DTL D
WHERE R.N3PTY_INV_NO = V.N3PTY_INV_NO
AND R.N3PTY_INV_RVIS_SEQ = V.LST_N3PTY_INV_RVIS_SEQ
AND R.N3PTY_INV_NO = @[s_n3pty_inv_no]
AND D.N3PTY_INV_NO = R.N3PTY_INV_NO
AND D.N3PTY_INV_RVIS_SEQ = R.N3PTY_INV_RVIS_SEQ			]]></sql>
			<params>
				<param name="s_n3pty_inv_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
