<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PrdCommonManageDBDAOValidationLaneVvdRSQL">
			<desc><![CDATA[VVD와 Lane이 서로 유효한지 검사한다.
둘 다 입력되었을 때에만 검사하고, 한 가지만 입력되었을 경우, Validation하지 않는다.]]></desc>
			<sql><![CDATA[
SELECT DECODE(TRIM(@[vvd])
             , NULL, 'Y'
             , DECODE(TRIM(@[lane_code])
                     , NULL, 'Y'
                     , VSL.VSL_SLAN_CD, 'Y'
                     , 'FDR', DECODE(LAN.VSL_SVC_TP_CD, 'O', 'Y', 'N')  
                     ,'N')
              ) AS CHECK_DATA
FROM COM_CPY_NO CPY
     LEFT OUTER JOIN VSK_VSL_SKD VSL
      ON (VSL.VSL_CD    = SUBSTR(@[vvd],1,4)
          AND VSL.SKD_VOY_NO = SUBSTR(@[vvd],5,4)
          AND VSL.SKD_DIR_CD = SUBSTR(@[vvd],9,1)
         )
     LEFT OUTER JOIN MDM_VSL_SVC_LANE LAN
          ON (LAN.VSL_SLAN_CD = VSL.VSL_SLAN_CD)
WHERE CPY_NO = 0			]]></sql>
			<params>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="lane_code" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
