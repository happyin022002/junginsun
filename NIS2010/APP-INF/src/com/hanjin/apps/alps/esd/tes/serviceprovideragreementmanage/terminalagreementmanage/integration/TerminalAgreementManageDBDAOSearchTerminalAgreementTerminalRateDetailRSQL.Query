<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TerminalAgreementManageDBDAOSearchTerminalAgreementTerminalRateDetailRSQL">
			<desc><![CDATA[Terminal Agreement Rate List Detail Inquiry]]></desc>
			<sql><![CDATA[
SELECT	A.lgs_cost_cd,                                                                   
		A.auto_calc_flg,                                                                 
		A.tml_agmt_vol_ut_cd,                                                            
		A.curr_cd,                                                                       
		A.thrp_cost_cd_flg,                                                              
		A.io_bnd_cd,                                                                     
		A.ioc_cd,                                                                        
		DECODE(B.tml_rt_dy_aply_tp_cd,'A',DECODE(B.wkdy_flg,'Y','Y',''),'') wkdy_flg,    
		DECODE(B.tml_rt_dy_aply_tp_cd,'A',DECODE(B.sat_flg,'Y','Y',''),'') sat_flg,      
		DECODE(B.tml_rt_dy_aply_tp_cd,'A',DECODE(B.sun_flg,'Y','Y',''),'') sun_flg,      
		DECODE(B.tml_rt_dy_aply_tp_cd,'A',DECODE(B.hol_flg,'Y','Y',''),'') hol_flg,      
		A.lane_cd,                                                                       
		DECODE(A.dcgo_aply_tp_cd,'N','Y','') dg_none,                                    
		DECODE(A.dcgo_aply_tp_cd,'A',DECODE(C.dcgo_non_clss_flg,'Y','Y',''),'') dg_sm_no,
		DECODE(A.dcgo_aply_tp_cd,'A',DECODE(C.dcgo_sam_clss_flg,'Y','Y',''),'') dg_sm_dg,
		DECODE(A.dcgo_aply_tp_cd,'S','Y','') dg_sep,                                     
		C.dcgo_non_clss_flg,                                                             
		C.dcgo_n1st_clss_flg,                                                            
		C.dcgo_n2nd_clss_flg,                                                            
		C.dcgo_n3rd_clss_flg,                                                            
		C.dcgo_n4th_clss_flg,                                                            
		C.dcgo_n5th_clss_flg,                                                            
		C.dcgo_n6th_clss_flg,                                                            
		C.dcgo_n7th_clss_flg,                                                            
		C.dcgo_n8th_clss_flg,                                                            
		C.dcgo_n9th_clss_flg,                                                            
		A.fm_tr_vol_val,                                                                 
		DECODE(A.to_tr_vol_val,9999999,'MAX',A.to_tr_vol_val) to_tr_vol_val,               
		A.tml_ovt_shft_cd,                                                               
		A.thc_tp_cd,                                                                     
		D.D2, D.D4, D.D5, D.D7, D.D8, D.D9, D.DW, D.DX, D.R2,                            
		D.R4, D.R5, D.R7, D.R8, D.R9, D.F2, D.F4, D.O2, D.O4, 
		D.O5, D.S2, D.S4, D.T2, D.T4, D.A2, D.A4, D.A5, D.P2, D.P4, 
		D.C2, D.C4, D.F5, 		                                        
		DECODE(A.tml_agmt_vol_ut_cd,'T',A.agmt_ut_rt,'0'),                                
		DECODE(A.tml_agmt_vol_ut_cd,'B',A.agmt_ut_rt,'0'),                                
		DECODE(A.tml_agmt_vol_ut_cd,'M',A.agmt_ut_rt,'0'),                                
		A.tml_agmt_dtl_seq,                                                               
		A.agmt_dtl_rmk  				                                                     
FROM	TES_TML_AGMT_DTL A, TES_TML_AGMT_APLY_DY B, TES_TML_AGMT_DG_CGO_CLSS C,            
		(SELECT                                                                          
				TML_AGMT_OFC_CTY_CD,TML_AGMT_SEQ, TML_AGMT_VER_NO, TML_AGMT_DTL_SEQ              
				,MAX(D2) D2, MAX(D4) D4, MAX(D5) D5, MAX(D7) D7, MAX(D8) D8, MAX(D9) D9          
				,MAX(DW) DW, MAX(DX) DX, MAX(R2) R2, MAX(R4) R4, MAX(R5) R5, MAX(R7) R7          
				,MAX(R8) R8, MAX(R9) R9, MAX(F2) F2, MAX(F4) F4 ,MAX(O2) O2, MAX(O4) O4 
				,MAX(O5) O5, MAX(S2) S2, MAX(S4) S4, MAX(T2) T2, MAX(T4) T4, MAX(A2) A2 
				,MAX(A4) A4, MAX(A5) A5, MAX(P2) P2, MAX(P4) P4, MAX(C2) C2, MAX(C4) C4, MAX(F5) F5				                                                                      
		FROM(SELECT	A.TML_AGMT_OFC_CTY_CD, A.TML_AGMT_SEQ,                               
					A.TML_AGMT_VER_NO, A.TML_AGMT_DTL_SEQ,                                
					DECODE(B.CNTR_TPSZ_CD,'D2',AGMT_RT,0) D2,                             
					DECODE(B.CNTR_TPSZ_CD,'D4',AGMT_RT,0) D4,                             
					DECODE(B.CNTR_TPSZ_CD,'D5',AGMT_RT,0) D5,                             
					DECODE(B.CNTR_TPSZ_CD,'D7',AGMT_RT,0) D7,                             
					DECODE(B.CNTR_TPSZ_CD,'D8',AGMT_RT,0) D8,                             
					DECODE(B.CNTR_TPSZ_CD,'D9',AGMT_RT,0) D9,                             
					DECODE(B.CNTR_TPSZ_CD,'DW',AGMT_RT,0) DW,                             
					DECODE(B.CNTR_TPSZ_CD,'DX',AGMT_RT,0) DX,                             
					DECODE(B.CNTR_TPSZ_CD,'R2',AGMT_RT,0) R2,                             
					DECODE(B.CNTR_TPSZ_CD,'R4',AGMT_RT,0) R4,                             
					DECODE(B.CNTR_TPSZ_CD,'R5',AGMT_RT,0) R5,                             
					DECODE(B.CNTR_TPSZ_CD,'R7',AGMT_RT,0) R7, 
					DECODE(B.CNTR_TPSZ_CD,'R8',AGMT_RT,0) R8,                             
					DECODE(B.CNTR_TPSZ_CD,'R9',AGMT_RT,0) R9,                            
					DECODE(B.CNTR_TPSZ_CD,'F2',AGMT_RT,0) F2,                             
					DECODE(B.CNTR_TPSZ_CD,'F4',AGMT_RT,0) F4,                             
					DECODE(B.CNTR_TPSZ_CD,'O2',AGMT_RT,0) O2,                             
					DECODE(B.CNTR_TPSZ_CD,'O4',AGMT_RT,0) O4, 
					DECODE(B.CNTR_TPSZ_CD,'O5',AGMT_RT,0) O5,                            
					DECODE(B.CNTR_TPSZ_CD,'S2',AGMT_RT,0) S2,                             
					DECODE(B.CNTR_TPSZ_CD,'S4',AGMT_RT,0) S4,                             
					DECODE(B.CNTR_TPSZ_CD,'T2',AGMT_RT,0) T2,                             
					DECODE(B.CNTR_TPSZ_CD,'T4',AGMT_RT,0) T4,                             
					DECODE(B.CNTR_TPSZ_CD,'A2',AGMT_RT,0) A2,                             
					DECODE(B.CNTR_TPSZ_CD,'A4',AGMT_RT,0) A4,   
					DECODE(B.CNTR_TPSZ_CD,'A5',AGMT_RT,0) A5,                             
					DECODE(B.CNTR_TPSZ_CD,'P2',AGMT_RT,0) P2,                             
					DECODE(B.CNTR_TPSZ_CD,'P4',AGMT_RT,0) P4, 
					DECODE(B.CNTR_TPSZ_CD,'C2',AGMT_RT,0) C2,                             
					DECODE(B.CNTR_TPSZ_CD,'C4',AGMT_RT,0) C4,                            
					DECODE(B.CNTR_TPSZ_CD,'F5',AGMT_RT,0) F5                              
	        FROM	TES_TML_AGMT_DTL A, TES_TML_AGMT_TP_SZ B                              
	        WHERE	A.TML_AGMT_OFC_CTY_CD = B.TML_AGMT_OFC_CTY_CD                          
	        AND		A.TML_AGMT_SEQ		= B.TML_AGMT_SEQ                                        
	        AND		A.TML_AGMT_VER_NO	= B.TML_AGMT_VER_NO                                  
	        AND		A.TML_AGMT_DTL_SEQ	= B.TML_AGMT_DTL_SEQ )                              
		GROUP BY TML_AGMT_OFC_CTY_CD,TML_AGMT_SEQ,                                       
		         TML_AGMT_VER_NO, TML_AGMT_DTL_SEQ) D  				                     
WHERE	A.TML_AGMT_OFC_CTY_CD	= SUBSTR(@[tml_agmt_ofc_cty_cd],1,3)
AND		A.TML_AGMT_SEQ			= SUBSTR(@[tml_agmt_ofc_cty_cd],4,8)
AND		A.TML_AGMT_VER_NO		= @[tml_agmt_ver_no]                                                             
AND		A.TML_AGMT_TP_CD	= 'T'                                                            
AND		A.TMP_SAV_FLG IS NULL                                                         	 
AND		A.TML_AGMT_OFC_CTY_CD	= B.TML_AGMT_OFC_CTY_CD(+)                                  
AND		A.TML_AGMT_OFC_CTY_CD	= C.TML_AGMT_OFC_CTY_CD(+)                                  
AND		A.TML_AGMT_OFC_CTY_CD	= D.TML_AGMT_OFC_CTY_CD(+)                                  
AND		A.TML_AGMT_SEQ			= B.TML_AGMT_SEQ (+)                                               
AND		A.TML_AGMT_SEQ			= C.TML_AGMT_SEQ(+)                                                
AND		A.TML_AGMT_SEQ			= D.TML_AGMT_SEQ(+)                                                
AND		A.TML_AGMT_VER_NO		= B.TML_AGMT_VER_NO(+)                                          
AND		A.TML_AGMT_VER_NO		= C.TML_AGMT_VER_NO(+)                                          
AND		A.TML_AGMT_VER_NO		= D.TML_AGMT_VER_NO(+)                                          
AND		A.TML_AGMT_DTL_SEQ		= B.TML_AGMT_DTL_SEQ(+)                                        
AND		A.TML_AGMT_DTL_SEQ		= C.TML_AGMT_DTL_SEQ(+)                                        
AND		A.TML_AGMT_DTL_SEQ		= D.TML_AGMT_DTL_SEQ(+)                                        
ORDER BY A.TML_AGMT_DTL_SEQ			]]></sql>
			<params>
				<param name="tml_agmt_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="tml_agmt_ver_no" type="2" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
