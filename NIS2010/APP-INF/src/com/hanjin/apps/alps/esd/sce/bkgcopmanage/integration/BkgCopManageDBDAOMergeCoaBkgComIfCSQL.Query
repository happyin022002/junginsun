<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BkgCopManageDBDAOMergeCoaBkgComIfCSQL">
			<desc><![CDATA[분배치 대상으로 bkg 정보를 취합해 MAS 로 전달한다.]]></desc>
			<sql><![CDATA[
merge into MAS_BKG_COM_IF m
    using (
        SELECT BKG_NO FROM BKG_BOOKING H
        WHERE BKG_NO IN (
         #foreach($ele IN ${bkg_no})
			#if($velocityCount == 1 ) 
				'$ele'
			#else 
				,'$ele' 
			#end 
		#end

            )
        )V
    on (
        M.BKG_NO = V.BKG_NO
    )
    WHEN MATCHED THEN UPDATE
        SET m.IF_DT = sysdate
    WHEN NOT MATCHED THEN 
        INSERT (  BKG_NO
        ,COST_SRC_SYS_CD
        ,IF_DT
        ,IF_RMK
        ,CRE_DT
        ,CRE_USR_ID
        ,UPD_DT
        ,UPD_USR_ID
        )
        VALUES ( V.BKG_NO
        ,'SCE'
        ,SYSDATE
        ,'RouteReplan'
        ,SYSDATE
        ,'RouteReplan'
        ,SYSDATE
        ,'RouteReplan'
        )			]]></sql>
			<params>
			</params>
		</query>
	</querys>
</sqls>
