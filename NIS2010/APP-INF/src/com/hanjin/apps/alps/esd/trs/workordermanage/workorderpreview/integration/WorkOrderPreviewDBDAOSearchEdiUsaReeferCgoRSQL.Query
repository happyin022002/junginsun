<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WorkOrderPreviewDBDAOSearchEdiUsaReeferCgoRSQL">
			<desc><![CDATA[searchEdi_USA_REEFER_CGO]]></desc>
			<sql><![CDATA[
#if (${trsp_bnd_cd} == 'O' && ${trsp_cst_dtl_mod_cd} == 'DR')
SELECT rf.vent_rto as rf_venti
	,rf.cdo_temp as rf_min_temp
	,'CEL' as rf_min_unit
	,rf.cdo_temp as rf_max_temp
	,'CEL' as rf_max_unit
	,rf.pwr_spl_cbl_flg as rf_genset
	,rf.humid_no as rf_humid
	,REPLACE(rf.diff_rmk, CHR(13)||CHR(10), ' ') as rf_rmk
FROM bkg_rf_cgo rf
	,trs_trsp_svc_ord so
    ,BKG_TRO_SPCL_CGO_SEQ SPCL
WHERE so.delt_flg <> 'Y'
   AND so.trsp_so_ofc_cty_cd = @[trsp_so_ofc_cty_cd]
   AND so.trsp_so_seq = @[trsp_so_seq]
   AND so.hjl_no IS NULL
   AND SUBSTR(so.COST_ACT_GRP_CD,1,2) = 'OD'
   AND so.bkg_no = spcl.bkg_no
   AND so.tro_seq = spcl.tro_seq
   AND so.trsp_bnd_cd = spcl.io_bnd_cd
   AND 'N' = spcl.rtn_tro_flg
   AND spcl.spcl_cgo_cd = 'RF'
   AND spcl.bkg_no = rf.bkg_no
   AND spcl.spcl_cgo_seq = rf.rc_seq
#else
SELECT rf.vent_rto as rf_venti
	,rf.cdo_temp as rf_min_temp
	,'CEL' as rf_min_unit
	,rf.cdo_temp as rf_max_temp
	,'CEL' as rf_max_unit
	,rf.pwr_spl_cbl_flg as rf_genset
	,rf.humid_no as rf_humid
	,REPLACE(rf.diff_rmk, CHR(13)||CHR(10), ' ') as rf_rmk
FROM bkg_rf_cgo rf
	,trs_trsp_svc_ord so
WHERE so.delt_flg <> 'Y'
   AND so.trsp_so_ofc_cty_cd = @[trsp_so_ofc_cty_cd]
   AND so.trsp_so_seq = @[trsp_so_seq]
   AND rf.cntr_no = so.eq_no
   AND so.bkg_no = rf.bkg_no
   AND so.hjl_no IS NULL
   AND SUBSTR(so.COST_ACT_GRP_CD,1,2) <> 'OD'
#end			]]></sql>
			<params>
				<param name="trsp_so_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="trsp_so_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
