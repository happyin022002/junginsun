<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OceanLinkManageDBDAOSearchOceanLinkRSQL">
			<desc><![CDATA[해당 lane 또는 pol, pod, direction에 해당하는 Ocean Link 정보를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT VSL_SLAN_CD, 
        SKD_DIR_CD, 
        FM_PORT_CD, 
        FM_PORT_ETB_DY_CD, 
        FM_PORT_ETD_DY_CD, 
        TO_PORT_CD, 
        TO_PORT_ETB_DY_CD,  
        TO_PORT_ETD_DY_CD,  
 	    a.TZTM_HRS,A.OCN_LNK_MNL_FLG,  
 	    ltrim(to_char(trunc(a.tztm_hrs/24,0),'00'))||ltrim(to_char(mod(a.tztm_hrs,24  ),'00')) fmt_tztm_hrs, 
-- 	    b.ROUT_SEQ,
--		b.TS_IND_CD, 
--		decode(b.upd_ind_cd,'S','Standard', 'V','Validation', 'A', 'Add Call', 'T', 'Temporary', 'O', 'Doubt', 'N', 'Not used', 'D', 'Deleted', '', 'G', 'Guide') upd_ind_cd , 
--        DECODE(B.UPD_IND_CD, 'D', ' ', a.TZTM_HRS) rnllws,   
--        NVL(B.UPD_IND_CD, 'S') status ,	 
        --'N' del_op,
--		DECODE(SUBSTR(TRIM(B.OCN_ROUT_RMK), 1, 1), 'T', 'T', 'D') del_op,
        A.LNK_RMK,
        CASE WHEN A.OCN_LNK_MNL_FLG = 'Y' and A.DELT_FLG = 'N' THEN 'Manual Creation'
             WHEN A.OCN_LNK_MNL_FLG = 'Y' and A.DELT_FLG = 'Y' THEN 'Manual Deletion'
            ELSE 'Auto Creation'
            END SOURCE
   FROM PRD_PF_TZ_TM A--, PRD_OCN_ROUT B 
      WHERE FM_PORT_CD   LIKE RTRIM( @[fm_port_cd] )||'%' 
        AND TO_PORT_CD   LIKE RTRIM( @[to_port_cd] )||'%' 
        AND SKD_DIR_CD   LIKE RTRIM( @[skd_dir_cd] )||'%' 
        AND VSL_SLAN_CD  LIKE RTRIM( @[vsl_lane_cd] )||'%' 
--        AND A.FM_PORT_CD   = B.N1ST_POL_CD 
--        AND A.TO_PORT_CD   = B.N1ST_POD_CD 
--        AND A.VSL_SLAN_CD  = B.N1ST_LANE_CD 
--        AND B.N1ST_LANE_FDR_FLG = 'N' 
--        AND B.TS_IND_CD = 'D'
        AND A.DELT_FLG IN(DECODE(@[delt_flg],'Y','X','N'), DECODE(@[delt_flg],'N','X','Y'))			]]></sql>
			<params>
				<param name="fm_port_cd" type="12" value="" out="N"/>
				<param name="to_port_cd" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="vsl_lane_cd" type="12" value="" out="N"/>
				<param name="delt_flg" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
