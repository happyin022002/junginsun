<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BkgCopManageDBDAOSearchDiffCntrListRSQL">
			<desc><![CDATA[bkg_container 에 존재하는 tpsz 별 container 가 cop 에 모두 존재하는 지, 
sce_cop_hdr 에 존재하는 tpsz 별 container 가 bkg_container 에 모두 존재하는 지
를 각각 확인하여 존재하지 않는 container 를 추출한다.
추출된 list 를 가지고 container attach / detach 를 시도한다.]]></desc>
			<sql><![CDATA[
SELECT 'CA' AS BKG_EVNT_TP_CD,
  BKG_NO,
  CNTR_NO,
  CNTR_TPSZ_CD
FROM BKG_CONTAINER A
WHERE BKG_NO = @[bkg_no]
  AND NOT EXISTS (
    SELECT '1'
    FROM SCE_COP_HDR
    WHERE BKG_NO = A.BKG_NO
      AND CNTR_TPSZ_CD = A.CNTR_TPSZ_CD
      AND CNTR_NO = A.CNTR_NO
      AND COP_STS_CD != 'X')
UNION ALL
SELECT 'CD' AS BKG_EVNT_TP_CD,
  BKG_NO,
  CNTR_NO,
  CNTR_TPSZ_CD
FROM SCE_COP_HDR A
WHERE BKG_NO = @[bkg_no] AND CNTR_NO != 'SMCU0000000'
  AND COP_STS_CD != 'X'
  AND NOT EXISTS (
    SELECT '1'
    FROM BKG_CONTAINER
    WHERE CNTR_NO = A.CNTR_NO
	  AND BKG_NO = A.BKG_NO
      AND NVL(CNTR_DELT_FLG, 'N') = 'N')			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="KORX4015516" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
