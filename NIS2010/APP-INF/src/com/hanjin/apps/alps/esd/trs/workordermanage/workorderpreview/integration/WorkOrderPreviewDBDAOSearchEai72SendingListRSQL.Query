<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WorkOrderPreviewDBDAOSearchEai72SendingListRSQL">
			<desc><![CDATA[SearchEai72SendingList]]></desc>
			<sql><![CDATA[
SELECT 
	DISTINCT B.TRSP_SO_OFC_CTY_CD,
    B.TRSP_SO_SEQ,
    B.TRSP_WO_OFC_CTY_CD,
    B.TRSP_WO_SEQ,
    B.FM_NOD_CD,
    B.TO_NOD_CD,
    B.VIA_NOD_CD,
    B.DOR_NOD_CD,
    TO_CHAR(B.TRSP_MTY_RQST_DT, 'yyyymmddhh24miss') TRSP_MTY_RQST_DT ,
    TO_CHAR(B.N1ST_NOD_PLN_DT, 'yyyymmddhh24miss') N1ST_NOD_PLN_DT ,
    TO_CHAR(B.DOR_NOD_PLN_DT, 'yyyymmddhh24miss') DOR_NOD_PLN_DT ,
    TO_CHAR(B.LST_NOD_PLN_DT, 'yyyymmddhh24miss') LST_NOD_PLN_DT ,
    B.EQ_TPSZ_CD,
    B.EQ_NO,
    B.TRSP_BND_CD,
    B.BKG_NO,
    B.TRO_SEQ TRSP_RQST_ORD_SEQ,
    B.TRSP_COST_DTL_MOD_CD,
    B.TRSP_CRR_MOD_CD,
    B.TRSP_MTY_COST_MOD_CD,
    B.VNDR_SEQ,
    B.INV_VNDR_SEQ,
    B.INV_NO,
    B.MTY_RRO_ISS_FLG,
    TO_CHAR(B.MTY_RRO_ISS_DT, 'yyyymmddhh24miss') MTY_RRO_ISS_DT,
    B.MTY_RRO_ISS_USR_ID,
    B.MTY_RDE_ORD_ISS_FLG,
    TO_CHAR(B.MTY_RDE_ORD_ISS_DT, 'yyyymmddhh24miss') MTY_RDE_ORD_ISS_DT,
    B.MTY_RDE_ORD_ISS_USR_ID,
    B.CRE_OFC_CD,
    B.CRE_USR_ID,
    TO_CHAR(B.LOCL_CRE_DT, 'yyyymmddhh24miss') CRE_DT, 
	B.UPD_USR_ID, 
    TO_CHAR(B.LOCL_UPD_DT, 'yyyymmddhh24miss') UPD_DT,  
	B.DELT_FLG
FROM TRS_TRSP_WRK_ORD_PRV_TMP A,
    TRS_TRSP_SVC_ORD B,
    MDM_ORGANIZATION C,
    MDM_LOCATION LOC
WHERE A.WO_PRV_GRP_SEQ = @[wo_prv_grp_seq]
    AND A.WO_ISS_NO = @[wo_iss_no]
    AND B.TRSP_SO_OFC_CTY_CD||B.TRSP_SO_SEQ IN (A.TRSP_SO_OFC_CTY_CD||A.TRSP_SO_SEQ)
    AND ( B.TRSP_COST_DTL_MOD_CD IN ('ER', 'CN', 'CF')
            OR (B.TRSP_COST_DTL_MOD_CD = 'DR' AND NVL(B.TRSP_SO_CMB_TP_CD, 'N') NOT IN ('FF', 'FM')
                    AND B.TRSP_SO_TP_CD = 'Y' ))
    AND B.CRE_OFC_CD = C.OFC_CD
    AND C.LOC_CD = LOC.LOC_CD
    AND LOC.CONTI_CD = 'E'			]]></sql>
			<params>
				<param name="wo_prv_grp_seq" type="12" value="" out="N"/>
				<param name="wo_iss_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
