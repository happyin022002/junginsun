<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TESCommonDBDAOGetEDIOriginInvoiceRSQL">
			<desc><![CDATA[EDI Invoice 조회]]></desc>
			<sql><![CDATA[
SELECT
		F.FILE_SEQ
		, F.ORG_FILE_NM
		, C.FILE_SAV_ID SAV_FILE_NM
		, C.FILE_PATH_URL SAV_PATH_NM
		, F.TML_EDI_SO_OFC_CTY_CD
		, F.TML_EDI_SO_SEQ
		, F.TML_SO_OFC_CTY_CD
		, F.TML_SO_SEQ
		, F.SAV_CFM_FLG
		, F.DELT_FLG
		, F.FILE_RMK
FROM	TES_EDI_SO_HDR H, TES_EDI_SO_FILE F, COM_UPLD_FILE C
WHERE	1=1
#if (${tml_so_ofc_cty_cd} != '') 
AND H.TML_SO_OFC_CTY_CD = @[tml_so_ofc_cty_cd]
AND H.TML_SO_SEQ = @[tml_so_seq]
#else 
#if (${tml_edi_so_ofc_cty_cd} != '') 
AND H.TML_EDI_SO_OFC_CTY_CD = @[tml_edi_so_ofc_cty_cd]
AND H.TML_EDI_SO_SEQ = @[tml_edi_so_seq]
#else 
AND 1=2
#end
#end
AND H.TML_INV_RJCT_STS_CD <> 'AJ'
AND	NVL(H.DELT_FLG,'N') <> 'Y'
AND ((H.TML_EDI_SO_OFC_CTY_CD = F.TML_EDI_SO_OFC_CTY_CD AND H.TML_EDI_SO_SEQ = F.TML_EDI_SO_SEQ)
	OR
	 (H.TML_SO_OFC_CTY_CD = F.TML_SO_OFC_CTY_CD AND H.TML_SO_SEQ = F.TML_SO_SEQ))
AND	NVL(F.DELT_FLG,'N') <> 'Y'
AND	NVL(F.SAV_CFM_FLG,'N') = 'Y'
AND F.FILE_SAV_ID = C.FILE_SAV_ID
AND ROWNUM = 1
ORDER BY FILE_SEQ			]]></sql>
			<params>
				<param name="tml_so_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="tml_so_seq" type="2" value="" out="N"/>
				<param name="tml_edi_so_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="tml_edi_so_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
