<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EacMgtDBDAOSearchEacCodeRSQL">
			<desc><![CDATA[Expense Audit Case에서 사용하는 코드 조회]]></desc>
			<sql><![CDATA[
SELECT TP_CD
      ,TP_NM
      ,BIL_TP_CD
      ,BIL_TP_NM
      ,BIL_TP_DESC
      ,IF_TP_NM
      ,EXPN_TP_NM
  FROM (
    /* MISS BILLING */
    SELECT 'M' AS TP_CD
          ,(SELECT X.INTG_CD_VAL_DP_DESC FROM COM_INTG_CD_DTL X WHERE X.INTG_CD_ID = 'CD00587' AND INTG_CD_VAL_CTNT = 'M') AS TP_NM
          ,INTG_CD_VAL_CTNT AS BIL_TP_CD
          ,INTG_CD_VAL_DP_DESC AS BIL_TP_NM
          ,INTG_CD_VAL_DESC AS BIL_TP_DESC
          ,'' AS IF_TP_NM
          ,'' AS EXPN_TP_NM
          ,1 AS ORD
          ,TO_CHAR(INTG_CD_VAL_DP_SEQ) AS ORD2
          ,'0' AS ORD3
      FROM COM_INTG_CD_DTL A
     WHERE INTG_CD_ID = 'CD03339'
    /* TPB MISSING */
    UNION ALL
    SELECT 'T' AS TP_CD
          ,(SELECT X.INTG_CD_VAL_DP_DESC FROM COM_INTG_CD_DTL X WHERE X.INTG_CD_ID = 'CD00587' AND INTG_CD_VAL_CTNT = 'T') AS TP_NM
          ,N3PTY_BIL_TP_CD AS BIL_TP_CD
          ,N3PTY_BIL_TP_NM AS BIL_TP_NM
          ,N3PTY_BIL_TP_DESC AS BIL_TP_DESC
          ,(SELECT X.INTG_CD_VAL_DP_DESC FROM COM_INTG_CD_DTL X WHERE X.INTG_CD_ID = 'CD00581' AND INTG_CD_VAL_CTNT = A.N3PTY_IF_TP_CD) AS IF_TP_NM
          --,N3PTY_EXPN_TP_CD AS EXPN_TP_NM
          ,(SELECT X.INTG_CD_VAL_DP_DESC FROM COM_INTG_CD_DTL X WHERE X.INTG_CD_ID = 'CD03352' AND INTG_CD_VAL_CTNT = A.N3PTY_EXPN_TP_CD) AS EXPN_TP_NM          
          ,2 AS ORD
          ,N3PTY_EXPN_TP_CD AS ORD2
          ,N3PTY_BIL_TP_CD  AS ORD3
      FROM TPB_N3RD_PTY_BIL_TP A
     WHERE ACT_FLG = 'Y'
       AND N3PTY_IF_TP_CD   = 'S'
       AND N3PTY_BIL_TP_CD != 'JO'
       #if (${s_eac_expn_tp_cd} != '') 
         AND N3PTY_EXPN_TP_CD = @[s_eac_expn_tp_cd]
       #end
    /* INTERNAL ERROR */
    UNION ALL
    SELECT 'I' AS TP_CD
          ,(SELECT X.INTG_CD_VAL_DP_DESC FROM COM_INTG_CD_DTL X WHERE X.INTG_CD_ID = 'CD00587' AND INTG_CD_VAL_CTNT = 'I') AS TP_NM
          ,INTG_CD_VAL_CTNT AS BIL_TP_CD
          ,INTG_CD_VAL_DP_DESC AS BIL_TP_NM
          ,INTG_CD_VAL_DESC AS BIL_TP_DESC
          ,'' AS IF_TP_NM
          ,'' AS EXPN_TP_NM
          ,3 AS ORD
          ,TO_CHAR(INTG_CD_VAL_DP_SEQ) AS ORD2
          ,'0' AS ORD3
      FROM COM_INTG_CD_DTL A
     WHERE INTG_CD_ID = 'CD03340'
)
WHERE 1=1
    #if (${s_eac_tp_cd} != '') 
      AND TP_CD = @[s_eac_tp_cd]
    #end
ORDER BY ORD, ORD2, ORD3			]]></sql>
			<params>
				<param name="s_eac_expn_tp_cd" type="12" value="" out="N"/>
				<param name="s_eac_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
