<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EQFlagMgtDBDAOsearchEQDataForDisposalRSQL">
			<desc><![CDATA[화면: EES_MNR_0151(Disposal Candidate Selection)
위치: Equipment Management > M&R > Disposal > Planning > Disposal Candidate Selection

Load Excel 시, 해당하는 EQ Data를 조회하여 온다.(단, Disposal Candidate 유무는 상관없이 모두 조회함.)

* Load Excel의 기능: 다 건의 EQ에 대하여 한꺼번에 Disposal Candidate Flag 컨트롤을 하기 위하여 생성((CHM-201642026)]]></desc>
			<sql><![CDATA[
SELECT DECODE(A.MNR_DISP_SEL_FLG, 'Y', '1', '0') AS MNR_DISP_SEL_FLG ,
       'C' AS DISP_RSN_CD,
       B.EQ_NO AS EQ_NO,
       B.EQ_TPSZ_CD AS EQ_TPSZ_CD,
       B.LSTM_CD AS LSTM_CD,
       (SELECT C.DISP_NO
          FROM MNR_DISP_DTL C
         WHERE C.EQ_NO=A.EQ_NO
           AND C.EQ_TPSZ_CD=A.EQ_TPSZ_CD
           AND C.DISP_YD_CD=A.MNR_DISP_SEL_FLG_YD_CD
           AND ROWNUM=1) AS DISP_NO ,
       (SELECT F.MNR_CD_DP_DESC
          FROM MNR_DISP_DTL C ,
               MNR_DISP_HDR D,
               MNR_GEN_CD F
         WHERE C.DISP_NO=D.DISP_NO
           AND C.EQ_NO=A.EQ_NO
           AND C.EQ_TPSZ_CD=A.EQ_TPSZ_CD
           AND C.DISP_YD_CD=A.MNR_DISP_SEL_FLG_YD_CD
           AND F.PRNT_CD_ID='CD00029'
           AND D.DISP_STS_CD=F.MNR_CD_ID
           AND ROWNUM=1) AS DISP_STS_NM,
       DECODE(A.MNR_DISP_SEL_FLG, 'Y', NVL(A.MNR_DISP_SEL_FLG_YD_CD, B.CRNT_YD_CD), B.CRNT_YD_CD) AS MNR_DISP_SEL_FLG_YD_CD,
       TO_CHAR(A.UPD_DT, 'yyyy-mm-dd') AS UPD_DT,
       A.UPD_USR_ID AS UPD_USR_ID,
       B.EQ_TYPE AS EQ_KND_CD
  FROM MNR_EQ_STS A,
       MNR_EQ_STS_V B
 WHERE B.EQ_NO = A.EQ_NO(+)
#if (${eq_knd_cd} != '') 
   AND B.EQ_TYPE = @[eq_knd_cd]
#end
   AND (1, B.EQ_NO) IN (
#if ($eq_list.size() > 0 ) 
	#foreach( $key in ${eq_list}) 
    	#if($velocityCount < $eq_list.size())
    		(1, '$key'),
    	#else 
    		(1, '$key')
    	#end
  	#end
#else
	(2, 1)
#end
)			]]></sql>
			<params>
				<param name="eq_knd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
