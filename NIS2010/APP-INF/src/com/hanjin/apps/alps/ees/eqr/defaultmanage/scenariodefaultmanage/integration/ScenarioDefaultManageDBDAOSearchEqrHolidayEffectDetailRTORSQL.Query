<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ScenarioDefaultManageDBDAOSearchEqrHolidayEffectDetailRTORSQL">
			<desc><![CDATA[EQR_HOL_EFF_RTO 테이블의 상세 정보 조회]]></desc>
			<sql><![CDATA[
SELECT  
    (  							 												
    SELECT 
        C.CNT_NM 
    FROM
        EQR_HOL_EFF_RTO A 
		, EQR_HOLIDAY  C  					
    WHERE A.HOL_YR = C.HOL_YR   											
        AND A.CNT_CD = C.CNT_CD  												
        AND A.RCC_DIV_FLG = C.RCC_DIV_FLG  									
        AND A.RCC_DIV_FLG = @[rcc_div_flg]  												
        AND A.CNT_CD  = @[cntcd]  													
        AND A.IO_BND_CD  = @[gubun] 										
        AND ROWNUM=1  														
    )  CNT_NM
	, D.INTG_CD_VAL_CTNT   
	#foreach( ${key} in ${wkarr}) 
		, MAX(DECODE(B.HOL_EFF_YRWK,'$key', B.HOL_EFF_RTO, 0  ))  WEEK$key 
	#end	
    , MAX(B.HOL_EFF_RTO)  RTO																
    , B.HOL_YR
    , B.CNT_CD
    , B.RCC_DIV_FLG 
    , B.IO_BND_CD 
	, ''	AS NBLK								
FROM  
    EQR_HOL_EFF_RTO  B 
	, COM_INTG_CD_DTL D											
WHERE B.HOL_YR = @[stholyr]			    													
    AND B.IO_BND_CD(+) = @[gubun]  								  					
    AND B.RCC_DIV_FLG(+) = @[rcc_div_flg]    								 							
    AND B.CNT_CD(+) = @[cntcd]   								 								
    AND B.ST_DT(+) = @[stdt]   								 								
    AND B.WK_DY_CD(+) = D.INTG_CD_VAL_CTNT   								  			
    AND D.INTG_CD_ID = 'CD00131'  								  						
GROUP BY  
    B.CNT_CD
	, B.CNT_NM
	, D.INTG_CD_VAL_CTNT 
	, D.INTG_CD_VAL_DP_SEQ
	, B.HOL_YR
	, B.CNT_CD
	, B.RCC_DIV_FLG 
	, B.IO_BND_CD								
ORDER BY  
    D.INTG_CD_VAL_DP_SEQ
	, B.CNT_CD			]]></sql>
			<params>
				<param name="rcc_div_flg" type="12" value="" out="N"/>
				<param name="cntcd" type="12" value="" out="N"/>
				<param name="gubun" type="12" value="" out="N"/>
				<param name="stholyr" type="12" value="" out="N"/>
				<param name="stdt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
