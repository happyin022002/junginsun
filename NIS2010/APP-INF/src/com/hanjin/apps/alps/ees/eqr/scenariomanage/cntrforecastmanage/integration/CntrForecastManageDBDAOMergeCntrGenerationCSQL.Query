<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CntrForecastManageDBDAOMergeCntrGenerationCSQL">
			<desc><![CDATA[eqr_ib_bkg_fcast  테이블 데이터 수정/입력

<Change History>
1	2009.08.12	Lee ByoungHun	최초작성]]></desc>
			<sql><![CDATA[
MERGE INTO EQR_IB_BKG_FCAST A
USING
(
    SELECT
    @[scnr_id] SCNR_ID
    , @[fcast_yrwk] FCAST_YRWK
    , @[co_cd] CO_CD
    , @[to_ecc_cd] FM_ECC_CD
    , @[to_ecc_cd] TO_ECC_CD
    , @[cntr_tpsz_cd] CNTR_TPSZ_CD
    , @[fcast_dt] FCAST_DT
    , 'B'  IFCST_DAT_TP_CD
    FROM DUAL
) B
ON
(
    A.SCNR_ID      = B.SCNR_ID
    AND A.FCAST_YRWK   = B.FCAST_YRWK
    AND A.CO_CD        = B.CO_CD
    AND A.FM_ECC_CD    = B.FM_ECC_CD
    AND A.TO_ECC_CD    = B.TO_ECC_CD
    AND A.CNTR_TPSZ_CD = B.CNTR_TPSZ_CD
    AND A.FCAST_DT     = B.FCAST_DT
    AND A.IFCST_DAT_TP_CD     = B.IFCST_DAT_TP_CD
)
WHEN NOT MATCHED THEN
    INSERT (
        SCNR_ID,
        FCAST_YRWK,
        CO_CD,
        FM_ECC_CD,
        TO_ECC_CD,
        CNTR_TPSZ_CD,
        FCAST_DT,
        CNTR_VOL_QTY,
        IFCST_DAT_TP_CD,
        CRE_USR_ID,
        CRE_DT,
        UPD_USR_ID,
        UPD_DT
    )
    VALUES (
        @[scnr_id],
        @[fcast_yrwk],
        @[co_cd],
        @[to_ecc_cd],
        @[to_ecc_cd],
        @[cntr_tpsz_cd],
        @[fcast_dt],
        @[cntr_vol_qty],
        'B',
        @[upd_usr_id],
        SYSDATE,
        @[upd_usr_id],
        SYSDATE
    )			]]></sql>
			<params>
				<param name="scnr_id" type="12" value="" out="N"/>
				<param name="fcast_yrwk" type="12" value="" out="N"/>
				<param name="co_cd" type="12" value="" out="N"/>
				<param name="to_ecc_cd" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="fcast_dt" type="12" value="" out="N"/>
				<param name="cntr_vol_qty" type="2" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
