<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeAmountDiscountMgtDBDAOSearchAfterBookingReasonDetailRSQL">
			<desc><![CDATA[ChargeAmountDiscountMgtDBDAOSearchAfterBookingReasonDetail]]></desc>
			<sql><![CDATA[
SELECT  AFT_EXPT_DAR_NO
       ,AFT_BKG_FILE_DIV_CD
       ,MAX(DECODE(A_RANK,1,AFT_BKG_RMK,'')) DETAIL_1_TYPE
       ,MAX(DECODE(A_RANK,2,AFT_BKG_RMK,'')) DETAIL_2_TYPE
       ,MAX(DECODE(A_RANK,3,AFT_BKG_RMK,'')) DETAIL_3_TYPE
       ,MAX(DECODE(A_RANK,4,AFT_BKG_RMK,'')) DETAIL_4_TYPE
       ,MAX(DECODE(A_RANK,5,AFT_BKG_RMK,'')) DETAIL_5_TYPE
       ,MAX(DECODE(A_RANK,6,AFT_BKG_RMK,'')) DETAIL_6_TYPE
       ,MAX(DECODE(A_RANK,7,AFT_BKG_RMK,'')) DETAIL_7_TYPE
       ,MAX(DECODE(A_RANK,8,AFT_BKG_RMK,'')) DETAIL_8_TYPE
       ,MAX(DECODE(A_RANK,9,AFT_BKG_RMK,'')) DETAIL_9_TYPE
  FROM (
    SELECT AFT_EXPT_DAR_NO, 
           AFT_BKG_FILE_DIV_CD,
           AFT_BKG_RMK, 
           AFT_BKG_RMK_LVL AS A_RANK,
           AFT_BKG_RSN_RMK_RQST_SEQ
      FROM DMT_AFT_BKG_RSN_RMK_RQST
     WHERE AFT_EXPT_DAR_NO = @[dar_no] 
       AND AFT_BKG_FILE_DIV_CD IN ( SELECT ATTR_CTNT3 FROM DMT_HRD_CDG_CTNT WHERE HRD_CDG_ID = 'AFT_BKG_RSN_CD' )
#if ( ${sts_cd} == 'A' )
	   AND AFT_BKG_RMK_LVL = '0'
#else
       AND AFT_BKG_RMK_LVL > '0'
#end
		)
GROUP BY AFT_EXPT_DAR_NO
        ,AFT_BKG_FILE_DIV_CD
        ,AFT_BKG_RSN_RMK_RQST_SEQ			]]></sql>
			<params>
				<param name="dar_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
