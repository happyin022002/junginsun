<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="InterfaceMgtDBDAOsearchTotalLossApPayInvDtlDataRSQL">
			<desc><![CDATA[Total Loss 에서 ApPayInvDtl 을 구한다.]]></desc>
			<sql><![CDATA[
SELECT  '' INV_RGST_NO,
		'' INV_RGST_SEQ,
		'' LGS_COST_CD,
		DECODE(PW.TTL_LSS_DIV_CD, 'PO', '113331', 'GO', '510891', 'PL', '113331', 'GL', '510891') ACCT_CD,
		'CNTC' VSL_CD,
		TO_CHAR(TH.TTL_LSS_DT, 'YYMM') SKD_VOY_NO,
		'M' SKD_DIR_CD,
		'M' REV_DIR_CD,
		'CNT' SLAN_CD,
		'' ACT_VVD_CD,
		'' PORT_CD,
		'' YD_CD,
		TD.EQ_TPSZ_CD CNTR_TPSZ_CD,
		SUM(TD.TTL_LSS_BIL_AMT) INV_AMT,
		0 SO_20FT_QTY,
		0 SO_40FT_QTY,
		0 SO_TEU_QTY,
		0 SO_UT_QTY,
		'' SO_OFC_CTY_CD,
		0 SO_SEQ,
		'N' DELT_FLG 
FROM MNR_TTL_LSS_RQST_DTL TD, MNR_TTL_LSS_RQST_HDR TH, MNR_PAY_INV_WRK PW
WHERE TH.TTL_LSS_NO      = TD.TTL_LSS_NO
AND   TD.PAY_INV_SEQ     = PW.PAY_INV_SEQ
AND   PW.PAY_INV_SEQ = @[pay_inv_seq]
GROUP BY DECODE(PW.TTL_LSS_DIV_CD, 'PO', '113331', 'GO', '510891', 'PL', '113331', 'GL', '510891'), 
    TD.EQ_TPSZ_CD, TH.TTL_LSS_DT			]]></sql>
			<params>
				<param name="pay_inv_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
