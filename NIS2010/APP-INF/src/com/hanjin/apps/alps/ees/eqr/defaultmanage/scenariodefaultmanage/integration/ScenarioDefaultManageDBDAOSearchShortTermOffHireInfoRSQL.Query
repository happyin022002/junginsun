<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ScenarioDefaultManageDBDAOSearchShortTermOffHireInfoRSQL">
			<desc><![CDATA[S/T OffHire 조회]]></desc>
			<sql><![CDATA[
SELECT  MAX(DECODE(RUMM, 1,ECC_CD)) AS ECC_CD
		,MAX(DECODE(RUMM, 1,SEQ)) AS SEQ
		#foreach( $key in ${arrtpsz}) 
			,MAX(DECODE(CNTR_TPSZ_CD, '$key', NVL(AVAL_CNTR_QTY,0) ))   ${key}AVAL_CNTR_QTY
			,MAX(DECODE(CNTR_TPSZ_CD, '$key', NVL(LFT_CHG_AMT,0) ))      ${key}LFT_CHG_AMT
			,MAX(DECODE(CNTR_TPSZ_CD, '$key', NVL(DRFF_CHG_CR_AMT,0) )) ${key}DRFF_CHG_CR_AMT
			,MAX(DECODE(CNTR_TPSZ_CD, '$key', NVL(DRYG_AMT,0) ))         ${key}DRYG_AMT
			,MAX(DECODE(CNTR_TPSZ_CD, '$key', NVL(DFLT_USD_DYS,0) ))     ${key}DFLT_USD_DYS
		#end
FROM	(
		SELECT  ECC_CD
				,CTRT_OFC_CTY_CD||CTRT_SEQ SEQ
				,CNTR_TPSZ_CD
				,AVAL_CNTR_QTY
				,LFT_CHG_AMT
				,DRFF_CHG_CR_AMT
				,DRYG_AMT
				,DFLT_USD_DYS
				,UPD_USR_ID
				,UPD_DT
				,ROW_NUMBER() OVER (PARTITION BY ECC_CD, CTRT_OFC_CTY_CD||CTRT_SEQ, CNTR_TPSZ_CD ORDER BY ROWNUM) RUMM
		FROM EQR_SHRT_TERM_OFFH_COND
		WHERE 1=1
			#if (${status} != '') 
				AND ECC_CD IN(					
					#foreach( $key in ${arrlocation}) 
						#if($velocityCount < $arrlocation.size()) 
							'$key', 
						#else 
							'$key' 
						#end 
					#end
					)
			#end
			#if (${arrtpsz} != '') 
				AND CNTR_TPSZ_CD IN(					
					#foreach( $key in ${arrtpsz}) 
						#if($velocityCount < $arrtpsz.size()) 
							'$key', 
						#else 
							'$key' 
						#end 
					#end
					)
			#end
		)
GROUP BY	RUMM
			,ECC_CD
			,SEQ
ORDER BY 1, 2			]]></sql>
			<params>
			</params>
		</query>
	</querys>
</sqls>
