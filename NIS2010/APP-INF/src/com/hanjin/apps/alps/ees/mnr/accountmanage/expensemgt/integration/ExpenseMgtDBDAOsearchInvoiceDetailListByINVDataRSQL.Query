<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ExpenseMgtDBDAOsearchInvoiceDetailListByINVDataRSQL">
			<desc><![CDATA[ExpenseMgtDBDAOsearchInvoiceDetailListByINVDataRSQL]]></desc>
			<sql><![CDATA[
SELECT   B.MNR_WO_TP_CD 
       , B.EQ_KND_CD
       , B.COST_OFC_CD
       , B.CURR_CD
       , C.MNR_CD_DESC AS MNR_WO_TP
       , A.IDA_SAC_CD
       , A.MNR_ORD_OFC_CTY_CD
       , A.MNR_ORD_SEQ
       , ( A.MNR_ORD_OFC_CTY_CD || A.MNR_ORD_SEQ ) AS WO_NO
       , A.ORD_DTL_SEQ
       , ( SELECT MNR_CD_DESC FROM MNR_GEN_CD WHERE PRNT_CD_ID = B.EQ_KND_CD||'G' AND MNR_CD_ID = B.COST_CD ) AS COST_CD
       , E.MNR_CD_DESC AS COST_DTL_CD
       , A.MNR_RT_TP_CD
       , A.MNR_EXPN_DTL_NM
       , A.EQ_NO
       , A.EQ_TPSZ_CD
       , A.RQST_REF_NO
       , A.SPR_PRT_UT_TP_NM
       , A.SPR_PRT_NO
       , A.SPR_PRT_NM
       , A.YD_CD
       , TO_CHAR(GLOBALDATE_PKG.TIME_CONV_OFC_FNC(MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(), A.CRE_DT, @[user_ofc_cd]), 'YYYY-MM-DD') AS WO_DT
       , TO_CHAR(A.RPR_RSLT_DT, 'YYYY-MM-DD') AS RPR_RSLT_DT
       , A.RPR_QTY
       , A.SPR_PRT_UC_AMT
       , A.BZC_AMT
       , A.COST_AMT
       , A.SLS_TAX_AMT
       , A.N3PTY_FLG
       , A.N3PTY_BIL_TTL_AMT
       , A.INV_AMT INV_AMT
       , A.MNR_VRFY_TP_CD
       , A.ORD_DTL_RMK
       , A.INV_NO
       , A.FILE_SEQ
       , A.RPR_RQST_SEQ
       , A.RPR_RQST_VER_NO
       , A.PAY_INV_SEQ
       , 'SS' AS MNR_VRFY_TP_CD
       , F.RQST_REF_NO
       , A.CRE_USR_ID
       , TO_CHAR(GLOBALDATE_PKG.TIME_CONV_OFC_FNC(MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(), A.CRE_DT, @[user_ofc_cd]), 'YYYY-MM-DD') AS CRE_DT
       , A.UPD_USR_ID
       , TO_CHAR(GLOBALDATE_PKG.TIME_CONV_OFC_FNC(MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(), A.UPD_DT, @[user_ofc_cd]), 'YYYY-MM-DD') AS UPD_DT
       , NVL(A.IDA_CGST_RTO,0) AS IDA_CGST_RTO
       , NVL(A.IDA_SGST_RTO,0) AS IDA_SGST_RTO
       , NVL(A.IDA_IGST_RTO,0) AS IDA_IGST_RTO
       , NVL(A.IDA_UGST_RTO,0) AS IDA_UGST_RTO
       , NVL(A.IDA_CGST_AMT,0) AS IDA_CGST_AMT
       , NVL(A.IDA_SGST_AMT,0) AS IDA_SGST_AMT
       , NVL(A.IDA_IGST_AMT,0) AS IDA_IGST_AMT
       , NVL(A.IDA_UGST_AMT,0) AS IDA_UGST_AMT
FROM     MNR_ORD_DTL A
       , MNR_ORD_HDR B
       , MNR_GEN_CD C
       , MNR_GEN_CD E
       , MNR_RPR_RQST_HDR F
WHERE    1 = 1
AND      A.MNR_ORD_OFC_CTY_CD = B.MNR_ORD_OFC_CTY_CD
AND      A.MNR_ORD_SEQ = B.MNR_ORD_SEQ
AND      A.MNR_ORD_OFC_CTY_CD = F.MNR_ORD_OFC_CTY_CD(+)
AND      A.MNR_ORD_SEQ = F.MNR_ORD_SEQ(+)
AND      C.PRNT_CD_ID(+) = 'CD00020'
AND      B.MNR_WO_TP_CD = C.MNR_CD_ID(+)
AND      E.PRNT_CD_ID(+) = A.COST_CD
AND      A.COST_DTL_CD = E.MNR_CD_ID(+)
AND      A.ACCT_CD <> '511591' 
#if (${payInvSeqs} != '')
AND	     A.PAY_INV_SEQ IN
         (
  		 #foreach($key IN ${payInvSeqs})
  		  	#if($velocityCount < $payInvSeqs.size())
  				'$key', 
  			#else 
  				'$key' 
  			#end 
  		#end 
         )
#end			]]></sql>
			<params>
				<param name="user_ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
