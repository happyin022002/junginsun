<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeCalculationDBDAOSearchCycleNoNSequenceRSQL">
			<desc><![CDATA[ChargeCalculationDBDAOSearchCycleNoNSequenceRSQL.Query]]></desc>
			<sql><![CDATA[
SELECT  /*+ INDEX_DESC( DMT_CHG_CALC XPKDMT_CHG_CALC ) */
         CNTR_CYC_NO
        ,DMDT_CHG_LOC_DIV_CD
        ,CHG_SEQ
		,SYS_AREA_GRP_ID AS SVR_ID		
FROM    DMT_CHG_CALC
WHERE   SYS_AREA_GRP_ID	= ( SELECT	SYS_AREA_GRP_ID
							FROM 	COM_SYS_AREA_GRP_ID
							WHERE	CNT_CD = (	SELECT TRIM(SUBSTR(LOC_CD, 1, 2))
												FROM MDM_ORGANIZATION
												WHERE OFC_CD = @[ofc_cd])
							AND		CO_IND_CD = 'H')
AND     CNTR_NO			= @[cntr_no]
AND     DMDT_TRF_CD		= @[dmdt_trf_cd]
AND		DMDT_CHG_STS_CD	IN	('C', 'D', 'E', 'F', 'I', 'L', 'N', 'U')

#if (${chg_type} == 'G') 
AND     CHG_SEQ = 1
#else 
AND     CHG_SEQ > 1
#end

AND     ROWNUM = 1			]]></sql>
			<params>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="dmdt_trf_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
