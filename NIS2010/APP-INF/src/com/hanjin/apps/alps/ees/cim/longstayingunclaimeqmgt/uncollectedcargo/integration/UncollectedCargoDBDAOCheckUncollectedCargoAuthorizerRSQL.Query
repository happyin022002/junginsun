<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="UncollectedCargoDBDAOCheckUncollectedCargoAuthorizerRSQL">
			<desc><![CDATA[Check UncollectedCargoAuthorizer]]></desc>
			<sql><![CDATA[
--'SELCOE' 아닌 경우 
SELECT AA.AR_HD_QTR_OFC_CD
     , AA.USR_ID
     , (SELECT USR_NM FROM COM_USER WHERE USR_ID = AA.USR_ID) USR_NM
     , CASE WHEN CNT = 0 THEN NVL((SELECT '2' FROM COM_USER WHERE USR_ID= AA.USR_ID AND OFC_CD = AA.AR_HD_QTR_OFC_CD),'0') 
            ELSE TO_CHAR(CNT) 
       END AS CNT
     , (SELECT COUNT(1) FROM CIM_UC_CGO_AUTH WHERE UC_AUTH_USR_ID=AA.USR_ID AND UC_AUTH_OFC_CD = AA.AR_HD_QTR_OFC_CD) AS ISFALG
FROM   (
       SELECT COUNT(1) AS CNT
            , @[uc_auth_ofc_cd] AS AR_HD_QTR_OFC_CD
            , @[uc_auth_usr_id] AS USR_ID
       FROM   MDM_ORGANIZATION A
            , COM_USER B 
       WHERE 1 = 1 
       AND A.DELT_FLG = 'N' 
       AND A.OFC_CD = B.OFC_CD 
       AND A.AR_HD_QTR_OFC_CD = @[uc_auth_ofc_cd] 
       AND B.USR_ID = @[uc_auth_usr_id]
      ) AA			]]></sql>
			<params>
				<param name="uc_auth_ofc_cd" type="12" value="" out="N"/>
				<param name="uc_auth_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
