<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeCalculationDBDAOSearchCalculationBookingContainerUcFlagBlNoRSQL">
			<desc><![CDATA[ChargeCalculationDBDAOSearchCalculationBookingContainerUcFlagBlNoRSQL]]></desc>
			<sql><![CDATA[
SELECT a.SYS_AREA_GRP_ID as svr_id
     , a.CNTR_NO
     , a.CNTR_CYC_NO
     , a.DMDT_TRF_CD
     , a.DMDT_CHG_LOC_DIV_CD
     , a.CHG_SEQ
     , CASE WHEN NVL2(CIM.UC_CS_NO,'Y','N') != NVL(A.UCLM_FLG,'N') THEN NVL2(CIM.UC_CS_NO,'Y','N') ELSE ' ' END UCLM_FLG
	 , ( SELECT HNDL_BRNC_CD FROM CIM_UC_CGO WHERE UC_CS_NO = @[uc_cs_no] AND ROWNUM = 1 )AS OFC_CD
     , ( SELECT HNDL_HDLR_USR_ID  FROM CIM_UC_CGO WHERE UC_CS_NO = @[uc_cs_no]AND ROWNUM = 1 ) AS USR_ID
 FROM CIM_UC_CGO_CNTR CIM, DMT_CHG_CALC A, DMT_CHG_BKG_CNTR B
WHERE 1=1
AND CIM.CNTR_NO(+) = B.CNTR_NO
AND A.SYS_AREA_GRP_ID = B.SYS_AREA_GRP_ID
AND A.CNTR_NO = B.CNTR_NO 
AND A.CNTR_CYC_NO = B.CNTR_CYC_NO
AND B.BKG_NO = ( SELECT BKG_NO FROM BKG_BOOKING WHERE BL_NO = @[bl_no] )
AND SUBSTR(A.DMDT_TRF_CD,3,1) = 'I'
AND CIM.UC_CS_NO(+) = @[uc_cs_no] 
AND CIM.BL_NO(+) = @[bl_no]
AND CASE WHEN NVL2(CIM.UC_CS_NO,'Y','N') != NVL(A.UCLM_FLG,'N') THEN NVL2(CIM.UC_CS_NO,'Y','N') ELSE ' ' END != ' '			]]></sql>
			<params>
				<param name="uc_cs_no" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
