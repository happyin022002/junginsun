<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DMTCalculationDBDAOSearchFirstSvrIDRSQL">
			<desc><![CDATA[DMTCalculationDBDAOSearchFirstSvrIDRSQL]]></desc>
			<sql><![CDATA[
SELECT SYS_AREA_GRP_ID
  FROM COM_SYS_AREA_GRP_ID
 WHERE CO_IND_CD = 'H'
   AND CNT_CD =
       (SELECT BKG_CNT_CD
        FROM
          (SELECT DECODE (DECODE(@[dmdt_chg_loc_div_cd], 'TSP',
                                    (SELECT DECODE(OB_CNTR_FLG, 'Y', 'O', 'I') FROM CTM_MOVEMENT
                            WHERE CNTR_NO = @[cntr_no]
                            AND CNMV_CYC_NO = @[cntr_cyc_no]
                            AND ORG_YD_CD = @[fm_mvmt_yd_cd]
                            AND MVMT_STS_CD = 'VD'),
                            SUBSTR (@[dmdt_trf_cd], 3, 1) ),
                          'I', DECODE (@[dmdt_chg_loc_div_cd],
                                       'POD', SUBSTR (POD_CD, 1, 2),
                                       'DEL', SUBSTR (DEL_CD, 1, 2),
                                       'TSP', (SELECT SUBSTR (PST_RLY_PORT_CD,
                                                              1,
                                                              2
                                                             )
                                                 FROM BKG_BOOKING
                                                WHERE BKG_NO = @[bkg_no])
                                      ),
                          'O', DECODE (@[dmdt_chg_loc_div_cd],
                                       'POL', SUBSTR (POL_CD, 1, 2),
                                       'POR', SUBSTR (POR_CD, 1, 2),
                                       'TSP', (SELECT SUBSTR (PRE_RLY_PORT_CD,
                                                              1,
                                                              2
                                                             )
                                                 FROM BKG_BOOKING
                                                WHERE BKG_NO = @[bkg_no])
                                      )
                         ) AS BKG_CNT_CD
             FROM DMT_CHG_BKG_CNTR
            WHERE CNTR_NO = @[cntr_no] 
              AND CNTR_CYC_NO = @[cntr_cyc_no]
           )
        WHERE BKG_CNT_CD IS NOT NULL
          AND ROWNUM = 1)			]]></sql>
			<params>
				<param name="dmdt_chg_loc_div_cd" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cntr_cyc_no" type="12" value="" out="N"/>
				<param name="fm_mvmt_yd_cd" type="12" value="" out="N"/>
				<param name="dmdt_trf_cd" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
