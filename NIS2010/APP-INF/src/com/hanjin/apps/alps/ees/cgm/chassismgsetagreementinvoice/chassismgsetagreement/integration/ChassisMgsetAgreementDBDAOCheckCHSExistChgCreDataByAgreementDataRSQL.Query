<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChassisMgsetAgreementDBDAOCheckCHSExistChgCreDataByAgreementDataRSQL">
			<desc><![CDATA[-----------------------------------------------------------------------------------------------------------------------------------------------------------
ChassisMgsetAgreementDB.CheckCHSExistChgCreDataByAgreementData
2014-06-16 BY JUSTIN HAN CSR ID : CHM-201430737, TITLE : ALPS-CHSS-Invoice에서 chassis estimated Expense 로직 수정 요청
                 MODIFIED CHECK LOGIC FOR USING AGREEMENT
-----------------------------------------------------------------------------------------------------------------------------------------------------------]]></desc>
			<sql><![CDATA[
SELECT SUM(CNT) AS CNT
  FROM (SELECT COUNT(*) AS CNT
          FROM CGM_LSE_CHG_HDR
         WHERE EQ_KND_CD = 'Z'
            AND COST_YRMON >= SUBSTR(@[eff_dt],1,6)
            AND AGMT_OFC_CTY_CD = @[agmt_ofc_cty_cd]
            AND AGMT_SEQ = @[agmt_seq]
        UNION ALL
        SELECT COUNT(*) AS CNT
          FROM CGM_PAY_INV A, CGM_LSE_CHG_DTL B
         WHERE A.PAY_INV_SEQ = B.PAY_INV_SEQ
           AND A.AGMT_OFC_CTY_CD = @[agmt_ofc_cty_cd]
           AND A.AGMT_SEQ = @[agmt_seq]
        UNION ALL
        SELECT COUNT(*) AS CNT
          FROM CGM_PAY_INV A, CGM_PAY_INV_POOL_DTL B
         WHERE A.PAY_INV_SEQ = B.PAY_INV_SEQ
           AND A.AGMT_OFC_CTY_CD = @[agmt_ofc_cty_cd]
           AND A.AGMT_SEQ = @[agmt_seq])

			]]></sql>
			<params>
				<param name="eff_dt" type="12" value="" out="N"/>
				<param name="agmt_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="agmt_seq" type="2" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
