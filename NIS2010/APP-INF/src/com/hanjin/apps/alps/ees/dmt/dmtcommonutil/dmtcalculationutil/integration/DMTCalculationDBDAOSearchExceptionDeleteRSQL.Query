<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DMTCalculationDBDAOSearchExceptionDeleteRSQL">
			<desc><![CDATA[DMTCalculationDBDAOSearchExceptionDeleteRSQL]]></desc>
			<sql><![CDATA[
SELECT 'Y' cal_fg
FROM DMT_HRD_CDG_CTNT
WHERE HRD_CDG_ID = 'EXCEPTION_DELETE'
AND ( NVL(ATTR_CTNT2, '') = SUBSTR(@[fm_yd_cd],1,2)
    OR NVL(ATTR_CTNT1, '') = ( SELECT  SYS_AREA_GRP_ID
            					 FROM    COM_SYS_AREA_GRP_ID
            					WHERE   CO_IND_CD = 'H'
              					  AND   CNT_CD = SUBSTR(@[fm_yd_cd],1,2) ) )
AND ATTR_CTNT10 <= SUBSTR(NVL(@[to_mvmt_dt],ATTR_CTNT10),1,8)

AND NOT EXISTS ( SELECT 'X' FROM DMT_HRD_CDG_CTNT
                  WHERE 1=1
                    AND HRD_CDG_ID = 'EXCEPTION_DELETE'
                    AND NVL(ATTR_CTNT4, '') = SUBSTR(@[fm_yd_cd],1,5)
                    AND NVL(ATTR_CTNT3, '') = 'N'
					AND ROWNUM = 1 )
AND ROWNUM = 1

UNION ALL

SELECT 'Y' cal_fg
FROM DMT_HRD_CDG_CTNT
WHERE HRD_CDG_ID = 'EXCEPTION_DELETE'
AND NVL(ATTR_CTNT4, '') = SUBSTR(@[fm_yd_cd],1,5)
AND NVL(ATTR_CTNT3, '') = 'Y'
AND ROWNUM = 1			]]></sql>
			<params>
				<param name="fm_yd_cd" type="12" value="" out="N"/>
				<param name="to_mvmt_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
