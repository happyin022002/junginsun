<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RateMgtDBDAOsearchAgreementComboListDataRSQL">
			<desc><![CDATA[searchAgreementComboListData]]></desc>
			<sql><![CDATA[
SELECT   D.TRSM_MOD_CD
       , MNR_COMMON_PKG.MNR_CONV_AGMT_NO_FNC(A.AGMT_OFC_CTY_CD, A.AGMT_SEQ) AS AGMT_NO
       , A.AGMT_OFC_CTY_CD
       , A.AGMT_SEQ
       , A.AGMT_VER_NO
       , A.EQ_KND_CD
       , A.AGMT_LST_VER_FLG
       , MNR_COMMON_PKG.MNR_CONV_PARTNER_CD_FNC(A.VNDR_SEQ) AS VNDR_SEQ
       , B.VNDR_LGL_ENG_NM AS VNDR_NM
       , A.PAY_TERM_DYS
       , A.AGMT_REF_NO
       , TO_CHAR(A.AGMT_DT, 'YYYY-MM-DD') AS AGMT_DT
       , TO_CHAR(A.EFF_DT, 'YYYY-MM-DD') AS EFF_DT
       , TO_CHAR(A.EXP_DT, 'YYYY-MM-DD') AS EXP_DT
       , A.CURR_CD
       , A.DELT_FLG
       , A.AGMT_RMK
       , A.AGMT_OFC_CD
       , A.TRF_NO
       , A.CRE_USR_ID
       , TO_CHAR(A.CRE_DT, 'YYYY-MM-DD') AS CRE_DT
       , A.UPD_USR_ID
       , TO_CHAR(A.UPD_DT, 'YYYY-MM-DD') AS UPD_DT
       , D.EDI_ID
       , E.MNR_CD_DP_DESC AS EQ_TYPE_NAME
       , (
           SELECT   GD.MNR_CD_DP_DESC
           FROM     MNR_RPR_TRF_HDR TH,MNR_GEN_CD GD
           WHERE    1 = 1
           AND      TH.MNR_MEAS_UT_CD = GD.MNR_CD_ID
           AND      GD.PRNT_CD_ID = 'CD00010'
           AND      A.TRF_NO = TH.TRF_NO
           AND ROWNUM = 1
         ) AS MNR_MEAS_UT_NM
FROM     MNR_AGMT_HDR A
       , MDM_VENDOR B
       , MNR_PARTNER D
       , MNR_GEN_CD E
       , MNR_AGMT_APLY_OFC C
WHERE    1 = 1
AND      A.VNDR_SEQ = B.VNDR_SEQ
AND      A.AGMT_OFC_CTY_CD = C.AGMT_OFC_CTY_CD
AND      A.AGMT_SEQ = C.AGMT_SEQ
AND      A.AGMT_VER_NO = C.AGMT_VER_NO
AND      C.APLY_OFC_CD = D.CTRL_OFC_CD
AND      A.VNDR_SEQ = D.MNR_PRNR_SEQ
AND      A.EQ_KND_CD = E.MNR_CD_ID
AND      A.AGMT_LST_VER_FLG = 'Y'
AND      D.MNR_GRP_TP_CD = 'RPR'
AND      E.PRNT_CD_ID = 'CD00002'
AND      C.APLY_OFC_CD = @[ofc_cd]
#if (${tp_cd} == 'EST')
AND      A.EXP_DT >= TRUNC(SYSDATE) - 60
#end
ORDER BY B.VNDR_LGL_ENG_NM			]]></sql>
			<params>
				<param name="ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
