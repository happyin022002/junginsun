<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeCalculationDBDAOSearchContractCustomerRSQL">
			<desc><![CDATA[ChargeCalculationDBDAOSearchContractCustomerRSQL]]></desc>
			<sql><![CDATA[
SELECT CASE
         WHEN EXISTS (SELECT *
        FROM   PRI_SP_HDR HDR
             , PRI_SP_MN MN
             , PRI_SP_CTRT_PTY PTY
             , MDM_CUSTOMER R
             , MDM_CUSTOMER A
        WHERE  1=1
        AND    HDR.SC_NO = @[sc_no]
        AND    HDR.PROP_NO = MN.PROP_NO
        AND    MN.PROP_STS_CD ='F'
        AND    MN.AMDT_SEQ = (SELECT MAX(AMDT_SEQ)
                FROM   PRI_SP_MN
                WHERE  1=1
                AND    PROP_NO = MN.PROP_NO
                AND    PROP_STS_CD = MN.PROP_STS_CD )
        AND    PTY.PROP_NO = MN.PROP_NO
        AND    PTY.AMDT_SEQ = MN.AMDT_SEQ
        AND    PTY.PRC_CTRT_PTY_TP_CD = 'C'
        AND    REAL_CUST_CNT_CD = R.CUST_CNT_CD(+)
        AND    REAL_CUST_SEQ = R.CUST_SEQ (+)
        AND    PTY.CUST_CNT_CD = A.CUST_CNT_CD(+)
        AND    PTY.CUST_SEQ = A.CUST_SEQ(+)
        AND    PTY.CUST_CNT_CD = 'US'
        AND    PTY.CUST_SEQ = 67219 ) THEN 'Y'
         ELSE 'N'
       END CUST_YN
FROM   DUAL			]]></sql>
			<params>
				<param name="sc_no" type="12" value="AWN150551" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
