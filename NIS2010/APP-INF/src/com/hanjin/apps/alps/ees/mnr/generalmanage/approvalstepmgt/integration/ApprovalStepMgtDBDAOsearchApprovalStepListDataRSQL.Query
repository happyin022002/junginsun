<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ApprovalStepMgtDBDAOsearchApprovalStepListDataRSQL">
			<desc><![CDATA[DESC Enter..
---------------------------------------------------------------------------------------------------------------
2014-02-26 Jonghee HAN Live malfunction fixed
---------------------------------------------------------------------------------------------------------------]]></desc>
			<sql><![CDATA[
SELECT A.OFC_TP_CD,
       DECODE(ROW_NUMBER() OVER(ORDER BY A.KB,A.OFC_CD,A.APRO_STEP_SEQ), '1', A.OFC_CD, B.OFC_CD) OFC_CD,
       A.APRO_STEP_SEQ,
       ROW_NUMBER() OVER(ORDER BY A.KB,A.OFC_CD,A.APRO_STEP_SEQ) AS ROW_SEQ,
       A.APRO_USR_ID,
       B.USR_NM
FROM(
	SELECT '1' KB,'BB' OFC_TP_CD, @[ofc_cd] OFC_CD, 1 APRO_STEP_SEQ, @[apro_usr_id] APRO_USR_ID
	FROM DUAL
	UNION ALL
    SELECT '2' KB,OFC_TP_CD,OFC_CD,APRO_STEP_SEQ,APRO_USR_ID
    FROM MNR_APRO_STEP
    WHERE OFC_TP_CD = 'BB'
    AND   OFC_CD = @[ofc_cd]
    UNION ALL
    SELECT '3' KB,OFC_TP_CD,OFC_CD,APRO_STEP_SEQ,APRO_USR_ID
    FROM MNR_APRO_STEP
    WHERE OFC_TP_CD = 'HQ'
    AND   OFC_CD = MNR_COMMON_PKG.MNR_GET_RHQ_OFC_FNC(@[ofc_cd])
    UNION ALL
    SELECT '4' KB,OFC_TP_CD,OFC_CD,APRO_STEP_SEQ,APRO_USR_ID
    FROM MNR_APRO_STEP
    WHERE OFC_TP_CD = 'HO'
    ) A, COM_USER B
WHERE  A.APRO_USR_ID = B.USR_ID(+)			]]></sql>
			<params>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="apro_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
