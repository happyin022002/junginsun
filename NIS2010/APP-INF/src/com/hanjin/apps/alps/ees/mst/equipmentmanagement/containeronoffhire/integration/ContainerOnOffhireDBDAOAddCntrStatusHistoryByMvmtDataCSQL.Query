<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerOnOffhireDBDAOAddCntrStatusHistoryByMvmtDataCSQL">
			<desc><![CDATA[addCntrStatusHistoryByMvmtData]]></desc>
			<sql><![CDATA[
INSERT INTO MST_CNTR_STS_HIS (
     CNTR_NO
    ,CNTR_STS_SEQ
    ,CO_CD
    ,YD_CD
    ,LOC_CD
    ,SCC_CD
    ,LCC_CD
    ,ECC_CD
    ,RCC_CD
    ,AGMT_CTY_CD
    ,AGMT_SEQ
    ,CNTR_STS_CD
    ,OFC_CD
    ,CNTR_STS_EVNT_DT
    ,PRNR_YD_CD
    ,PRNR_STS_SEQ
    ,CNTR_STS_RMK
    ,CNMV_STS_CD
    ,CNTR_FULL_FLG
    ,CRE_USR_ID
    ,CRE_DT
    ,UPD_USR_ID
    ,UPD_DT
) 
SELECT 
	A.CNTR_NO	,
	A.LST_STS_SEQ	AS CNTR_STS_SEQ	,
	'H'				AS CO_CD	,
	@[org_yd_cd]	AS YD_CD	,
	A.LOC_CD	,
	A.SCC_CD	,
	A.LCC_CD	,
	A.ECC_CD	,
	A.RCC_CD	,
	A.AGMT_CTY_CD	,
	A.AGMT_SEQ	,
	'LSO'			AS CNTR_STS_CD  ,
	@[ofc_cd]		AS OFC_CD	,
	TRUNC(TO_DATE(@[cnmv_evnt_dt],'YYYYMMDDHH24MI'))	AS CNTR_STS_EVNT_DT	,		
	( SELECT  /*+ INDEX_DESC(A XAK1MST_CNTR_STS_HIS) */ A.YD_CD
          FROM    MST_CNTR_STS_HIS A
          WHERE   A.CNTR_NO = @[cntr_no] 
          AND     A.CNTR_STS_CD = 'LSI'
          AND     ROWNUM =1                        
        )			AS PRNR_YD_CD	,
	( SELECT  /*+ INDEX_DESC(A XAK1MST_CNTR_STS_HIS) */ A.CNTR_STS_SEQ
          FROM    MST_CNTR_STS_HIS A
          WHERE   A.CNTR_NO = @[cntr_no]
          AND     A.CNTR_STS_CD = 'LSI'
          AND     ROWNUM =1
        )			AS PRNR_STS_SEQ ,
	'ID_XX'			AS CNTR_STS_RMK ,
	'ID'			AS CNMV_STS_CD	,
	'Y'				AS CNTR_FULL_FLG,
	@[cre_usr_id]	AS CRE_USR_ID	,
	SYSDATE			AS CRE_DT		,
	@[upd_usr_id]	AS UPD_USR_ID	,
	SYSDATE			AS UPD_DT
FROM MST_CONTAINER A
WHERE A.CNTR_NO = @[cntr_no]			]]></sql>
			<params>
				<param name="org_yd_cd" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="cnmv_evnt_dt" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
