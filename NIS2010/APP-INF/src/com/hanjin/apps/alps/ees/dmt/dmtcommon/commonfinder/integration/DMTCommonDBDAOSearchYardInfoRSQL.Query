<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DMTCommonDBDAOSearchYardInfoRSQL">
			<desc><![CDATA[mdm yard 정보]]></desc>
			<sql><![CDATA[
SELECT  YD_NM||'|'||DMDT_OFC_CD||'|'||DEM_IB_CLT_FLG||'|'||DEM_OB_CLT_FLG||'|'||CAL_TYPE AS YD_NM
FROM
(SELECT  A.YD_NM AS YD_NM,
         A.DMDT_OFC_CD AS DMDT_OFC_CD, 
         A.DEM_IB_CLT_FLG AS DEM_IB_CLT_FLG,
         A.DEM_OB_CLT_FLG AS DEM_OB_CLT_FLG ,
         ( SELECT /*+ INDEX_DESC( B DMT_CALC_TP XPKDMT_CALC_TP) */
                  B.DMDT_CALC_TP_CD
            FROM  DMT_CALC_TP B ,
                  MDM_LOCATION C
            WHERE C.LOC_CD = SUBSTR(@[yd_cd],1,5)
            AND   ( B.CNT_CD   =  C.CNT_CD OR B.CNT_CD = ' ' )
            AND   ( B.RGN_CD   =  C.RGN_CD OR B.RGN_CD = ' ' )
            AND   ( B.STE_CD   =  C.STE_CD OR B.STE_CD = ' ' )
            AND   ( B.LOC_CD   =  C.LOC_CD OR B.LOC_CD = ' ' )
            AND   B.IO_BND_CD  =  'I'
            AND   B.CALC_TP_SEQ = ( SELECT /*+ INDEX_DESC( D XPKDMT_CALC_TP) */
                                          D.CALC_TP_SEQ
                                   FROM   DMT_CALC_TP  D
                                   WHERE  ( D.CNT_CD = C.CNT_CD   OR  D.CNT_CD = ' ' )
                                   AND    ( D.RGN_CD = C.RGN_CD   OR  D.RGN_CD = ' ' )
                                   AND    ( D.STE_CD = C.STE_CD   OR  D.STE_CD = ' ' )
                                   AND    ( D.LOC_CD = C.LOC_CD   OR  D.LOC_CD = ' ' )
                                   AND    D.IO_BND_CD =  'I'
                                   AND    ROWNUM = 1
                                   )
            AND  ROWNUM = 1
         ) AS CAL_TYPE
 FROM MDM_YARD A
 WHERE A.YD_CD =  @[yd_cd]
 AND A.DELT_FLG = 'N' )			]]></sql>
			<params>
				<param name="yd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
