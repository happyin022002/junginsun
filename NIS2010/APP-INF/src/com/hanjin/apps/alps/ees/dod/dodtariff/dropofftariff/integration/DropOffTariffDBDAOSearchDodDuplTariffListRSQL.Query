<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DropOffTariffDBDAOSearchDodDuplTariffListRSQL">
			<desc><![CDATA[SearchDodDuplTariffList]]></desc>
			<sql><![CDATA[
select DDT.DRP_OFF_CHG_TRF_SEQ,
       DDT.DRP_OFF_CHG_TRF_DIV_CD,
       DDT.DRP_OFF_CHG_TRF_CNT_CD,
       DDT.DRP_OFF_CHG_TRF_EFF_DT,
       DDT.DRP_OFF_CHG_TRF_EXP_DT,
       DDT.DRP_OFF_CHG_TRF_EXP_FLG,
       DDT.DEL_CD,
       DDT.CNTR_RTN_LOC_CD,
       NVL(DDT.CNTR_RTN_YD_SFX_CD, 'ALL') as CNTR_RTN_YD_SFX_CD,
       DDT.POL_CONTI_CD,
       DDT.CNTR_TPSZ_CD,
       DDT.CURR_CD,
       DDT.SPCL_CUST_CNT_CD,
       DDT.SPCL_CUST_SEQ,
#if(${drp_off_chg_trf_div_cd} != 'G')
	   DDT.SPCL_CUST_CNT_CD||LPAD(DDT.SPCL_CUST_SEQ,6,'0') AS SPCL_CUST_CNT_SEQ,
	   (select CUST_LGL_ENG_NM CUST_NM
		  from MDM_CUSTOMER
		 where 1=1
		   AND DELT_FLG <> 'Y'
		   AND NVL(NMD_CUST_FLG, 'N') = 'N'
		  AND CUST_CNT_CD = DDT.SPCL_CUST_CNT_CD 
           AND CUST_SEQ = DDT.SPCL_CUST_SEQ) AS SPCL_CUST_NM,
#end
	   DDT.DRP_OFF_CHG_TRF_AMT,
       DDT.DRP_OFF_CHG_TRF_EXPT_FLG,
       DDT.DRP_OFF_CHG_TRF_CFM_USR_ID,
       DDT.DRP_OFF_CHG_TRF_CFM_DT,
	   TO_CHAR(       DDT.DRP_OFF_CHG_TRF_CFM_DT,'YYYY-MM-DD HH24:MI') as DRP_OFF_CHG_TRF_CFM_DT,
	   DECODE(       DDT.DRP_OFF_CHG_TRF_CFM_FLG, 'Y', 'C', 'S') as DRP_OFF_CHG_TRF_CFM_FLG, 
       DDT.DRP_OFF_CHG_TRF_RMK,
       DDT.DELT_FLG,
       DDT.CRE_USR_ID,
	  DDT.RFA_NO,
	  DDT.SC_NO,
	   TO_CHAR(       DDT.CRE_DT,'YYYY-MM-DD HH24:MI') as CRE_DT,
       DDT.UPD_USR_ID,
	   TO_CHAR(       DDT.UPD_DT,'YYYY-MM-DD HH24:MI') as UPD_DT
from DOD_DRP_OFF_CHG_TRF DDT
where 1=1
#if( ${del_cd} != '' )
  and DEL_CD = @[del_cd]
#end
  and cntr_rtn_loc_cd = @[cntr_rtn_loc_cd]
  and cntr_tpsz_cd = @[cntr_tpsz_cd]
#if ( ${cntr_rtn_yd_sfx_cd} != '' && ${cntr_rtn_yd_sfx_cd} != 'ALL' )
  and cntr_rtn_yd_sfx_cd = @[cntr_rtn_yd_sfx_cd]
#end
  and drp_off_chg_trf_cnt_cd = @[drp_off_chg_trf_cnt_cd]
#if ( ${pol_conti_cd} != '' && ${pol_conti_cd} != 'ALL' )
  and pol_conti_cd = @[pol_conti_cd]
#end
#if(${drp_off_chg_trf_div_cd} != 'G')
  #if ( ${rfa_no} != '')
    and RFA_NO = @[rfa_no]
  #end
  #if ( ${sc_no} != '')
    and SC_NO = @[sc_no]
  #end
#end
#if(${spcl_cust_cnt_seq} != '')
   and SPCL_CUST_CNT_CD = SUBSTR(@[spcl_cust_cnt_seq], 0, 2)
   and SPCL_CUST_SEQ = SUBSTR(@[spcl_cust_cnt_seq], 3)
#else
   and SPCL_CUST_CNT_CD is null
   and SPCL_CUST_SEQ is null
#end
and DDT.DRP_OFF_CHG_TRF_AMT = @[drp_off_chg_trf_amt]
AND DRP_OFF_CHG_TRF_DIV_CD = @[drp_off_chg_trf_div_cd]
and DRP_OFF_CHG_TRF_EXP_FLG != 'Y'
and delt_flg = 'N'			]]></sql>
			<params>
				<param name="del_cd" type="12" value="" out="N"/>
				<param name="cntr_rtn_loc_cd" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="cntr_rtn_yd_sfx_cd" type="12" value="" out="N"/>
				<param name="drp_off_chg_trf_cnt_cd" type="12" value="" out="N"/>
				<param name="pol_conti_cd" type="12" value="" out="N"/>
				<param name="rfa_no" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="spcl_cust_cnt_seq" type="12" value="" out="N"/>
				<param name="drp_off_chg_trf_amt" type="12" value="" out="N"/>
				<param name="drp_off_chg_trf_div_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
