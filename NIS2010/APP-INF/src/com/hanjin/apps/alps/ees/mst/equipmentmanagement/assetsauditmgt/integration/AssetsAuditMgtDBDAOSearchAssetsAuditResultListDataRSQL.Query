<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AssetsAuditMgtDBDAOSearchAssetsAuditResultListDataRSQL">
			<desc><![CDATA[SearchAssetsAuditResultListData]]></desc>
			<sql><![CDATA[
SELECT 
   A.EQ_NO,
#if (${eq_type} == 'U')
   B.CNTR_TPSZ_CD EQ_TPSZ_CD,
   B.LSTM_CD,
   B.CNTR_STS_CD,
   B.CNMV_STS_CD ,
#else   
   B.EQ_TPSZ_CD,
   B.AGMT_LSTM_CD LSTM_CD,
   (SELECT C.EQ_ASET_STS_CD 
    FROM CGM_EQ_STS_HIS C 
    WHERE 1 = 1
    AND C.EQ_NO = B.EQ_NO
    AND C.EQ_STS_SEQ = B.EQ_STS_SEQ
    AND C.EQ_KND_CD = @[eq_type]) CNTR_STS_CD,
   B.CHSS_MVMT_STS_CD CNMV_STS_CD,
#end   
   B.CRNT_YD_CD,
#if (${eq_type} == 'U')        
   TO_CHAR(B.CNMV_DT, 'YYYY-MM-DD') CNMV_DT,
#else      
   TO_CHAR(B.CHSS_MVMT_DT, 'YYYY-MM-DD') CNMV_DT,
#end
   A.DIFF_RMK,
   A.EQ_FA_AUD_RSLT_CD
FROM 
   MST_EQ_ASET_AUD_RSLT A,
#if (${eq_type} == 'U')   
   MST_CONTAINER B
#else   
   CGM_EQUIPMENT B
#end
WHERE 1 = 1
AND  A.JB_EXE_YRMON = REPLACE(NVL(@[yr_mon],'0'),'-','')
AND  A.VER_NO       = @[ver_no]
AND  A.EQ_KND_CD    = @[eq_type]
AND  A.EQ_FA_AUD_RSLT_CD = @[rslt_cd]
#if (${eq_type} == 'U')   
#if (${rslt_cd} == 'F') 
AND  A.EQ_NO        = SUBSTR(B.CNTR_NO(+),0,10)
#else
AND  A.EQ_NO        = B.CNTR_NO(+)
#end
#else   
AND  A.EQ_NO        = B.EQ_NO(+)
#end			]]></sql>
			<params>
				<param name="eq_type" type="12" value="" out="N"/>
				<param name="yr_mon" type="12" value="" out="N"/>
				<param name="ver_no" type="12" value="" out="N"/>
				<param name="rslt_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
