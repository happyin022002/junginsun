<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DMTCalculationDBDAOCheckWeekEndRSQL">
			<desc><![CDATA[CheckWeekEnd]]></desc>
			<sql><![CDATA[
SELECT 'Y' EXIST
  FROM DMT_WEEKEND
 WHERE (    CNT_CD = @[cnt_cd]
        AND (   (    WKND_TP_CD = 'TF'
                 AND (   (    'THU' = @[week_of_day]
                          AND 'Y' = @[excl_sat])
                      OR (    'FRI' = @[week_of_day]
                          AND 'Y' = @[excl_sun])
                     )
                )
             OR (    WKND_TP_CD = 'FS'
                 AND (   (    'FRI' = @[week_of_day]
                          AND 'Y' = @[excl_sat])
                      OR (    'SAT' = @[week_of_day]
                          AND 'Y' = @[excl_sun])
                     )
                )
            )
       )
    OR (    0 = (SELECT COUNT (CNT_CD)
                   FROM DMT_WEEKEND
                  WHERE CNT_CD = @[cnt_cd])
        AND (   (    'SAT' = @[week_of_day]
                 AND 'Y' = @[excl_sat])
             OR (    'SUN' = @[week_of_day]
                 AND 'Y' = @[excl_sun])
            )
        AND ROWNUM = 1
       )
#if (${loc_cd} != 'X') 
#if (${exp_type} != 'SC') 
    OR ( @[loc_cd] IN ('USSFO', 'USOAK', 'USLGB', 'USLAX', 'USGAC')
        AND @[term_cd] = 'Y'
        AND SUBSTR(@[trf_cd], 2, 1) = 'T'
        AND ( 'SAT' = @[week_of_day]
           OR 'SUN' = @[week_of_day]
            )
        AND ROWNUM = 1
       )

#else
     OR ( @[loc_cd] IN ('USSFO', 'USOAK', 'USLGB', 'USLAX', 'USGAC')
        AND @[term_cd] = 'Y'
        AND SUBSTR(@[trf_cd], 2, 1) = 'T'
        AND (( 'SAT' = @[week_of_day] AND  'Y' = @[excl_sat])
           OR ('SUN' = @[week_of_day] AND  'Y' = @[excl_sun])
            )
        AND ROWNUM = 1
       ) 
#end
#end			]]></sql>
			<params>
				<param name="cnt_cd" type="12" value="" out="N"/>
				<param name="week_of_day" type="12" value="" out="N"/>
				<param name="excl_sat" type="12" value="" out="N"/>
				<param name="excl_sun" type="12" value="" out="N"/>
				<param name="loc_cd" type="12" value="" out="N"/>
				<param name="term_cd" type="12" value="" out="N"/>
				<param name="trf_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
