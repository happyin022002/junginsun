<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChassisMovementHistoryDBDAOsearchchssAtdtVerifyRSQL">
			<desc><![CDATA[s]]></desc>
			<sql><![CDATA[
SELECT 
 CASE WHEN EQ_TPSZ_CD IN ('CB4','SF4') AND  CNTR_TPSZ_CD = 'D2' AND @[cntr_tpsz] = 'D2' AND KNT = 1 THEN 'OK'
 ELSE 'ERROR'
 END CHK
 FROM (
    SELECT 
    B.CNTR_TPSZ_CD, C.EQ_TPSZ_CD, COUNT(*) KNT
       FROM  CGM_EQ_ATCH_DTCH_HIS A , MST_CONTAINER B, CGM_EQUIPMENT C
    WHERE  A.EQ_NO =  @[chss_no]
    AND A.DTCH_DT  >to_date( @[from_dt],'YYYYMMDD HH24:MI')
    AND A.ATCH_DT  < NVL( to_date(@[to_dt],'YYYYMMDD HH24:MI') , to_date('88881231','YYYYMMDD') )
    AND A.CNTR_NO <> NVL(  @[cntr_no] , 'XX')
    AND A.EQ_KND_CD = @[eq_knd_cd]
    AND A.CNTR_NO = B.CNTR_NO(+)
    AND A.EQ_NO = C.EQ_NO
    
    GROUP BY B.CNTR_TPSZ_CD,C.EQ_TPSZ_CD
)			]]></sql>
			<params>
				<param name="cntr_tpsz" type="12" value="" out="N"/>
				<param name="chss_no" type="12" value="" out="N"/>
				<param name="from_dt" type="12" value="" out="N"/>
				<param name="to_dt" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="eq_knd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
