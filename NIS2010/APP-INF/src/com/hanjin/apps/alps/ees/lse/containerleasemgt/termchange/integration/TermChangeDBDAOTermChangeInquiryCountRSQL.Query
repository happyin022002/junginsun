<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TermChangeDBDAOTermChangeInquiryCountRSQL">
			<desc><![CDATA[Term Change Creation 장비 이력목록 전체건수를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT  COUNT(*) TOTAL_CNT
FROM    MST_CONTAINER A, 
        MST_CNTR_STS_HIS B, 
        MST_CNTR_STS_HIS C, 
        LSE_AGREEMENT D, 
        LSE_AGREEMENT E,
        MDM_VENDOR F, 
        MDM_VENDOR G,
	   (SELECT  @[agmt_cty_cd]   AS AGMT_CTY_CD,
	            @[agmt_seq1]     AS AGMT_SEQ,
    	        DECODE(@[dcond_tp],'01',@[vndr_seq1],@[vndr_seq2])     AS VNDR_SEQ,
        	    @[sts_flag]      AS STS_FLAG
	    FROM    DUAL) P
WHERE   A.CNTR_NO = B.CNTR_NO
AND     A.CNTR_NO = C.CNTR_NO
AND     B.AGMT_CTY_CD = D.AGMT_CTY_CD
AND     B.AGMT_SEQ = D.AGMT_SEQ
AND     C.AGMT_CTY_CD = E.AGMT_CTY_CD
AND     C.AGMT_SEQ = E.AGMT_SEQ
AND     D.VNDR_SEQ = F.VNDR_SEQ
AND     E.VNDR_SEQ = G.VNDR_SEQ
AND     B.CNTR_LSTM_CNG_FLG = 'Y'
AND     C.CNTR_LSTM_CNG_FLG = 'Y'
AND     B.CNTR_STS_CD in ('MUI','LSO','DIO')
AND     C.CNTR_STS_CD in ('DII','LSI','OWN')
#if (${sts_flag} == "B") 
AND     D.VNDR_SEQ = P.VNDR_SEQ
AND     B.AGMT_CTY_CD = P.AGMT_CTY_CD
	#if (${agmt_seq1} != "") 
AND     B.AGMT_SEQ = P.AGMT_SEQ
	#end
#else
AND     E.VNDR_SEQ = P.VNDR_SEQ
AND     C.AGMT_CTY_CD = P.AGMT_CTY_CD
	#if (${agmt_seq1} != "") 
AND     C.AGMT_SEQ = P.AGMT_SEQ
	#end
#end			]]></sql>
			<params>
				<param name="agmt_cty_cd" type="12" value="" out="N"/>
				<param name="agmt_seq1" type="2" value="" out="N"/>
				<param name="dcond_tp" type="12" value="" out="N"/>
				<param name="vndr_seq1" type="2" value="" out="N"/>
				<param name="vndr_seq2" type="2" value="" out="N"/>
				<param name="sts_flag" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
