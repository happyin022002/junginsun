<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CntrForecastManageDBDAOUpdateCntrForecastInfoUSQL">
			<desc><![CDATA[EQR_OB_FCAST 테이블 입력/수정

<Change History>
1	2009.08.12	Lee ByoungHun	최초작성]]></desc>
			<sql><![CDATA[
MERGE INTO EQR_OB_FCAST A
USING
(
    SELECT
    @[scnr_id] SCNR_ID
    , @[fcast_yrwk] FCAST_YRWK
    , @[co_cd] CO_CD
    , @[fm_ecc_cd] FM_ECC_CD
    , @[to_ecc_cd] TO_ECC_CD
    , @[cntr_tpsz_cd] CNTR_TPSZ_CD
    , @[fcast_dt] FCAST_DT
    FROM DUAL
) B
ON
(
    A.SCNR_ID      = B.SCNR_ID
    AND A.FCAST_YRWK   = B.FCAST_YRWK
    AND A.CO_CD        = B.CO_CD
    AND A.FM_ECC_CD    = B.FM_ECC_CD
    AND A.TO_ECC_CD    = B.TO_ECC_CD
    AND A.CNTR_TPSZ_CD = B.CNTR_TPSZ_CD
    AND A.FCAST_DT     = B.FCAST_DT
)
WHEN MATCHED THEN
    UPDATE SET A.CNTR_VOL_QTY = @[cntr_vol_qty]
    , A.UPD_USR_ID = @[upd_usr_id]
    , A.UPD_DT     = SYSDATE
WHEN NOT MATCHED THEN
    INSERT (
        SCNR_ID,
        FCAST_YRWK,
        CO_CD,
        FM_ECC_CD,
        TO_ECC_CD,
        FCAST_DEL_DT,
        FCAST_DEL_YRWK,
        CNTR_TPSZ_CD,
        FCAST_DT,
        CNTR_VOL_QTY,
        CRE_USR_ID,
        CRE_DT,
        UPD_USR_ID,
        UPD_DT
    )
    VALUES (
        @[scnr_id],
        @[fcast_yrwk],
        @[co_cd],
        @[fm_ecc_cd],
        @[to_ecc_cd],
        @[fcast_del_dt],
        @[fcast_del_yrwk] ,
        @[cntr_tpsz_cd],
        @[fcast_dt],
        @[cntr_vol_qty],
        @[upd_usr_id],
        SYSDATE,
        @[upd_usr_id],
        SYSDATE
    )			]]></sql>
			<params>
				<param name="scnr_id" type="12" value="" out="N"/>
				<param name="fcast_yrwk" type="12" value="" out="N"/>
				<param name="co_cd" type="12" value="" out="N"/>
				<param name="fm_ecc_cd" type="12" value="" out="N"/>
				<param name="to_ecc_cd" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="fcast_dt" type="12" value="" out="N"/>
				<param name="cntr_vol_qty" type="2" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="fcast_del_dt" type="12" value="" out="N"/>
				<param name="fcast_del_yrwk" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
