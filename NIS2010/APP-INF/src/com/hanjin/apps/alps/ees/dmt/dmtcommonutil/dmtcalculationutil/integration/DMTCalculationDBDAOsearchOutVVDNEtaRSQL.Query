<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DMTCalculationDBDAOsearchOutVVDNEtaRSQL">
			<desc><![CDATA[searchOutVVDNEta]]></desc>
			<sql><![CDATA[
SELECT /*+ ORDERED USE_NL( V K )
           INDEX    ( V XPKBKG_VVD )
           INDEX_DESC    ( K XPKVSK_VSL_PORT_SKD) */
       V.VSL_CD
      ,V.SKD_VOY_NO
      ,V.SKD_DIR_CD
      ,TO_CHAR (K.VPS_ETA_DT, 'YYYYMMDD') VPS_ETA_DT
      ,V.BKG_NO
	  ,K.CLPT_IND_SEQ
  FROM BKG_VVD V
      ,VSK_VSL_PORT_SKD K
 WHERE V.BKG_NO = @[bkg_no]
   AND V.POL_CD = @[pol_cd]
   AND (V.VSL_PRE_PST_CD, V.VSL_SEQ) =
          (SELECT /*+ INDEX( VV XPKBKG_VVD) */
                  VV.VSL_PRE_PST_CD
                 ,VV.VSL_SEQ
             FROM BKG_VVD VV
            WHERE VV.BKG_NO = V.BKG_NO
              AND VV.POL_CD = V.POL_CD
              AND ROWNUM = 1)
   AND V.VSL_CD = K.VSL_CD(+)
   AND V.SKD_VOY_NO = K.SKD_VOY_NO(+)
   AND V.SKD_DIR_CD = K.SKD_DIR_CD(+)
   AND V.POL_CD = K.VPS_PORT_CD(+)
   AND V.POL_CLPT_IND_SEQ = K.CLPT_IND_SEQ(+)
   AND NVL (K.SKD_CNG_STS_CD, ' ') != 'S'
   AND ROWNUM = 1			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
