<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="LeasePlanDBDAOOffHirePlanByRCCUSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
MERGE INTO LSE_OFFH_PLN A
USING DUAL
   ON (
            A.PLN_YR          = @[pln_yr]
        AND A.OFFH_VER_SEQ    = @[offh_ver_seq]
        AND A.OFFH_YRMON      = @[offh_yrmon]
        AND A.OFFH_PLN_TP_CD  = @[offh_pln_tp_cd]
        AND A.OFFH_LOC_TP_CD  = @[offh_loc_tp_cd]
        AND A.OFFH_RGN_LOC_CD = @[offh_rgn_loc_cd]
        AND A.CNTR_TPSZ_CD    = @[cntr_tpsz_cd]
        AND A.OFFH_LOC_CD     = @[offh_loc_cd]
      )
 WHEN MATCHED THEN
      UPDATE SET
             A.OFFH_QTY   = @[offh_qty]
           , A.UPD_USR_ID = @[upd_usr_id]
           , A.UPD_DT     = SYSDATE
      WHERE  1 = 1
      AND    A.PLN_YR          = @[pln_yr]
      AND    A.OFFH_VER_SEQ    = @[offh_ver_seq]
      AND    A.OFFH_YRMON      = @[offh_yrmon]
      AND    A.OFFH_PLN_TP_CD  = @[offh_pln_tp_cd]
      AND    A.OFFH_LOC_TP_CD  = @[offh_loc_tp_cd]
      AND    A.OFFH_RGN_LOC_CD = @[offh_rgn_loc_cd]
      AND    A.CNTR_TPSZ_CD    = @[cntr_tpsz_cd]
      AND    A.OFFH_LOC_CD     = @[offh_loc_cd]
 WHEN NOT MATCHED THEN
      INSERT (
                PLN_YR
              , PLN_SEQ
              , OFFH_VER_SEQ
              , OFFH_YRMON
              , OFFH_PLN_TP_CD
              , OFFH_LOC_TP_CD
              , OFFH_RGN_LOC_CD
              , CNTR_TPSZ_CD
              , OFFH_LOC_CD
              , OFFH_QTY
              , LSTM_CD
              , CRE_USR_ID
              , CRE_DT
              , UPD_USR_ID
              , UPD_DT
             )
      VALUES (
                @[pln_yr]
              , ( SELECT NVL(MAX(PLN_SEQ),0)+1
                  FROM   LSE_OFFH_PLN
                  WHERE  PLN_YR = @[pln_yr]
                  AND    OFFH_VER_SEQ = @[offh_ver_seq] )
              , @[offh_ver_seq]
              , @[offh_yrmon]
              , @[offh_pln_tp_cd]
              , @[offh_loc_tp_cd]
              , @[offh_rgn_loc_cd]
              , @[cntr_tpsz_cd]
              , @[offh_loc_cd]
              , @[offh_qty]
              , @[lstm_cd]
              , @[cre_usr_id]
              , SYSDATE
              , @[upd_usr_id]
              , SYSDATE
             )			]]></sql>
			<params>
				<param name="pln_yr" type="12" value="" out="N"/>
				<param name="offh_ver_seq" type="2" value="" out="N"/>
				<param name="offh_yrmon" type="12" value="" out="N"/>
				<param name="offh_pln_tp_cd" type="12" value="" out="N"/>
				<param name="offh_loc_tp_cd" type="12" value="" out="N"/>
				<param name="offh_rgn_loc_cd" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="offh_loc_cd" type="12" value="" out="N"/>
				<param name="offh_qty" type="2" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="lstm_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
