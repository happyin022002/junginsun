<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SCExceptionTariffMgtDBDAOAddUnderVersionPROGCSQL">
			<desc><![CDATA[Accept 버튼 클릭시 상태가 Live 로 변경될 경우, 이하버전의 Live 상태는 모두 Deleted 상태로 변경함에 따라 그 이력을 남기는 쿼리]]></desc>
			<sql><![CDATA[
INSERT INTO DMT_SC_EXPT_VER_PROG (
	PROP_NO
,	SC_EXPT_VER_SEQ
,	PROG_SEQ
,	DMDT_EXPT_VER_STS_CD
,	PROG_DT
,	PROG_USR_ID
,	PROG_OFC_CD
,	CRE_USR_ID
,	CRE_DT
,	CRE_OFC_CD
,	UPD_USR_ID
,	UPD_DT
,	UPD_OFC_CD
) VALUES( 
	@[prop_no]
,	TO_NUMBER(@[sc_expt_ver_seq]) - 1
,	(
		SELECT	NVL(MAX(PROG_SEQ), 0) + 1
		FROM	DMT_SC_EXPT_VER_PROG
		WHERE	PROP_NO = @[prop_no]
		    AND SC_EXPT_VER_SEQ = TO_NUMBER(@[sc_expt_ver_seq]) - 1
	)
,	'D'
,	NVL(GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[cre_ofc_cd]), SYSDATE)
,	@[cre_usr_id]
,	@[cre_ofc_cd]
,	@[cre_usr_id]
,	NVL(GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[cre_ofc_cd]), SYSDATE)
,	@[cre_ofc_cd]
,	@[cre_usr_id]
,	NVL(GLOBALDATE_PKG.TIME_LOCAL_OFC_FNC(@[cre_ofc_cd]), SYSDATE)
,	@[cre_ofc_cd]
)			]]></sql>
			<params>
				<param name="prop_no" type="12" value="" out="N"/>
				<param name="sc_expt_ver_seq" type="12" value="" out="N"/>
				<param name="cre_ofc_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
