<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChassisMgsetInvoiceDBDAOAddCHSChargeCreateSummaryDataZPCSQL">
			<desc><![CDATA[COPS 메뉴에서 CGM_LSE_CHG_HDR에 LSE_CHG_STS_CD(Lease Term)이 'ZP'인 데이터를 insert]]></desc>
			<sql><![CDATA[
INSERT INTO CGM_LSE_CHG_HDR
(
    AGMT_OFC_CTY_CD,
    AGMT_SEQ,
    AGMT_VER_NO,
    COST_YRMON,
    EQ_KND_CD,
    LSE_CHG_STS_CD,
    VNDR_SEQ,
    CHG_CRE_SEQ,
    CRE_OFC_CD,
    CRE_USR_ID,
    CRE_DT,
    UPD_USR_ID,
    UPD_DT,
	CURR_CD,
    COST_YRMON_SEQ,
    CHSS_COP_INV_TP_CD,
    ORG_INV_NO,
    INV_NO
)
select 
A.AGMT_OFC_CTY_CD,
A.AGMT_SEQ,
A.AGMT_VER_NO AS AGMT_VER_NO,
@[cost_yrmon] AS COST_YRMON,
'Z' AS EQ_KND_CD,
@[lse_chg_sts_cd] AS LSE_CHG_STS_CD,
A.VNDR_SEQ AS VNDR_SEQ,
@[chg_cre_seq] AS CHG_CRE_SEQ,
@[cre_ofc_cd] AS CRE_OFC_CD,
@[cre_usr_id],
SYSDATE,
@[upd_usr_id],
SYSDATE,
A.CURR_CD,
(SELECT NVL(MAX(COST_YRMON_SEQ), 0) + 1
   FROM CGM_LSE_CHG_HDR
  WHERE AGMT_OFC_CTY_CD = @[agmt_ofc_cty_cd]
    AND AGMT_SEQ = @[agmt_seq] 
	AND COST_YRMON = @[cost_yrmon]) COST_YRMON_SEQ,
@[cmb_inv_tp] as CHSS_COP_INV_TP_CD,
@[org_inv_no] as ORG_INV_NO,
@[inv_no] as INV_NO
FROM 
CGM_AGREEMENT A
WHERE A.EQ_KND_CD = 'Z'
AND A.AGMT_VER_NO = @[agmt_ver_no]
AND A.AGMT_OFC_CTY_CD = @[agmt_ofc_cty_cd]
AND A.AGMT_SEQ = @[agmt_seq] 			]]></sql>
			<params>
				<param name="cost_yrmon" type="12" value="" out="N"/>
				<param name="lse_chg_sts_cd" type="12" value="" out="N"/>
				<param name="chg_cre_seq" type="12" value="" out="N"/>
				<param name="cre_ofc_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="agmt_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="agmt_seq" type="12" value="" out="N"/>
				<param name="cmb_inv_tp" type="12" value="" out="N"/>
				<param name="org_inv_no" type="12" value="" out="N"/>
				<param name="inv_no" type="12" value="" out="N"/>
				<param name="agmt_ver_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
