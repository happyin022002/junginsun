<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerMovementMgtDBDAOsearchMultiBkgNoRSQL">
			<desc><![CDATA[하나의 컨테이너에 여러건의 부킹이 걸려있을 경우를 검색]]></desc>
			<sql><![CDATA[
SELECT /*+ ORDERED INDEX_DESC(A XAK1BKG_CONTAINER) INDEX(B XPKBKG_BOOKING) */
       B.VSL_CD,
       B.SKD_VOY_NO,
       B.SKD_DIR_CD,
       B.BKG_CGO_TP_CD,
       B.BKG_NO,
#if ((${mvmt_sts_cd} == 'OP') || (${mvmt_sts_cd} == 'OC'))
       C.SYS_AREA_GRP_ID AS SVR_ID,
#else
       '' SVR_ID,
#end
       B.DEL_CD,
       B.POD_CD
  FROM BKG_CONTAINER A,
       BKG_BOOKING B
#if ((${mvmt_sts_cd} == 'OP') || (${mvmt_sts_cd} == 'OC'))
       ,COM_SYS_AREA_GRP_ID C
#end
 WHERE A.CNTR_NO = @[cntr_no]
   AND A.CNMV_CYC_NO >= @[cyc_no]
   AND A.BKG_NO = B.BKG_NO
   AND NVL (B.BKG_STS_CD, ' ') <> 'X'
   AND NVL (B.BKG_STS_CD, ' ') <> 'S'
#if ((${mvmt_sts_cd} == 'OP') || (${mvmt_sts_cd} == 'OC'))
   AND SUBSTR (B.POR_CD, 1, 2) = C.CNT_CD
   AND C.CO_IND_CD = 'H'
#end
   AND ROWNUM = 1
			]]></sql>
			<params>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cyc_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
