<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeCalculationDBDAOCheckRequestChargeDeletionRSQL">
			<desc><![CDATA[Deletaion Request 된 데이터 존재여부 확인.(Reject, Apporval된 데이터제외)]]></desc>
			<sql><![CDATA[
#if (${bydr} == 'OP')
SELECT 'Y'
FROM  DMT_CHG_CALC A
WHERE A.SYS_AREA_GRP_ID = @[svr_id]
AND	  A.CNTR_NO			= @[cntr_no]
AND	  A.CNTR_CYC_NO     = @[cntr_cyc_no]
AND	  A.DMDT_TRF_CD     = @[dmdt_trf_cd]
AND	  A.DMDT_CHG_LOC_DIV_CD = @[dmdt_chg_loc_div_cd]
AND	  A.CHG_SEQ			= @[chg_seq]
AND   A.FM_MVMT_STS_CD = 'OP'
AND   A.TO_MVMT_STS_CD = 'MT'
#elseif (${bydr} == 'INV')
SELECT 'Y'
FROM  DMT_INV_MN A
WHERE A.DMDT_INV_NO = @[dmdt_inv_no]
AND A.DMDT_INV_STS_CD = 'I'
#elseif (${bydr} == 'C')
SELECT COUNT(*) CNT, CHG_OFC_CD, DELT_SEQ
FROM  DMT_CHG_DELT_RQST_APRO A
WHERE A.SYS_AREA_GRP_ID = @[svr_id]
AND	  A.CNTR_NO			= @[cntr_no]
AND	  A.CNTR_CYC_NO     = @[cntr_cyc_no]
AND	  A.DMDT_TRF_CD     = @[dmdt_trf_cd]
AND	  A.DMDT_CHG_LOC_DIV_CD = @[dmdt_chg_loc_div_cd]
AND	  A.CHG_SEQ			= @[chg_seq]
AND   A.DMDT_DELT_RQST_STS_CD = @[sts_cd]
AND   NVL(A.INACT_RQST_NO,' ')  != NVL(@[inact_rqst_no],NVL(A.INACT_RQST_NO,' '))
GROUP BY CHG_OFC_CD, DELT_SEQ
#else
SELECT COUNT(*) CNT, CHG_OFC_CD, DELT_SEQ
FROM  DMT_CHG_DELT_RQST_APRO A
WHERE A.SYS_AREA_GRP_ID = @[svr_id]
AND	  A.CNTR_NO			= @[cntr_no]
AND	  A.CNTR_CYC_NO     = @[cntr_cyc_no]
AND	  A.DMDT_TRF_CD     = @[dmdt_trf_cd]
AND	  A.DMDT_CHG_LOC_DIV_CD = @[dmdt_chg_loc_div_cd]
AND	  A.CHG_SEQ			= @[chg_seq]
AND   A.DMDT_DELT_RQST_STS_CD = @[sts_cd]
AND   NVL(A.INACT_RQST_NO,' ')  = NVL(@[inact_rqst_no],NVL(A.INACT_RQST_NO,' '))
GROUP BY CHG_OFC_CD, DELT_SEQ
#end			]]></sql>
			<params>
				<param name="svr_id" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cntr_cyc_no" type="12" value="" out="N"/>
				<param name="dmdt_trf_cd" type="12" value="" out="N"/>
				<param name="dmdt_chg_loc_div_cd" type="12" value="" out="N"/>
				<param name="chg_seq" type="12" value="" out="N"/>
				<param name="dmdt_inv_no" type="12" value="" out="N"/>
				<param name="sts_cd" type="12" value="" out="N"/>
				<param name="inact_rqst_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
