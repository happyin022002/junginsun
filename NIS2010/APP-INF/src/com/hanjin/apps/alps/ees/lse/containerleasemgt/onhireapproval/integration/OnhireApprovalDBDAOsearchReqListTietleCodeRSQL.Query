<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OnhireApprovalDBDAOsearchReqListTietleCodeRSQL">
			<desc><![CDATA[화면에 타이틀을 만들기 위한 값을 구하는 로직]]></desc>
			<sql><![CDATA[
WITH LV_REQ_LIST  AS
(
SELECT A.ONH_PLN_YRWK,A.LSE_RQST_NO,A.LSE_PLN_SEQ,B.LCC_CD,A.EQ_LSTM_CD,A.APRO_RMK,A.CRE_DT,B.CNTR_TPSZ_CD,B.CNTR_QTY
FROM   EQR_CTRL_ONH_PLN_APRO A, EQR_CTRL_ONH_PLN_APRO_QTY B
WHERE A.CRE_DT > SYSDATE - 15
AND   A.ONH_PLN_YRWK=B.ONH_PLN_YRWK
AND   A.LCC_CD = B.LCC_CD
AND   A.EQ_LSTM_CD = B.EQ_LSTM_CD
AND   A.LSE_PLN_SEQ = B.LSE_PLN_SEQ
AND   B.CNTR_QTY > 0 
AND   A.LSE_RQST_NO NOT IN (SELECT LSE_RQST_NO FROM LSE_ONH_APRO WHERE LSE_RQST_NO IS NOT NULL AND DELT_FLG ='N')

)
SELECT ROW_NUMBER() OVER(ORDER BY SEQ) SEQ, CNTR_TPSZ_CD
    FROM 
        ( 
        SELECT DISTINCT A.CNTR_TPSZ_CD,
               (SELECT B.RPT_DP_SEQ 
                FROM MDM_CNTR_TP_SZ B
                WHERE A.CNTR_TPSZ_CD = B.CNTR_TPSZ_CD
                AND   ROWNUM=1) SEQ
        FROM  LV_REQ_LIST A
        )			]]></sql>
			<params>
			</params>
		</query>
	</querys>
</sqls>
