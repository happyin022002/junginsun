<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DMTCalculationDBDAOGetTimeClockStopToDtRSQL">
			<desc><![CDATA[getTimeClockStopToDt]]></desc>
			<sql><![CDATA[
SELECT CLK_STOP_NO TMP_CSTOP_NO 
              ,TO_CHAR (CLK_STOP_TO_DT, 'YYYYMMDDHH24MI') RTN_FTIME_CMNC
  FROM DMT_TM_CLK_STOP
 WHERE DMDT_TRF_CD     	= @[dtt_code]
   AND CLK_STOP_OFC_CD 	= @[ofc_cd]
   AND TO_DATE (@[ftime_cmnc], 'YYYYMMDDHH24MI') 
          BETWEEN TO_DATE (TO_CHAR (CLK_STOP_FM_DT, 'YYYYMMDDHH24MI')
                          ,'YYYYMMDDHH24MI')
              AND TO_DATE (TO_CHAR (CLK_STOP_TO_DT, 'YYYYMMDDHH24MI')
                          ,'YYYYMMDDHH24MI')
   AND CXL_FLG			= 'N'
   AND ALL_YD_FLG		= 'Y'
   AND NVL(DMDT_BKG_TERM_CTNT, NVL(@[term_cd],'')) LIKE  '%'||NVL(@[term_cd],'')||'%' 
UNION ALL
SELECT A.CLK_STOP_NO TMP_CSTOP_NO 
              ,TO_CHAR (A.CLK_STOP_TO_DT, 'YYYYMMDDHH24MI') RTN_FTIME_CMNC
  FROM DMT_TM_CLK_STOP A, DMT_TM_CLK_STOP_YD B
 WHERE A.DMDT_TRF_CD     = @[dtt_code]
   AND A.CLK_STOP_OFC_CD = @[ofc_cd]
   AND TO_DATE (@[ftime_cmnc], 'YYYYMMDDHH24MI') 
          BETWEEN TO_DATE (TO_CHAR (A.CLK_STOP_FM_DT, 'YYYYMMDDHH24MI')
                          ,'YYYYMMDDHH24MI')
              AND TO_DATE (TO_CHAR (A.CLK_STOP_TO_DT, 'YYYYMMDDHH24MI')
                          ,'YYYYMMDDHH24MI')
   AND A.CXL_FLG		= 'N'
   AND A.ALL_YD_FLG		<> 'Y'
   AND A.CLK_STOP_NO 	= B.CLK_STOP_NO
   AND B.YD_CD			= @[yd_cd]
   AND NVL(A.DMDT_BKG_TERM_CTNT, NVL(@[term_cd],'')) LIKE  '%'||NVL(@[term_cd],'')||'%'			]]></sql>
			<params>
				<param name="dtt_code" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="ftime_cmnc" type="12" value="" out="N"/>
				<param name="term_cd" type="12" value="" out="N"/>
				<param name="yd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
