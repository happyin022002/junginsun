<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerOnOffhireDBDAOsearchLeaseOutCntrStatusDataRSQL">
			<desc><![CDATA[searchLeaseOutCntrStatusData]]></desc>
			<sql><![CDATA[
SELECT                                                                                                
   AA.EEFLG,                                                                                             
   AA.CNTR_NO,                                                                                           
   '' OFFH_STS_CD,                                                                                       
   '' OFFH_DUE_DT,                                                                                       
   AA.CNTR_TPSZ_CD,                                                                                      
   AA.LSTM_CD,                                                                                           
   AA.AGMT_CTY_CD,                                                                                       
   AA.AGMT_NO,                                                                                           
   AA.REF_NO,                                                                                            
   AA.VNDR_SEQ,                                                                                          
   AA.VNDR_LGL_ENG_NM,                                                                                   
   AA.CNTR_STS_CD,                                                                                       
   AA.CNTR_STS_EVNT_DT,                                                                                  
   AA.FULL_FLG,                                                                                          
   AA.CNMV_STS_CD,                                                                                       
   AA.CRNT_YD_CD,                                                                                        
   AA.CNMV_DT,
   @[cntr_drff_amt] CNTR_DRFF_AMT,
   @[cntr_drff_cr_amt] CNTR_DRFF_CR_AMT,
   AA.CNTR_LFT_CHG_AMT,                                                                                  
   AA.CNTR_LFT_CHG_CUR,  
   #if (${st_cd} == 2)
   '' RNTL_CHG_FREE_DYS,
   #else                                                                                
   AA.RNTL_CHG_FREE_DYS,
   #end                                                                                 
   '' CNTR_OLD_VAN_FLG,
   @[cntr_pkup_chg_amt] CNTR_PKUP_CHG_AMT,
   @[cntr_pkup_cr_chg_amt] CNTR_PKUP_CR_CHG_AMT,
   @[cntr_rmk] CNTR_RMK
FROM                                                                                                  
(                                                                                                     
   SELECT                                                                                                
      '' EEFLG,
      B.CNTR_NO,                                                                                            
      B.CNTR_TPSZ_CD,                                                                                       
      B.LSTM_CD,                                                                                            
      B.AGMT_CTY_CD,                                                                                        
      MST_COMMON_PKG.MST_AGMT_NO_CONV_FNC(B.AGMT_CTY_CD,B.AGMT_SEQ)  AS AGMT_NO,                            
      C.REF_NO,                                                                                             
      B.VNDR_SEQ,                                                                                           
      D.VNDR_LGL_ENG_NM,                                                                                    
      B.CNTR_STS_CD,                                                                                        
      (SELECT /*+ INDEX_DESC(H XAK1MST_CNTR_STS_HIS) */ TO_CHAR(H.CNTR_STS_EVNT_DT,'YYYY-MM-DD')             
      FROM MST_CNTR_STS_HIS H                                                                               
      WHERE H.CNTR_NO = B.CNTR_NO                                                                           
      AND   H.CNTR_STS_SEQ = B.LST_STS_SEQ                                                                   
      AND   ROWNUM = 1                                                                                      
      ) CNTR_STS_EVNT_DT,                                                                                   
      DECODE(B.FULL_FLG, 'Y', 'F', 'N', 'M') FULL_FLG,                                                      
      B.CNMV_STS_CD,                                                                                        
      B.CRNT_YD_CD,                                                                                         
      TO_CHAR(B.CNMV_DT, 'YYYY-MM-DD') CNMV_DT,                                                             
      (SELECT N1ST_CHG_AMT                                                                                  
      FROM LSE_AGMT_RT                                                                                      
      WHERE AGMT_CTY_CD  = @[agmt_cty_cd]                                                            
      AND   AGMT_SEQ     = @[agmt_seq]                                                                  
      AND   CNTR_RNTL_CHG_TP_CD ='LIFV'                                                                     
      AND   LOC_CD       = (SELECT  SCC_CD                                                                  
      FROM MDM_LOCATION                                                                                     
      WHERE LOC_CD = SUBSTR(@[sts_evnt_yd_cd], 1, 5))                                                       
      AND   CNTR_TPSZ_CD = B.CNTR_TPSZ_CD                                                                   
      ) CNTR_LFT_CHG_AMT,                                                                                   
      (SELECT CURR_CD                                                                                       
      FROM LSE_AGREEMENT                                                                                    
      WHERE AGMT_CTY_CD = @[agmt_cty_cd]                                                                    
      AND   AGMT_SEQ    = @[agmt_seq]                                                                       
      ) CNTR_LFT_CHG_CUR,                                                                                   
      (SELECT LSE_FREE_DYS                                                                                  
      FROM LSE_AGREEMENT                                                                                    
      WHERE AGMT_CTY_CD = @[agmt_cty_cd]                                                                    
      AND   AGMT_SEQ    = @[agmt_seq]                                                                       
      ) RNTL_CHG_FREE_DYS                                                                                   
   FROM                                                                                                  
      MST_CONTAINER  B,                                                                                     
      LSE_AGREEMENT C,                                                                                      
      MDM_VENDOR D                                                                                          
   WHERE 1 = 1                                                                                           
      AND  B.CNTR_NO      =  @[cntr_no]                                                                 
      AND  C.AGMT_CTY_CD  =  B.AGMT_CTY_CD                                                                  
      AND  C.AGMT_SEQ     =  B.AGMT_SEQ                                                                     
      AND  D.VNDR_SEQ     =  B.VNDR_SEQ                                                                     
) AA			]]></sql>
			<params>
				<param name="cntr_drff_amt" type="12" value="" out="N"/>
				<param name="cntr_drff_cr_amt" type="12" value="" out="N"/>
				<param name="cntr_pkup_chg_amt" type="12" value="" out="N"/>
				<param name="cntr_pkup_cr_chg_amt" type="12" value="" out="N"/>
				<param name="cntr_rmk" type="12" value="" out="N"/>
				<param name="agmt_cty_cd" type="12" value="" out="N"/>
				<param name="agmt_seq" type="12" value="" out="N"/>
				<param name="sts_evnt_yd_cd" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
