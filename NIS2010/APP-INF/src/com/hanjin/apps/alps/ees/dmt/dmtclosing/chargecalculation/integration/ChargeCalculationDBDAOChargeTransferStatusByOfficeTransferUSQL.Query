<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeCalculationDBDAOChargeTransferStatusByOfficeTransferUSQL">
			<desc><![CDATA[modifyChargeTransferStatusByOfficeTransfer]]></desc>
			<sql><![CDATA[
--UPDATE	DMT_CHG_CALC
--SET		DMDT_CHG_STS_CD	= 'T'	/* Transferred */
DELETE FROM DMT_CHG_CALC A
WHERE	A.SYS_AREA_GRP_ID	= @[fm_svr_id]
AND		A.CNTR_NO			= @[cntr_no]
AND		A.CNTR_CYC_NO		= @[cntr_cyc_no]
AND		A.DMDT_TRF_CD		= @[dmdt_trf_cd]
AND		A.DMDT_CHG_LOC_DIV_CD = @[dmdt_chg_loc_div_cd]
AND		A.CHG_SEQ			= @[chg_seq]
AND		EXISTS ( SELECT 'X' FROM DMT_CHG_CALC
                  WHERE SYS_AREA_GRP_ID = (
                                        SELECT  SYS_AREA_GRP_ID
                                        FROM    COM_SYS_AREA_GRP_ID
                                        WHERE   CNT_CD      = (
                                                              SELECT  TRIM(SUBSTR(LOC_CD, 1, 2))
                                                              FROM    MDM_ORGANIZATION
                                                              WHERE   OFC_CD      = @[to_ofc_cd]
                                                              ) 
                                        AND     CO_IND_CD   = 'H'
                                        )
                    AND CNTR_NO = A.CNTR_NO
                    AND CNTR_CYC_NO = A.CNTR_CYC_NO
					AND DMDT_TRF_CD = A.DMDT_TRF_CD
					AND DMDT_CHG_LOC_DIV_CD = A.DMDT_CHG_LOC_DIV_CD
					AND CHG_SEQ = A.CHG_SEQ )			]]></sql>
			<params>
				<param name="fm_svr_id" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="cntr_cyc_no" type="12" value="" out="N"/>
				<param name="dmdt_trf_cd" type="12" value="" out="N"/>
				<param name="dmdt_chg_loc_div_cd" type="12" value="" out="N"/>
				<param name="chg_seq" type="12" value="" out="N"/>
				<param name="to_ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
