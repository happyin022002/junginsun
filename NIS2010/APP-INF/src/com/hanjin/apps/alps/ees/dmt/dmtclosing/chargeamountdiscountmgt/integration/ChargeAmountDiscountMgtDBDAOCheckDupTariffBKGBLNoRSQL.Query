<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeAmountDiscountMgtDBDAOCheckDupTariffBKGBLNoRSQL">
			<desc><![CDATA[Tariff Type 과 BKG  또는 B/L No. 가 중복되는지 체크하는 쿼리]]></desc>
			<sql><![CDATA[
SELECT	ADJ_RQST_DTL.AFT_EXPT_DAR_NO

FROM    DMT_AFT_BKG_ADJ_RQST ADJ_RQST
    ,   DMT_AFT_BKG_ADJ_RQST_DTL ADJ_RQST_DTL

WHERE   ADJ_RQST.DMDT_EXPT_RQST_STS_CD IN ('T','R', 'A','F','G','H','M','I','O')
    AND ADJ_RQST.AFT_EXPT_DAR_NO = ADJ_RQST_DTL.AFT_EXPT_DAR_NO
    AND ADJ_RQST_DTL.DMDT_TRF_CD = @[tariff]
#if(${bkg_no} != '')
    AND ADJ_RQST_DTL.BKG_NO = @[bkg_no]
#elseif(${bl_no} != '')
    AND ADJ_RQST_DTL.BKG_NO = (SELECT BKG_NO FROM BKG_BOOKING WHERE BL_NO = @[bl_no])
#end			]]></sql>
			<params>
				<param name="tariff" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
