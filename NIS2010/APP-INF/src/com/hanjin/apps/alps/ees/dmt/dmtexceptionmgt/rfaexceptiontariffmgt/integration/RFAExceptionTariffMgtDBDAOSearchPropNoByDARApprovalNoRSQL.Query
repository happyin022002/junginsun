<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RFAExceptionTariffMgtDBDAOSearchPropNoByDARApprovalNoRSQL">
			<desc><![CDATA[RFA(Before Booking Request) 에서 DAR No. 나 Approval No. 로 Proposal No. 를 조회하기 위한 쿼리.]]></desc>
			<sql><![CDATA[
SELECT  PROP_NO, RFA_EXPT_DAR_NO, RFA_EXPT_APRO_NO, RFA_NO
FROM    (
            SELECT  ROWNUM IDX, A.PROP_NO, A.RFA_EXPT_DAR_NO, A.RFA_EXPT_APRO_NO, B.RFA_NO
            FROM    DMT_RFA_EXPT_TRF A, PRI_RP_HDR B
            WHERE   A.PROP_NO = B.PROP_NO
			#if(${rfa_expt_dar_no} != '')
                AND A.RFA_EXPT_DAR_NO = @[rfa_expt_dar_no]
			#end
			#if(${rfa_expt_apro_no} != '')
				AND A.RFA_EXPT_APRO_NO = @[rfa_expt_apro_no]
			#end
			#if(${is_temp} == 'N')
				AND A.DMDT_EXPT_RQST_STS_CD <> 'T'
			#end
        )
WHERE IDX = 1			]]></sql>
			<params>
				<param name="rfa_expt_dar_no" type="12" value="" out="N"/>
				<param name="rfa_expt_apro_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
