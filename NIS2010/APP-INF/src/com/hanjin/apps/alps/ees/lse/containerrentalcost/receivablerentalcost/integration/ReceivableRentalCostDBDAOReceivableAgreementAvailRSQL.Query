<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ReceivableRentalCostDBDAOReceivableAgreementAvailRSQL">
			<desc><![CDATA[입력받은 AGMT No.에 대한 유효성 여부를 조회합니다.]]></desc>
			<sql><![CDATA[
SELECT  A.AGMT_CTY_CD, A.AGMT_SEQ, 
        A.AGMT_CTY_CD||LPAD(A.AGMT_SEQ, 6,'0') AS AGMT_NO,
        TO_CHAR(A.LST_EFF_DT, 'YYYYMMDD') AS EFF_DT,
        TO_CHAR(A.LST_EXP_DT, 'YYYYMMDD') AS EXP_DT,
        A.VNDR_SEQ, C.VNDR_ABBR_NM, A.LSTM_CD, A.REF_NO,
        P.COST_YRMON, D.RCV_RNTL_SEQ  
FROM   (SELECT  'HHO'         AS AGMT_CTY_CD,
    	        @[agmt_seq]   AS AGMT_SEQ,
        	    TO_CHAR(ADD_MONTHS(TO_DATE(@[qty_yrmon],
					'RRRRMM'), 1), 'RRRRMM') AS COST_YRMON
	    FROM    DUAL) P,
        LSE_AGREEMENT A, 
        LSE_AGMT_VER B,
        MDM_VENDOR C,
        LSE_RCV_RNTL_CHG D
WHERE   A.AGMT_CTY_CD = B.AGMT_CTY_CD
AND     A.AGMT_SEQ = B.AGMT_SEQ
AND     A.VNDR_SEQ = C.VNDR_SEQ
AND     P.AGMT_CTY_CD = A.AGMT_CTY_CD
AND     P.AGMT_SEQ = A.AGMT_SEQ
AND     P.AGMT_CTY_CD = D.AGMT_CTY_CD(+)
AND     P.AGMT_SEQ = D.AGMT_SEQ(+)
AND     P.COST_YRMON = D.COST_YRMON(+)
AND     A.ITCHG_FEE_FLG <> 'Y'
AND     B.AGMT_VER_SEQ = 1    
AND     A.LSTM_CD IN ('SO','MO')			]]></sql>
			<params>
				<param name="agmt_seq" type="2" value="" out="N"/>
				<param name="qty_yrmon" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
