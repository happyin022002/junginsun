<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeCalculationDBDAOSearchAftBkgPathSetupListRSQL">
			<desc><![CDATA[ChargeCalculationDBDAOSearchAftBkgPathSetupListRSQL]]></desc>
			<sql><![CDATA[
SELECT  DECODE(OFC_CD, NULL, 1, 2)  	AS NULL_FLG    -- OFC 가 NULL 인 RHQ 공통 설정을 먼저 표시하기 위한 정렬용 FLAG
       ,RHQ_CD
	   ,TO_CHAR(EFF_DT, 'YYYY-MM-DD') 	AS EFF_DT
	   ,FM_DC_AMT
	   ,AFT_BKG_PATH_STUP_SEQ
	   ,TO_CHAR(EXP_DT, 'YYYY-MM-DD') 	AS EXP_DT
	   ,TO_DC_AMT
	   ,OFC_CD
	   ,BRNC_OFC_PIC_CHK_FLG
	   ,BRNC_OFC_OP_MGR_APRO_FLG
	   ,BRNC_OFC_MGR_APRO_FLG
	   ,RHQ_PIC_CHK_FLG
	   ,RHQ_MGR_APRO_FLG
	   ,HO_PIC_CHK_FLG
	   ,HO_MGR_APRO_FLG
	   ,CRE_USR_ID
	   ,CRE_DT
	   ,UPD_USR_ID
	   ,UPD_DT
        
  FROM  DMT_AFT_BKG_PATH_OFC_STUP
 WHERE  DELT_FLG = 'N'
   AND  RHQ_CD   = @[rhq_cd]
   AND  (OFC_CD IS NULL 
			OR OFC_CD IN (
				#foreach( $aft_bkg_ofc_cd in ${aft_bkg_ofc_cd_list} )
					#if($velocityCount < $aft_bkg_ofc_cd_list.size()) '$aft_bkg_ofc_cd', #else '$aft_bkg_ofc_cd' #end
				#end	
				)
        )
   #if (${crnt_flg} == 'Y')
   AND  (
		(TO_CHAR(EFF_DT, 'YYYYMMDD') <= TO_CHAR(SYSDATE, 'YYYYMMDD') AND (EXP_DT IS NULL OR TO_CHAR(EXP_DT, 'YYYYMMDD') >= TO_CHAR(SYSDATE, 'YYYYMMDD')))
		#if (${tobe_flg} == 'Y')
		OR TO_CHAR(EFF_DT, 'YYYYMMDD') > TO_CHAR(SYSDATE, 'YYYYMMDD')
			#if (${exp_flg} == 'Y')
		OR (EXP_DT IS NOT NULL AND TO_CHAR(EXP_DT, 'YYYYMMDD') < TO_CHAR(SYSDATE, 'YYYYMMDD'))
			#end
		#else
			#if (${exp_flg} == 'Y')
		OR (EXP_DT IS NOT NULL AND TO_CHAR(EXP_DT, 'YYYYMMDD') < TO_CHAR(SYSDATE, 'YYYYMMDD'))
			#end
		#end
		)
   #else
   AND  (		
		#if (${tobe_flg} == 'Y')
		TO_CHAR(EFF_DT, 'YYYYMMDD') > TO_CHAR(SYSDATE, 'YYYYMMDD')
			#if (${exp_flg} == 'Y')
		OR (EXP_DT IS NOT NULL AND TO_CHAR(EXP_DT, 'YYYYMMDD') < TO_CHAR(SYSDATE, 'YYYYMMDD'))
			#end
		#else
			#if (${exp_flg} == 'Y')
		(EXP_DT IS NOT NULL AND TO_CHAR(EXP_DT, 'YYYYMMDD') < TO_CHAR(SYSDATE, 'YYYYMMDD'))
			#else
		1=0
			#end
		#end
		)
   #end
        
ORDER BY NULL_FLG, OFC_CD, EFF_DT, TO_DC_AMT, FM_DC_AMT			]]></sql>
			<params>
				<param name="rhq_cd" type="12" value="SINRS" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
