<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RepairMgtDBDAOSearchAcepChkDetailListRSQL">
			<desc><![CDATA[ACEP Check Detail List 조회]]></desc>
			<sql><![CDATA[
SELECT   AC.ACEP_SEQ
       , NVL(AC.ACEP_DTL_SEQ, ITM.HRD_CDG_ID_SEQ) AS ACEP_DTL_SEQ
       , NVL(AC.INSP_ITM_NO, ITM.ATTR_CTNT1) AS INSP_ITM_NO
       , NVL(AC.INSP_ITM_NM, ITM.ATTR_CTNT2) AS INSP_ITM_NM
#if (${mnr_ord_seq} != '')
       , NVL(AC.ACEP_CHK,'1') AS ACEP_CHK
       , NVL(AC.ACEP_UNCHK,'0') AS ACEP_UNCHK
#else
       , NVL(AC.ACEP_CHK,'0') AS ACEP_CHK
       , NVL(AC.ACEP_UNCHK,'1') AS ACEP_UNCHK
#end
       , NVL(AC.CRE_USR_ID,@[cre_usr_id]) AS CRE_USR_ID
       , NVL(AC.CRE_DT,SYSDATE) AS CRE_DT
       , NVL(AC.UPD_USR_ID,@[upd_usr_id]) AS UPD_USR_ID
       , NVL(AC.UPD_DT,SYSDATE) AS UPD_DT
FROM     (
#if (${mnr_wo_tp_cd} == 'EST')

           SELECT   AD.ACEP_SEQ
                  , AD.ACEP_DTL_SEQ
                  , AD.INSP_ITM_NO
                  , AD.INSP_ITM_NM
                  , CASE WHEN AD.INSP_CHK_FLG = 'Y' THEN '1' ELSE '0' END AS ACEP_CHK
                  , CASE WHEN AD.INSP_CHK_FLG = 'Y' THEN '0' ELSE '1' END AS ACEP_UNCHK
                  , AD.CRE_USR_ID
                  , AD.CRE_DT
                  , AD.UPD_USR_ID
                  , AD.UPD_DT
           FROM     MNR_RPR_RQST_HDR EM
                  , MNR_ACEP_CHK_LIST_HDR AM
                  , MNR_ACEP_CHK_LIST_DTL AD
           WHERE    1 = 1
           AND      EM.RQST_EQ_NO = AM.EQ_NO(+)
           AND      EM.RPR_RQST_SEQ = AM.RPR_RQST_SEQ(+)
           AND      AM.ACEP_SEQ = AD.ACEP_SEQ(+)
           AND      EM.RQST_EQ_NO = @[eq_no]
           AND      EM.RPR_RQST_SEQ = @[rpr_rqst_seq]
           AND      EM.RPR_RQST_LST_VER_FLG = 'Y'

#elseif (${mnr_wo_tp_cd} == 'SPL')

           SELECT   AD.ACEP_SEQ
                  , AD.ACEP_DTL_SEQ
                  , AD.INSP_ITM_NO
                  , AD.INSP_ITM_NM
                  , CASE WHEN AD.INSP_CHK_FLG = 'Y' THEN '1' ELSE '0' END AS ACEP_CHK
                  , CASE WHEN AD.INSP_CHK_FLG = 'Y' THEN '0' ELSE '1' END AS ACEP_UNCHK
                  , AD.CRE_USR_ID
                  , AD.CRE_DT
                  , AD.UPD_USR_ID
                  , AD.UPD_DT
           FROM     MNR_ORD_HDR OM
                  , MNR_ORD_DTL OD
                  , MNR_ACEP_CHK_LIST_HDR AM
                  , MNR_ACEP_CHK_LIST_DTL AD
           WHERE    1 = 1
           AND      OM.MNR_ORD_OFC_CTY_CD = OD.MNR_ORD_OFC_CTY_CD
           AND      OM.MNR_ORD_SEQ = OD.MNR_ORD_SEQ
           AND      OD.EQ_NO = AM.EQ_NO(+)
           AND      OD.MNR_ORD_OFC_CTY_CD = AM.MNR_ORD_OFC_CTY_CD(+)
           AND      OD.MNR_ORD_SEQ = AM.MNR_ORD_SEQ(+)
           AND      AM.ACEP_SEQ = AD.ACEP_SEQ(+)
           AND      OD.MNR_ORD_OFC_CTY_CD = @[mnr_ord_ofc_cty_cd]
           AND      OD.MNR_ORD_SEQ = @[mnr_ord_seq]
           AND      OD.ORD_DTL_SEQ = @[ord_dtl_seq]

#end
         ) AC
       , MNR_HRD_CDG_CTNT ITM
WHERE    1 = 1
AND      ITM.ATTR_CTNT1 = TO_CHAR(AC.INSP_ITM_NO(+))
AND      ITM.HRD_CDG_ID = 'ACEP_INSP_ITM'
AND      ITM.ATTR_CTNT10 = 'Y'
ORDER BY TO_NUMBER(ITM.ATTR_CTNT9)			]]></sql>
			<params>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="eq_no" type="12" value="" out="N"/>
				<param name="rpr_rqst_seq" type="12" value="" out="N"/>
				<param name="mnr_ord_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="mnr_ord_seq" type="12" value="" out="N"/>
				<param name="ord_dtl_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
