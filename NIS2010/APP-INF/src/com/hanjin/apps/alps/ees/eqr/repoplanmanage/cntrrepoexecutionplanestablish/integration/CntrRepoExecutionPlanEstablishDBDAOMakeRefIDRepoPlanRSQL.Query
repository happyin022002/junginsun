<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CntrRepoExecutionPlanEstablishDBDAOMakeRefIDRepoPlanRSQL">
			<desc><![CDATA[컨테이너 이송 실행 계획 조회/수정 SEQ 생성]]></desc>
			<sql><![CDATA[
SELECT 
    LTRIM(TO_CHAR(NVL(MAX(SUBSTR(REF_ID, 12, 3))+1, 001), '000')) SEQ -- 아무것도 없으면 001 
FROM 
    ${table_name}                                                           
WHERE 
    REPO_PLN_ID            = @[repo_plan_id]  -- repo plan id                      			
    AND   SUBSTR(FM_YD_CD, 0, 5) = @[from_location]  -- from location 0,5                          	
    AND   SUBSTR(REF_ID, 7, 4)   = @[repo_plan_id610]  -- repo plan id 에서 0637                        	
    AND   SUBSTR(REF_ID, 15, 1)  = @[onf_hir_div_cd]  -- trsp mode cd			]]></sql>
			<params>
				<param name="repo_plan_id" type="12" value="" out="N"/>
				<param name="from_location" type="12" value="" out="N"/>
				<param name="repo_plan_id610" type="12" value="" out="N"/>
				<param name="onf_hir_div_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
