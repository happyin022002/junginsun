<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RepairMgtDBDAOsearchDocWOHeaderDataRSQL">
			<desc><![CDATA[searchDocWOHeaderData]]></desc>
			<sql><![CDATA[
SELECT 
(A.MNR_ORD_OFC_CTY_CD || A.MNR_ORD_SEQ) MNR_ORD_SEQ 
,A.MNR_WO_TP_CD  WO_TYPE_CODE
,A.MNR_GRP_TP_CD
,D.MNR_CD_DESC WO_TYPE
,MNR_COMMON_PKG.MNR_CONV_PARTNER_CD_FNC(A.VNDR_SEQ) VNDR_SEQ
,B.VNDR_LGL_ENG_NM
,C.TRSM_MOD_CD
,DECODE(A.MNR_WO_TP_CD,'EST', 'Repair Approval_(' || L.RQST_EQ_NO || '_' 
                                                  || (A.MNR_ORD_OFC_CTY_CD || A.MNR_ORD_SEQ) || '_' 
                                                  || TO_CHAR(GLOBALDATE_PKG.TIME_CONV_OFC_FNC(MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(),L.CRE_DT,NVL(A.COST_OFC_CD,MNR_COMMON_PKG.MNR_GET_HOOFC_FNC())), 'yyyy-mm-dd') || ')'
                            , 'MNR W/O Notice_(' || (A.MNR_ORD_OFC_CTY_CD || A.MNR_ORD_SEQ) || '_' 
                                                 || TO_CHAR(GLOBALDATE_PKG.TIME_CONV_OFC_FNC(MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(),A.CRE_DT,NVL(A.COST_OFC_CD,MNR_COMMON_PKG.MNR_GET_HOOFC_FNC())), 'yyyy-mm-dd') || ')'
        ) DOC_SUBJECT
,C.FAX_NO
,C.MNR_PRNR_EML
,C.EDI_ID
FROM MNR_ORD_HDR A, MDM_VENDOR B, MNR_PARTNER C, MNR_GEN_CD D, MNR_RPR_RQST_HDR L
WHERE A.VNDR_SEQ = B.VNDR_SEQ(+)
AND A.COST_OFC_CD = C.CTRL_OFC_CD
AND   A.VNDR_SEQ = C.MNR_PRNR_SEQ(+)
AND	A.MNR_ORD_OFC_CTY_CD IN (
	#foreach ($user_mnrOrdOfcCtyCds IN ${mnrOrdOfcCtyCds})
		#if($velocityCount < $mnrOrdOfcCtyCds.size())
			'$user_mnrOrdOfcCtyCds',
		#else
			'$user_mnrOrdOfcCtyCds'
		#end
	#end			  
)	
AND A.MNR_ORD_SEQ in (${mnr_ord_seq})
AND D.PRNT_CD_ID(+)='CD00020'
AND A.MNR_WO_TP_CD = D.MNR_CD_ID(+)
AND A.MNR_ORD_SEQ = L.MNR_ORD_SEQ(+)
AND A.MNR_ORD_OFC_CTY_CD = L.MNR_ORD_OFC_CTY_CD(+)			]]></sql>
			<params>
			</params>
		</query>
	</querys>
</sqls>
