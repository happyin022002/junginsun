<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeAmountDiscountMgtDBDAOSearchContainerListAppliedAfterExceptionByDARNoRSQL">
			<desc><![CDATA[Booking 에 속한 Container 중, After Exception 적용된 Container 를 조회하는 쿼리]]></desc>
			<sql><![CDATA[
SELECT	CHG_CALC.CNTR_NO
	,	CHG_CALC.CNTR_CYC_NO
	,	CHG_CALC.DMDT_TRF_CD
	,	TO_CHAR(CHG_CALC.FT_END_DT, 'YYYYMMDD') FT_END_DT
FROM	DMT_CHG_BKG_CNTR CHG_CNTR
	,	DMT_CHG_CALC CHG_CALC
WHERE	CHG_CNTR.CNTR_NO = CHG_CALC.CNTR_NO
	AND CHG_CNTR.CNTR_CYC_NO = CHG_CALC.CNTR_CYC_NO
	AND CHG_CNTR.BKG_NO = @[bkg_no]
	AND CHG_CALC.DMDT_TRF_CD IN ('DMIF', 'DTIC')
	AND (
			SUBSTR(CHG_CALC.FM_MVMT_YD_CD, 1, 5) = 'KRPUS'
			OR
			SUBSTR(CHG_CALC.FM_MVMT_YD_CD, 1, 5) = 'KRKAN'
			OR
			SUBSTR(CHG_CALC.FM_MVMT_YD_CD, 1, 5) = 'KRINC'
			OR
			SUBSTR(CHG_CALC.FM_MVMT_YD_CD, 1, 5) = 'KRPYT'
		)
	AND	CHG_CALC.AFT_EXPT_DAR_NO = @[aft_expt_dar_no]			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="aft_expt_dar_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
