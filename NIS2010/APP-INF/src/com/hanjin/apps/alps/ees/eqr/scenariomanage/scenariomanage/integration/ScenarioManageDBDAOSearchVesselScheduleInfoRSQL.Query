<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ScenarioManageDBDAOSearchVesselScheduleInfoRSQL">
			<desc><![CDATA[eqr_scnr_vsl_skd 테이블의 데이터 조회(port 정보 미포함)

Change History
1. 2013.01.16  CSR : CHM-201322501, 주차검색조건 제거, 신용찬         ]]></desc>
			<sql><![CDATA[
SELECT 
	DISTINCT(
    CASE WHEN b.skd_usd_ind_cd IN('B','H') THEN 'SML'
	ELSE 
         CASE WHEN b.skd_usd_ind_cd IN('B','D') THEN 'SEN'
		                                        ELSE 'SML'
		 END		
    END ) company -- Company 구분 제거로 인해 조건별 표기함 ( 09.08.05 ) By ChungEunHo
    , A.VSL_SLAN_CD
    , A.VSL_CD||A.SKD_VOY_NO||A.SKD_DIR_CD VVD
    , A.SCNR_ID
    , A.VSL_CD
    , A.SKD_VOY_NO
    , A.SKD_DIR_CD
    , SKD_USD_IND_CD              
FROM EQR_SCNR_VSL_SKD A
    ,VSK_VSL_SKD B                                            
WHERE A.VSL_CD      = B.VSL_CD                                                     
AND   A.SKD_VOY_NO  = B.SKD_VOY_NO                                                 
AND   A.SKD_DIR_CD  = B.SKD_DIR_CD  
	## 불필요한 조인조건 제거
	## ITM-200900128
	## MODIFIED BY SHIN YONGCHAN - 20091009                                               
    ##AND a.vsl_slan_cd = b.vsl_slan_cd    
	
	##AND b.skd_usd_ind_cd IN ('B','H','D') -- Company 구분 제거로 인해 조건별 표기함 ( 09.08.05 ) By ChungEunHo                                              
AND A.SCNR_ID = @[scnrId]    

-- CSR : CHM-201322501, 주차검색조건 제거, 신용찬                                                            
--AND TO_CHAR (A.VSL_ETB_DT, 'YYYYMMDD') BETWEEN (SELECT WK_ST_DT  FROM EQR_WK_PRD WHERE PLN_YR||PLN_WK = etbSYrWk )          
--                                       AND (SELECT WK_END_DT FROM EQR_WK_PRD WHERE PLN_YR||PLN_WK = etbEYrWk )          
#if(${vslSlanCd} != '' )
AND A.VSL_SLAN_CD IN
   (
		#foreach($key IN ${arrVslSlanCd}) 
			#if($velocityCount < $arrVslSlanCd.size()) 
				'$key', 
			#else 
				'$key' 
			#end 
		#end 
	)
#end

#if(${vvd} != '')
AND A.VSL_CD||A.SKD_VOY_NO||A.SKD_DIR_CD IN
    (
		#foreach($key IN ${arrVvd}) 
			#if($velocityCount < $arrVvd.size()) 
				'$key', 
			#else 
				'$key' 
			#end 
		#end 
	)
#end			]]></sql>
			<params>
				<param name="scnrId" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
