<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerOnOffhireDBDAOModifyCntrMasterByTermChangeDataUSQL">
			<desc><![CDATA[modifyCntrMasterByTermChangeData]]></desc>
			<sql><![CDATA[
UPDATE MST_CONTAINER A
SET 
     (CNTR_STS_CD,LST_STS_YD_CD,LST_STS_SEQ) 
        =(SELECT /*+ INDEX_DESC(B XAK1MST_CNTR_STS_HIS) */
            B.CNTR_STS_CD, B.YD_CD, B.CNTR_STS_SEQ
        FROM MST_CNTR_STS_HIS B
        WHERE A.CNTR_NO=B.CNTR_NO
        AND ROWNUM=1)	 
     ,(LSTM_CD,AGMT_CTY_CD,AGMT_SEQ,VNDR_SEQ,ONH_FREE_DYS,MIN_ONH_DYS)
        =(SELECT /*+ INDEX_DESC(B XAK1MST_CNTR_STS_HIS) */
              (SELECT C.LSTM_CD
              FROM LSE_AGREEMENT C
              WHERE B.AGMT_CTY_CD = C.AGMT_CTY_CD
              AND   B.AGMT_SEQ = C.AGMT_SEQ), 
              B.AGMT_CTY_CD,B.AGMT_SEQ,
             (SELECT C.VNDR_SEQ
              FROM LSE_AGREEMENT C
              WHERE B.AGMT_CTY_CD = C.AGMT_CTY_CD
              AND   B.AGMT_SEQ = C.AGMT_SEQ),
              B.RNTL_CHG_FREE_DYS,B.CNTR_MIN_ONH_DYS
        FROM MST_CNTR_STS_HIS B
        WHERE A.CNTR_NO=B.CNTR_NO
        AND   B.CNTR_STS_CD IN('LSI','OWN','DII')
        AND ROWNUM=1)
    ,(ONH_CNTR_STS_CD,ONH_DT,ONH_YD_CD,ONH_STS_SEQ) 
        = (SELECT B.CNTR_STS_CD,B.CNTR_STS_EVNT_DT,B.YD_CD,B.CNTR_STS_SEQ
           FROM MST_CNTR_STS_HIS B
           WHERE A.CNTR_NO = B.CNTR_NO
           AND   B.CNTR_STS_SEQ = MST_ONH_STS_SEQ_FNC(A.CNTR_NO))        
    ,TERM_CNG_SEQ	     = @[term_cng_seq]
    ,OWNR_CO_CD          = 'H'
    ,CNTR_USE_CO_CD      = 'H'
    ,UPD_USR_ID          = @[upd_usr_id]
    ,UPD_DT              = SYSDATE
WHERE 
    CNTR_NO             = @[cntr_no]			]]></sql>
			<params>
				<param name="term_cng_seq" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
