<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PayableRentalCostDBDAOprintComCsrLseAgmtInfoRSQL">
			<desc><![CDATA[CSR 기준으로 Agreement No에 묶여있는 G/W의 정보를 가져온다]]></desc>
			<sql><![CDATA[
SELECT LSE_AGMT_DOC_NO L_ASSETCD ,LSE_AGMT_DOC_DESC L_DOCUMENT_TITLE
FROM LSE_AGREEMENT B
WHERE (B.AGMT_CTY_CD , B.AGMT_SEQ) IN (
        SELECT DISTINCT AGMT_CTY_CD , AGMT_SEQ
        FROM LSE_PAY_RNTL_CHG A
        WHERE (A.VNDR_SEQ ,A.INV_NO) IN (
            SELECT DISTINCT A.VNDR_NO, D.ATTR_CTNT1 INV_NO
            FROM AP_INV_HDR A,
                 AP_INV_DTRB D,
                 AP_PAY_INV P
            WHERE 1=1
            AND A.CSR_NO = D.CSR_NO
            AND A.CSR_NO = @[csr_no] 
            AND A.CSR_NO = P.CSR_NO
            AND A.VNDR_NO = P.VNDR_SEQ
            AND D.ATTR_CTNT1 = P.INV_NO
            AND NVL(P.DELT_FLG, 'N') <> 'Y' 
            )  
          )
AND LSE_AGMT_DOC_NO IS NOT NULL
GROUP BY LSE_AGMT_DOC_NO ,LSE_AGMT_DOC_DESC
			]]></sql>
			<params>
				<param name="csr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
