<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="HangerInventoryMgtDBDAOsearchHangerInventoryListDataRSQL">
			<desc><![CDATA[searchHangerInventoryListDataRSQL]]></desc>
			<sql><![CDATA[
SELECT
B.AR_HD_QTR_OFC_CD
,A.OFC_CD
,A.MNR_HNGR_BAR_TP_CD
,A.HNGR_INVT_VER_NO
,A.HNGR_INVT_LST_VER_FLG
,A.INVT_QTY
,A.MNR_HNGR_DMG_QTY
,A.PUR_QTY
,A.CSM_QTY
,A.RCVR_QTY
,A.ACT_INVT_QTY
,A.MNR_LOST_HNGR_QTY
,A.MNR_DISP_HNGR_QTY
,A.INVT_RMK
,A.CRE_USR_ID
,(NVL(A.MNR_HNGR_DMG_QTY,0) + NVL(A.ACT_INVT_QTY,0)) AS COL_QTY
,TO_CHAR(GLOBALDATE_PKG.TIME_CONV_OFC_FNC(MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(), A.CRE_DT, @[user_ofc_cd]), 'yyyy-mm-dd') CRE_DT
,A.UPD_USR_ID
,TO_CHAR(GLOBALDATE_PKG.TIME_CONV_OFC_FNC(MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(), A.UPD_DT, @[user_ofc_cd]), 'yyyy-mm-dd') UPD_DT
FROM MNR_HNGR_INVT A, MDM_ORGANIZATION B
WHERE A.OFC_CD = B.OFC_CD
AND A.HNGR_INVT_LST_VER_FLG='Y'
#if (${ar_hd_qtr_cd} != '')
AND   A.OFC_CD IN ( SELECT OFC_CD
                    FROM  MDM_ORGANIZATION
                    WHERE AR_HD_QTR_OFC_CD = @[ar_hd_qtr_cd]
                         AND ofc_cd LIKE @[ofc_cd]||'%%'
                         AND delt_flg = 'N'
                  )   
#end
#if (${ofc_cd} != '')
AND   A.OFC_CD IN ( SELECT D.OFC_CD
                    FROM   MNR_OFC_GEN_INFO D
                    WHERE  D.UPPR_OFC_CD  =  @[ofc_cd]
                         AND    D.MNR_GRP_TP_CD = 'OFC'
                         AND    D.COST_CD       = 'MR'
                    UNION ALL
                    SELECT @[ofc_cd]
                    FROM DUAL
                  )
#end
ORDER BY B.AR_HD_QTR_OFC_CD,A.OFC_CD,A.MNR_HNGR_BAR_TP_CD ASC			]]></sql>
			<params>
				<param name="user_ofc_cd" type="12" value="" out="N"/>
				<param name="ar_hd_qtr_cd" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
