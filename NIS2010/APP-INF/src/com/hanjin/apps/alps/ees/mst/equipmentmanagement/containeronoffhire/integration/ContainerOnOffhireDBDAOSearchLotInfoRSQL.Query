<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerOnOffhireDBDAOSearchLotInfoRSQL">
			<desc><![CDATA[SearchLotInfo]]></desc>
			<sql><![CDATA[
SELECT
     MST_COMMON_PKG.MST_AGMT_NO_CONV_FNC(LOT.AGMT_CTY_CD, LOT.AGMT_SEQ) AS AGMT_NO
    ,LOT.AGMT_CTY_CD    AS AGMT_CTY_CD
    ,LOT.AGMT_SEQ       AS AGMT_SEQ
    ,AGR.LSTM_CD        AS LSTM_CD
    ,TO_CHAR(AGR.LST_EFF_DT,'YYYY-MM-DD') AS EFF_DT
    ,TO_CHAR(AGR.LST_EXP_DT,'YYYY-MM-DD') AS EXP_DT
    ,AGR.VNDR_SEQ               AS VNDR_SEQ
    ,VEN.VNDR_LGL_ENG_NM        AS VNDR_LGL_ENG_NM
    ,LOT.CNTR_SPEC_NO           AS CNTR_SPEC_NO
    ,LOT.CNTR_TPSZ_CD           AS CNTR_TPSZ_CD
    ,LOT.MFT_VNDR_SEQ	        AS MFT_VNDR_SEQ
    ,VEN2.VNDR_ABBR_NM          AS VNDR_ABBR_NM
    ,LOT.FCTRY_SPEC_NO
    ,LOT.LOT_LOC_CD
    ,TO_CHAR(LOT.MFT_DT,'YYYY-MM-DD') AS MFT_DT
    ,LOT.FM_SER_NO
    ,LOT.TO_SER_NO
    ,DECODE(LENGTH(LOT.DE_YRMON),6,SUBSTR(LOT.DE_YRMON,0,4) || '-' || SUBSTR(LOT.DE_YRMON,5,8),'') AS DE_YRMON
    ,LOT.PLST_FLR_FLG
    ,LOT.CNTR_HNGR_RCK_CD
    ,LOT.FA_IF_GRP_STS_CD
    ,LOT.CERTI_NO
    ,LOT.APRO_CSC_NO
    ,LOT.APRO_TIR_NO
    ,LOT.APRO_UIC_NO
    ,LOT.APRO_TCT_NO
    ,SPEC.CNTR_MTRL_CD
    ,MST_COMMON_PKG.MST_VNDR_SEQ_CONV_FNC(LOT.MFT_VNDR_SEQ) AS MFT_VNDR_SEQ
    ,LOT.LOT_CNTR_PFX_CD
    ,TO_NUMBER(LOT.TO_SER_NO) - TO_NUMBER(LOT.FM_SER_NO) + 1 AS RANGE_COUNT
    ,LOT.DIFF_RMK
    ,LOT.AGMT_CTY_CD || LOT.AGMT_SEQ  AS ORG_AGMT_NO
    ,TO_CHAR(LOT.MFT_DT,'YYYY-MM-DD')  AS ORG_MFT_DT
    ,LOT.CNTR_HNGR_RCK_CD AS ORG_CNTR_HNGR_RCK_CD
    ,LOT.PLST_FLR_FLG 	AS ORG_PLST_FLR_FLG
    ,LOT.FCTRY_SPEC_NO 	AS ORG_FCTRY_SPEC_NO
    ,DECODE(LENGTH(LOT.DE_YRMON),6,SUBSTR(LOT.DE_YRMON,0,4) || '-' || SUBSTR(LOT.DE_YRMON,5,8),'') AS ORG_DE_YRMON
    ,LOT.CERTI_NO    AS ORG_CERTI_NO
	,LOT.RF_TP_CD    AS UNIT_TYPE
    ,LOT.RF_MKR_SEQ
    ,LOT.RF_MDL_NM
    ,LOT.RF_RFR_NO
    ,LOT.MIN_TEMP
    ,LOT.MAX_TEMP
    ,LOT.RF_MKR_SEQ  AS ORG_RF_MKR_SEQ
    ,LOT.RF_MDL_NM   AS ORG_RF_MDL_NM
    ,LOT.RF_RFR_NO   AS ORG_RF_RFR_NO
    ,LOT.MIN_TEMP    AS ORG_MIN_TEMP
    ,LOT.MAX_TEMP    AS ORG_MAX_TEMP
FROM    MST_CNTR_LOT LOT,
        LSE_AGREEMENT AGR,
        MDM_VENDOR VEN,
        MDM_VENDOR VEN2,
        MST_CNTR_SPEC SPEC
WHERE 1=1 
AND LOT.LOT_PLN_YR      = @[lot_pln_yr]
AND LOT.LOT_LOC_CD      = @[lot_loc_cd]
AND LOT.CNTR_TPSZ_CD    = @[cntr_tpsz_cd]
AND LOT.LOT_SEQ         = @[lot_seq]
AND LOT.AGMT_CTY_CD     = AGR.AGMT_CTY_CD(+)
AND LOT.AGMT_SEQ        = AGR.AGMT_SEQ(+)
AND AGR.VNDR_SEQ        = VEN.VNDR_SEQ
AND LOT.MFT_VNDR_SEQ    = VEN2.VNDR_SEQ
AND LOT.CNTR_SPEC_NO    = SPEC.CNTR_SPEC_NO(+)			]]></sql>
			<params>
				<param name="lot_pln_yr" type="12" value="" out="N"/>
				<param name="lot_loc_cd" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="lot_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
