<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CntrRepoExecutionPlanEstablishDBDAOMergeOnOffHireExecuteQtyCSQL">
			<desc><![CDATA[컨테이너 이송 실행 계획 조회/수정 OnOffHire(EES_EQR_081) DB에 반영한다
UPDATE : - EQR_ONF_HIR_EXE_PLN_QTY       VOL 수정]]></desc>
			<sql><![CDATA[
MERGE INTO EQR_ONF_HIR_EXE_PLN_QTY I                          	
USING                                                       	
    (                                                           	
    SELECT 
        @[repo_pln_id] AS REPO_PLN_ID                                 	
        ,@[ref_id] AS REF_ID                                      	
        ,@[pln_yrwk] AS PLN_YRWK                                  	
        ,@[pln_seq] AS PLN_SEQ                                    	
        ,@[cntr_tpsz_cd] AS CNTR_TPSZ_CD                                	
    FROM 
        DUAL                                               	
    ) M                                                         	
ON                                                          	
    (                                                           	
        I.REPO_PLN_ID   = M.REPO_PLN_ID                     	 
        AND I.REF_ID 		= M.REF_ID                          	
        AND I.PLN_YRWK      = M.PLN_YRWK                      	
        AND I.PLN_SEQ       = M.PLN_SEQ                        	
        AND I.CNTR_TPSZ_CD  = M.CNTR_TPSZ_CD                    	
    )                                                           	
WHEN MATCHED THEN                                  			
    UPDATE SET 
        I.CNTR_QTY          = @[cntr_qty],                   			
        I.ONF_HIR_COST_AMT  = @[onf_hir_cost_amt_update],                   			
        I.UPD_USR_ID        = @[user_id],                   			
        I.UPD_DT    	    = SYSDATE	        			
WHEN NOT MATCHED THEN                                       	
    INSERT INTO EQR_ONF_HIR_EXE_PLN_QTY (
    	I.REF_ID
    ,	I.CNTR_TPSZ_CD
    ,	I.CNTR_QTY
    ,	I.ONF_HIR_COST_AMT
    ,	I.PLN_UC_AMT
    ,	I.FM_ECC_COST_AMT
    ,	I.TO_ECC_COST_AMT
    ,	I.CRE_USR_ID
    ,	I.CRE_DT
    ,	I.UPD_USR_ID
    ,	I.UPD_DT
    ,	I.REPO_PLN_ID
    ,	I.PLN_YRWK
    ,	I.PLN_SEQ
    ) VALUES( 
    	@[ref_id]
    ,	@[cntr_tpsz_cd]
    ,	@[cntr_qty]
    ,	@[onf_hir_cost_amt_insert]
    ,	@[pln_uc_amt]
    ,	@[fm_ecc_cost_amt]
    ,	@[to_ecc_cost_amt]
    ,	@[user_id]
    ,	SYSDATE
    ,	@[user_id]
    ,	SYSDATE
    ,	@[repo_pln_id]
    ,	@[pln_yrwk]
    ,	@[pln_seq]
    )			]]></sql>
			<params>
				<param name="repo_pln_id" type="12" value="" out="N"/>
				<param name="ref_id" type="12" value="" out="N"/>
				<param name="pln_yrwk" type="12" value="" out="N"/>
				<param name="pln_seq" type="2" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="cntr_qty" type="2" value="" out="N"/>
				<param name="onf_hir_cost_amt_update" type="6" value="" out="N"/>
				<param name="user_id" type="12" value="" out="N"/>
				<param name="onf_hir_cost_amt_insert" type="6" value="" out="N"/>
				<param name="pln_uc_amt" type="6" value="" out="N"/>
				<param name="fm_ecc_cost_amt" type="6" value="" out="N"/>
				<param name="to_ecc_cost_amt" type="6" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
