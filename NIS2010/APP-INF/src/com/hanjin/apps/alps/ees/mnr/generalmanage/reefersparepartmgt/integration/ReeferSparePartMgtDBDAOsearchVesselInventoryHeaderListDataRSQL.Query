<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ReeferSparePartMgtDBDAOsearchVesselInventoryHeaderListDataRSQL">
			<desc><![CDATA[조회]]></desc>
			<sql><![CDATA[
SELECT SPR_PRT_VER_SEQ, SPR_PRT_VNDR_SEQ, SPR_UT_MDL_NM, VNDR_NM, SPR_PRT_DP_SEQ
FROM (
    SELECT SPR_PRT_VER_SEQ, SPR_PRT_VNDR_SEQ, SPR_UT_MDL_NM
		, CASE WHEN SPR_UT_MDL_NM = 'GE' THEN 'General'
            ELSE ( SELECT NVL(VNDR_ABBR_NM,VNDR_LGL_ENG_NM) AS VNDR_NM
                    FROM MDM_VENDOR V
                    WHERE V.VNDR_SEQ = C.SPR_PRT_VNDR_SEQ
                    AND V.DELT_FLG = 'N'
                   ) 
          END AS VNDR_NM
		, MAX(C.SPR_PRT_DP_SEQ) AS SPR_PRT_DP_SEQ
    FROM MNR_VSL_SPR_PRT_CD C
    WHERE C.SPR_PRT_DELT_FLG = 'N'
    AND C.SPR_PRT_VER_SEQ = (
#if (${spr_prt_invt_no} == '') 
                                SELECT MAX(SPR_PRT_VER_SEQ) AS SPR_PRT_VER_SEQ
                                FROM MNR_VSL_SPR_PRT_CD
                                WHERE SPR_PRT_DELT_FLG = 'N'
#end
#if (${spr_prt_invt_no} != '')
								SELECT MAX( SPR_PRT_VER_SEQ ) AS SPR_PRT_VER_SEQ
                                FROM MNR_VSL_SPR_PRT_INVT IT
                                WHERE SPR_PRT_INVT_NO = @[spr_prt_invt_no]
                                AND DELT_FLG = 'N'
#end
                            )
    GROUP BY C.SPR_PRT_VER_SEQ, C.SPR_PRT_VNDR_SEQ, C.SPR_UT_MDL_NM
    ) SAM
    
    ORDER BY SPR_PRT_VER_SEQ, SPR_PRT_DP_SEQ, VNDR_NM			]]></sql>
			<params>
				<param name="spr_prt_invt_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
