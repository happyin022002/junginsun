<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerOnOffhireDBDAOsearchCntrManufactureInfoRSQL">
			<desc><![CDATA[searchCntrManufactureInfo]]></desc>
			<sql><![CDATA[
#if (${cntr_no} == '') 
SELECT 
  A.CNTR_NO
 ,A.CNTR_TPSZ_CD
 ,A.LSTM_CD
 ,TO_CHAR(A.ONH_DT, 'YYYY-MM-DD') ONH_DT
 ,A.ONH_YD_CD
 ,TO_CHAR(A.MFT_DT, 'YYYY-MM-DD') MFT_DT
 ,DECODE(A.MFTR_VNDR_SEQ, 0, '', A.MFTR_VNDR_SEQ) MFTR_VNDR_SEQ
 ,A.VNDR_SEQ
 ,NVL(B.VNDR_ABBR_NM, B.VNDR_LGL_ENG_NM)  MFTR_VNDR_NM
 ,'' aeflg
 ,'' beflg
 ,'' ceflg
 ,'' deflg
 ,'' eeflg
FROM MST_CONTAINER A, MDM_VENDOR B
WHERE 1 = 1
AND A.VNDR_SEQ = @[vndr_seq]
#if (${lstmcd} != '')
AND A.LSTM_CD = @[lstmcd]
#else
AND A.LSTM_CD IN ('ST', 'LT')
#end
#if (${md_flg} != 'N')
AND A.MFT_DT IS NOT NULL
#else
AND A.MFT_DT IS NULL
#end
#if (${m_flg} != 'N')
AND NVL(A.MFTR_VNDR_SEQ, 0) <> 0
#else
AND NVL(A.MFTR_VNDR_SEQ, 0) = 0
#end
--AND A.CNTR_STS_CD NOT IN ('LSO','TLL','LST') 2010.07.15 수정
AND A.CNTR_STS_CD NOT IN ('LSO','TLL','DIO')
#if (${agmt_cty_cd} != '' && ${agmt_seq} != '')
AND A.AGMT_CTY_CD = @[agmt_cty_cd]
AND A.AGMT_SEQ    = @[agmt_seq]			
#end
AND B.VNDR_SEQ(+) = A.MFTR_VNDR_SEQ
ORDER BY A.CNTR_NO
#else
SELECT 
  A.CNTR_NO
 ,A.CNTR_TPSZ_CD
 ,A.LSTM_CD
 ,TO_CHAR(A.ONH_DT, 'YYYY-MM-DD') ONH_DT
 ,A.ONH_YD_CD
 ,@[mft_dt] MFT_DT
 ,@[mftr_vndr_seq] MFTR_VNDR_SEQ
 ,A.VNDR_SEQ
#if (${beflg} != 'E')
 ,(SELECT NVL(B.VNDR_ABBR_NM,VNDR_LGL_ENG_NM) CODE_NM
   FROM MDM_VENDOR B
   WHERE B.VNDR_SEQ = @[mftr_vndr_seq]
   AND NVL(B.DELT_FLG, 'N') = 'N') MFTR_VNDR_NM
#else
 , '' MFTR_VNDR_NM
#end
 ,DECODE(A.LSTM_CD, 'ST', '' ,'LT', '', 'E')  aeflg
#if (${beflg} != 'E')
 ,DECODE((SELECT COUNT(1)
          FROM MDM_CNTR_VNDR_CLSS A,
               MDM_VENDOR B
          WHERE A.CNTR_VNDR_SVC_CD ='MFR'
          AND A.VNDR_SEQ = @[mftr_vndr_seq]
          AND A.VNDR_SEQ = B.VNDR_SEQ
          AND NVL(A.DELT_FLG, 'N') = 'N'
          AND NVL(B.DELT_FLG, 'N') = 'N'),0,'E','') beflg
#else
	#if (${mftr_vndr_seq}=='') -- mftr_vndr_seq가 null인경우는 처리한다.
		 ,'' beflg
	#else
		 ,'E' beflg
	#end
#end
#if (${mft_dt}=='')  -- mft_dt가 null인경우는 처리한다.
 ,'' ceflg
#else
 ,DECODE(@[ceflg],'E','E','') ceflg
#end
 ,DECODE(@[deflg],'E','E','') deflg
 ,'' eeflg
FROM MST_CONTAINER A
WHERE 1 = 1
AND A.CNTR_NO = @[cntr_no]
#end			]]></sql>
			<params>
				<param name="vndr_seq" type="12" value="" out="N"/>
				<param name="lstmcd" type="12" value="" out="N"/>
				<param name="agmt_cty_cd" type="12" value="" out="N"/>
				<param name="agmt_seq" type="12" value="" out="N"/>
				<param name="mft_dt" type="12" value="" out="N"/>
				<param name="mftr_vndr_seq" type="12" value="" out="N"/>
				<param name="ceflg" type="12" value="" out="N"/>
				<param name="deflg" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
