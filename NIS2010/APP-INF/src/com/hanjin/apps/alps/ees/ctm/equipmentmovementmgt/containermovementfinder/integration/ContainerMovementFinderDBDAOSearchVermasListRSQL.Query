<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerMovementFinderDBDAOSearchVermasListRSQL">
			<desc><![CDATA[Inbound vermas EDI 조회.]]></desc>
			<sql><![CDATA[
SELECT CNTR_NO,
  DECODE(BKG_NO, 'NONE', '', BKG_NO) AS BKG_NO,
  VGM_WGT_QTY,
  VRFD_WGT_CD,
  PTY_NM,
  VGM_MZD_TP_CD,
  TO_CHAR(VGM_VRFY_DT, 'YYYY-MM-DD HH24:MI') AS VGM_VRFY_DT,
  REF_NO,
  PTY_FUNC_CD,
  PTY_PSON_NM,
  VGM_SEQ,
  POL_YD_CD,
  SMT_NM,
  CASE WHEN POL_YD_CD IS NOT NULL
         THEN TO_CHAR(GLOBALDATE_PKG.TIME_CONV_FNC('KRPUS', CRE_DT, SUBSTR(POL_YD_CD, 0, 5)), 'YYYY-MM-DD HH24:MI')
       ELSE TO_CHAR(CRE_DT, 'YYYY-MM-DD HH24:MI')
  END AS CRE_LOCL_DT,
  'EDI' AS VIA,
  '' AS P_DATE1,
  '' AS P_DATE2,
  '' AS RCC_CD,
  '' AS LCC_CD,
  '' AS ORG_YD_CD,
  '' AS DIVFLAG
FROM CTM_VRFD_GRS_MASS_EDI_MSG
WHERE 1 = 1
#if (${cntr_no} != '')
  AND CNTR_NO IN (
  #foreach ($cntr_cd in ${cntr_no_list})
      #if ($velocityCount < $cntr_no_list.size()) '$cntr_cd', #else '$cntr_cd' #end
  #end
                 )
#end
#if (${bkg_no} != '')
  AND BKG_NO IN (
  #foreach ($bkg_no in ${bkg_no_list})
      #if ($velocityCount < $bkg_no_list.size()) '$bkg_no', #else '$bkg_no' #end
  #end
                )
#end
#if (${org_yd_cd} != '')
  AND POL_YD_CD LIKE @[org_yd_cd] || '%'
#else
  #if (${rcc_cd} != '' && ${rcc_cd} != 'ALL')
  AND POL_YD_CD IN (SELECT YD_CD FROM MDM_YARD
                    WHERE LOC_CD IN (SELECT LOC_CD
                                     FROM MDM_LOCATION
                                     WHERE DELT_FLG <> 'Y'
                                       AND SCC_CD IN (SELECT SCC_CD FROM MDM_EQ_ORZ_CHT
                                                      WHERE DELT_FLG <> 'Y'
    #if (${lcc_cd} != '' && ${lcc_cd} != 'ALL')
                                                        AND LCC_CD IN (
      #foreach ($lcc_cd in ${lcc_cd_list})
        #if ($velocityCount < $lcc_cd_list.size()) '$lcc_cd', #else '$lcc_cd' #end
      #end
                                                                      )
    #elseif (${rcc_cd} != '' && ${rcc_cd} != 'ALL')
                                                        AND RCC_CD = @[rcc_cd]
    #end
                                                     )
                                    )
                   )
  #end
#end
#if (${divflag} == 1)
  AND CRE_DT BETWEEN TO_DATE (@[p_date1], 'YYYYMMDD') AND TO_DATE (@[p_date2], 'YYYYMMDD') + 0.99999
#else
  AND VGM_VRFY_DT BETWEEN TO_DATE (@[p_date1], 'YYYYMMDD') AND TO_DATE (@[p_date2], 'YYYYMMDD') + 0.99999
#end
ORDER BY CRE_DT ASC			]]></sql>
			<params>
				<param name="org_yd_cd" type="12" value="" out="N"/>
				<param name="rcc_cd" type="12" value="" out="N"/>
				<param name="p_date1" type="12" value="" out="N"/>
				<param name="p_date2" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
