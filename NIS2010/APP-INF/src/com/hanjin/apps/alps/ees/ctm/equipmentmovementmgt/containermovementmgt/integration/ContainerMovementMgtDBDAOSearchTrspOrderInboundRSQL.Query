<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerMovementMgtDBDAOSearchTrspOrderInboundRSQL">
			<desc><![CDATA[From Nod VIA_NOD_CD 를 조회한다.]]></desc>
			<sql><![CDATA[
#if( ${gubun} == '4' ) -- 4 인 경우
	SELECT FM_NOD_CD  AS FM_NOD_CD
         , TO_NOD_CD  AS TO_VIA_NOD_CD 
#else -- 1,2,3 인 경우
	SELECT FM_NOD_CD  AS FM_NOD_CD
         , VIA_NOD_CD AS TO_VIA_NOD_CD 
#end
	  FROM TRS_TRSP_SVC_ORD 
	 WHERE LOCL_CRE_DT BETWEEN TO_DATE(@[event_date],'YYYYMMDDHH24MI') - 20 
	   AND TO_DATE(@[event_date],'YYYYMMDDHH24MI') + 7 
	   AND TRSP_SO_TP_CD = 'Y' 
#if( ${gubun} == '1' || ${gubun} == '2') -- 1,2 인 경우 
	   AND TRSP_COST_DTL_MOD_CD = 'DR' 
	   AND ( ( FM_NOD_CD = @[event_yard] AND VIA_NOD_CD IS NULL ) OR ( FM_NOD_CD <> @[event_yard] AND VIA_NOD_CD = @[event_yard]) ) 
#elseif( ${gubun} == '3' ) -- 3 인 경우 
	   AND TRSP_COST_DTL_MOD_CD = 'DR' 
	   AND ( FM_NOD_CD = @[event_yard] AND VIA_NOD_CD <> @[event_yard] ) 
#elseif( ${gubun} == '4' ) -- 4 인 경우
	   AND TRSP_COST_DTL_MOD_CD IN ('LS', 'TS') 
	   AND FM_NOD_CD = @[event_yard] AND TRSP_BND_CD = 'I'
#end
	   AND BKG_NO = @[bkg_no] 
	   AND EQ_NO  = @[cntr_no]
	   AND DELT_FLG = 'N' 
	   AND ROWNUM = 1			]]></sql>
			<params>
				<param name="event_date" type="12" value="" out="N"/>
				<param name="event_yard" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
