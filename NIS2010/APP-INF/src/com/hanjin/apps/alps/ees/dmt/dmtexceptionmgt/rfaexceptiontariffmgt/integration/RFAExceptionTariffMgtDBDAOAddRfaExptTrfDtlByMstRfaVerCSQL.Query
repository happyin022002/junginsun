<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RFAExceptionTariffMgtDBDAOAddRfaExptTrfDtlByMstRfaVerCSQL">
			<desc><![CDATA[RFAExceptionTariffMgtDBDAOAddRfaExptTrfDtlByMstRfaVerCSQL]]></desc>
			<sql><![CDATA[
INSERT INTO DMT_RFA_EXPT_TRF_DTL
	(
		RFA_EXPT_DAR_NO
	   ,RFA_EXPT_MAPG_SEQ
	   ,RFA_EXPT_VER_SEQ
	   ,RFA_RQST_DTL_SEQ
	   ,CVRG_CMB_SEQ
	   ,DMDT_TRF_CD
	   ,N1ST_CMNC_VER_SEQ
	   ,EFF_DT
	   ,EXP_DT
	   ,DMDT_CNTR_TP_CD
	   ,DMDT_CGO_TP_CD
	   ,REP_CMDT_CD
	   ,FT_USE_FLG
	   ,ADD_DYS
	   ,TTL_DYS
	   ,XCLD_SAT_FLG
	   ,XCLD_SUN_FLG
	   ,XCLD_HOL_FLG
	   ,RT_USE_FLG
	   ,RT_CHK_FLG
	   ,CURR_CD
	   ,EXPT_TRF_RMK
	   ,ACT_CUST_CNT_CD
	   ,ACT_CUST_SEQ
	   ,FNL_DEST_FLG
	   ,FNL_DEST_CONTI_CD
	   ,FNL_DEST_CNT_CD
	   ,FNL_DEST_RGN_CD
	   ,FNL_DEST_STE_CD
	   ,FNL_DEST_LOC_CD
	   ,CRE_USR_ID
	   ,CRE_DT
	   ,CRE_OFC_CD
	   ,UPD_USR_ID
	   ,UPD_DT
	   ,UPD_OFC_CD
	)
SELECT  @[rfa_expt_dar_no]
	   ,RFA_EXPT_MAPG_SEQ
	   ,(
			SELECT  MAX(RFA_EXPT_VER_SEQ)
			  FROM  DMT_RFA_EXPT_TRF
			 WHERE  PROP_NO = @[bzc_prop_no]
	    ) 
	   ,RFA_RQST_DTL_SEQ
	   ,CVRG_CMB_SEQ
	   ,DMDT_TRF_CD
	   ,N1ST_CMNC_VER_SEQ
	   ,EFF_DT
	   ,EXP_DT
	   ,DMDT_CNTR_TP_CD
	   ,DMDT_CGO_TP_CD
	   ,REP_CMDT_CD
	   ,FT_USE_FLG
	   ,ADD_DYS
	   ,TTL_DYS
	   ,XCLD_SAT_FLG
	   ,XCLD_SUN_FLG
	   ,XCLD_HOL_FLG
	   ,RT_USE_FLG
	   ,RT_CHK_FLG
	   ,CURR_CD
	   ,EXPT_TRF_RMK
	   ,ACT_CUST_CNT_CD
	   ,ACT_CUST_SEQ
	   ,FNL_DEST_FLG
	   ,FNL_DEST_CONTI_CD
	   ,FNL_DEST_CNT_CD
	   ,FNL_DEST_RGN_CD
	   ,FNL_DEST_STE_CD
	   ,FNL_DEST_LOC_CD
	   ,@[cre_usr_id]
	   ,SYSDATE
	   ,@[cre_ofc_cd]
	   ,@[cre_usr_id]
	   ,SYSDATE
	   ,@[cre_ofc_cd]
  FROM  DMT_RFA_EXPT_TRF_DTL
 WHERE  (RFA_EXPT_DAR_NO, RFA_EXPT_MAPG_SEQ, RFA_EXPT_VER_SEQ) =
		(
			SELECT  /*+ INDEX_DESC( DMT_RFA_EXPT_TRF XPKDMT_RFA_EXPT_TRF ) */
			        RFA_EXPT_DAR_NO
				   ,RFA_EXPT_MAPG_SEQ
				   ,RFA_EXPT_VER_SEQ
			  FROM  DMT_RFA_EXPT_TRF
			 WHERE  PROP_NO = @[mst_prop_no]
			   AND  DMDT_EXPT_RQST_STS_CD = 'A'
			   AND  ROWNUM = 1
		)			]]></sql>
			<params>
				<param name="rfa_expt_dar_no" type="12" value="1" out="N"/>
				<param name="bzc_prop_no" type="12" value="1" out="N"/>
				<param name="cre_usr_id" type="12" value="1" out="N"/>
				<param name="cre_ofc_cd" type="12" value="1" out="N"/>
				<param name="mst_prop_no" type="12" value="1" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
