<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PartnerMgtDBDAOsearchDSPPartnerDataRSQL">
			<desc><![CDATA[searchDSPPartnerData]]></desc>
			<sql><![CDATA[
SELECT
        '' AS DISP_NO
        ,MNR_COMMON_PKG.MNR_CONV_PARTNER_CD_FNC(A.MNR_PRNR_SEQ,A.MNR_PRNR_CNT_CD) AS MNR_PRNR_ID
        ,A.MNR_PRNR_LGL_ENG_NM AS VNDR_LGL_ENG_NM
        ,A.MNR_PRNR_CNT_CD
        ,A.MNR_PRNR_SEQ
        ,A.MNR_PRNR_KND_CD
        ,'' AS OFC_CD
        ,'' AS MNR_PRNR_EML
        ,'' AS PART_AMT
        ,A.CRE_USR_ID
        ,TO_CHAR(A.CRE_DT, 'yyyy-mm-dd') CRE_DT
        ,A.UPD_USR_ID
        ,TO_CHAR(A.UPD_DT, 'yyyy-mm-dd') UPD_DT
FROM MNR_PARTNER A
WHERE
A.MNR_GRP_TP_CD = @[mnr_grp_tp_cd] 
AND A.MNR_PRNR_STS_CD = 'C'
AND A.DELT_FLG = 'N'
AND A.MNR_PRNR_CRE_SEQ IN (
    SELECT MP.MNR_PRNR_CRE_SEQ
    FROM   MNR_PARTNER MP
    WHERE  MP.MNR_PRNR_KND_CD = 'G'
    UNION ALL
    SELECT MP.MNR_PRNR_CRE_SEQ
    FROM   MNR_PARTNER MP, MNR_PRNR_CNTC_PNT MPCP 
    WHERE  MP.MNR_PRNR_KND_CD = 'R'
    AND    MP.MNR_PRNR_CRE_SEQ = MPCP.MNR_PRNR_CRE_SEQ
    AND    MPCP.OFC_CD = DECODE(@[self_ofc_cd], MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(), MPCP.OFC_CD, MNR_COMMON_PKG.MNR_GET_RHQ_OFC_FNC(@[self_ofc_cd]))
    UNION ALL
    SELECT MP.MNR_PRNR_CRE_SEQ
    FROM   MNR_PARTNER MP, MNR_PRNR_CNTC_PNT MPCP 
    WHERE  MP.MNR_PRNR_KND_CD  = 'L'
    AND    MP.MNR_PRNR_CRE_SEQ = MPCP.MNR_PRNR_CRE_SEQ
    AND    (MPCP.OFC_CD         = DECODE(@[self_ofc_cd], MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(), MPCP.OFC_CD, @[self_ofc_cd])
			OR     MP.CTRL_OFC_CD        = DECODE(@[self_ofc_cd], MNR_COMMON_PKG.MNR_GET_HOOFC_FNC(), MPCP.OFC_CD, @[self_ofc_cd]))
    )			]]></sql>
			<params>
				<param name="mnr_grp_tp_cd" type="12" value="" out="N"/>
				<param name="self_ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
