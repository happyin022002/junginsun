<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DMTCalculationDBDAOSearchDivChrgListRSQL">
			<desc><![CDATA[SearchDivChrgList]]></desc>
			<sql><![CDATA[
SELECT  FT_OVR_DYS FT_OVER ,
        FT_UND_DYS FT_UNDER,
		CASE WHEN @[cntrts] = 'DX' THEN CNTR_45FT_RT_AMT
			-- 'DX' CNTR TYPE에 대한 Rating조건을 CNTR_45FT_RT_AMT로 추가
             WHEN @[cntrts] = 'R8' THEN CNTR_HC_RT_AMT
			 ELSE
        DECODE( SUBSTR(@[cntrts],2,1), 	'2', CNTR_20FT_RT_AMT,
                                        '3', CNTR_20FT_RT_AMT,
                         				'4', CNTR_40FT_RT_AMT,
                         				'5', CNTR_HC_RT_AMT,
                         				'7', CNTR_45FT_RT_AMT,
                                        -- 1) D8는 RATE AMT를 CNTR_R9_RT_AMT로 유지
										-- 2) R8 에 적용되는 RATE AMT는 R5 RATE AMT와 동일하게 변경
										'8', CNTR_R9_RT_AMT,
                                        '9', CNTR_R9_RT_AMT                                    )  END RATE
FROM    DMT_TRF_RT
WHERE   SYS_AREA_GRP_ID = NVL(( SELECT SYS_AREA_GRP_ID 
                				FROM COM_SYS_AREA_GRP_ID A
                				WHERE A.CO_IND_CD = 'H'
                				AND A.CNT_CD = SUBSTR(@[fm_mvmt_yd_cd],1,2) ),@[svr_id])
AND     DMDT_TRF_CD     = @[dtt_code]
AND     TRF_SEQ         = @[dtn_seq]
AND     DMDT_DE_TERM_CD = @[dmdt_de_term_cd]  
AND     TRF_GRP_SEQ     = @[grp_id]
AND     FT_OVR_DYS      <=(@[over_day] + NVL(@[div_over_day], 0))
ORDER BY TRF_RT_SEQ			]]></sql>
			<params>
				<param name="cntrts" type="12" value="" out="N"/>
				<param name="fm_mvmt_yd_cd" type="12" value="" out="N"/>
				<param name="svr_id" type="12" value="" out="N"/>
				<param name="dtt_code" type="12" value="" out="N"/>
				<param name="dtn_seq" type="12" value="" out="N"/>
				<param name="dmdt_de_term_cd" type="12" value="" out="N"/>
				<param name="grp_id" type="12" value="" out="N"/>
				<param name="over_day" type="12" value="" out="N"/>
				<param name="div_over_day" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
