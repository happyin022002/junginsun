<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RFAExceptionTariffMgtDBDAOSearchHQVpApprovalPathApprovalUserRSQL">
			<desc><![CDATA[RFAExceptionTariffMgtDBDAOSearchHQVpApprovalPathApprovalUserRSQL]]></desc>
			<sql><![CDATA[
select  @[rfa_expt_dar_no]          as RFA_EXPT_DAR_NO
	   ,@[rfa_expt_mapg_seq]  		as RFA_EXPT_MAPG_SEQ
	   ,@[rfa_expt_ver_seq]  		as RFA_EXPT_VER_SEQ
	   ,'V.P'               		as DMDT_EXPT_APRO_PATH_CD
	   ,T2.USR_ID           		as APRO_USR_ID
	   ,T2.OFC_CD					as APRO_OFC_CD
	   ,0							as DMDT_EXPT_APRO_AGN_ORD_NO
	   ,'N'       	        		as DMDT_EXPT_APRO_AGN_FLG
	   ,@[cre_usr_id]				as CRE_USR_ID
	   ,@[upd_usr_id]				as UPD_USR_ID	
	   
  from  (
				select  OFC_N3RD_LVL_CD  as OFC_CD																						  
				  from  DMT_OFC_LVL_V
				 where  OFC_N8TH_LVL_CD = @[cre_ofc_cd]
				   and  ROWNUM = 1
		) T1
	   ,(
			select  OFC_CD
				   ,USR_ID
			  from  COM_USER
			 where  PSN_ENG_NM = 'Managing Director(RHQ)'
			   and  USE_FLG = 'Y'

			union all

			select  decode(OFC_CD, 'SELSC', 'SELIB', 'TYOSC', 'TYOIB', 'VVOBA', 'VVOIA', '') as OFC_CD
				   ,USR_ID
			  from  COM_USER
			 where  PSN_ENG_NM in ('Branch MGR', 'Branch Manager')
			   and  USE_FLG = 'Y'	 
			   and  OFC_CD IN ('SELSC', 'TYOSC', 'VVOBA')  
		) T2
 where  T1.OFC_CD = T2.OFC_CD
   and  ROWNUM = 1			]]></sql>
			<params>
				<param name="rfa_expt_dar_no" type="12" value="1" out="N"/>
				<param name="rfa_expt_mapg_seq" type="12" value="1" out="N"/>
				<param name="rfa_expt_ver_seq" type="12" value="1" out="N"/>
				<param name="cre_usr_id" type="12" value="1" out="N"/>
				<param name="upd_usr_id" type="12" value="1" out="N"/>
				<param name="cre_ofc_cd" type="12" value="1" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
