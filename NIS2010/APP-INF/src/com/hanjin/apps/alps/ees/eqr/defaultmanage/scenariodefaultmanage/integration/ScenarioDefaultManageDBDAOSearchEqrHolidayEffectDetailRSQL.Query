<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ScenarioDefaultManageDBDAOSearchEqrHolidayEffectDetailRSQL">
			<desc><![CDATA[EQR_HOL_PERF 테이블의 상세 정보 조회]]></desc>
			<sql><![CDATA[
SELECT  
    (  																		
    SELECT 
        C.CNT_NM 
    FROM 
        EQR_HOL_PERF A 
        , EQR_HOLIDAY  C  					
    WHERE 
        A.HOL_PERF_YR = C.HOL_YR   									
        AND A.CNT_CD = C.CNT_CD  											
        AND A.RCC_DIV_FLG = C.RCC_DIV_FLG  								
        AND A.RCC_DIV_FLG = @[rcc_div_flg]  											
        AND A.CNT_CD  = @[cntcd]  												
        AND A.IO_BND_CD  = @[gubun] 									
        AND ROWNUM=1  													
    )  CNT_NM
    , D.INTG_CD_VAL_CTNT  			
    #foreach( ${key} in ${wkarr}) 
        , MAX(NVL(B.HOL_EFF_RTO,A.HOL_PERF_RTO))  WEEK$key 
    #end											

    , MAX(NVL(B.HOL_EFF_RTO,A.HOL_PERF_RTO))  RTO										
    , A.HOL_PERF_YR
    , A.CNT_CD
    , A.RCC_DIV_FLG
    , A.IO_BND_CD 
    , '' AS NBLK			   				
FROM   
    EQR_HOL_PERF A 
    , EQR_HOL_EFF_RTO  B 
    , COM_INTG_CD_DTL D					
WHERE 
    A.HOL_PERF_YR = B.HOL_YR(+)			    									
    AND A.CNT_CD = B.CNT_CD(+) 														
    AND A.RCC_DIV_FLG = B.RCC_DIV_FLG(+)   											
    AND A.WK_DY_CD = B.WK_DY_CD(+) 													
    AND A.IO_BND_CD = B.IO_BND_CD(+) 												
    AND A.IO_BND_CD(+) = @[gubun]  								  				
    AND A.RCC_DIV_FLG(+) = @[rcc_div_flg]   								 						
    AND A.CNT_CD(+) = @[cntcd]   								 							
    AND B.ST_DT(+) = @[stdt]   								 							
    AND A.WK_DY_CD(+) = D.INTG_CD_VAL_CTNT   								  		
    AND D.INTG_CD_ID = 'CD00131'  								  					
GROUP BY 
    A.CNT_CD
    , B.CNT_NM
    , D.INTG_CD_VAL_CTNT 
    , D.INTG_CD_VAL_DP_SEQ
    , A.HOL_PERF_YR
    , A.CNT_CD
    , A.RCC_DIV_FLG
    , A.IO_BND_CD						
ORDER BY 
    D.INTG_CD_VAL_DP_SEQ
    , A.CNT_CD			]]></sql>
			<params>
				<param name="rcc_div_flg" type="12" value="" out="N"/>
				<param name="cntcd" type="12" value="" out="N"/>
				<param name="gubun" type="12" value="" out="N"/>
				<param name="stdt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
