<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeCalculationDBDAOBeforeExceptionTariffVORSQL">
			<desc><![CDATA[Before Exception Tariff의 Free Time일수 및 주말, 공휴일 포함 여부를 조회한다]]></desc>
			<sql><![CDATA[
SELECT
	M.RQST_OFC_CD
	,(	SELECT USR_NM
		FROM COM_USER
		WHERE USR_ID = M.RQST_USR_ID
	) RQST_USR_NM
	,M.APRO_OFC_CD
	,(	SELECT USR_NM
		FROM COM_USER
		WHERE USR_ID = M.APRO_USR_ID
	) APRO_USR_NM
	,M.RFA_EXPT_APRO_NO AS SC_APVL_NO
	,M.RFA_EXPT_DAR_NO
	,D.ADD_DYS
	,D.TTL_DYS
	,D.XCLD_SAT_FLG
	,D.XCLD_SUN_FLG
	,D.XCLD_HOL_FLG
	,D.CURR_CD
	,DECODE( SUBSTR(@[cntr_tpsz_cd], 2, 1),
					'2', R.CNTR_20FT_RT_AMT,
					'4', R.CNTR_40FT_RT_AMT,
					'5', R.CNTR_HC_RT_AMT,
					'7', R.CNTR_45FT_RT_AMT,
                    '8', R.CNTR_R9_RT_AMT,
                    '9', R.CNTR_R9_RT_AMT   ) CNTR_FT_RT_AMT

	,'' SC_RFA_EXPT_APLY_DT
	,'' SC_RFA_EXPT_OVR_DYS
	,'' SC_RFA_EXPT_AMT
	,'' BZC_TRF_CURR_CD

FROM	DMT_RFA_EXPT_TRF_DTL	D,
		DMT_RFA_EXPT_TRF		M,
		DMT_RFA_EXPT_RT			R

WHERE	D.RFA_EXPT_DAR_NO		= @[rfa_expt_dar_no]
AND		D.RFA_EXPT_MAPG_SEQ		= @[rfa_expt_mapg_seq]
AND		D.RFA_EXPT_VER_SEQ		= @[rfa_expt_ver_seq]
AND     D.RFA_RQST_DTL_SEQ		= @[rfa_rqst_dtl_seq]
AND     D.RFA_EXPT_DAR_NO		= M.RFA_EXPT_DAR_NO
AND		D.RFA_EXPT_MAPG_SEQ		= M.RFA_EXPT_MAPG_SEQ
AND     D.RFA_EXPT_VER_SEQ		= M.RFA_EXPT_VER_SEQ
AND     D.RFA_EXPT_DAR_NO		= R.RFA_EXPT_DAR_NO(+)
AND		D.RFA_EXPT_MAPG_SEQ		= R.RFA_EXPT_MAPG_SEQ(+)
AND     D.RFA_EXPT_VER_SEQ   	= R.RFA_EXPT_VER_SEQ(+)
AND     D.RFA_RQST_DTL_SEQ    	= R.RFA_RQST_DTL_SEQ(+)
AND     D.CVRG_CMB_SEQ        	= R.CVRG_CMB_SEQ(+)
AND     R.RFA_EXPT_RT_SEQ(+)	= 1
AND     ROWNUM                	= 1			]]></sql>
			<params>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="rfa_expt_dar_no" type="12" value="" out="N"/>
				<param name="rfa_expt_mapg_seq" type="12" value="" out="N"/>
				<param name="rfa_expt_ver_seq" type="12" value="" out="N"/>
				<param name="rfa_rqst_dtl_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
