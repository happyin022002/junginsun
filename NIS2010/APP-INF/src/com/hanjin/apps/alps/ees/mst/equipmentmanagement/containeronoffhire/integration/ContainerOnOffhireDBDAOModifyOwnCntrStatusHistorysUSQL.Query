<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ContainerOnOffhireDBDAOModifyOwnCntrStatusHistorysUSQL">
			<desc><![CDATA[계약번호,제작일자 수정시에만]]></desc>
			<sql><![CDATA[
UPDATE MST_CNTR_STS_HIS A 
SET CNTR_STS_EVNT_DT = (SELECT DECODE(B.HJS_CRE_FLG,'Y',TO_DATE(@[mft_dt],'YYYY-MM-DD'),A.CNTR_STS_EVNT_DT)
                      FROM MST_CONTAINER B
                      WHERE A.CNTR_NO = B.CNTR_NO)
 , OFC_CD		    = @[ofc_cd]          
 , UPD_USR_ID		= @[upd_usr_id]
 , UPD_DT		    = SYSDATE
WHERE CNTR_NO BETWEEN @[fm_no]||'0' AND @[to_no]||'9'
AND    LENGTH(CNTR_NO) = 11
AND    CNTR_STS_CD IN('LSI','OWN')
AND    CNTR_STS_SEQ =(SELECT /*+ INDEX( B XAK1MST_CNTR_STS_HIS) */  B.CNTR_STS_SEQ
                     FROM MST_CNTR_STS_HIS B
                     WHERE A.CNTR_NO = B.CNTR_NO
                     AND   B.CNTR_STS_CD IN('LSI','OWN')
                     AND   ROWNUM =1)			]]></sql>
			<params>
				<param name="mft_dt" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="fm_no" type="12" value="" out="N"/>
				<param name="to_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
