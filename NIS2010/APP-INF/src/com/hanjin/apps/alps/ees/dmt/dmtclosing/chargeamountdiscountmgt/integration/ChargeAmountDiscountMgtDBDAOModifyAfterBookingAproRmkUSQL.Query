<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChargeAmountDiscountMgtDBDAOModifyAfterBookingAproRmkUSQL">
			<desc><![CDATA[ChargeAmountDiscountMgtDBDAOModifyAfterBookingAproRmk]]></desc>
			<sql><![CDATA[
MERGE INTO DMT_AFT_BKG_APRO_RMK RMK
  USING (
                SELECT @[aft_expt_dar_no] AS AFT_EXPT_DAR_NO
                     , @[aft_bkg_path_cd] AS AFT_BKG_PATH_CD
                     , @[seq] AS AFT_BKG_ITM_LVL
                     , CASE @[aft_bkg_path_cd] WHEN 'BBOPIC' THEN @[bbo_rslt]
                                               WHEN 'BBGMGR' THEN @[bbg_rslt]
                                               WHEN 'RHQPIC' THEN @[rhq_pic_rslt]
                                               WHEN 'RHQMGR' THEN @[rhq_mgr_rslt]
                                               WHEN 'HDOPIC' THEN @[ho_pic_rslt]
                                               WHEN 'HDOMGR' THEN @[ho_mgr_rslt]
                                               ELSE '' END AS DMDT_EXPT_RQST_STS_CD
                     , CASE @[aft_bkg_path_cd] WHEN 'BBOPIC' THEN @[bbo_cmt]
                                               WHEN 'BBGMGR' THEN @[bbg_cmt]
                                               WHEN 'RHQPIC' THEN @[rhq_pic_cmt]
                                               WHEN 'RHQMGR' THEN @[rhq_mgr_cmt]
                                               WHEN 'HDOPIC' THEN @[ho_pic_cmt]
                                               WHEN 'HDOMGR' THEN @[ho_mgr_cmt]
                                               ELSE '' END AS AFT_BKG_APRO_RMK
                FROM DUAL ) AA
  ON (      RMK.AFT_EXPT_DAR_NO =  AA.AFT_EXPT_DAR_NO
     AND    RMK.AFT_BKG_PATH_CD =  AA.AFT_BKG_PATH_CD
     AND    RMK.AFT_BKG_ITM_LVL =  AA.AFT_BKG_ITM_LVL
     )
  WHEN MATCHED THEN
    UPDATE
      SET RMK.DMDT_EXPT_RQST_STS_CD      =   AA.DMDT_EXPT_RQST_STS_CD
        , RMK.AFT_BKG_APRO_RMK      =   AA.AFT_BKG_APRO_RMK
        , UPD_USR_ID    =   @[upd_usr_id]
        , UPD_DT        =   sysdate
  WHEN NOT MATCHED THEN
    INSERT (AFT_EXPT_DAR_NO
          , AFT_BKG_PATH_CD
          , AFT_BKG_ITM_LVL
          , DMDT_EXPT_RQST_STS_CD
          , AFT_BKG_APRO_RMK
          , CRE_USR_ID
          , CRE_DT
          , UPD_USR_ID
          , UPD_DT )
    VALUES (
    		AA.AFT_EXPT_DAR_NO
          , AA.AFT_BKG_PATH_CD
          , AA.AFT_BKG_ITM_LVL
          , AA.DMDT_EXPT_RQST_STS_CD
          , AA.AFT_BKG_APRO_RMK
          , @[upd_usr_id]
          , SYSDATE
          , @[upd_usr_id]
          , SYSDATE
          
   )			]]></sql>
			<params>
				<param name="aft_expt_dar_no" type="12" value="" out="N"/>
				<param name="aft_bkg_path_cd" type="12" value="" out="N"/>
				<param name="seq" type="12" value="" out="N"/>
				<param name="bbo_rslt" type="12" value="" out="N"/>
				<param name="bbg_rslt" type="12" value="" out="N"/>
				<param name="rhq_pic_rslt" type="12" value="" out="N"/>
				<param name="rhq_mgr_rslt" type="12" value="" out="N"/>
				<param name="ho_pic_rslt" type="12" value="" out="N"/>
				<param name="ho_mgr_rslt" type="12" value="" out="N"/>
				<param name="bbo_cmt" type="12" value="" out="N"/>
				<param name="bbg_cmt" type="12" value="" out="N"/>
				<param name="rhq_pic_cmt" type="12" value="" out="N"/>
				<param name="rhq_mgr_cmt" type="12" value="" out="N"/>
				<param name="ho_pic_cmt" type="12" value="" out="N"/>
				<param name="ho_mgr_cmt" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
