<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CustMainDBDAOAddCustCodeCSQL">
			<desc><![CDATA[Cust Main Create]]></desc>
			<sql><![CDATA[
INSERT INTO MDM_CUSTOMER(
   CUST_CNT_CD
,  CUST_SEQ
,  CUST_LGL_ENG_NM
,  CUST_RGST_NO
,  NMD_CUST_FLG
,  LOC_CD
,  OFC_CD
,  SREP_CD
,  RVIS_CNTR_CUST_TP_CD
,  CTS_NO
,  CUST_GRP_ID
,  PRF_SVC_DESC
,  PRF_SVC_DTL_DESC
,  CMPT_DESC
,  SPCL_REQ_DESC
,  PRF_CNTR_TPSZ_CD
,  CRNT_VOL_KNT
,  NEW_KEY_ACCT_FLG
,  RGN_ACCT_FLG
,  CUST_RMK
,  BKG_ALT_RSN
,  bkg_alt_fm_dt
,  bkg_alt_to_dt
,  BKG_ALT_MSG
,  NVOCC_HJS_SCAC_CD
,  NVOCC_BD_NO
,  NVOCC_LIC_NO
,  NVOCC_BD_AMT
,  NVOCC_BD_ST_EFF_DT
,  NVOCC_BD_END_EFF_DT
,  CRE_USR_ID
,  CRE_DT
,  UPD_USR_ID
,  UPD_DT
,  DELT_FLG
,  CRM_ROW_ID
)
SELECT SUBSTR(MCR.LOC_CD,1,2)
,  NVL((SELECT MAX(CUST_SEQ) + 1 FROM MDM_CUSTOMER MC WHERE MC.CUST_CNT_CD = SUBSTR(MCR.LOC_CD,1,2)),1)
,  CUST_LGL_ENG_NM
,  CUST_RGST_NO
,  NMD_CUST_FLG
,  LOC_CD
,  OFC_CD
,  SREP_CD
,  RVIS_CNTR_CUST_TP_CD
,  CTS_NO
,  CUST_GRP_ID
,  PRF_SVC_DESC
,  PRF_SVC_DTL_DESC
,  CMPT_DESC
,  SPCL_REQ_DESC
,  PRF_CNTR_TPSZ_CD
,  CRNT_VOL_KNT
,  NEW_KEY_ACCT_FLG
,  RGN_ACCT_FLG
,  CUST_RMK
,  BKG_ALT_RSN
,  bkg_alt_fm_dt
,  bkg_alt_to_dt
,  BKG_ALT_MSG
,  NVOCC_HJS_SCAC_CD
,  NVOCC_BD_NO
,  NVOCC_LIC_NO
,  NVOCC_BD_AMT
,  NVOCC_BD_ST_EFF_DT
,  NVOCC_BD_END_EFF_DT
,  UPD_USR_ID
,  UPD_DT
,  UPD_USR_ID
,  UPD_DT
,  'N'
,  'I-'||MCR.MDM_CUSTOMER_RQST_SEQ
FROM MDM_CUSTOMER_RQST MCR
WHERE MCR.MDM_CUSTOMER_RQST_SEQ = @[rqst_no]
AND MCR.MST_RQST_STS_CD = 'P'
AND MCR.GRP_INDIV_DIV = 'I'
AND NOT EXISTS (SELECT 'X' 
                FROM MDM_CUSTOMER MC 
                WHERE MC.CRM_ROW_ID = MCR.GRP_INDIV_DIV||'-'||MCR.MDM_CUSTOMER_RQST_SEQ
                )
			]]></sql>
			<params>
				<param name="rqst_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
