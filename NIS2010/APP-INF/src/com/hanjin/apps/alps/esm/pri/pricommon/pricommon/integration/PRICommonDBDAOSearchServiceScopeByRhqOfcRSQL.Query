<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PRICommonDBDAOSearchServiceScopeByRhqOfcRSQL">
			<desc><![CDATA[RHQ 별 Service Scope 리스트 정보를 조회합니다.
2014.12.09 [CHM-201433135] [Add-on/IHC Tariff > SIN] 국가코드 ZA 추가]]></desc>
			<sql><![CDATA[
SELECT DISTINCT SCP.SVC_SCP_CD AS CD
              , SVC.SVC_SCP_NM AS NM
FROM   MDM_SVC_SCP_LMT SCP, MDM_REGION RGN, MDM_SVC_SCP SVC, AOC_TRF_CURR AOC_CURR,
        (
#if(${cd} == 'SHARC' || ${cd} == '')
        /* SHARC */
        SELECT 'SHARC' AS RHQ_CD, A.CONTI_CD , B.SCONTI_CD  , C.CNT_CD  , C.CNT_NM  
        FROM   MDM_CONTINENT A, MDM_SUBCONTINENT B, MDM_COUNTRY C
        WHERE  A.CONTI_CD = 'A'
        AND    A.DELT_FLG = 'N'
        AND    A.CONTI_CD = B.CONTI_CD
        AND    B.SCONTI_CD = 'AF'
        AND    B.DELT_FLG = 'N'
        AND    B.SCONTI_CD = C.SCONTI_CD
        AND    C.DELT_FLG = 'N'
        #if(${cd} == '')
            UNION ALL
        #end 
#end 
#if(${cd} == 'SINRS' || ${cd} == '')
        /* SINRS */
        SELECT 'SINRS' AS RHQ_CD, A.CONTI_CD, B.SCONTI_CD, C.CNT_CD, C.CNT_NM
        FROM   MDM_CONTINENT A, MDM_SUBCONTINENT B, MDM_COUNTRY C
        WHERE  A.CONTI_CD IN ('A', 'F')
        AND    A.DELT_FLG = 'N'
        AND    A.CONTI_CD = B.CONTI_CD
        AND    B.SCONTI_CD <> 'AF'
        AND    B.DELT_FLG = 'N'
        AND    B.SCONTI_CD = C.SCONTI_CD
        AND    C.DELT_FLG = 'N'
        #if(${cd} == '')
            UNION ALL
        #end 
#end
#if(${cd} == 'NYCRA' || ${cd} == '')
        /* NYCRA */
        SELECT 'NYCRA' AS RHQ_CD, A.CONTI_CD, B.SCONTI_CD, C.CNT_CD, C.CNT_NM
        FROM   MDM_CONTINENT A, MDM_SUBCONTINENT B, MDM_COUNTRY C
        WHERE  A.CONTI_CD = 'M'
        AND    A.DELT_FLG = 'N'
        AND    A.CONTI_CD = B.CONTI_CD
        AND    B.DELT_FLG = 'N'
        AND    B.SCONTI_CD = C.SCONTI_CD
        AND    C.DELT_FLG = 'N'
        #if(${cd} == '')
            UNION ALL
        #end 
#end
#if(${cd} == 'HAMRU' || ${cd} == '')
        /* HAMRU */
        SELECT 'HAMRU' AS RHQ_CD, A.CONTI_CD, B.SCONTI_CD, C.CNT_CD, C.CNT_NM
        FROM   MDM_CONTINENT A, MDM_SUBCONTINENT B, MDM_COUNTRY C
        WHERE  A.CONTI_CD IN ('E', 'F')
        AND    A.DELT_FLG = 'N'
        AND    A.CONTI_CD = B.CONTI_CD
        AND    B.DELT_FLG = 'N'
        AND    B.SCONTI_CD = C.SCONTI_CD
        AND    C.DELT_FLG = 'N'
#end    
        ) RHQ
WHERE  SCP.DELT_FLG = 'N'
AND    SCP.RGN_CD   = RGN.RGN_CD
AND    RGN.DELT_FLG = 'N'
AND    RGN.CNT_CD   = RHQ.CNT_CD
AND    SCP.SVC_SCP_CD = SVC.SVC_SCP_CD
AND    RGN.CNT_CD = AOC_CURR.CNT_CD
AND    RHQ.RHQ_CD = AOC_CURR.RHQ_CD
AND    SCP.ORG_DEST_CD = @[etc1]
AND NOT ( 
	(RHQ.RHQ_CD = 'HAMRU' AND SCP.ORG_DEST_CD = 'D' and  SVC.SVC_SCP_CD = 'AEE' and RHQ.CNT_CD = 'EG')
	OR (RHQ.RHQ_CD = 'HAMRU' AND SCP.ORG_DEST_CD = 'D' and  SVC.SVC_SCP_CD = 'AEF' and RHQ.CNT_CD = 'EG')
	OR (RHQ.RHQ_CD = 'HAMRU' AND SCP.ORG_DEST_CD = 'D' and  SVC.SVC_SCP_CD = 'AEE' and RHQ.CNT_CD = 'EG')
	OR (RHQ.RHQ_CD = 'HAMRU' AND SCP.ORG_DEST_CD = 'D' and  SVC.SVC_SCP_CD = 'IAA' and RHQ.CNT_CD = 'EG')
	OR (RHQ.RHQ_CD = 'HAMRU' AND SCP.ORG_DEST_CD = 'O' and  SVC.SVC_SCP_CD = 'IAA' and RHQ.CNT_CD = 'EG')
	OR (RHQ.RHQ_CD = 'HAMRU' AND SCP.ORG_DEST_CD = 'D' and  SVC.SVC_SCP_CD = 'FES' and RHQ.CNT_CD = 'EG')
	OR (RHQ.RHQ_CD = 'HAMRU' AND SCP.ORG_DEST_CD = 'O' and  SVC.SVC_SCP_CD = 'FEN' and RHQ.CNT_CD = 'EG')
)
#if(${etc2} != '')
    AND RHQ.CNT_CD IN ( #foreach(${key} in ${list_cnt_cd})
                                #if($velocityCount < $list_cnt_cd.size())
                                    '$key', 
                                #else  
                                    '$key'
                                #end 
                         #end )
#end
ORDER BY SCP.SVC_SCP_CD			]]></sql>
			<params>
				<param name="etc1" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
