<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SCNoteConversionProposalDBDAOPriSpScpNoteConvAmendDSQL">
			<desc><![CDATA[amend시 conversion 날짜가 amend날짜에 포함되어 있지 않은 경우는 삭제]]></desc>
			<sql><![CDATA[
DELETE FROM PRI_SC_NOTE_CONV
#if (${is_master_delete} == 'N') 
 WHERE NOTE_CONV_MAPG_ID = @[note_conv_mapg_id]

   #if (${action_mode} == '11')
   AND NOTE_CONV_RULE_CD != 'APP'
   #end

   #if (${action_mode} == '11' || ${action_mode} == '8')
   AND (EFF_DT > TO_DATE(@[exp_dt], 'YYYYMMDD') OR EXP_DT < TO_DATE(@[eff_dt], 'YYYYMMDD'))
   #end

#elseif (${is_master_delete} == 'Y') 
 WHERE NOTE_CONV_MAPG_ID IN (
		SELECT NOTE_CONV_MAPG_ID
		  FROM PRI_SP_SCP_NOTE_CTNT
		 WHERE PROP_NO 				= @[prop_no]
		   AND AMDT_SEQ 			= @[amdt_seq]
		   AND SVC_SCP_CD 			= @[svc_scp_cd]
		   AND NOTE_TP_CD 			= @[note_tp_cd]
		   AND NOTE_SEQ 			= @[note_seq]
		   AND N1ST_CMNC_AMDT_SEQ	= @[amdt_seq]
     )
#end			]]></sql>
			<params>
				<param name="note_conv_mapg_id" type="12" value="" out="N"/>
				<param name="exp_dt" type="12" value="" out="N"/>
				<param name="eff_dt" type="12" value="" out="N"/>
				<param name="prop_no" type="12" value="" out="N"/>
				<param name="amdt_seq" type="12" value="" out="N"/>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="note_tp_cd" type="12" value="" out="N"/>
				<param name="note_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
