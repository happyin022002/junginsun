<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLIssuanceDBDAOsearchDblEdiChgDtl1RSQL">
			<desc><![CDATA[select]]></desc>
			<sql><![CDATA[
SELECT '{CHARGE_TTL' || CHR(10) 
       || 'PPD_TOTAL:' || SUM(DECODE(RATE.FRT_TERM_CD, 'P', DECODE(CHG_AMT, 'USD', RATE.CHG_AMT
                                                                          , ROUND(RATE.CHG_AMT/USD_LOCL_XCH_RT, 2))
                                                     , 0)) || CHR(10) 
       || 'CCT_TOTAL:' || SUM(DECODE(RATE.FRT_TERM_CD, 'C', DECODE(CHG_AMT, 'USD', RATE.CHG_AMT
                                                                          , ROUND(RATE.CHG_AMT/USD_LOCL_XCH_RT, 2))
                                                     , 0)) || CHR(10) 
       || 'TOTAL_CUR:' || 'USD' || CHR(10) 
       || 'LCL_TOT_AMT:' || CHR(10) 
       || 'CGO_RCV_DT:'  || CHR(10) 
       || 'ACT_CUST:' || CHR(10) 
       || '}CHARGE_TTL'|| CHR(10)
FROM   BKG_CHG_RT RATE, GL_MON_XCH_RT ACCT
WHERE  RATE.BKG_NO = @[bkg_no]
   AND RATE.FRT_INCL_XCLD_DIV_CD = 'N'
   AND ACCT.ACCT_XCH_RT_YRMON = (SELECT TO_CHAR (BL_OBRD_DT, 'YYYYMM')
                                 FROM   BKG_BL_DOC
                                 WHERE  BKG_NO = @[bkg_no])
   AND ACCT.ACCT_XCH_RT_LVL = '1'
   AND ACCT.CURR_CD = RATE.CURR_CD
GROUP BY RATE.FRT_TERM_CD, RATE.CURR_CD			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
