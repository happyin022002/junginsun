<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AGTCommDBDAODeductionTotalInfoVORSQL">
			<desc><![CDATA[ESM_AGT_0012  화면의 DeductionTotalInfo 조회]]></desc>
			<sql><![CDATA[
SELECT 
	RATE_TYPE, 
	OFFICE_CD, 
	CUST_PAYER
  FROM (SELECT 
			1 AS SEQ, 
			'PPD at' AS RATE_TYPE, 
			NVL(CLT_OFC_CD,' ') AS OFFICE_CD,
			NVL(PPD_PAYR_CNT_CD,' ')||REPLACE(TO_CHAR(PPD_PAYR_CUST_SEQ,'FM000000'),'000000',' ') AS	CUST_PAYER
		  FROM BKG_RATE
		 WHERE BKG_NO = @[bkg_no]
		UNION
		SELECT 
			2 AS SEQ, 
			'CCT at',	
			NVL(CLT_OFC_CD,' ')	AS OFFICE_CD,
			NVL(CLT_PAYR_CNT_CD,' ')||REPLACE(TO_CHAR(CLT_PAYR_CUST_SEQ,'FM000000'),'000000',' ') AS	CUST_PAYER
		  FROM BKG_RATE
		 WHERE BKG_NO = @[bkg_no]
		UNION
		SELECT 
			DISTINCT 3 AS SEQ, 
					'3rd	Party at', 
					B.AR_OFC_CD AS OFFICE_CD,
			   		NVL(N3PTY_CUST_CNT_CD,' ')||REPLACE(TO_CHAR(N3PTY_CUST_SEQ,'FM000000'),'000000',' ')	AS CUST_PAYER
		  FROM BKG_CHG_RT A, AGT_AGN_COMM B
		 WHERE A.BKG_NO		= @[bkg_no]
		 AND A.BKG_NO =	B.BKG_NO
		   AND A.PRN_HDN_FLG =	'N'
		   AND A.CURR_CD = B.CURR_CD
	   )
 WHERE RTRIM(CUST_PAYER) IS	NOT	NULL			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="Y"/>
			</params>
		</query>
	</querys>
</sqls>
