<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RFAProposalMainDBDAOSearchProposalRequestIhcRateCheckRSQL">
			<desc><![CDATA[Rate - Request시 
 Rate탭에 Guide 값이 0이 존재하는지 여부 체크]]></desc>
			<sql><![CDATA[
SELECT TRS_JOIN_FNC(CURSOR (SELECT DISTINCT A.SVC_SCP_CD || '-'||'Bullet No.'||H.BLET_DP_SEQ||'-'
                                   ||CASE WHEN NVL(A.FIC_ORG_PROP_RT_AMT, 0) = 0 AND R.ORG_CY_DOR_RT_TP_CD = 'D' THEN 'Origin'
                                          WHEN NVL(A.FIC_DEST_PROP_RT_AMT, 0) = 0 AND R.DEST_CY_DOR_RT_TP_CD = 'D' THEN 'Destination'
                                     END
                       FROM PRI_RP_SCP_RT           A,
                            PRI_RP_SCP_RT_CMDT_HDR  H,
                            PRI_RP_SCP_RT_CMDT_ROUT R
                      WHERE A.PROP_NO = @[prop_no]
                        AND A.AMDT_SEQ = @[amdt_seq]
                        AND A.N1ST_CMNC_AMDT_SEQ = A.AMDT_SEQ
                        AND A.PROP_NO = R.PROP_NO
                        AND A.AMDT_SEQ = R.AMDT_SEQ
                        AND A.SVC_SCP_CD = R.SVC_SCP_CD
                        AND A.CMDT_HDR_SEQ = R.CMDT_HDR_SEQ
                        AND A.ROUT_SEQ = R.ROUT_SEQ
                        AND A.PROP_NO = H.PROP_NO
                        AND A.AMDT_SEQ = H.AMDT_SEQ
                        AND A.SVC_SCP_CD = H.SVC_SCP_CD
                        AND H.FIC_RT_TP_CD = 'A'
                        AND NVL(A.FIC_PROP_RT_AMT, 0) = 0
                        AND ((NVL(A.FIC_ORG_PROP_RT_AMT, 0) = 0 AND
                            R.ORG_CY_DOR_RT_TP_CD = 'D') OR
                            (NVL(A.FIC_DEST_PROP_RT_AMT, 0) = 0 AND
                            R.DEST_CY_DOR_RT_TP_CD = 'D')))) RSLT
  FROM DUAL			]]></sql>
			<params>
				<param name="prop_no" type="12" value="" out="N"/>
				<param name="amdt_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
