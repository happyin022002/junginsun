<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RevenueDebitNoteDBDAOBkgRevDrNoteVOExistRevDrNoteRSQL">
			<desc><![CDATA[진행중인 RDN 번호를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT  MAX(RDN_NO) RDN_NO
FROM    (
        SELECT  RDN_NO    ,
                RDN_STS_CD
        FROM    BKG_REV_DR_NOTE A
        WHERE   RDN_KND_CD = @[rdn_knd_cd]
#if (${bkg_no} != '')
        AND     BKG_NO    = @[bkg_no]
#end
#if (${inv_no} != '')
        AND     INV_NO    = @[inv_no]
#end
#if (${vvd_cd} != '')
        AND     VVD_CD    = @[vvd_cd]
#end
#if (${bkg_no} == '' && ${inv_no} == '' && ${vvd_cd} == '')
        AND     RDN_NO    = @[rdn_no]
#end
        AND     NOT EXISTS  (
                            SELECT  'X'
                            FROM  BKG_REV_DR_NOTE B
                            WHERE B.RDN_NO    = A.RDN_NO
                            AND   B.RVIS_SEQ  > A.RVIS_SEQ
                            )
        )
WHERE   RDN_STS_CD  NOT IN ( 'ST', 'CL', 'CV' )			]]></sql>
			<params>
				<param name="rdn_knd_cd" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="inv_no" type="12" value="" out="N"/>
				<param name="vvd_cd" type="12" value="" out="N"/>
				<param name="rdn_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
