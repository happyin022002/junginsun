<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="FACCommCalculationDBDAOSearchInvFACMasterRSQL">
			<desc><![CDATA[Invoice FAC Master 정보 조회 - INV 모듈 담당자 확인 받은 쿼리]]></desc>
			<sql><![CDATA[
SELECT ACM.FAC_STS_CD, NVL(DOC.BL_CVRD_TP_CD, 'N') COVERED_CHECK, NVL(DOC.MST_CVRD_BL_NO,'N')	BKG_NO
,(  SELECT NVL(SUM(B.CHG_AMT),0) * -1
    FROM   INV_AR_MN A, 
           INV_AR_CHG B
    WHERE A.AR_IF_NO = B.AR_IF_NO
    AND   A.BL_SRC_NO = @[bkg_no]     --Sample'AAR300006100'
    AND   A.AR_OFC_CD = ACM.AR_OFC_CD --Sample'AARBA'
    AND   A.INV_DELT_DIV_CD <> 'Y'
    AND   A.REV_TP_CD <> 'M'
    AND   B.CHG_CD = 'FAC'
) AS CRNT_AMT
FROM ACM_FAC_COMM ACM, BKG_BL_DOC DOC
WHERE ACM.BKG_NO = @[bkg_no]
AND ACM.BKG_NO = DOC.BKG_NO(+)			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
