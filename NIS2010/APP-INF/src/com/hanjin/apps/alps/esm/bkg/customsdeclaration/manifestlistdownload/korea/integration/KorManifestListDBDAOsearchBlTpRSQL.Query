<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="KorManifestListDBDAOsearchBlTpRSQL">
			<desc><![CDATA[BL TYPE 조회]]></desc>
			<sql><![CDATA[
SELECT DECODE( BCO_FLG, 'X', DECODE(CUST_NM_FLG, 'Y','S','C') , BCO_FLG) BL_TP  
FROM 
  (SELECT CUST.BKG_NO
          , CUST.CUST_NM
          , CUST.CUST_CNT_CD
          , CUST.CUST_SEQ
          , MDM.RVIS_CNTR_CUST_TP_CD
          , DECODE( MDM.RVIS_CNTR_CUST_TP_CD, 'B', 'S', 'N', 'C', 'X') AS BCO_FLG
          ,(SELECT 'Y'
              FROM BKG_CUSTOMER BCUST
             WHERE BCUST.BKG_CUST_TP_CD = CUST.BKG_CUST_TP_CD
               AND BCUST.BKG_NO = CUST.BKG_NO
               AND ( TRIM(UPPER(BCUST.CUST_NM)) LIKE 'TO ORDER%'
                   OR TRIM(UPPER(BCUST.CUST_NM)) LIKE 'TO THE ORDER%'
                   )
               AND ROWNUM =1
           ) CUST_NM_FLG
    FROM BKG_CUSTOMER CUST 
         , MDM_CUSTOMER MDM
    WHERE CUST.CUST_CNT_CD = MDM.CUST_CNT_CD(+)
    AND CUST.CUST_SEQ =  MDM.CUST_SEQ(+)
    AND CUST.BKG_CUST_TP_CD ='C'
    AND CUST.BKG_NO = @[bkg_no]
)			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
