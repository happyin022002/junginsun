<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="UsaCustomsTransmissionDBDAOsearchCntrMfLineOBRSQL">
			<desc><![CDATA[UsaCustomsTransmissionDBDAOsearchCntrMfLineOBRSQL]]></desc>
			<sql><![CDATA[
SELECT NVL(CMDT_GDS_SEQ,'00') cmd_seq, NVL(HAMO_CMDT_CD,' ') icm_ht_cd,
		SUBSTR(TO_CHAR(GRS_WGT*20,'09999999'),2) icm_wgt_val,
		SUBSTR(TO_CHAR(GRS_WGT,'0999999999'),2) icm_wgt_qty,
		NVL(SUBSTR(WGT_UT_CD, 1, 2),'KG') icm_wgt_tp,
		SUBSTR(TO_CHAR(PCK_QTY,'0999999999'),2) icm_pkg_qty,
        DECODE(NVL(CGO_DESC,' '),' ',SUBSTR(BKG_SPCLCHAR_CONV_FNC(Translate(NVL(@[cmdt_desc],' '),CHR(13)||CHR(10),' '),'X'),1,45)
       ,SUBSTR(BKG_SPCLCHAR_CONV_FNC(Translate(NVL(CGO_DESC,' '),CHR(13)||CHR(10),' '),'X'),1,45)) icm_desc
FROM (
        SELECT B.BKG_NO, 
           M.CNTR_NO,    
           M.CNTR_MF_SEQ AS CMDT_GDS_SEQ,
           UPPER(decode(M.CNTR_MF_GDS_DESC,null,C.CMDT_NM,M.CNTR_MF_GDS_DESC)) AS CGO_DESC,
           M.PCK_QTY,  
           M.CNTR_MF_WGT AS GRS_WGT,
           NVL(M.WGT_UT_CD,'KGS') AS WGT_UT_CD,
           SUBSTR(TRIM(M.HAMO_TRF_CD),1,10) AS HAMO_CMDT_CD
    FROM    BKG_BOOKING B, 
            BKG_CONTAINER T,
            BKG_CNTR_MF_DESC M, 
            MDM_COMMODITY C
    WHERE   B.BKG_NO  = T.BKG_NO
    AND     T.CNTR_NO = M.CNTR_NO
    AND     T.BKG_NO  = M.BKG_NO
    AND     B.CMDT_CD = C.CMDT_CD
    AND     B.BKG_NO = @[bl_no]
    AND     T.CNTR_NO = TRIM(@[cntr_no])
    )			]]></sql>
			<params>
				<param name="cmdt_desc" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
