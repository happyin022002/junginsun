<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="LaneSimulationDBDAOSearchSimReportNoListRSQL">
			<desc><![CDATA[report no 조회]]></desc>
			<sql><![CDATA[
WITH SUB_SIM_RMK AS (
	SELECT  SIM_RPT_NO,  REPLACE(WM_CONCAT(SIM_RMK),',',' ') SIM_RMK
	  FROM (
    	SELECT SECT_NO, SIM_RPT_NO, SIM_RMK FROM COA_SIM_RPT_MST
    	 WHERE SIM_DT = @[f_sim_dt]
    	   AND SIM_NO = @[f_sim_no]
    	   AND SECT_NO IN (
        		SELECT SECT_NO FROM COA_SIM_SVC_LANE 
         		 WHERE 1=1
           		   AND SIM_DT  = @[f_sim_dt]
           		   AND SIM_NO  = @[f_sim_no]
     			#if(${f_trd_cd} != '')
       		   	   AND TRD_CD  = @[f_trd_cd]
     			#end 
			   )
		 ORDER BY SECT_NO
    		)
	  GROUP BY SIM_RPT_NO
)

SELECT DISTINCT A.SIM_RPT_NO CODE
     , NVL(B.SIM_RMK, ' ') NAME
  FROM COA_SIM_RPT_MST A, SUB_SIM_RMK B 
 WHERE A.SIM_RPT_NO = B.SIM_RPT_NO(+)
   AND A.SIM_DT = @[f_sim_dt]
   AND A.SIM_NO = @[f_sim_no]
 ORDER BY A.SIM_RPT_NO			]]></sql>
			<params>
				<param name="f_sim_dt" type="12" value="" out="N"/>
				<param name="f_sim_no" type="12" value="" out="N"/>
				<param name="f_trd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
