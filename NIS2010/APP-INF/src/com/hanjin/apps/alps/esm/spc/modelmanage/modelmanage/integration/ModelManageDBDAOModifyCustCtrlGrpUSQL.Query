<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ModelManageDBDAOModifyCustCtrlGrpUSQL">
			<desc><![CDATA[Trade, 조회주차에 해당하는 Season의 Yield Group 정보를 수정, 저장합니다]]></desc>
			<sql><![CDATA[
MERGE INTO SPC_MDL_CUST_CTRL_GRP T
USING (
         SELECT @[trd_cd]         AS TRD_CD
               ,@[cost_yrwk]      AS COST_YRWK
               ,@[cust_ctrl_cd] || @[cust_ctrl_sub_cd] AS CUST_CTRL_CD
               ,@[cust_ctrl_desc] AS CUST_CTRL_DESC
               ,@[upd_usr_id]     AS USR_ID
               ,SYSDATE           AS DT
           FROM DUAL
      ) C
  ON (
             T.TRD_CD       = C.TRD_CD
         AND T.COST_YRWK    = C.COST_YRWK
         AND T.CUST_CTRL_CD = C.CUST_CTRL_CD
     )
 WHEN MATCHED THEN
    UPDATE
       SET T.CUST_CTRL_DESC = C.CUST_CTRL_DESC
          ,T.UPD_USR_ID     = C.USR_ID
          ,T.UPD_DT         = C.DT
 WHEN NOT MATCHED THEN
    INSERT (
              T.TRD_CD
             ,T.COST_YRWK
             ,T.CUST_CTRL_CD
             ,T.CUST_CTRL_DESC
             ,T.CRE_USR_ID
             ,T.CRE_DT
             ,T.UPD_USR_ID
             ,T.UPD_DT
           )
    VALUES (
              C.TRD_CD
             ,C.COST_YRWK
             ,C.CUST_CTRL_CD
             ,C.CUST_CTRL_DESC
             ,C.USR_ID
             ,C.DT
             ,C.USR_ID
             ,C.DT
           )			]]></sql>
			<params>
				<param name="trd_cd" type="12" value="" out="N"/>
				<param name="cost_yrwk" type="12" value="" out="N"/>
				<param name="cust_ctrl_cd" type="12" value="" out="N"/>
				<param name="cust_ctrl_sub_cd" type="12" value="" out="N"/>
				<param name="cust_ctrl_desc" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
