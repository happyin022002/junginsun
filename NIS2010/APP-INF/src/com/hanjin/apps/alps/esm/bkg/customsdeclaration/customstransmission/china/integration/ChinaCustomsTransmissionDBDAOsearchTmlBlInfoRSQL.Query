<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChinaCustomsTransmissionDBDAOsearchTmlBlInfoRSQL">
			<desc><![CDATA[TmlBlVO]]></desc>
			<sql><![CDATA[
SELECT  BKG.BL_NO    BL_NO
	   ,BKG.BKG_NO   BKG_NO
	   ,BKG.POL_CD   BL_POL    
	   ,POL.LOC_NM   BL_POL_NAME
	   ,BKG.POD_CD   BL_POD
	   ,POD.LOC_NM   BL_POD_NAME 
	   ,BKG.DEL_CD   BL_DEL  
	   ,DEL.LOC_NM   BL_DEL_NAME 
	   ,SUBSTR(REPLACE(REPLACE(SHPR.CUST_NM, CHR(10), ''), CHR(13), ' '),1,100) SHPR
	   ,SUBSTR(REPLACE(REPLACE(CNEE.CUST_NM, CHR(10), ''), CHR(13), ' '),1,100) CNEE
	   ,SUBSTR(REPLACE(REPLACE(NTFY.CUST_NM, CHR(10), ''), CHR(13), ' '),1,100) NTFY   
	   ,NVL(NVL((SELECT CSTMS_DESC FROM BKG_BL_DOC WHERE BKG_NO = BKG.BKG_NO),CMDT.CMDT_NM), RCMDT.REP_CMDT_NM) CGO_DESC
FROM    BKG_BOOKING BKG, 
        MDM_LOCATION POL, 
        MDM_LOCATION POD, 
        MDM_LOCATION DEL,
        BKG_CUSTOMER SHPR, 
        BKG_CUSTOMER CNEE, 
        BKG_CUSTOMER NTFY, 
        MDM_COMMODITY CMDT, 
        MDM_REP_CMDT RCMDT
WHERE 1=1
  AND BKG.POL_CD = POL.LOC_CD(+)
  AND BKG.POD_CD = POD.LOC_CD(+)
  AND BKG.DEL_CD = DEL.LOC_CD(+)
  AND BKG.BKG_NO = SHPR.BKG_NO(+)
  AND SHPR.BKG_CUST_TP_CD(+) = 'S'
  AND BKG.BKG_NO = CNEE.BKG_NO(+)
  AND CNEE.BKG_CUST_TP_CD(+) = 'C'
  AND BKG.BKG_NO = NTFY.BKG_NO(+)
  AND NTFY.BKG_CUST_TP_CD(+) = 'N'
  AND BKG.cmdt_cd = CMDT.cmdt_cd(+)
  AND BKG.REP_CMDT_CD = RCMDT.REP_CMDT_CD(+)
  AND BKG.BKG_STS_CD <> 'X'
  AND ( #foreach($field_id in ${field_list})                                                                                                               
      		#if($velocityCount > 1)                                                                                                                          
      		OR #end      BKG.BKG_NO IN ( $field_id )                                                                                                              
    	#end 
  )			]]></sql>
			<params>
			</params>
		</query>
	</querys>
</sqls>
