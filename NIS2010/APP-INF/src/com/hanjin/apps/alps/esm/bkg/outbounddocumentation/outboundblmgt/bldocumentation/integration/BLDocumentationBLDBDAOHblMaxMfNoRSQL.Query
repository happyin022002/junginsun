<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationBLDBDAOHblMaxMfNoRSQL">
			<desc><![CDATA[select]]></desc>
			<sql><![CDATA[
#if (${ca_flg} == 'Y')  
SELECT /*+ ordered use_nl(a1 a2)*/
       MAX(A2.CNTR_MF_NO) AS MF_NO
  FROM BKG_BKG_HIS A1
      ,BKG_HBL_HIS A2
 WHERE A1.BL_NO LIKE NVL((SELECT SUBSTR(BL_NO, 1, LENGTH(BL_NO) - 3)
                            FROM BKG_BKG_HIS
                           WHERE BKG_NO = @[bkg_no]
                             AND CORR_NO = 'TMP0000001'), 'xxxxxxxxxxxxxxxxxxxx') || '%'
   AND A1.BKG_NO = A2.BKG_NO
   AND A1.CORR_NO = A2.CORR_NO
#else 
SELECT /*+ ordered use_nl(a1 a2)*/
       MAX(A2.CNTR_MF_NO) AS MF_NO
  FROM BKG_BOOKING A1
      ,BKG_HBL A2
 WHERE A1.BL_NO LIKE NVL((SELECT SUBSTR(BL_NO, 1, LENGTH(BL_NO) - 3)
                            FROM BKG_BOOKING
                           WHERE BKG_NO = @[bkg_no]), 'xxxxxxxxxxxxxxxxxxxx') || '%'
   AND A1.BKG_NO = A2.BKG_NO
#end			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="KORZC055229" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
