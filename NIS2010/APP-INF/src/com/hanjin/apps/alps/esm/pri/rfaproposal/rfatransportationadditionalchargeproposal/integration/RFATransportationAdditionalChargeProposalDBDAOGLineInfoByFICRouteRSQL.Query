<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RFATransportationAdditionalChargeProposalDBDAOGLineInfoByFICRouteRSQL">
			<desc><![CDATA[Route 정보를 이용하여 Guideline 정보를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT REGEXP_SUBSTR(FIC_RT_USE_STS_CD, '[^|]+', 1, 1) FIC_RT_USE_STS_CD
     , REGEXP_SUBSTR(FIC_RT_USE_STS_CD, '[^|]+', 1, 2) FIC_ROUT_CMB_TP_CD
     , REGEXP_SUBSTR(FIC_RT_USE_STS_CD, '[^|]+', 1, 3) OPTM_TRSP_MOD_FLG
     , TRIM(REGEXP_SUBSTR(FIC_RT_USE_STS_CD, '[^|]+', 1, 4)) FIC_GLINE_RT_AMT
     , TRIM(REGEXP_SUBSTR(FIC_RT_USE_STS_CD, '[^|]+', 1, 5)) FIC_LOCL_CURR_CD
     , TRIM(REGEXP_SUBSTR(FIC_RT_USE_STS_CD, '[^|]+', 1, 6)) FIC_GLINE_LOCL_RT_AMT
     , TO_CHAR(SYSDATE, 'YYYYMMDD') FIC_GLINE_UPD_DT
	 , '' AS PRC_CGO_TP_CD
	, '' AS AMDT_SEQ
	, '' AS SVC_SCP_CD
	, '' AS ROUT_PNT_LOC_DEF_CD
	, '' AS RAT_UT_CD
	, '' AS PROP_FRT_RT_AMT
	, '' AS BSE_PORT_DEF_CD
	, '' AS EFF_DT
	, '' AS TRF_NO
	, '' AS PRC_TRSP_MOD_CD
	, '' AS RCV_DE_TERM_CD
	, '' AS EXP_DT 
	, '' AS CURR_CD
FROM (
    SELECT 
#if(${add_on_flag} == 'Y')
	PRI_ADDON_RATE_CALCULATE_PKG.PRI_getFICArbRateByRoute_FNC(@[eff_dt],@[svc_scp_cd], @[org_dest_tp_cd],
                                                                   @[rout_pnt_loc_def_cd],
                                                                   @[bse_port_def_cd],
                                                                   @[rcv_de_term_cd],
                                                                   @[prc_trsp_mod_cd],
                                                                   NVL(@[rat_ut_cd], 'D2'),
                                                                   NVL(@[prc_cgo_tp_cd], 'RF'))  FIC_RT_USE_STS_CD, 'A' AS CD
#else
	PRI_FIC_RATE_CALCULATE_PKG.PRI_getFICArbRateByRoute_FNC(@[eff_dt],@[svc_scp_cd],
                                                                   @[rout_pnt_loc_def_cd],
                                                                   @[bse_port_def_cd],
                                                                   @[rcv_de_term_cd],
                                                                   @[prc_trsp_mod_cd],
                                                                   NVL(@[rat_ut_cd], 'D2'),
                                                                   NVL(@[prc_cgo_tp_cd], 'RF'))  FIC_RT_USE_STS_CD , 'A' AS CD
#end
    FROM DUAL
	UNION ALL
	SELECT '', 'B' 
	FROM DUAL
)
WHERE CD = 'A'			]]></sql>
			<params>
				<param name="eff_dt" type="12" value="" out="N"/>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="org_dest_tp_cd" type="12" value="" out="N"/>
				<param name="rout_pnt_loc_def_cd" type="12" value="" out="N"/>
				<param name="bse_port_def_cd" type="12" value="" out="N"/>
				<param name="rcv_de_term_cd" type="12" value="" out="N"/>
				<param name="prc_trsp_mod_cd" type="12" value="" out="N"/>
				<param name="rat_ut_cd" type="12" value="" out="N"/>
				<param name="prc_cgo_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
