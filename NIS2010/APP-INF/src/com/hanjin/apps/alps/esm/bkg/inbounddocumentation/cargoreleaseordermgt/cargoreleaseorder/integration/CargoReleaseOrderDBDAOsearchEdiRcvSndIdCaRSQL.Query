<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CargoReleaseOrderDBDAOsearchEdiRcvSndIdCaRSQL">
			<desc><![CDATA[...]]></desc>
			<sql><![CDATA[
SELECT 'CA' AS EDI_MSG_ID, E.EDI_RCV_ID, E.EDI_SND_ID, E.YD_CD
  FROM BKG_CGO_RLSE     A,
       BKG_BOOKING      B,
       BKG_VVD          C,
       VSK_VSL_PORT_SKD D,
       BKG_EDI_YD       E
 WHERE A.BL_NO       = @[bl_no]
   AND A.BL_NO       = B.BL_NO
   AND B.BKG_NO      = C.BKG_NO
   AND C.VSL_CD      = D.VSL_CD
   AND C.SKD_VOY_NO  = D.SKD_VOY_NO
   AND C.SKD_DIR_CD  = D.SKD_DIR_CD
   AND D.VPS_PORT_CD LIKE 'US%'  
   AND C.SLAN_CD     = D.SLAN_CD
   AND D.VPS_PORT_CD = @[pod_cd]
   AND SUBSTR(E.YD_CD,6) = NVL( @[bkg_pod_yd_cd] , SUBSTR(E.YD_CD,6) )
   AND D.YD_CD       = E.YD_CD
   AND (E.FULL_RLSE_EDI_CD = '1' OR E.FULL_RLSE_EDI_CD = '2')
   AND ROWNUM	      = 1
   AND 'CA1'    = @[edi_knd]
UNION
SELECT 'CA' AS EDI_MSG_ID, E.EDI_RCV_ID, E.EDI_SND_ID, E.YD_CD
  FROM BKG_CGO_RLSE     A,
       BKG_BOOKING      B,
       BKG_VVD          C,
       VSK_VSL_PORT_SKD D,
       BKG_EDI_YD       E
 WHERE A.BL_NO       = @[bl_no]
   AND A.BL_NO       = B.BL_NO
   AND B.BKG_NO      = C.BKG_NO
   AND C.VSL_CD      = D.VSL_CD
   AND C.SKD_VOY_NO  = D.SKD_VOY_NO
   AND C.SKD_DIR_CD  = D.SKD_DIR_CD
   AND D.VPS_PORT_CD LIKE 'US%'  
   AND C.SLAN_CD     = D.SLAN_CD
   AND D.VPS_PORT_CD = @[pod_cd]
   AND SUBSTR(E.YD_CD,6) = NVL( @[bkg_pod_yd_cd] , SUBSTR(E.YD_CD,6) )
   AND D.YD_CD       = E.YD_CD
   AND E.FULL_RLSE_EDI_CD = '2'
   AND ROWNUM	= 1
   AND 'CA2'    = @[edi_knd]			]]></sql>
			<params>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
				<param name="bkg_pod_yd_cd" type="12" value="" out="N"/>
				<param name="edi_knd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
