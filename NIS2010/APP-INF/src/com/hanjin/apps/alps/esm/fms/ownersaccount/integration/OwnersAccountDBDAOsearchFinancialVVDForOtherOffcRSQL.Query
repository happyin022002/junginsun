<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OwnersAccountDBDAOsearchFinancialVVDForOtherOffcRSQL">
			<desc><![CDATA[PUSMOV를 제외한 Office를 위한 재무항차 및 ETD 조회]]></desc>
			<sql><![CDATA[
SELECT V.VSL_CD,
       V.SKD_VOY_NO,
       V.SKD_DIR_CD,
       L.RLANE_DIR_CD,
       TO_CHAR(V.VPS_ETD_DT,'YYYY-MM-DD') VPS_ETD_DT
FROM VSK_VSL_PORT_SKD V,
    AR_MST_REV_VVD L
WHERE 1 = 1
  AND V.VSL_CD                 = L.VSL_CD
  AND V.SKD_VOY_NO             = L.SKD_VOY_NO
  AND V.SKD_DIR_CD             = L.SKD_DIR_CD
  AND V.SLAN_CD                = L.SLAN_CD
  AND V.VSL_CD                 = substr(@[vvd_cd], 1, 4)
  AND V.SKD_VOY_NO             = substr(@[vvd_cd], 5, 4)
  AND V.SKD_DIR_CD             = substr(@[vvd_cd], 9, 1)
  AND V.VPS_PORT_CD            = @[oa_loc_cd]
  AND NVL(V.SKD_CNG_STS_CD,'X') <> 'S'
  AND NVL(L.DELT_FLG, 'N') = 'N'
  AND EXISTS (SELECT 'OK'
              FROM   FMS_CONTRACT C
              WHERE  1 = 1
                AND  C.VSL_CD = V.VSL_CD
                AND  C.FLET_CTRT_TP_CD = 'TI')			]]></sql>
			<params>
				<param name="vvd_cd" type="12" value="" out="N"/>
				<param name="oa_loc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
