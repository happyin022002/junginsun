<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="NetworkCostDBDAOMultiBunkerTariffCSQL">
			<desc><![CDATA[MultiBunkerTariff INSERT
[CHM-201215754-01] [COA] Bunker Fee 화면 개발 건 쿼리 변경 ]]></desc>
			<sql><![CDATA[
MERGE INTO COA_BNK_TRF A
 USING (
       SELECT 
           @[cost_yrmon]    AS COST_YRMON
          ,@[slan_cd]       AS SLAN_CD
          ,@[rlane_cd]      AS RLANE_CD
          ,@[slan_dir_cd]   AS SLAN_DIR_CD
          ,NVL(@[vsl_clss_capa], 0) AS VSL_CLSS_CAPA
		  ,@[cost_wk]		AS COST_WK
         FROM DUAL
      ) B
 ON (
         A.COST_YRMON    = B.COST_YRMON
     AND A.SLAN_CD       = B.SLAN_CD
     AND A.RLANE_CD      = B.RLANE_CD
     AND A.SLAN_DIR_CD   = B.SLAN_DIR_CD
     AND A.VSL_CLSS_CAPA = B.VSL_CLSS_CAPA
	 AND A.COST_WK		 = B.COST_WK
    )
 WHEN MATCHED THEN
      UPDATE
         SET  FOIL_CSM      = @[foil_csm]
             ,FOIL_UC_AMT   = @[foil_uc_amt]
             ,DOIL_CSM      = @[doil_csm]
             ,DOIL_UC_AMT   = @[doil_uc_amt]
             ,UPD_USR_ID    = @[upd_usr_id]
             ,UPD_DT        = SYSDATE
 WHEN NOT MATCHED THEN
      INSERT(
             COST_YRMON
            ,SLAN_CD
            ,RLANE_CD
            ,SLAN_DIR_CD
            ,VSL_CLSS_CAPA
            ,FOIL_CSM
            ,FOIL_UC_AMT
            ,DOIL_CSM
            ,DOIL_UC_AMT
            ,CRE_USR_ID
            ,CRE_DT
            ,UPD_USR_ID
            ,UPD_DT
			,COST_WK
      )VALUES(
             @[cost_yrmon]
            ,@[slan_cd]
            ,@[rlane_cd]
            ,@[slan_dir_cd]
            ,NVL(@[vsl_clss_capa], 0)
            ,@[foil_csm]
            ,@[foil_uc_amt]
            ,@[doil_csm]
            ,@[doil_uc_amt]
            ,@[cre_usr_id]
            ,SYSDATE
            ,@[upd_usr_id]
            ,SYSDATE
            ,@[cost_wk]
      )			]]></sql>
			<params>
				<param name="cost_yrmon" type="12" value="" out="N"/>
				<param name="slan_cd" type="12" value="" out="Y"/>
				<param name="rlane_cd" type="12" value="" out="Y"/>
				<param name="slan_dir_cd" type="12" value="" out="N"/>
				<param name="vsl_clss_capa" type="12" value="" out="N"/>
				<param name="cost_wk" type="12" value="" out="N"/>
				<param name="foil_csm" type="12" value="" out="Y"/>
				<param name="foil_uc_amt" type="12" value="" out="Y"/>
				<param name="doil_csm" type="12" value="" out="Y"/>
				<param name="doil_uc_amt" type="12" value="" out="Y"/>
				<param name="upd_usr_id" type="12" value="" out="Y"/>
				<param name="cre_usr_id" type="12" value="" out="Y"/>
			</params>
		</query>
	</querys>
</sqls>
