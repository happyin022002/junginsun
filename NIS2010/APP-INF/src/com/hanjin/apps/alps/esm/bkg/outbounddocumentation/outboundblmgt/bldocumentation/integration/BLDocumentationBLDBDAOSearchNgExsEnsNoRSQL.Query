<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationBLDBDAOSearchNgExsEnsNoRSQL">
			<desc><![CDATA[나이지리아가 POL 일 때 (아웃바운드) EXS 값이 있는지 확인 (M&D의 Export&Import 팝업)
나이지리아가 POD 일 때 (인바운드) ENS 값이 있는지 확인 (M&D의 Export&Import 팝업)

effective date가 application date(rate) 기준 2016년 이후로 해당 로직 적용]]></desc>
			<sql><![CDATA[
SELECT  
decode((select 'Y'from bkg_vvd where bkg_no = @[bkg_no]and pol_cd like 'NG%' AND ROWNUM = 1), 'Y','Y','N') pol_cd,
decode((select 'Y'from bkg_vvd where bkg_no = @[bkg_no]and pod_cd like 'NG%' AND ROWNUM = 1), 'Y','Y','N') pod_cd,
nvl((
     SELECT NG_EXS_ENS_NO
     FROM BKG_VVD A, BKG_XPT_IMP_LIC B
     WHERE A.BKG_NO = B.BKG_NO
     AND A.POL_CD LIKE 'NG%'
     AND A.BKG_NO = @[bkg_no]
     AND IO_BND_CD = 'O'
     AND NG_EXS_ENS_NO is not null
     AND ROWNUM = 1
),'') EXS,
nvl((
     SELECT NG_EXS_ENS_NO
     FROM BKG_VVD A, BKG_XPT_IMP_LIC B
     WHERE A.BKG_NO = B.BKG_NO
     AND A.POD_CD LIKE 'NG%'
     AND A.BKG_NO = @[bkg_no]
     AND IO_BND_CD = 'I'
     AND NG_EXS_ENS_NO is not null
     AND ROWNUM = 1
),'') ENS,
decode((select 'Y' from bkg_rate where bkg_no = @[bkg_no] and to_char(RT_APLY_DT,'yyyy') = '2016'),'Y','Y','N') eff_dt    
FROM DUAL			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
