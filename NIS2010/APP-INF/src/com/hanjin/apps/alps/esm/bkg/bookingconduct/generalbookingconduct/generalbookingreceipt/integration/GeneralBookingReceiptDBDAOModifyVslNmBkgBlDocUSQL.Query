<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOModifyVslNmBkgBlDocUSQL">
			<desc><![CDATA[Group VVD/Assign 시 변경된 VVD를 BKG_BL_DOC에도 적용]]></desc>
			<sql><![CDATA[
UPDATE BKG_BL_DOC
SET VSL_NM = (
                SELECT M.VSL_ENG_NM||' '||SKD_VOY_NO||SKD_DIR_CD NEW_VVD
                FROM BKG_VVD V,
                     MDM_VSL_CNTR M
                WHERE V.BKG_NO = @[bkg_no]
                  AND V.VSL_PRE_PST_CD = 'T'
                  AND V.VSL_CD = M.VSL_CD
              ) 
  ,PRE_VSL_NM = (
                SELECT M.VSL_ENG_NM||' '||SKD_VOY_NO||SKD_DIR_CD NEW_PRE_VVD
                FROM BKG_VVD V
	                ,MDM_VSL_CNTR M
                WHERE V.BKG_NO = @[bkg_no]
	              AND V.VSL_PRE_PST_CD = 'S'
                  AND V.VSL_CD = M.VSL_CD
				  AND V.VSL_SEQ = 1
              )
WHERE BKG_NO = @[bkg_no]			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
