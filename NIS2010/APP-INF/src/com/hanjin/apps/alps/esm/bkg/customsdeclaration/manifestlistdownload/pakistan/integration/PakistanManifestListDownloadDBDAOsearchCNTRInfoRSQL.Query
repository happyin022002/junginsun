<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PakistanManifestListDownloadDBDAOsearchCNTRInfoRSQL">
			<desc><![CDATA[파키스탄 세관 신고를 위한 CNTR Info]]></desc>
			<sql><![CDATA[
SELECT MAIN.M_BKG_NO AS BKG_NO
     , MAIN.CNTR_NO
     , MAIN.CNTR_TPSZ_CD
     , MF.CMDT_HS_CD
     , (SELECT CSTMS_DESC FROM BKG_BL_DOC WHERE BKG_NO = MAIN.M_BKG_NO )CNTR_MF_GDS_DESC
     , (SELECT CNTR_SEAL_NO FROM BKG_CNTR_SEAL_NO 
         WHERE BKG_NO = MAIN.M_BKG_NO AND CNTR_NO = MAIN.CNTR_NO
           AND ROWNUM = 1 ) AS CNTR_SEAL_NO
     , MF.PCK_QTY
     , MF.PCK_TP_CD
     , MF.CNTR_MF_WGT
     , MF.WGT_UT_CD
     , MF.MEAS_QTY
     , MF.MEAS_UT_CD
     , (SELECT PCK_NM FROM MDM_PCK_TP WHERE PCK_CD = MF.PCK_TP_CD) AS PCK_NM
     , MAIN.SOC_FLG
	 , ( SELECT IMDG_UN_NO 
           FROM BKG_DG_CGO 
          WHERE BKG_NO = MAIN.BKG_NO 
            AND CNTR_NO = MAIN.CNTR_NO 
            AND ROWNUM = 1 ) AS IMDG_UN_NO
	 , ( SELECT IMDG_CLSS_CD
           FROM BKG_DG_CGO 
          WHERE BKG_NO = MAIN.BKG_NO 
            AND CNTR_NO = MAIN.CNTR_NO 
            AND ROWNUM = 1 ) AS IMDG_CLSS_CD
FROM BKG_CNTR_MF_DESC MF
, ( SELECT BKG.BKG_NO M_BKG_NO, CNTR.* 
      FROM BKG_BOOKING BKG
         , BKG_VVD VVD
         , BKG_CONTAINER CNTR
     WHERE 1=1
       AND BKG.BKG_NO = CNTR.BKG_NO(+)
       AND BKG.BKG_NO = VVD.BKG_NO
       AND BKG.BKG_STS_CD != 'X'
       AND VVD.VSL_CD		= SUBSTR(@[vvd_cd], 1, 4)
       AND VVD.SKD_VOY_NO	= SUBSTR(@[vvd_cd], 5, 4)
       AND VVD.SKD_DIR_CD	= SUBSTR(@[vvd_cd], 9, 1)
  
#if (${pod_cd} != '')
       AND VVD.POD_CD = @[pod_cd]
#end 
#if (${pol_cd} != '') 
       AND VVD.POL_CD = @[pol_cd]
#end
   ) MAIN
WHERE 1=1
  AND MAIN.M_BKG_NO = MF.BKG_NO(+)
  AND MAIN.CNTR_NO = MF.CNTR_NO(+)			]]></sql>
			<params>
				<param name="vvd_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
