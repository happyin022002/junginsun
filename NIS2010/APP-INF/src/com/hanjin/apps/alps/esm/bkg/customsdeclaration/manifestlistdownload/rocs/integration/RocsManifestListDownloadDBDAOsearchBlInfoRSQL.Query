<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RocsManifestListDownloadDBDAOsearchBlInfoRSQL">
			<desc><![CDATA[ROCS(ROTTERDAM) 세관 신고용 B/L 일반 정보를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT BL.BKG_NO, BL.BL_NO, BL.FAX_NO,BL.CUST_EML,
       REGEXP_SUBSTR(BL.SHPR_ADDR, '[^'||@[dif_chr]||']*') SHPR_ADDR1,
       SUBSTR(BL.SHPR_ADDR,REGEXP_INSTR(BL.SHPR_ADDR,'['||@[dif_chr]||']')+2) SHPR_ADDR2,
       REGEXP_SUBSTR(BL.CNEE_ADDR, '[^'||@[dif_chr]||']*') CNEE_ADDR1,
       SUBSTR(BL.CNEE_ADDR,REGEXP_INSTR(BL.CNEE_ADDR,'['||@[dif_chr]||']')+2) CNEE_ADDR2,
       REGEXP_SUBSTR(BL.NTFY_ADDR, '[^'||@[dif_chr]||']*') NTFY_ADDR1,
       SUBSTR(BL.NTFY_ADDR,REGEXP_INSTR(BL.NTFY_ADDR,'['||@[dif_chr]||']')+2) NTFY_ADDR2,
       VSL.VSL_CD, VSL.SKD_VOY_NO, VSL.SKD_DIR_CD, BL.FRT_TERM_CD, BL.T1_DOC_CD,
       VSL.VSL_CD||VSL.SKD_VOY_NO||VSL.SKD_DIR_CD vvd_number,
       BL.FRT_TERM_CD, BL.T1_DOC_CD,
	   BL.SHPR_CNT_CD, 
	   BL.SHPR_CUST_SEQ,
	   BL.CNEE_CNT_CD,
	   BL.CNEE_CUST_SEQ,
	   BL.NTFY_CNT_CD,
	   BL.NTFY_CUST_SEQ,
	   BL.SHPR_EORI_NO,
	   BL.SHPR_CTY_NM,
	   BL.SHPR_CSTMS_DECL_CNT_CD,
 	   BL.SHPR_ZIP_ID,
	   BL.SHPR_ST_NM,
	   BL.CNEE_EORI_NO,
	   BL.CNEE_CTY_NM,
	   BL.CNEE_CSTMS_DECL_CNT_CD,
 	   BL.CNEE_ZIP_ID,
	   BL.CNEE_ST_NM,
	   BL.NTFY_EORI_NO,
	   BL.NTFY_CTY_NM,
	   BL.NTFY_CSTMS_DECL_CNT_CD,
 	   BL.NTFY_ZIP_ID,
	   BL.NTFY_ST_NM
FROM	 BKG_CSTMS_RTM_BL BL, BKG_CSTMS_RTM_VSL VSL
#if (${bl_no} == '' && ${frm_crn_number}!= '') 	
              WHERE   BL.VSL_CALL_REF_NO       = @[frm_crn_number] 
#end
#if (${bl_no}!= '' && ${frm_crn_number} == '') 	
              WHERE BL.BL_NO = SUBSTR(@[bl_no],0,12) 
#end
#if (${bl_no}!= '' && ${frm_crn_number} != '') 
              WHERE BL.BL_NO = SUBSTR(@[bl_no],0,12) 
              AND   BL.VSL_CALL_REF_NO       = @[frm_crn_number]	 
#end
#if (${bl_tp_cd}!= '')
              AND   BL_TP_CD = @[bl_tp_cd]
#end
AND BL.VSL_CD = VSL.VSL_CD
AND BL.SKD_VOY_NO= VSL.SKD_VOY_NO
AND BL.SKD_DIR_CD = VSL.SKD_DIR_CD
AND	 BL.VSL_CALL_REF_NO = VSL.VSL_CALL_REF_NO			]]></sql>
			<params>
				<param name="dif_chr" type="12" value="@@" out="N"/>
				<param name="frm_crn_number" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="bl_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
