<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOModifyPreviousSIRequestStatusUSQL">
			<desc><![CDATA[Interface로 Upload된 정보 PreviousStatus Update]]></desc>
			<sql><![CDATA[
UPDATE BKG_XTER_RQST_MST
SET BKG_UPLD_STS_CD = 'D'
    , UPD_USR_ID = 'HOMEPAGE'
    , UPD_DT = sysdate
	, RQST_DELT_FLG = 'Y'
    , XTER_RQST_STS_USR_ID = 'HOMEPAGE'
    , XTER_RQST_STS_CD = 'D'
    , XTER_RQST_STS_UPD_DT = SYSDATE
WHERE XTER_SNDR_ID = @[sender_id]
AND XTER_RQST_NO = @[rqst_no]
AND XTER_RQST_SEQ < @[rqst_seq]
AND NVL(BKG_UPLD_STS_CD,'N') = 'N'
AND NVL(SYS_UPLD_FLG,'N') = 'N'
AND DOC_TP_CD IN ('S','U')
AND NOT EXISTS (SELECT 1 FROM BKG_XTER_RQST_MST WHERE BKG_NO=@[bkg_no] AND XTER_SNDR_ID <> @[sender_id] AND DOC_TP_CD IN ('S','U'))			]]></sql>
			<params>
				<param name="sender_id" type="12" value="" out="N"/>
				<param name="rqst_no" type="12" value="" out="N"/>
				<param name="rqst_seq" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
