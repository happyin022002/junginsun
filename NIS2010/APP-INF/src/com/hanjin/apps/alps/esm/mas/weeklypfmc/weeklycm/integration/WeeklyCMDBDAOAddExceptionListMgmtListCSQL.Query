<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WeeklyCMDBDAOAddExceptionListMgmtListCSQL">
			<desc><![CDATA[Exception List Unit 저장]]></desc>
			<sql><![CDATA[
MERGE INTO MAS_CHSS_EXPT_LIST A
     USING
          (
	      SELECT @[cost_yrmon]       AS COST_YRMON,
	             @[sc_no]            AS SC_NO,
	             @[scc_cd]           AS SCC_CD,
	             @[ctrt_seq]         AS CTRT_SEQ,
	             @[cmdt_cd]          AS CMDT_CD,         
                 @[act_shpr_cnt_cd]  AS ACT_SHPR_CNT_CD,
                 @[act_shpr_seq]     AS ACT_SHPR_SEQ,
                 @[cost_expt_flg]    AS COST_EXPT_FLG,
           	     @[cre_usr_id]       AS CRE_USR_ID
	        FROM DUAL
          ) T
        ON (
            T.COST_YRMON    = A.COST_YRMON    AND
            T.SC_NO         = A.SC_NO         AND
            T.SCC_CD        = A.SCC_CD        AND
            T.CTRT_SEQ      = A.CTRT_SEQ
           )
      WHEN MATCHED THEN
           	UPDATE SET
				A.CMDT_CD = @[cmdt_cd],
				A.ACT_SHPR_CNT_CD = @[act_shpr_cnt_cd],
				A.ACT_SHPR_SEQ = @[act_shpr_seq],
				A.COST_EXPT_FLG = @[cost_expt_flg],
				A.UPD_USR_ID = @[upd_usr_id],
				A.UPD_DT = SYSDATE
      WHEN NOT MATCHED THEN
           	INSERT (
			    COST_YRMON,
			    SC_NO,
			    SCC_CD,
			    CTRT_SEQ,
			    CMDT_CD,
			    ACT_SHPR_CNT_CD,
			    ACT_SHPR_SEQ,
			    COST_EXPT_FLG,
			    DELT_FLG,
			    CRE_USR_ID,
			    CRE_DT,
			    UPD_USR_ID,
			    UPD_DT
			)
			VALUES (
			    @[cost_yrmon],
			    @[sc_no],
			    @[scc_cd],
			    @[ctrt_seq],
			    @[cmdt_cd],
			    @[act_shpr_cnt_cd],
			    @[act_shpr_seq],
			    @[cost_expt_flg],
			    'N',
			    @[upd_usr_id],
			    SYSDATE,
			    @[upd_usr_id],	
			    SYSDATE
			)			]]></sql>
			<params>
				<param name="cost_yrmon" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="scc_cd" type="12" value="" out="N"/>
				<param name="ctrt_seq" type="12" value="" out="N"/>
				<param name="cmdt_cd" type="12" value="" out="N"/>
				<param name="act_shpr_cnt_cd" type="12" value="" out="N"/>
				<param name="act_shpr_seq" type="12" value="" out="N"/>
				<param name="cost_expt_flg" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
