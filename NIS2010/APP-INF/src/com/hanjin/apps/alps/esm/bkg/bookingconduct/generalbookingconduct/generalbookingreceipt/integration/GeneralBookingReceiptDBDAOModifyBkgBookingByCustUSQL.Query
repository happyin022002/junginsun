<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOModifyBkgBookingByCustUSQL">
			<desc><![CDATA[Customer화면에서 Booking정보를 수정한다.]]></desc>
			<sql><![CDATA[
#if (${ca_flg}== 'Y') 
UPDATE BKG_BKG_HIS SET
#else
UPDATE BKG_BOOKING SET
#end
	AGMT_ACT_CNT_CD = @[agmt_act_cnt_cd]
   ,AGMT_ACT_CUST_SEQ = @[agmt_act_cust_seq]
   ,KR_CSTMS_CUST_TP_CD = NVL(@[kr_cstms_cust_tp_cd],
								(SELECT NVL2(BHCC.ATTR_CTNT1,'C',DECODE(RVIS_CNTR_CUST_TP_CD, 'B', 'S', 'C'))
								 FROM MDM_CUSTOMER MC
								     ,BKG_HRD_CDG_CTNT BHCC
#if (${ca_flg}== 'Y')
								     ,BKG_CUST_HIS BC
							     WHERE BC.BKG_NO = @[bkg_no]
                                 AND   BC.CORR_NO = 'TMP0000001'
#else
								     ,BKG_CUSTOMER BC
							     WHERE BC.BKG_NO = @[bkg_no]
#end
								 AND BC.BKG_CUST_TP_CD = 'S'
								 AND BC.CUST_CNT_CD = MC.CUST_CNT_CD
								 AND BC.CUST_SEQ = MC.CUST_SEQ
								 AND BHCC.HRD_CDG_ID(+) = 'KR_PANTOS_CUSTOMER'
								 AND BC.CUST_CNT_CD = BHCC.ATTR_CTNT1(+)
								 AND BC.CUST_SEQ = BHCC.ATTR_CTNT2(+)
                                 AND ROWNUM = 1
                                 ))
   ,CUST_TO_ORD_FLG = @[cust_to_ord_flg]
   ,SAM_CNEE_NTFY_FLG = NVL(@[sam_cnee_ntfy_flg], 'N')
   ,INDIV_PSON_FLG = @[indiv_pson_flg]
   ,OB_SLS_OFC_CD = (SELECT OFC_CD FROM MDM_SLS_REP WHERE UPPER(SREP_CD) = UPPER(@[ob_srep_cd]))
   ,OB_SREP_CD = @[ob_srep_cd]
   ,UPD_USR_ID = @[upd_usr_id]
   ,UPD_DT = SYSDATE
WHERE BKG_NO = @[bkg_no]
#if (${ca_flg}== 'Y')
AND   CORR_NO = 'TMP0000001'
#end			]]></sql>
			<params>
				<param name="agmt_act_cnt_cd" type="12" value="" out="N"/>
				<param name="agmt_act_cust_seq" type="12" value="" out="N"/>
				<param name="kr_cstms_cust_tp_cd" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cust_to_ord_flg" type="12" value="" out="N"/>
				<param name="sam_cnee_ntfy_flg" type="12" value="" out="N"/>
				<param name="indiv_pson_flg" type="12" value="" out="N"/>
				<param name="ob_srep_cd" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
