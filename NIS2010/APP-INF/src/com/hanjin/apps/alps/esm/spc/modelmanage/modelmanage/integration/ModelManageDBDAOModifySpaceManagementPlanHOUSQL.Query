<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ModelManageDBDAOModifySpaceManagementPlanHOUSQL">
			<desc><![CDATA[기존재하는 HO 정보를 수정합니다.
RHQ, OFC ADD해서 저장하는데 동일하게 삭제된 RHQ, OFC가 있을경우 DELT_FLG도 함께 업데이트 해줌.
1) RHQ LOAD GUIDE를 수정한 경우 산하 OFC, LANE 모두 업데이트.
2) OFC LOAD GUIDE를 수정한 경우 산하 LANE 모두 업데이트.
[CHM-201322502-01] SPC 프로젝트 - 성수기 선복운영 개선을 위한 T/F추진
2014.02.04 [CHM-201428383-01] RFA 로직 추가
2014.05.16 [CHM-201430353] SMP / AES 보완요청 - SC 입력 기능 추가]]></desc>
			<sql><![CDATA[
UPDATE SPC_MDL_CUST_REV_LANE
   SET CUST_BKG_QTY    = TO_NUMBER(@[cust_qty])     * DECODE(@[unit], 'T', 1, 2)
     , CUST_ADJ_QTY    = TO_NUMBER(@[cust_adj_qty]) * DECODE(@[unit], 'T', 1, 2)
     , SUB_TRD_ADJ_QTY = TO_NUMBER(@[strd_adj_qty]) * DECODE(@[unit], 'T', 1, 2)
#if (${type} == 'Y')
     , DELT_FLG        = NVL(@[delt_flg], 'N')
#end
     , UPD_USR_ID      = @[usr_id]
     , UPD_DT          = SYSDATE
   --office delete했다가 다시 add하는 경우 spc_ctrl_mdl_mnl_cd = 'O'
     , SPC_CTRL_MDL_MNL_CD  = DECODE(@[spc_ctrl_mdl_mnl_cd], 'O', @[spc_ctrl_mdl_mnl_cd], SPC_CTRL_MDL_MNL_CD)
     , SPC_CTRL_MDL_MNL_RMK = DECODE(@[spc_ctrl_mdl_mnl_cd], 'O', SPC_CTRL_MDL_MNL_RMK||'['||TO_CHAR(SYSDATE,'YYYYMMDD')||'|'||@[usr_id]||'|OFC REUSE]', SPC_CTRL_MDL_MNL_RMK)
     , RHQ_UPD_USR_ID = DECODE(@[spc_ctrl_mdl_mnl_cd], 'O', 'INIT' , DECODE(@[g1_cng_usr], 'USER', DECODE(@[ho_flg], 'Y', @[usr_id], RHQ_UPD_USR_ID), RHQ_UPD_USR_ID))
     , RHQ_UPD_DT     = DECODE(@[spc_ctrl_mdl_mnl_cd], 'O', SYSDATE, DECODE(@[g1_cng_usr], 'USER', DECODE(@[ho_flg], 'Y', SYSDATE,   RHQ_UPD_DT)    , RHQ_UPD_DT))
     , OFC_UPD_USR_ID = DECODE(@[spc_ctrl_mdl_mnl_cd], 'O', 'INIT' , DECODE(@[g2_cng_usr], 'USER', DECODE(@[ho_flg], 'Y', @[usr_id], OFC_UPD_USR_ID), OFC_UPD_USR_ID))
     , OFC_UPD_DT     = DECODE(@[spc_ctrl_mdl_mnl_cd], 'O', SYSDATE, DECODE(@[g2_cng_usr], 'USER', DECODE(@[ho_flg], 'Y', SYSDATE,   OFC_UPD_DT)    , OFC_UPD_DT))
   WHERE COST_YRWK        = @[cost_yrwk]
     AND VER_SEQ          = @[ver_seq]
     AND TRD_CD           = @[trd_cd]
     AND SUB_TRD_CD       = @[sub_trd_cd]
     AND SLS_RHQ_CD       = @[sls_rhq_cd]
     AND SLS_RGN_OFC_CD   = @[sls_rgn_ofc_cd]
     AND CTRT_OFC_CD      = @[ctrt_ofc_cd]
     AND CUST_CNT_CD      = @[cust_cnt_cd]
     AND CUST_SEQ         = @[cust_seq]
     AND NVL(SC_NO , 'X') = NVL(@[sc_no] , NVL(SC_NO, 'X'))
     AND NVL(RFA_NO, 'X') = NVL(@[rfa_no], 'X')			]]></sql>
			<params>
				<param name="cust_qty" type="12" value="" out="N"/>
				<param name="unit" type="12" value="" out="N"/>
				<param name="cust_adj_qty" type="12" value="" out="N"/>
				<param name="strd_adj_qty" type="12" value="" out="N"/>
				<param name="delt_flg" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="spc_ctrl_mdl_mnl_cd" type="12" value="" out="N"/>
				<param name="g1_cng_usr" type="12" value="" out="N"/>
				<param name="ho_flg" type="12" value="" out="N"/>
				<param name="g2_cng_usr" type="12" value="" out="N"/>
				<param name="cost_yrwk" type="12" value="" out="N"/>
				<param name="ver_seq" type="12" value="" out="N"/>
				<param name="trd_cd" type="12" value="" out="N"/>
				<param name="sub_trd_cd" type="12" value="" out="N"/>
				<param name="sls_rhq_cd" type="12" value="" out="N"/>
				<param name="sls_rgn_ofc_cd" type="12" value="" out="N"/>
				<param name="ctrt_ofc_cd" type="12" value="" out="N"/>
				<param name="cust_cnt_cd" type="12" value="" out="N"/>
				<param name="cust_seq" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="rfa_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
