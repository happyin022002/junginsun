<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ConstraintMasterDBDAOAddFixedFlagInfoByPriErrLogCSQL">
			<desc><![CDATA[Pri에서 Fixed Flag가 체크된 계약의 계약NO를 I/F 받다가 에러시 Log를 남긴다.]]></desc>
			<sql><![CDATA[
MERGE INTO SPC_ALOC_CTRL_OPT_IF ORG 
    USING ( 
            SELECT
                   (SELECT DISTINCT SC_NO FROM PRI_SP_HDR WHERE PROP_NO = @[prop_no]) SC_NO
                  ,@[prop_no] PROP_NO
                  ,@[amdt_seq] AMDT_SEQ
             FROM DUAL
          ) TMP
          ON (
                  ORG.SC_NO     = TMP.SC_NO
              AND ORG.PROP_NO   = TMP.PROP_NO
              AND ORG.AMDT_SEQ  = TMP.AMDT_SEQ
            )
           WHEN MATCHED THEN
                UPDATE SET ORG.UPD_DT = SYSDATE
           WHEN NOT MATCHED THEN 
                INSERT (SC_NO
                       ,PROP_NO
                       ,AMDT_SEQ
                       ,CRE_USR_ID
                       ,CRE_DT
                       ,UPD_USR_ID
                       ,UPD_DT
                       )
                 VALUES(
                         (SELECT DISTINCT SC_NO FROM PRI_SP_HDR WHERE PROP_NO = @[prop_no])
                        ,@[prop_no]
                        ,@[amdt_seq]
                        ,'SPC_USER'
                        ,SYSDATE
                        ,'SPC_USER'
                        ,SYSDATE
                        )			]]></sql>
			<params>
				<param name="prop_no" type="12" value="" out="N"/>
				<param name="amdt_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
