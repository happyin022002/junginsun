<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TCharterIOInvoiceDBDAOSlipApprovalCancelInvoiceUSQL">
			<desc><![CDATA[용선/대선 전표가 취소 되면 Invoice 에 전표번호가 Null 로 변경된다]]></desc>
			<sql><![CDATA[
UPDATE FMS_INV_DTL SET 
	SLP_TP_CD = NULL
,	SLP_FUNC_CD = NULL
,	SLP_OFC_CD = NULL
,	SLP_ISS_DT = NULL
,	SLP_SER_NO = NULL
,	UPD_USR_ID = @[upd_usr_id]
,	UPD_DT = SYSDATE 
WHERE	SLP_TP_CD 	= SUBSTR(@[csr_no],1,2)
AND		SLP_FUNC_CD = SUBSTR(@[csr_no],3,1)
AND		SLP_OFC_CD 	= DECODE(LENGTH(@[csr_no]), 19, SUBSTR(@[csr_no], 4, 5), SUBSTR(@[csr_no], 4, 6))
AND		SLP_ISS_DT 	= DECODE(LENGTH(@[csr_no]), 19, SUBSTR(@[csr_no], 9, 6), SUBSTR(@[csr_no], 10, 6))
AND		SLP_SER_NO 	= DECODE(LENGTH(@[csr_no]), 19, SUBSTR(@[csr_no], 15, 5), SUBSTR(@[csr_no], 16, 5))			]]></sql>
			<params>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="csr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
