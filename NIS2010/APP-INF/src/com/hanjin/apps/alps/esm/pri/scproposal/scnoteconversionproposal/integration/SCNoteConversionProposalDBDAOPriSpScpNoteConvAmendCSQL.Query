<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SCNoteConversionProposalDBDAOPriSpScpNoteConvAmendCSQL">
			<desc><![CDATA[amend cancel 시 이전 mapping id에 해당하는 데이터를 조회해서 insert한다.]]></desc>
			<sql><![CDATA[
INSERT INTO PRI_SC_NOTE_CONV
(
	   NOTE_CONV_MAPG_ID
	 , NOTE_CONV_SEQ
	 , NOTE_CONV_TP_CD
	 , SVC_SCP_CD
	 , PROP_NO
	 , AMDT_SEQ
	 , CHG_RULE_TP_CD
	 , NOTE_CONV_CHG_CD
	 , NOTE_CONV_RULE_CD
	 , EFF_DT
	 , EXP_DT
	 , RT_APPL_TP_CD
	 , RT_OP_CD
	 , CURR_CD
	 , FRT_RT_AMT
	 , PAY_TERM_CD
	 , GEN_SPCL_RT_TP_CD
	 , BKG_RAT_UT_CD
	 , BKG_PRC_CGO_TP_CD
	 , BKG_IMDG_CLSS_CD
	 , BKG_CMDT_TP_CD
	 , BKG_CMDT_DEF_CD
	 , BKG_SCG_GRP_CMDT_CD
	 , BKG_USA_SVC_MOD_CD
	 , BKG_POR_TP_CD
	 , BKG_POR_DEF_CD
	 , BKG_POL_TP_CD
	 , BKG_POL_DEF_CD
	 , BKG_POD_TP_CD
	 , BKG_POD_DEF_CD
	 , BKG_DEL_TP_CD
	 , BKG_DEL_DEF_CD
	 , BKG_ORG_TRSP_MOD_CD
	 , BKG_DEST_TRSP_MOD_CD
	 , BKG_RCV_TERM_CD
	 , BKG_DE_TERM_CD
	 , BKG_SLAN_CD
	 , BKG_VSL_CD
	 , BKG_SKD_VOY_NO
	 , BKG_SKD_DIR_CD
	 , BKG_SOC_FLG
	 , BKG_ACT_CUST_CNT_CD
	 , BKG_ACT_CUST_SEQ
	 , BKG_TS_PORT_TP_CD
	 , BKG_TS_PORT_DEF_CD
	 , BKG_DIR_CALL_FLG
	 , BKG_MST_HBL_TP_CD
	 , CONV_RAT_UT_CD
	 , CONV_PRC_CGO_TP_CD
	 , CONV_CMDT_TP_CD
	 , CONV_CMDT_DEF_CD
	 , CONV_ORG_LOC_TP_CD
	 , CONV_ORG_LOC_DEF_CD
	 , CONV_ORG_VIA_LOC_TP_CD
	 , CONV_ORG_VIA_LOC_DEF_CD
	 , CONV_DEST_VIA_LOC_TP_CD
	 , CONV_DEST_VIA_LOC_DEF_CD
	 , CONV_DEST_LOC_TP_CD
	 , CONV_DEST_LOC_DEF_CD
	 , CONV_PRC_RCV_TERM_CD
	 , CONV_PRC_DE_TERM_CD
	 , CRE_USR_ID
	 , CRE_DT
	 , UPD_USR_ID
	 , UPD_DT
	 , NOTE_HDR_SEQ
	 , RULE_APPL_CHG_TP_CD
	 , BKG_IO_GA_CD
	 , BKG_CNL_TZ_CD
	 , BKG_ESVC_TP_CD
	 , RULE_APPL_CHG_CD
	 , RT_PATT_TP_CD
	 , IGN_TRF_FLG
	 , BKG_NO
)
SELECT @[note_conv_mapg_id]
 	 , NOTE_CONV_SEQ
 	 , NOTE_CONV_TP_CD
 	 , SVC_SCP_CD
 	 , PROP_NO
 	 , @[amdt_seq]
 	 , CHG_RULE_TP_CD
 	 , NOTE_CONV_CHG_CD
 	 , NOTE_CONV_RULE_CD
 	 , CASE WHEN EFF_DT < TO_DATE(@[eff_dt],'YYYYMMDD') THEN TO_DATE(@[eff_dt],'YYYYMMDD') ELSE EFF_DT END
 	 , CASE WHEN EXP_DT = TO_DATE(@[bef_exp_dt],'YYYYMMDD') THEN TO_DATE(@[exp_dt],'YYYYMMDD') 
			WHEN EXP_DT > TO_DATE(@[exp_dt],'YYYYMMDD') THEN TO_DATE(@[exp_dt],'YYYYMMDD') ELSE EXP_DT END
 	 , RT_APPL_TP_CD
 	 , RT_OP_CD
 	 , CURR_CD
 	 , FRT_RT_AMT
 	 , PAY_TERM_CD
 	 , GEN_SPCL_RT_TP_CD
 	 , BKG_RAT_UT_CD
 	 , BKG_PRC_CGO_TP_CD
 	 , BKG_IMDG_CLSS_CD
 	 , BKG_CMDT_TP_CD
 	 , BKG_CMDT_DEF_CD
 	 , BKG_SCG_GRP_CMDT_CD
 	 , BKG_USA_SVC_MOD_CD
 	 , BKG_POR_TP_CD
 	 , BKG_POR_DEF_CD
 	 , BKG_POL_TP_CD
 	 , BKG_POL_DEF_CD
 	 , BKG_POD_TP_CD
 	 , BKG_POD_DEF_CD
 	 , BKG_DEL_TP_CD
 	 , BKG_DEL_DEF_CD
 	 , BKG_ORG_TRSP_MOD_CD
 	 , BKG_DEST_TRSP_MOD_CD
 	 , BKG_RCV_TERM_CD
 	 , BKG_DE_TERM_CD
 	 , BKG_SLAN_CD
 	 , BKG_VSL_CD
 	 , BKG_SKD_VOY_NO
 	 , BKG_SKD_DIR_CD
 	 , BKG_SOC_FLG
 	 , BKG_ACT_CUST_CNT_CD
 	 , BKG_ACT_CUST_SEQ
 	 , BKG_TS_PORT_TP_CD
 	 , BKG_TS_PORT_DEF_CD
 	 , BKG_DIR_CALL_FLG
 	 , BKG_MST_HBL_TP_CD
 	 , CONV_RAT_UT_CD
 	 , CONV_PRC_CGO_TP_CD
 	 , CONV_CMDT_TP_CD
 	 , CONV_CMDT_DEF_CD
 	 , CONV_ORG_LOC_TP_CD
 	 , CONV_ORG_LOC_DEF_CD
 	 , CONV_ORG_VIA_LOC_TP_CD
 	 , CONV_ORG_VIA_LOC_DEF_CD
 	 , CONV_DEST_VIA_LOC_TP_CD
 	 , CONV_DEST_VIA_LOC_DEF_CD
 	 , CONV_DEST_LOC_TP_CD
 	 , CONV_DEST_LOC_DEF_CD
 	 , CONV_PRC_RCV_TERM_CD
 	 , CONV_PRC_DE_TERM_CD
 	 , CRE_USR_ID
 	 , CRE_DT
 	 , UPD_USR_ID
 	 , UPD_DT
 	 , NOTE_HDR_SEQ
 	 , RULE_APPL_CHG_TP_CD
 	 , BKG_IO_GA_CD
 	 , BKG_CNL_TZ_CD
 	 , BKG_ESVC_TP_CD
	 , RULE_APPL_CHG_CD
	 , RT_PATT_TP_CD
     , IGN_TRF_FLG
	 , BKG_NO
  FROM PRI_SC_NOTE_CONV
 WHERE NOTE_CONV_MAPG_ID = @[prev_note_conv_mapg_id]			]]></sql>
			<params>
				<param name="note_conv_mapg_id" type="12" value="" out="N"/>
				<param name="amdt_seq" type="12" value="" out="N"/>
				<param name="eff_dt" type="12" value="" out="N"/>
				<param name="bef_exp_dt" type="12" value="" out="N"/>
				<param name="exp_dt" type="12" value="" out="N"/>
				<param name="prev_note_conv_mapg_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
