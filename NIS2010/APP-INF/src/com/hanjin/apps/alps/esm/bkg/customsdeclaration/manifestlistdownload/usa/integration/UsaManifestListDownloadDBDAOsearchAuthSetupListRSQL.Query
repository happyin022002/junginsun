<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="UsaManifestListDownloadDBDAOsearchAuthSetupListRSQL">
			<desc><![CDATA[UserAuthListModiVO
* 2011.10.12 윤태승 [CHM-201113684-01][ESM_BKG] US AMS 의 MI 중복전송 기능 요청 - IDhjsedlee
* 2012.05.10 김보배 [CHM-201217461] [BKG] [ACE M1] US AMS 전송후 1J 이후 Diversion 요청 기능 추가]]></desc>
			<sql><![CDATA[
SELECT A.CNT_CD
      ,A.BL_VVD
      ,A.BL_POD
      ,A.BL_DEL
      ,A.BL_HUB
	  ,A.BL_CSTMS
      ,A.BL_MIB
      ,A.BL_FPO
      ,A.BL_PTT
      ,A.BL_FTZ
      ,A.BL_DIV
      ,A.MI_HUB
	  ,A.MI_CSTMS
      ,A.MI_MULTI
      ,A.OF_MIT
      ,A.OF_HIS
      ,A.CHG_POD
      ,A.USR_ID
      ,A.CRE_USR_ID
      ,A.CRE_DT
      ,A.UPD_USR_ID
      ,A.UPD_DT
      ,A.USR_NM
      ,A.OFC_CD
      ,A.COFC_CD
  FROM (
        SELECT AUTH.CNT_CD CNT_CD
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLIVVDY', 1, 0)) AS BL_VVD
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLIPODY', 1, 0)) AS BL_POD
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLIDELY', 1, 0)) AS BL_DEL
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLIHUBY', 1, 0)) AS BL_HUB
			  ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLICSTMSY', 1, 0)) AS BL_CSTMS
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLIMIBY', 1, 0)) AS BL_MIB
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLIFPOY', 1, 0)) AS BL_FPO
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLIPTTY', 1, 0)) AS BL_PTT
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLIFTZY', 1, 0)) AS BL_FTZ
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'BLIDIVY', 1, 0)) AS BL_DIV
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'MIBHUBY', 1, 0)) AS MI_HUB
			  ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'MIBCSTMSY', 1, 0)) AS MI_CSTMS
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'MIMULTIY', 1, 0)) AS MI_MULTI
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'OFMMITY', 1, 0)) AS OF_MIT
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'OFMHISY', 1, 0)) AS OF_HIS
              ,SUM(DECODE(AUTH.PROC_ID || AUTH.ACT_ID || AUTH.CSTMS_AUTH_FLG, 'CHGPODY', 1, 0)) AS CHG_POD
              ,AUTH.USR_ID USR_ID
              ,MAX(AUTH.CRE_USR_ID) CRE_USR_ID
              ,MAX(TO_CHAR(AUTH.CRE_DT,'yyyy-mm-dd hh24:mi:ss')) CRE_DT
              ,MAX(AUTH.UPD_USR_ID) UPD_USR_ID
              ,MAX(TO_CHAR(AUTH.UPD_DT,'yyyy-mm-dd hh24:mi:ss')) UPD_DT
              ,USR.USR_NM USR_NM
              ,USR.OFC_CD OFC_CD
              ,MAX(CUSR.OFC_CD) COFC_CD
          FROM BKG_CSTMS_COM_USR_AUTH AUTH,COM_USER USR,COM_USER CUSR
         WHERE AUTH.CNT_CD = 'US'
           AND AUTH.USR_ID = USR.USR_ID(+)
           AND AUTH.CRE_USR_ID = CUSR.USR_ID(+)
    #if (${usr_id} != '')
           AND AUTH.USR_ID like '%' || @[usr_id] || '%'
    #end
    #if (${usr_nm} != '')
           AND USR.USR_NM like '%' || @[usr_nm] || '%'
    #end
    #if (${ofc_cd} != '')
           AND USR.OFC_CD like '%' || @[ofc_cd] || '%'
    #end
      GROUP BY AUTH.USR_ID,AUTH.CNT_CD,USR.USR_NM,USR.OFC_CD
       ) A
ORDER BY A.USR_ID			]]></sql>
			<params>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="usr_nm" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
