<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpecialCargoReceiptDBDAOSearchGrsMaxWgtRSQL">
			<desc><![CDATA[grs_max_wgt 와 비교하여 wgt_pass 판정]]></desc>
			<sql><![CDATA[
SELECT  CASE WHEN SUM(K.GRS_MAX_WGT) = 0 THEN 'X' 
          WHEN SUM(K.GRS_MAX_WGT) >
           @[grs_wgt] + 
           SUM(DECODE(NVL(MST_CNTR_SPEC.TARE_WGT, 0), 0 , DECODE(NVL(MDM_CNTR_TP_SZ.CNTR_TPSZ_TARE_WGT, 0), 0 , DECODE(MST_CONTAINER.CNTR_TPSZ_CD, 'T2', 3600, 'T4', 5200, 0), MDM_CNTR_TP_SZ.CNTR_TPSZ_TARE_WGT) , MST_CNTR_SPEC.TARE_WGT )) 
          THEN 'Y' ELSE 'N' END WGT_PASS,
		CASE WHEN MAX(MST_CONTAINER.CNTR_TPSZ_CD) IN ('F2','F4','F5','A2','A4','O2','O4','P2','P4','S2','S4','A5') THEN
#if (${wgt_ut_cd}=='LBS')
             CASE WHEN @[grs_wgt] * 0.453599 <=
#else
             CASE WHEN @[grs_wgt] <=
#end
           SUM(DECODE(NVL(MST_CNTR_SPEC.CNTR_GRS_WGT - MST_CNTR_SPEC.TARE_WGT, 0), 0, NVL(MDM_CNTR_TP_SZ.CNTR_TPSZ_LODG_WGT, 0), MST_CNTR_SPEC.CNTR_GRS_WGT - MST_CNTR_SPEC.TARE_WGT ))
	          THEN 'Y' ELSE 'N' END
		ELSE 'Y' END CNTR_TP_SZ_WGT_PASS,
	    SUM(DECODE(NVL(MST_CNTR_SPEC.CNTR_GRS_WGT - MST_CNTR_SPEC.TARE_WGT, 0), 0, NVL(MDM_CNTR_TP_SZ.CNTR_TPSZ_LODG_WGT, 0), MST_CNTR_SPEC.CNTR_GRS_WGT - MST_CNTR_SPEC.TARE_WGT )) CNTR_TP_SZ_WGT
  FROM MST_CONTAINER,
       MST_CNTR_SPEC,
       MDM_CNTR_TP_SZ,
       (    SELECT  MIN(NVL(GRS_MAX_WGT,0) * 1000) GRS_MAX_WGT
			FROM    BKG_VVD A, 
					VSK_PORT_GNTR_CRN B
			WHERE   A.POD_YD_CD = B.YD_CD(+)
			AND     A.BKG_NO 	= @[bkg_no]) K
WHERE MST_CONTAINER.CNTR_SPEC_NO   = MST_CNTR_SPEC.CNTR_SPEC_NO(+)
   AND MST_CONTAINER.CNTR_TPSZ_CD   = MDM_CNTR_TP_SZ.CNTR_TPSZ_CD(+)
   AND MST_CONTAINER.CNTR_NO        = @[cntr_no] 			]]></sql>
			<params>
				<param name="grs_wgt" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
