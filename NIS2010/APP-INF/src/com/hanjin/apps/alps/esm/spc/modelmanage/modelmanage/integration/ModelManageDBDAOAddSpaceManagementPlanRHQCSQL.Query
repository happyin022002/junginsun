<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ModelManageDBDAOAddSpaceManagementPlanRHQCSQL">
			<desc><![CDATA[RHQ Space Management Plan 정보를 저장합니다.
Lane Add시 신규 Lane insert
]]></desc>
			<sql><![CDATA[
INSERT INTO SPC_MDL_CUST_REV_LANE
          (
            COST_YRWK       
          , VER_SEQ         
          , TRD_CD          
          , SUB_TRD_CD      
          , RLANE_CD        
          , SLS_RGN_OFC_CD  
          , CUST_CNT_CD     
          , CUST_SEQ        
          , DTL_SEQ
          , SC_NO
          , RFA_NO
          , CUST_CTRL_CD    
          , SLS_RHQ_CD      
          , SLS_AQ_CD
          , CTRT_OFC_CD
          , CUST_ADJ_QTY
          , SUB_TRD_ADJ_QTY
          , RLANE_BKG_QTY
          , RLANE_ADJ_QTY
          , RLANE_CMPB_AMT
          , DELT_FLG
          , SPC_CTRL_MDL_MNL_CD
          , SPC_CTRL_MDL_MNL_RMK
          , CRE_USR_ID      
          , CRE_DT          
          , UPD_USR_ID      
          , UPD_DT          
          , SPC_CTRL_MDL_RMK
          , LANE_UPD_USR_ID
          , LANE_UPD_DT
         )
VALUES   (
            @[cost_yrwk]  
          , @[ver_seq]       
          , @[trd_cd]         
          , @[sub_trd_cd]      
          , @[rlane_cd]    
          , @[sls_rgn_ofc_cd]
          , @[cust_cnt_cd]     
          , @[cust_seq]       
          , (SELECT NVL(MAX(DTL_SEQ),0)+1
               FROM SPC_MDL_CUST_REV_LANE M
              WHERE M.COST_YRWK      = @[cost_yrwk]      
                AND M.VER_SEQ        = @[ver_seq]        
                AND M.TRD_CD         = @[trd_cd]       
                AND M.SUB_TRD_CD     = @[sub_trd_cd]     
                AND M.RLANE_CD       = @[rlane_cd]      
                AND M.SLS_RGN_OFC_CD = @[sls_rgn_ofc_cd]
                AND M.CUST_CNT_CD    = @[cust_cnt_cd]   
                AND M.CUST_SEQ       = @[cust_seq]
                AND M.CTRT_OFC_CD    = @[ctrt_ofc_cd]
      
            )
          , @[sc_no]
          , @[rfa_no]
          , @[cust_ctrl_cd]    
          , @[sls_rhq_cd]      
          , (SELECT N3RD_PRNT_OFC_CD
               FROM SPC_OFC_LVL
              WHERE OFC_CD = @[sls_rgn_ofc_cd]
                AND (SELECT COST_YR||COST_WK FROM MAS_WK_PRD WHERE TO_CHAR(SYSDATE,'YYYYMMDD') BETWEEN SLS_FM_DT AND SLS_TO_DT) BETWEEN OFC_APLY_FM_YRWK AND OFC_APLY_TO_YRWK
                AND DELT_FLG = 'N'
            )
          , @[ctrt_ofc_cd]
     	  , TO_NUMBER(@[cust_adj_qty])  * DECODE(@[unit], 'T', 1, 2)
          , TO_NUMBER(@[strd_adj_qty])  * DECODE(@[unit], 'T', 1, 2)
          , TO_NUMBER(@[rlane_qty])     * DECODE(@[unit], 'T', 1, 2)
          , TO_NUMBER(@[rlane_adj_qty]) * DECODE(@[unit], 'T', 1, 2)
          , TO_NUMBER(@[rlane_cmpb])    * DECODE(@[unit], 'T', 1, 2)
          , NVL(@[delt_flg], 'N')
          , @[spc_ctrl_mdl_mnl_cd]
          , CASE WHEN @[spc_ctrl_mdl_mnl_cd] = 'L' THEN '['||TO_CHAR(SYSDATE,'YYYYMMDD')||'|'||@[usr_id]||'|LANE ADD]'
                 ELSE NULL
             END
          , @[usr_id]      
          , SYSDATE          
          , @[usr_id]     
          , SYSDATE     
          , @[spc_ctrl_mdl_rmk]
          , DECODE(@[spc_ctrl_mdl_mnl_cd], 'L', DECODE(@[g3_cng_usr], 'USER', DECODE(@[ho_flg], 'Y', @[usr_id], 'INIT'), 'INIT'), 'INIT')
          , SYSDATE
         )			]]></sql>
			<params>
				<param name="cost_yrwk" type="12" value="" out="N"/>
				<param name="ver_seq" type="12" value="" out="N"/>
				<param name="trd_cd" type="12" value="" out="N"/>
				<param name="sub_trd_cd" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
				<param name="sls_rgn_ofc_cd" type="12" value="" out="N"/>
				<param name="cust_cnt_cd" type="12" value="" out="N"/>
				<param name="cust_seq" type="12" value="" out="N"/>
				<param name="ctrt_ofc_cd" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="rfa_no" type="12" value="" out="N"/>
				<param name="cust_ctrl_cd" type="12" value="" out="N"/>
				<param name="sls_rhq_cd" type="12" value="" out="N"/>
				<param name="cust_adj_qty" type="12" value="" out="N"/>
				<param name="unit" type="12" value="" out="N"/>
				<param name="strd_adj_qty" type="12" value="" out="N"/>
				<param name="rlane_qty" type="12" value="" out="N"/>
				<param name="rlane_adj_qty" type="12" value="" out="N"/>
				<param name="rlane_cmpb" type="12" value="" out="N"/>
				<param name="delt_flg" type="12" value="" out="N"/>
				<param name="spc_ctrl_mdl_mnl_cd" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="2010510" out="N"/>
				<param name="spc_ctrl_mdl_rmk" type="12" value="" out="N"/>
				<param name="g3_cng_usr" type="12" value="" out="N"/>
				<param name="ho_flg" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
