<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="FeederChargeGuideLineDBDAOModifyFDRDetailConfirmUSQL">
			<desc><![CDATA[update PRI_TRF_FDR_RT]]></desc>
			<sql><![CDATA[
UPDATE PRI_TRF_FDR_RT RTMN
   SET ( GLINE_RF_20FT_FRT_RT_AMT 
       , GLINE_RF_40FT_FRT_RT_AMT
       , GLINE_DG_20FT_FRT_RT_AMT
       , GLINE_DG_40FT_FRT_RT_AMT
       , GLINE_OVR_WGT_20FT_FRT_RT_AMT
       , GLINE_OVR_WGT_40FT_FRT_RT_AMT
       )
   = (
        SELECT SUB.GLINE_RF_20FT
             , SUB.GLINE_RF_40FT
             , SUB.GLINE_DG_20FT
             , SUB.GLINE_DG_40FT
             , SUB.GLINE_OV_20FT
             , SUB.GLINE_OV_40FT
        FROM (
                SELECT DECODE(CGO1.RF_FLT_PCT_TP_CD, 'F', RT.GLINE_20FT_FRT_RT_AMT + CGO1.RF_RT_AMT, 'P', RT.GLINE_20FT_FRT_RT_AMT + (RT.GLINE_20FT_FRT_RT_AMT * CGO1.RF_RT_RTO / 100)) GLINE_RF_20FT
                     , DECODE(CGO2.RF_FLT_PCT_TP_CD, 'F', RT.GLINE_40FT_FRT_RT_AMT + CGO2.RF_RT_AMT, 'P', RT.GLINE_40FT_FRT_RT_AMT + (RT.GLINE_40FT_FRT_RT_AMT * CGO2.RF_RT_RTO / 100)) GLINE_RF_40FT
                     , DECODE(CGO1.DG_FLT_PCT_TP_CD, 'F', RT.GLINE_20FT_FRT_RT_AMT + CGO1.DG_RT_AMT, 'P', RT.GLINE_20FT_FRT_RT_AMT + (RT.GLINE_20FT_FRT_RT_AMT * CGO1.DG_RT_RTO / 100)) GLINE_DG_20FT
                     , DECODE(CGO2.DG_FLT_PCT_TP_CD, 'F', RT.GLINE_40FT_FRT_RT_AMT + CGO2.DG_RT_AMT, 'P', RT.GLINE_40FT_FRT_RT_AMT + (RT.GLINE_40FT_FRT_RT_AMT * CGO2.DG_RT_RTO / 100)) GLINE_DG_40FT 
                     , DECODE(CGO1.OVR_WGT_FLT_PCT_TP_CD, 'F', RT.GLINE_20FT_FRT_RT_AMT + CGO1.OVR_WGT_RT_AMT, 'P', RT.GLINE_20FT_FRT_RT_AMT + (RT.GLINE_20FT_FRT_RT_AMT * CGO1.OVR_WGT_RT_RTO / 100)) GLINE_OV_20FT
                     , DECODE(CGO2.OVR_WGT_FLT_PCT_TP_CD, 'F', RT.GLINE_40FT_FRT_RT_AMT + CGO2.OVR_WGT_RT_AMT, 'P', RT.GLINE_40FT_FRT_RT_AMT + (RT.GLINE_40FT_FRT_RT_AMT * CGO2.OVR_WGT_RT_RTO / 100)) GLINE_OV_40FT  
                     , RT.FDR_TRF_NO
                     , RT.AMDT_SEQ
                     , RT.RT_SEQ
                  FROM PRI_TRF_FDR_SPCL_CGO_RT CGO1
                     , PRI_TRF_FDR_SPCL_CGO_RT CGO2
                     , PRI_TRF_FDR_MN MN
                     , PRI_TRF_FDR_RT RT
                 WHERE 1=1    
                   AND MN.FDR_TRF_NO = RT.FDR_TRF_NO
                   AND RT.FDR_TRF_NO = CGO1.FDR_TRF_NO(+)
                   AND CGO1.PRC_INLND_TRF_CNTR_TPSZ_CD(+) = '20'
                   AND RT.FDR_TRF_NO = CGO2.FDR_TRF_NO(+)
                   AND CGO2.PRC_INLND_TRF_CNTR_TPSZ_CD(+) = '40'
                   AND RT.FDR_TRF_NO = @[fdr_trf_no]
                   AND RT.AMDT_SEQ   = @[amdt_seq]
                   AND MN.AMDT_SEQ   = RT.AMDT_SEQ
        )SUB
        WHERE 1 =1
          AND SUB.FDR_TRF_NO = RTMN.FDR_TRF_NO
          AND SUB.AMDT_SEQ   = RTMN.AMDT_SEQ
          AND SUB.RT_SEQ     = RTMN.RT_SEQ
     )
     
 WHERE 1 = 1
   AND RTMN.FDR_TRF_NO   = @[fdr_trf_no]
   AND RTMN.AMDT_SEQ     = @[amdt_seq]			]]></sql>
			<params>
				<param name="fdr_trf_no" type="12" value="" out="N"/>
				<param name="amdt_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
