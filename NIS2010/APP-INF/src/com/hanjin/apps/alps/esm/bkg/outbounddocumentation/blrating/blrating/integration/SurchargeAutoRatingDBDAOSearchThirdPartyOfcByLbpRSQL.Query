<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SurchargeAutoRatingDBDAOSearchThirdPartyOfcByLbpRSQL">
			<desc><![CDATA[LBP Surcharge 정보에 해당하는 Third Party Office 정보를 구한다.]]></desc>
			<sql><![CDATA[
SELECT  THIRD_PARTY_OFC, REP_CUST_CNT_CD, REP_CUST_SEQ, FRT_TERM_CD
  FROM  (
        SELECT  PPD_RCV_OFC_CD, CLT_OFC_CD, LOGIN_OFC_CD
                , CASE WHEN LOGIN_OFC_CD != CLT_OFC_CD THEN
                   CASE WHEN DECODE(LOGIN_OFC_CD, 'SELSC','PUSSC','PUSSC','SELSC',LOGIN_OFC_CD) != CLT_OFC_CD THEN
                    CASE WHEN LOGIN_OFC_CD != PPD_RCV_OFC_CD THEN
                     CASE WHEN DECODE(LOGIN_OFC_CD, 'SELSC','PUSSC','PUSSC','SELSC',LOGIN_OFC_CD) = PPD_RCV_OFC_CD THEN NULL
                          ELSE LOGIN_OFC_CD END
                              END
                          END
                  END THIRD_PARTY_OFC

                , CASE WHEN LOGIN_OFC_CD != CLT_OFC_CD THEN
                            CASE WHEN DECODE(LOGIN_OFC_CD, 'SELSC','PUSSC','PUSSC','SELSC',LOGIN_OFC_CD) = CLT_OFC_CD THEN
                                'C'
                                 ELSE 'P'
                            END
                        ELSE 'C'
                   END FRT_TERM_CD
          FROM  BKG_RATE BR,
                (SELECT @[login_office] LOGIN_OFC_CD FROM DUAL)
         WHERE  BR.BKG_NO=@[bkg_no]
        ) A, MDM_ORGANIZATION MOR
 WHERE  A.THIRD_PARTY_OFC = MOR.OFC_CD
   AND  DELT_FLG = 'N'			]]></sql>
			<params>
				<param name="login_office" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
