<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLIssuanceDBDAOSearchDblEdiChg2RSQL">
			<desc><![CDATA[2012.08.29 변종건 [CHM-201219923-01]]]></desc>
			<sql><![CDATA[
SELECT '{CHARGE' || CHR(10) 
       || 'FCTYPE:' || CHG_CD || CHR(10) 
       || 'RATE:' || CHG_UT_AMT || CHR(10) 
       || 'RATED_AS:' || RAT_AS_QTY || CHR(10) 
       || 'REVENUETON:' || RAT_AS_QTY || CHR(10) 
       || 'DIF_AMT:' || CHR(10) 
       || 'PPD:' || DECODE(FRT_TERM_CD, 'P', CHG_AMT, 0.0) || CHR(10) 
       || 'CCT:' || DECODE(FRT_TERM_CD, 'C', CHG_AMT, 0.0) || CHR(10) 
       || 'CURRENCYCODE:' || CURR_CD || CHR(10) 
       || 'TARIFF:' || TRF_ITM_NO || CHR(10) 
       || 'PERTYPE:' || RAT_UT_CD || CHR(10) 
       || 'EXRATE:' || CHR(10) 
       || 'FRT_IND:' || FRT_TERM_CD || CHR(10) 
       || '}CHARGE' || CHR(10)
FROM   BKG_CHG_RT
WHERE  BKG_NO = @[bkg_no]
AND    FRT_INCL_XCLD_DIV_CD= 'N'
AND    PRN_HDN_FLG = 'N'
AND    (    N3PTY_CUST_CNT_CD = 'US'
         OR (FRT_TERM_CD = ( SELECT 'P' C_FLG FROM BKG_RATE WHERE BKG_NO = @[bkg_no] AND PPD_PAYR_CNT_CD = 'US' ) AND N3PTY_CUST_CNT_CD IS NULL)
         OR (FRT_TERM_CD = ( SELECT 'C' C_FLG FROM BKG_RATE WHERE BKG_NO = @[bkg_no] AND CLT_PAYR_CNT_CD = 'US' ) AND N3PTY_CUST_CNT_CD IS NULL)
       )
ORDER BY RT_SEQ			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
