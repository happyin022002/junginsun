<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationCMDBDAOSearchWpmDescForBlRSQL">
			<desc><![CDATA[BL body에 찍힐 WPM관련 문구를 생성한다.]]></desc>
			<sql><![CDATA[
SELECT CASE WHEN N_RMK IS NOT NULL AND Y_RMK IS NOT NULL THEN CHR(13)||CHR(10) || N_RMK || CHR(13)||CHR(10) || Y_RMK
            WHEN N_RMK IS NOT NULL THEN CHR(13)||CHR(10) || N_RMK 
            WHEN Y_RMK IS NOT NULL THEN CHR(13)||CHR(10) || Y_RMK 
            ELSE ''
            END AS RMK
  FROM (
        SELECT (SELECT SUM(PCK_QTY) || ' WOODEN PACKAGE MATERIAL :' || CHR(13)||CHR(10) || UPPER((SELECT INTG_CD_VAL_DP_DESC 
                                                                    FROM COM_INTG_CD_DTL DTL 
                                                                   WHERE DTL.INTG_CD_ID = 'CD03478' 
                                                                     AND DTL.INTG_CD_VAL_CTNT = WPM_TRT_CD))
#if (${ca_flg} == 'Y') 
                  FROM BKG_CNTR_MF_DESC_HIS 
                 WHERE 1 = 1
                   AND CORR_NO = 'TMP0000001'
#else
                  FROM BKG_CNTR_MF_DESC 
                 WHERE 1 = 1
#end
                   AND BKG_NO = @[bkg_no]
                   AND WPM_TRT_CD = 'N'
                GROUP BY WPM_TRT_CD) N_RMK
              ,(SELECT SUM(PCK_QTY) ||' WOODEN PACKAGE MATERIAL :' || CHR(13)||CHR(10) || UPPER((SELECT INTG_CD_VAL_DP_DESC 
                                                                   FROM COM_INTG_CD_DTL DTL 
                                                                  WHERE DTL.INTG_CD_ID = 'CD03478' 
                                                                    AND DTL.INTG_CD_VAL_CTNT = WPM_TRT_CD)) 
 #if (${ca_flg} == 'Y') 
                  FROM BKG_CNTR_MF_DESC_HIS 
                 WHERE 1 = 1
                   AND CORR_NO = 'TMP0000001'
#else
                  FROM BKG_CNTR_MF_DESC 
                 WHERE 1 = 1
#end
                   AND BKG_NO = @[bkg_no]
                   AND WPM_TRT_CD = 'Y'
                GROUP BY WPM_TRT_CD) Y_RMK
        FROM DUAL
        )			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
