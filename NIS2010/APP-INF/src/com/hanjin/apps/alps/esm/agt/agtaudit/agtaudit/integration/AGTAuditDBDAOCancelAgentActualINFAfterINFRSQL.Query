<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AGTAuditDBDAOCancelAgentActualINFAfterINFRSQL">
			<desc><![CDATA[CancelAgentActualINFAfterINF]]></desc>
			<sql><![CDATA[
SELECT
      CASE
      WHEN A.CUR_AC_SEQ - B.MAX_AC_SEQ < 0
       AND @[ac_seq] = A.CUR_AC_SEQ 
      THEN 1
      ELSE 0
       END AS AFTER_INTERFACED
      FROM
         (     SELECT
                      NVL (MAX (AC_SEQ), 0) AS CUR_AC_SEQ
                 FROM AGT_AGN_COMM
                 WHERE BKG_NO            = @[bkg_no]
                   AND AGN_CD            = @[agn_cd]
                   AND IO_BND_CD         = @[io_bnd_cd]
                   AND AC_TP_CD          = @[ac_tp_cd]
                   AND CSR_NO            = @[csr_no]
                   AND CRE_USR_ID       != 'COST'
                   AND COMM_PROC_STS_CD  = 'IF'
         ) A,
         (     SELECT
                      NVL (MAX (AC_SEQ), 0) AS MAX_AC_SEQ
                 FROM AGT_AGN_COMM
                WHERE BKG_NO            = @[bkg_no]
                  AND AGN_CD            = @[agn_cd]
                  AND IO_BND_CD         = @[io_bnd_cd]
                  AND AC_TP_CD          = @[ac_tp_cd]
                  AND CSR_NO           != @[csr_no]
                  AND CSR_NO           is not null
                  AND AC_IF_DT         is not null
                  AND CRE_USR_ID       != 'COST'
                  AND COMM_PROC_STS_CD  = 'IF'
         ) B			]]></sql>
			<params>
				<param name="ac_seq" type="12" value="" out="Y"/>
				<param name="bkg_no" type="12" value="" out="Y"/>
				<param name="agn_cd" type="12" value="" out="Y"/>
				<param name="io_bnd_cd" type="12" value="" out="Y"/>
				<param name="ac_tp_cd" type="12" value="" out="Y"/>
				<param name="csr_no" type="12" value="" out="Y"/>
			</params>
		</query>
	</querys>
</sqls>
