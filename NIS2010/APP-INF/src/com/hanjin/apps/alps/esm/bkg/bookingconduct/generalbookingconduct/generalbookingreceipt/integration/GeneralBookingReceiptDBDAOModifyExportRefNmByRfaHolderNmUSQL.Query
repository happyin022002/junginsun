<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOModifyExportRefNmByRfaHolderNmUSQL">
			<desc><![CDATA[Export Ref.란에 RFA Holder Name을 자동 Copy]]></desc>
			<sql><![CDATA[
MERGE INTO BKG_CUSTOMER EX
 USING DUAL
    ON (EX.BKG_NO = @[bkg_no] and EX.BKG_CUST_TP_CD = 'E')
WHEN MATCHED THEN
    UPDATE SET 
        CUST_NM = DECODE(NVL(CUST_NM,''), '', @[rfa_holder_nm], CUST_NM || CHR(13)||CHR(10) || @[rfa_holder_nm])
    WHERE BKG_NO = @[bkg_no]
      AND BKG_CUST_TP_CD = 'E'
WHEN NOT MATCHED THEN
    INSERT (BKG_NO, BKG_CUST_TP_CD, CUST_NM)
    VALUES (@[bkg_no],'E', @[rfa_holder_nm])			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="rfa_holder_nm" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
