<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpacecontrolinquiryDBDAOSpcBsaMgmtCSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
INSERT INTO SPC_BSA_MGMT(
TRD_CD,
SUB_TRD_CD,
VSL_CD,
SKD_VOY_NO,
SKD_DIR_CD,
BSA_SEQ,
CRR_CD,
BSA_CAPA,
CRE_USR_ID,
CRE_DT,
UPD_USR_ID,
UPD_DT
)VALUES(
@[trd_cd],
@[sub_trd_cd],
@[vsl_cd],
@[skd_voy_no],
@[skd_dir_cd],
(select
    case when a.maxCnt = 0 then ( SELECT nvl(max(BSA_SEQ)+1,1) FROM SPC_BSA_MGMT
 								  WHERE TRD_CD	= @[trd_cd]   
								    AND SUB_TRD_CD	= @[sub_trd_cd]
									AND	VSL_CD		= @[vsl_cd] 
								    AND	SKD_DIR_CD	= @[skd_dir_cd] )
    when a.maxCnt <> 0 then maxCnt
    end bsa_seq
from
(   select nvl(max(BSA_SEQ),0) maxCnt
    FROM SPC_BSA_MGMT
 	WHERE TRD_CD	= @[trd_cd]   
	AND	SUB_TRD_CD	= @[sub_trd_cd]
	AND	VSL_CD		= @[vsl_cd] 
    AND SKD_VOY_NO  = @[skd_voy_no]
    AND	SKD_DIR_CD	= @[skd_dir_cd]
) a ) ,
@[crr_cd],
@[bsa_capa],
@[cre_usr_id],
SYSDATE,
@[upd_usr_id],
SYSDATE
)			]]></sql>
			<params>
				<param name="trd_cd" type="12" value="" out="N"/>
				<param name="sub_trd_cd" type="12" value="" out="N"/>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="crr_cd" type="12" value="" out="N"/>
				<param name="bsa_capa" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
