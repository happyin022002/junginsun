<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpaceAllocationManageDBDAOSearchSpaceAllocationManage045VVDListVORSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
SELECT DISTINCT
         SUBSTR(MV.SLS_YRMON, 1, 4)||MV.COST_WK     AS COST_YRWK,
         VPS.VSL_CD||VPS.SKD_VOY_NO||VPS.SKD_DIR_CD AS VVD      ,
         MIN(CASE WHEN VPS.TURN_PORT_IND_CD IN ('Y', 'N') THEN TVPS.SKD_VOY_NO||TVPS.SKD_DIR_CD END) || '/' || MAX(CASE WHEN VPS.TURN_PORT_IND_CD NOT IN ('Y', 'N') THEN TVPS.SKD_VOY_NO||TVPS.SKD_DIR_CD END) AS REL_VVD,
         '' AS T
    FROM VSK_VSL_SKD      TVPS,
         VSK_VSL_PORT_SKD VPS ,
         MAS_MON_VVD      MV  ,
         MDM_REV_LANE     RL
   WHERE TVPS.VSL_CD    (+) = VPS.VSL_CD
     AND TVPS.SKD_VOY_NO(+) = VPS.TURN_SKD_VOY_NO
     AND TVPS.SKD_DIR_CD(+) = VPS.TURN_SKD_DIR_CD
     AND VPS.VSL_CD         = MV.VSL_CD
     AND VPS.SKD_VOY_NO     = MV.SKD_VOY_NO
     AND VPS.SKD_DIR_CD     = MV.DIR_CD
     AND (VPS.SKD_CNG_STS_CD IS NULL OR VPS.SKD_CNG_STS_CD <> 'S')
     AND SUBSTR(MV.SLS_YRMON, 1, 4)||MV.COST_WK = @[year1]||@[week1]
     AND MV.DIR_CD    = @[bound]
     AND MV.DELT_FLG  = 'N'
     AND MV.RLANE_CD  = RL.RLANE_CD
     AND MV.TRD_CD    = RL.REP_TRD_CD
     AND RL.RLANE_CD  = @[lane]
     AND RL.VSL_TP_CD = 'C'
GROUP BY MV.SLS_YRMON  ,
         MV.COST_WK    ,
         VPS.VSL_CD    ,
         VPS.SKD_VOY_NO,
         VPS.SKD_DIR_CD			]]></sql>
			<params>
				<param name="year1" type="12" value="" out="N"/>
				<param name="week1" type="12" value="" out="N"/>
				<param name="bound" type="12" value="" out="N"/>
				<param name="lane" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
