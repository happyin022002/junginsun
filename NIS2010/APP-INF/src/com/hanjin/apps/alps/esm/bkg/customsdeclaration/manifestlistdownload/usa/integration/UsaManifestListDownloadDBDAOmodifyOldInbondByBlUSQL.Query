<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="UsaManifestListDownloadDBDAOmodifyOldInbondByBlUSQL">
			<desc><![CDATA[modifyOldInbondByBl]]></desc>
			<sql><![CDATA[
MERGE INTO BKG_CSTMS_ADV_IBD IB
USING ( 
    SELECT NVL(@[cnt_cd],'US') AS CNT_CD, @[bl_no] AS BL_NO FROM DUAL ) TM
ON ( IB.CNT_CD = TM.CNT_CD AND IB.BL_NO = TM.BL_NO )
WHEN MATCHED THEN
        UPDATE 
           SET IBD_TRSP_TP_CD = decode(@[ibd_clr_tp_cd], 'L', '', @[ibd_trsp_tp_cd]),
               IBD_TRSP_NO    = @[ibd_trsp_no],
        	   CSTMS_CLR_TP_CD = @[ibd_clr_tp_cd],
        	   FREE_TRD_ZN_FLG = NVL(@[ibd_free_trd_zn_flg], 'N'),
               DIR_DE_FLG = @[ibd_dir_de_flg],
			   UPD_USR_ID = @[upd_usr_id],
			   UPD_DT = SYSDATE
WHEN NOT MATCHED THEN
        INSERT ( CNT_CD
                ,BL_NO
                ,IBD_TRSP_TP_CD
                ,IBD_TRSP_NO
                ,CSTMS_CLR_TP_CD
                ,FREE_TRD_ZN_FLG
                ,LOCL_CLR_IPI_MVMT_FLG
                ,IBD_TRSP_ARR_SND_FLG
                ,IBD_TRSP_XPT_SND_FLG
                ,DIR_DE_FLG
                ,CRE_USR_ID
                ,CRE_DT
                ,UPD_USR_ID
                ,UPD_DT )
        VALUES ( NVL(@[cnt_cd],'US')
                ,@[bl_no]
                ,decode(@[ibd_clr_tp_cd], 'L', '', @[ibd_trsp_tp_cd])
                ,@[ibd_trsp_no]
                ,@[ibd_clr_tp_cd]
                ,NVL(@[ibd_free_trd_zn_flg], 'N')
                ,'N'
                ,'N'
                ,'N'
                ,@[ibd_dir_de_flg]
                ,@[cre_usr_id]
                ,SYSDATE
                ,@[upd_usr_id]
                ,SYSDATE )			]]></sql>
			<params>
				<param name="cnt_cd" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="ibd_clr_tp_cd" type="12" value="" out="N"/>
				<param name="ibd_trsp_tp_cd" type="12" value="" out="N"/>
				<param name="ibd_trsp_no" type="12" value="" out="N"/>
				<param name="ibd_free_trd_zn_flg" type="12" value="" out="N"/>
				<param name="ibd_dir_de_flg" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
