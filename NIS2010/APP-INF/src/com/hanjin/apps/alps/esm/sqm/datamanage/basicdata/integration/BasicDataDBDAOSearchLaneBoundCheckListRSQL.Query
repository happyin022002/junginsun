<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BasicDataDBDAOSearchLaneBoundCheckListRSQL">
			<desc><![CDATA[SQM_QTA_LANE_MGMT 와 SQM_QTA_LANE_OFC 간의 Act Flg 체크.
* History
CHM-201430324 이혜민 IAs Sector -프로젝트 안정화 및 3분기 판매목표 수립 지원(Overall과 IAS Sector구분)]]></desc>
			<sql><![CDATA[
SELECT DISTINCT
         DECODE(A2.CPY_NO, 0, 'C', 'L') AS OFC_VW_CD
        ,A1.TRD_CD
        ,A1.RLANE_CD
        ,NVL(A1.LANE_DIR_CD, DECODE(A3.CPY_NO, 0, 'E', 'W')) || 'B' AS DIR_CD
    FROM SQM_QTA_LANE_MGMT A1
        ,COM_CPY_NO        A2
        ,COM_CPY_NO        A3
   WHERE A1.SQM_ACT_FLG = 'Y'
     AND A2.CPY_NO      < 2
     AND A3.CPY_NO      < 2
#if (${f_ias_sctr_flg} == '' || ${f_ias_sctr_flg} == 'null')
     AND A1.TRD_CD <> 'IAS'
#elseif (${f_ias_sctr_flg} == 'Y')
     AND A1.TRD_CD = 'IAS'
#end
   MINUS
  SELECT DISTINCT
         OFC_VW_CD
        ,TRD_CD
        ,RLANE_CD
        ,DIR_CD || 'B'
    FROM SQM_QTA_LANE_OFC
   WHERE BSE_TP_CD   = @[f_bse_tp_cd]
     AND BSE_YR      = @[f_bse_yr]
     AND BSE_QTR_CD  = DECODE(@[f_bse_tp_cd], 'Y', '00', @[f_bse_qtr_cd])
     AND SQM_ACT_FLG = 'Y'
#if (${f_ias_sctr_flg} == '' || ${f_ias_sctr_flg} == 'null')
     AND TRD_CD <> 'IAS'
#elseif (${f_ias_sctr_flg} == 'Y')
     AND TRD_CD = 'IAS'
#end
ORDER BY OFC_VW_CD
        ,TRD_CD
        ,RLANE_CD
        ,DIR_CD			]]></sql>
			<params>
				<param name="f_bse_tp_cd" type="12" value="" out="N"/>
				<param name="f_bse_yr" type="12" value="" out="N"/>
				<param name="f_bse_qtr_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
