<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="IHCGuideLineDBDAOModifyIHCGuidelineDetailConfirmTuningUSQL">
			<desc><![CDATA[special cargo guideline tuning
* History
2013.03.16 전지예 [CHM-201534279] Pricing Feeder/IHC tariff 45" 칼럼 추가 안]]></desc>
			<sql><![CDATA[
UPDATE PRI_TRF_IHC_RT
SET GLINE_DG_20FT_FRT_RT_AMT =   CASE WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_20FT_FRT_RT_AMT)),-1)) > 0 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_20FT_FRT_RT_AMT)),-1)) < 5
                                        THEN TRUNC(GLINE_DG_20FT_FRT_RT_AMT/10)*10 + 5
                                        WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_20FT_FRT_RT_AMT)),-1)) > 5 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_20FT_FRT_RT_AMT)),-1)) <= 9
                                        THEN TRUNC(GLINE_DG_20FT_FRT_RT_AMT/10)*10 + 10
                                        ELSE TRUNC(GLINE_DG_20FT_FRT_RT_AMT)
                                  END
    ,GLINE_DG_40FT_FRT_RT_AMT =   CASE WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_40FT_FRT_RT_AMT)),-1)) > 0 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_40FT_FRT_RT_AMT)),-1)) < 5
                                        THEN TRUNC(GLINE_DG_40FT_FRT_RT_AMT/10)*10 + 5
                                        WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_40FT_FRT_RT_AMT)),-1)) > 5 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_40FT_FRT_RT_AMT)),-1)) <= 9
                                        THEN TRUNC(GLINE_DG_40FT_FRT_RT_AMT/10)*10 + 10
                                        ELSE TRUNC(GLINE_DG_40FT_FRT_RT_AMT)
                                  END
     -- 45' Cost 추가
    ,GLINE_DG_45FT_FRT_RT_AMT =   CASE WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_45FT_FRT_RT_AMT)),-1)) > 0 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_45FT_FRT_RT_AMT)),-1)) < 5
                                        THEN TRUNC(GLINE_DG_45FT_FRT_RT_AMT/10)*10 + 5
                                        WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_45FT_FRT_RT_AMT)),-1)) > 5 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_DG_45FT_FRT_RT_AMT)),-1)) <= 9
                                        THEN TRUNC(GLINE_DG_45FT_FRT_RT_AMT/10)*10 + 10
                                        ELSE TRUNC(GLINE_DG_45FT_FRT_RT_AMT)
                                  END
    ,GLINE_OVR_WGT_20FT_FRT_RT_AMT =   CASE WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_20FT_FRT_RT_AMT)),-1)) > 0 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_20FT_FRT_RT_AMT)),-1)) < 5
                                        THEN TRUNC(GLINE_OVR_WGT_20FT_FRT_RT_AMT/10)*10 + 5
                                        WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_20FT_FRT_RT_AMT)),-1)) > 5 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_20FT_FRT_RT_AMT)),-1)) <= 9
                                        THEN TRUNC(GLINE_OVR_WGT_20FT_FRT_RT_AMT/10)*10 + 10
                                        ELSE TRUNC(GLINE_OVR_WGT_20FT_FRT_RT_AMT)
                                  END
    ,GLINE_OVR_WGT_40FT_FRT_RT_AMT =   CASE WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_40FT_FRT_RT_AMT)),-1)) > 0 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_40FT_FRT_RT_AMT)),-1)) < 5
                                        THEN TRUNC(GLINE_OVR_WGT_40FT_FRT_RT_AMT/10)*10 + 5
                                        WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_40FT_FRT_RT_AMT)),-1)) > 5 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_40FT_FRT_RT_AMT)),-1)) <= 9
                                        THEN TRUNC(GLINE_OVR_WGT_40FT_FRT_RT_AMT/10)*10 + 10
                                        ELSE TRUNC(GLINE_OVR_WGT_40FT_FRT_RT_AMT)
                                  END
     -- 45' Cost 추가
    ,GLINE_OVR_WGT_45FT_FRT_RT_AMT =   CASE WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_45FT_FRT_RT_AMT)),-1)) > 0 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_45FT_FRT_RT_AMT)),-1)) < 5
                                        THEN TRUNC(GLINE_OVR_WGT_45FT_FRT_RT_AMT/10)*10 + 5
                                        WHEN TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_45FT_FRT_RT_AMT)),-1)) > 5 AND TO_NUMBER(SUBSTR(TO_CHAR(TRUNC(GLINE_OVR_WGT_45FT_FRT_RT_AMT)),-1)) <= 9
                                        THEN TRUNC(GLINE_OVR_WGT_45FT_FRT_RT_AMT/10)*10 + 10
                                        ELSE TRUNC(GLINE_OVR_WGT_45FT_FRT_RT_AMT)
                                  END
WHERE SVC_SCP_CD = @[svc_scp_cd]   
  AND IHC_TRF_NO = @[ihc_trf_no]  
  AND AMDT_SEQ   = @[amdt_seq]
  AND ORG_DEST_TP_CD = @[org_dest_tp_cd]
  AND IHC_CGO_TP_CD = 'DR'			]]></sql>
			<params>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="ihc_trf_no" type="12" value="" out="N"/>
				<param name="amdt_seq" type="12" value="" out="N"/>
				<param name="org_dest_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
