<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CndExpCustomsTransmissionDBDAOsearchCmInfoForFlatFileRSQL">
			<desc><![CDATA[searchCmInfoForFlatFile]]></desc>
			<sql><![CDATA[
SELECT CM.HAMO_CMDT_CD				AS CMCODE
       ,NVL(CM.PCK_QTY, 0)			AS CMPKG
       ,NVL((SELECT CSTMS_PCK_TP_CD
              FROM BKG_CSTMS_PCK_TP_CONV AA
             WHERE AA.CNT_CD = 'CA'
               AND AA.PCK_TP_CD = CM.AMS_PCK_TP_CD
            ), NVL(CM.AMS_PCK_TP_CD, 'PK')) AS CMPKGU
       ,NVL(CM.GRS_WGT, 0)			AS CMWGT
       ,NVL(SUBSTR(CM.WGT_UT_CD,1,2), 'KG')		AS CMWGTU
       ,DECODE(CM.CGO_DESC, NULL, ' ', BKG_SPCLCHAR_CONV_FNC(CM.CGO_DESC,'M')) AS CMDESC
       ,DG.IMDG_UN_NO				AS CMUNNO
  FROM  BKG_CSTMS_AMER_CNTR_MF CM
       ,(SELECT DG.IMDG_UN_NO
               ,DG.CNTR_NO
               ,DG.CNTR_CGO_SEQ
               ,BL.CNT_CD
               ,BL.BL_NO
           FROM BKG_CSTMS_AMER_BL BL, BKG_DG_CGO DG
          WHERE BL.BKG_NO = DG.BKG_NO
            AND BL.CNT_CD    = 'CA'
            AND BL.IO_BND_CD = 'O'
            AND BL.BL_NO     = @[bl_no]
         ) DG
 WHERE  CM.CNT_CD 		= 'CA'
   AND  CM.IO_BND_CD    = 'O'
   AND  CM.BL_NO		= @[bl_no]
   AND  CM.CNTR_NO		= @[cntr_no]
   AND  CM.CNT_CD		= DG.CNT_CD(+)
   AND  CM.BL_NO		= DG.BL_NO(+)
   AND  CM.CNTR_NO		= DG.CNTR_NO(+)
   AND  CM.CMDT_GDS_SEQ = DG.CNTR_CGO_SEQ(+)			]]></sql>
			<params>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
