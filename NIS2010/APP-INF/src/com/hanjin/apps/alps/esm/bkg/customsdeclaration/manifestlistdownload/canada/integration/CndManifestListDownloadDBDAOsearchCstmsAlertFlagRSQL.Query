<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CndManifestListDownloadDBDAOsearchCstmsAlertFlagRSQL">
			<desc><![CDATA[searchCstmsAlertFlag]]></desc>
			<sql><![CDATA[
SELECT  
	 bl_no BL_NO
	,TO_DATE( @[cstms_ack_rcv_dt] ,'YYYYMMDDHH24MISS') HLD_DT
    ,(CASE WHEN NVL(@[hld_type],' ') = 'R' THEN '37' ELSE @[cstms_ack_proc_rslt_cd] END) HLD_CD
	,CSTMS_PORT_CD CSTMS_LOC_CD
	,@[cnt_cd] CNT_CD
    ,NVL(@[hld_type],' ') HLD_TYPE
FROM BKG_CSTMS_ADV_BL B
WHERE CNT_CD = @[cnt_cd]
AND CSTMS_ACK_KEY_NO = @[cstms_ack_key_no]
AND EXISTS ( SELECT 'X' FROM BKG_CSTMS_ADV_DSPO 
                WHERE CNT_CD = 'CA'
                AND CSTMS_DSPO_CD = (CASE WHEN NVL(@[hld_type],' ') = 'R' THEN '37' ELSE @[cstms_ack_proc_rslt_cd] END)
                AND OB_NTC_FLG ='Y'
            )			]]></sql>
			<params>
				<param name="cstms_ack_rcv_dt" type="12" value="" out="N"/>
				<param name="hld_type" type="12" value="" out="N"/>
				<param name="cstms_ack_proc_rslt_cd" type="12" value="" out="N"/>
				<param name="cnt_cd" type="12" value="" out="N"/>
				<param name="cstms_ack_key_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
