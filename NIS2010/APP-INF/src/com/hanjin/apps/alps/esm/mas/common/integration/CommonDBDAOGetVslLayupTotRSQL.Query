<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CommonDBDAOGetVslLayupTotRSQL">
			<desc><![CDATA[Total값 구하기]]></desc>
			<sql><![CDATA[
#if (${rlane_cd} == 'CDMCO')
SELECT SUM(VSL_CHARTER) - (SUM(PORT_EXP) + SUM(CANAL_TRANS) + SUM(BUNKER) + SUM(CREW_EXP) + SUM(INSUR) + SUM(LUBRI_EXP) + SUM(STORE_SUP)
    + SUM(VSL_MNR) + SUM(DEPREC) + SUM(TEL_EXP) + SUM(OTHER_OPER) + SUM(TIME_CHART) + SUM(SPACE_CHART)) AS TOT
#elseif (${rlane_cd} == 'CNTLY')
SELECT (SUM(PORT_EXP) + SUM(CANAL_TRANS) + SUM(BUNKER) + SUM(CREW_EXP) + SUM(INSUR) + SUM(LUBRI_EXP) + SUM(STORE_SUP)
    + SUM(VSL_MNR) + SUM(DEPREC) + SUM(TEL_EXP) + SUM(OTHER_OPER) + SUM(TIME_CHART) + SUM(SPACE_CHART)) AS TOT
#end
FROM (
    SELECT 
#if (${rlane_cd} == 'CDMCO')
		(CASE WHEN STND_COST_CD='43101011' THEN TTL_AMT
           END) AS VSL_CHARTER,
#end
           (CASE WHEN STND_COST_CD='53101000' THEN TTL_AMT
           END) AS PORT_EXP,
           (CASE WHEN STND_COST_CD='53102000' THEN TTL_AMT
           END) AS CANAL_TRANS,
           (CASE WHEN STND_COST_CD='53200000' THEN TTL_AMT
           END) AS BUNKER,
           (CASE WHEN STND_COST_CD='54100000' THEN TTL_AMT
           END) AS CREW_EXP,
           (CASE WHEN STND_COST_CD='54250000' THEN TTL_AMT
           END) AS INSUR,
           (CASE WHEN STND_COST_CD='54300000' THEN TTL_AMT
           END) AS LUBRI_EXP,
           (CASE WHEN STND_COST_CD='54200000' THEN TTL_AMT
           END) AS STORE_SUP,
           (CASE WHEN STND_COST_CD='54150000' THEN TTL_AMT
           END) AS VSL_MNR,
           (CASE WHEN STND_COST_CD='54450000' THEN TTL_AMT
           END) AS DEPREC,
           (CASE WHEN STND_COST_CD='54180000' THEN TTL_AMT
           END) AS TEL_EXP,
           (CASE WHEN STND_COST_CD='54550000' THEN TTL_AMT
           END) AS OTHER_OPER,
           (CASE WHEN STND_COST_CD='54350000' THEN TTL_AMT
           END) AS TIME_CHART,
           (CASE WHEN STND_COST_CD='54400000' THEN TTL_AMT
           END) AS SPACE_CHART
    FROM MAS_MNL_DTL_COST
    WHERE COST_YRMON LIKE SUBSTR(REPLACE(@[f_tar_week],'-',''),1,4)||'%'
        AND COST_WK = SUBSTR(REPLACE(@[f_tar_week],'-',''),5,2)    
        AND RLANE_CD = @[rlane_cd]
    )			]]></sql>
			<params>
				<param name="f_tar_week" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
