<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EServiceCompensationDBDAOPriCmpnEsvcVORSQL">
			<desc><![CDATA[E-SVC Compensation Creation 화면조회]]></desc>
			<sql><![CDATA[
SELECT 
	A.CMPN_SEQ
,	A.SVC_SCP_CD
,	A.CMPN_SEQ
,	A.ORG_RGN_CD
,	A.DEST_RGN_CD
,   (SELECT DECODE(COUNT(*),0,0,1) AS PRC_ESVC_TP_CD_W FROM PRI_CMPN_ESVC_TP 
      WHERE SVC_SCP_CD = A.SVC_SCP_CD 
        AND CMPN_SEQ = A.CMPN_SEQ 
        AND ESVC_TP_SEQ = '1' AND PRC_ESVC_TP_CD = 'W' ) AS PRC_ESVC_TP_CD_W
,   (SELECT DECODE(COUNT(*),0,0,1) AS PRC_ESVC_TP_CD_W FROM PRI_CMPN_ESVC_TP 
      WHERE SVC_SCP_CD = A.SVC_SCP_CD 
        AND CMPN_SEQ = A.CMPN_SEQ 
        AND ESVC_TP_SEQ = '2' AND PRC_ESVC_TP_CD = 'E' ) AS PRC_ESVC_TP_CD_E
,   (SELECT DECODE(COUNT(*),0,0,1) AS PRC_ESVC_TP_CD_W FROM PRI_CMPN_ESVC_TP 
      WHERE SVC_SCP_CD = A.SVC_SCP_CD 
        AND CMPN_SEQ = A.CMPN_SEQ 
        AND ESVC_TP_SEQ = '3' AND PRC_ESVC_TP_CD = 'D' ) AS PRC_ESVC_TP_CD_D
,	A.PRC_CTRT_TP_CD
,	DECODE(A.PRC_CTRT_TP_CD,'S', A.SC_NO, A.RFA_NO) SC_NO
,	A.RFA_NO
,	A.CHG_CD
,	A.CURR_CD
,	A.FLT_PCT_TP_CD
,	NVL2(A.CURR_CD,A.DC_AMT,NULL) AS DC_AMT
,   NVL2(A.CURR_CD,NULL,A.DC_AMT) AS DC_PER
,	TO_CHAR(A.EFF_DT,'YYYY-MM-DD') AS EFF_DT
,	TO_CHAR(A.EXP_DT,'YYYY-MM-DD') AS EXP_DT
,	A.CMPN_RMK
,	A.CRE_USR_ID
,	TO_CHAR(A.CRE_DT,'YYYY-MM-DD') AS CRE_DT
,	A.UPD_USR_ID
,	TO_CHAR(A.UPD_DT,'YYYY-MM-DD') AS UPD_DT
FROM PRI_CMPN_ESVC A
WHERE 1 = 1
#if (${svc_scp_cd} != '') 
AND A.SVC_SCP_CD = @[svc_scp_cd]
#end
#if (${org_rgn_cd} != '') 
AND A.ORG_RGN_CD = @[org_rgn_cd]
#end
#if (${dest_rgn_cd} != '') 
AND A.DEST_RGN_CD = @[dest_rgn_cd]
#end
#if (${sc_no} != '') 
AND A.RFA_NO LIKE @[sc_no] || '%'
#end
#if (${chg_cd} != '') 
AND A.CHG_CD = @[chg_cd]
#end
#if (${eff_dt} != '') 
AND TO_DATE(@[eff_dt],'YYYY-MM-DD') BETWEEN A.EFF_DT AND A.EXP_DT
#end
#if (${prc_ctrt_tp_cd} != '') 
AND A.PRC_CTRT_TP_CD = @[prc_ctrt_tp_cd]
#end			]]></sql>
			<params>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="org_rgn_cd" type="12" value="" out="N"/>
				<param name="dest_rgn_cd" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="chg_cd" type="12" value="" out="N"/>
				<param name="eff_dt" type="12" value="" out="N"/>
				<param name="prc_ctrt_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
