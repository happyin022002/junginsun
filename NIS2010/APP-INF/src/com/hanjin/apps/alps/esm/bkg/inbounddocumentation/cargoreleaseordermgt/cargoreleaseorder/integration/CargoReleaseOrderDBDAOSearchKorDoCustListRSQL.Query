<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CargoReleaseOrderDBDAOSearchKorDoCustListRSQL">
			<desc><![CDATA[Cargo Release시 한국 지역에 한하여 위임자 및 수임자 정보를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT ATTY_BIZ_NO
     , ATTY_CUST_NM
     , CNTC_NO1
     , CNTC_NO2
     , DIFF_RMK
     , RGST_OFC_CD
     , RGST_DT
     , RGST_USR_ID
     , UPD_OFC_CD
     , TO_CHAR(UPD_DT, 'YYYY-MM-DD HH24:MI') AS UPD_DT
     , UPD_USR_ID
     , (SELECT USR_NM FROM COM_USER WHERE USR_ID = A.UPD_USR_ID) AS UPD_USR_NM
     , CRE_USR_ID
     , CRE_DT
     , (SELECT COUNT(*) FROM BKG_DO_ATTY_DTL WHERE (FM_ATTY_BIZ_NO = A.ATTY_BIZ_NO OR TO_ATTY_BIZ_NO = A.ATTY_BIZ_NO)) AS CHILD_RECORD
  FROM BKG_DO_ATTY A
 WHERE 1=1

#if (${atty_biz_no} != '') 
   AND ATTY_BIZ_NO = @[atty_biz_no]
#end

#if (${atty_cust_nm} != '') 
   AND LOWER(ATTY_CUST_NM) LIKE LOWER(TRIM(@[atty_cust_nm]))||'%'
#end

ORDER BY UPD_DT DESC			]]></sql>
			<params>
				<param name="atty_biz_no" type="12" value="" out="N"/>
				<param name="atty_cust_nm" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
