<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="FFCmpnAuditDBDAOSearchFFCmpnDetailBasicbyBlListRSQL">
			<desc><![CDATA[SearchFFCmpnDetailBasicbyBlList]]></desc>
			<sql><![CDATA[
SELECT TO_CHAR(B.VSL_DEP_DT, 'YYYY-MM-DD') AS VSL_DEP_DT,
       A.BKG_NO,
       NVL(A.BL_NO, '') AS BL_NO,
       C.CUST_CNT_CD||TRIM(TO_CHAR(C.CUST_SEQ, '000000')) AS SHPR_CNT_SEQ,
       NVL(LTRIM(D.CUST_LGL_ENG_NM), '') AS SHPR_NM,
       DECODE(B.BKG_FF_CNT_CD, '*', '', B.BKG_FF_CNT_CD||TRIM(TO_CHAR(B.BKG_FF_SEQ, '000000'))) AS FF_CNT_SEQ,
       B.VNDR_CNT_CD||TRIM(TO_CHAR(B.VNDR_SEQ, '000000')) AS VNDR_CNT_SEQ,
       NVL(LTRIM(E.CUST_LGL_ENG_NM), '') AS FF_NM,
       B.FF_VSL_CD||B.FF_SKD_VOY_NO||B.FF_SKD_DIR_CD AS COMM_VSL,
       A.POR_CD,
       A.POL_CD,
       A.POD_CD,
       A.DEL_CD,
       B.FF_REF_NO,
       B.FMC_NO,
       NVL(B.SC_NO, '')||'/'||NVL(B.RFA_NO, '') AS SC_RFA_NO,
       '' AS FF_KND_CD
  FROM ACM_AGN_BKG_INFO A,
       ACM_FF_CMPN B,
       BKG_CUSTOMER C,
       MDM_CUSTOMER D,
       MDM_CUSTOMER E
 WHERE A.BKG_NO = B.BKG_NO
   AND A.BKG_NO = C.BKG_NO
   AND C.BKG_CUST_TP_CD = 'S' 
   AND C.CUST_CNT_CD   = D.CUST_CNT_CD(+)
   AND C.CUST_SEQ      = D.CUST_SEQ(+)
   AND B.BKG_FF_CNT_CD = E.CUST_CNT_CD(+)
   AND B.BKG_FF_SEQ    = E.CUST_SEQ(+)
 #if (${bl_no} != '')
   AND A.BL_NO = @[bl_no]
 #end
 #if (${bkg_no} != '')
   AND A.BKG_NO = @[bkg_no]
 #end			]]></sql>
			<params>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
