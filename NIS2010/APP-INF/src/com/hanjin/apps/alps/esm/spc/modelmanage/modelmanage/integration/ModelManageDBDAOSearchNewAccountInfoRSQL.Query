<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ModelManageDBDAOSearchNewAccountInfoRSQL">
			<desc><![CDATA[실적이 아예 없는 화주를 조회 후 Sub Trade Add 했을 경우 해당 Account 기본 정보를 조회합니다.]]></desc>
			<sql><![CDATA[
SELECT A.TRD_CD
    , A.CUST_CNT_CD
    , A.CUST_SEQ
    , A.SC_NO
    , NVL(A.RFA_NO, A.SC_NO) AS RFA_NO
    , A.WK_MQC_QTY
    , A.CUST_CTRL_CD
    , NVL2(A.SC_NO, 'SC', 'RFA') AS SC_RFA_FLG
    , CASE WHEN NVL(B.NEW_KEY_ACCT_FLG,'N') = 'Y' THEN 'CC'
           WHEN NVL(B.GLO_ACCT_FLG,'N') = 'Y' THEN 'CC'
           WHEN NVL(B.RGN_ACCT_FLG,'N') = 'Y' THEN 'RC'
           ELSE 'LC'
       END ACCT_CLSS_CD
    , B.CUST_LGL_ENG_NM
    , (SELECT MAX(OFC_CD)
        FROM MDM_CUSTOMER M
        WHERE M.CUST_CNT_CD = A.CUST_CNT_CD
        AND   M.CUST_SEQ	= A.CUST_SEQ ) AS CTRT_OFC_CD
    , NVL(C.CUST_GRP_NM, B.CUST_LGL_ENG_NM) AS CUST_GRP_NM                 
FROM SPC_MDL_CUST_CTRL A, MDM_CUSTOMER B, MDM_CUST_PERF_GRP C
WHERE A.TRD_CD      = @[trade]
AND A.COST_YRWK     = @[season]
AND A.VER_SEQ       = @[version]
AND A.CUST_CNT_CD||TRIM(TO_CHAR(A.CUST_SEQ, '000009')) = @[acct_cd]
AND A.CUST_CNT_CD   = B.CUST_CNT_CD
AND A.CUST_SEQ      = B.CUST_SEQ
AND B.CUST_GRP_ID   = C.CUST_GRP_ID(+)
AND ROWNUM = 1			]]></sql>
			<params>
				<param name="trade" type="12" value="" out="N"/>
				<param name="season" type="12" value="" out="N"/>
				<param name="version" type="12" value="" out="N"/>
				<param name="acct_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
