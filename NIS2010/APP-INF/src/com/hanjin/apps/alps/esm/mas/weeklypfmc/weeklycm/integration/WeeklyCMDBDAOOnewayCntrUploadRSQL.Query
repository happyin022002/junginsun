<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WeeklyCMDBDAOOnewayCntrUploadRSQL">
			<desc><![CDATA[Oneway Container Upload 의 정보를 조회한다.]]></desc>
			<sql><![CDATA[
SELECT BKG_NO
      ,CNTR_NO
      ,TPSZ_CD
      ,TERM_CD
      ,MVMT_CD
      ,TO_CHAR(ONH_DT, 'YYYY-MM-DD') AS ONH_DT
      ,ONH_YD_CD
      ,TO_CHAR(OFFH_DT, 'YYYY-MM-DD') AS OFFH_DT
      ,OFFH_YD_CD
      ,BKG_NO AS BKG_NO_ORG
      ,CNTR_NO AS CNTR_NO_ORG
      ,ONH_YD_CD AS ONH_YD_CD_ORG
      ,OFFH_YD_CD AS OFFH_YD_CD_ORG
FROM MAS_OFFH_BKG_LIST

#if (${f_fmyearmonth} != '' && ${f_toyearmonth} != '')
    WHERE OFFH_DT BETWEEN TO_DATE(@[f_fmyearmonth] || ' 00:00:00', 'YYYYMMDD HH24:MI:SS') AND TO_DATE(@[f_toyearmonth] || ' 23:59:59', 'YYYYMMDD HH24:MI:SS')
    #if (${f_bkgno} != '' && ${f_cntrno} == '')
        AND BKG_NO LIKE @[f_bkgno]||'%'
    #elseif (${f_bkgno} == '' && ${f_cntrno} != '')
        AND CNTR_NO LIKE @[f_cntrno]||'%'
    #elseif (${f_bkgno} != '' && ${f_cntrno} != '')
        AND BKG_NO LIKE @[f_bkgno]||'%'
        AND CNTR_NO LIKE @[f_cntrno]||'%'
    #end
        
#elseif (${f_fmyearmonth} == '' && ${f_toyearmonth} == '')
    #if (${f_bkgno} != '' && ${f_cntrno} == '')
        WHERE BKG_NO LIKE @[f_bkgno]||'%'
    #elseif (${f_bkgno} == '' && ${f_cntrno} != '')
        WHERE CNTR_NO LIKE @[f_cntrno]||'%'
    #elseif (${f_bkgno} != '' && ${f_cntrno} != '')
        WHERE BKG_NO LIKE @[f_bkgno]||'%'
        AND   CNTR_NO LIKE @[f_cntrno]||'%'
    #end
    
#end

ORDER BY BKG_NO, CNTR_NO			]]></sql>
			<params>
				<param name="f_fmyearmonth" type="12" value="" out="N"/>
				<param name="f_toyearmonth" type="12" value="" out="N"/>
				<param name="f_bkgno" type="12" value="" out="N"/>
				<param name="f_cntrno" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
