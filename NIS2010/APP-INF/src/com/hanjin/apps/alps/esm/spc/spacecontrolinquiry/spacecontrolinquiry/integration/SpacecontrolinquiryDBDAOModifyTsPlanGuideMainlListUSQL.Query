<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpacecontrolinquiryDBDAOModifyTsPlanGuideMainlListUSQL">
			<desc><![CDATA[[T/S Plan & guide Main]을 [UPDATE]합니다.]]></desc>
			<sql><![CDATA[
MERGE INTO SPC_TS_PLN_GID_MN MN 
    USING ( 
            SELECT
                 @[rep_trd_cd]     REP_TRD_CD
                ,@[rep_sub_trd_cd] REP_SUB_TRD_CD                 
                ,@[rlane_cd]       RLANE_CD           
                ,@[vvd_cd]         VVD_CD         
                ,@[irr_port_cd]    IRR_PORT_CD        
                ,@[irr_yd_cd]      IRR_YD_CD    
           FROM DUAL 
           ) TMP
          ON (
                  MN.REP_TRD_CD     = TMP.REP_TRD_CD
              AND MN.REP_SUB_TRD_CD = TMP.REP_SUB_TRD_CD
              AND MN.RLANE_CD       = TMP.RLANE_CD
              AND MN.VVD_CD         = TMP.VVD_CD
              AND MN.IRR_PORT_CD    = TMP.IRR_PORT_CD
              AND MN.IRR_YD_CD      = TMP.IRR_YD_CD
            )
           WHEN MATCHED THEN
                UPDATE SET MN.USR_RMK     = @[usr_rmk]
                         , MN.UPD_USR_ID  = @[upd_usr_id]
                         , MN.UPD_DT      = sysdate 
           WHEN NOT MATCHED THEN 
                INSERT 
                          ( 
                            REP_TRD_CD
                          , REP_SUB_TRD_CD
                          , RLANE_CD
                          , VVD_CD
                          , IRR_PORT_CD
                          , IRR_YD_CD
                          , DIR_CD
                          , CRR_CD
                          , PORT_SKP_TP_CD 
                          , SKD_CNG_STS_CD
                          , PHS_IO_RSN_CD
                          , PORT_SKP_RSN_CD
                          , TS_RMK
                          , USR_RMK
                          , CRE_USR_ID
                          , CRE_DT
                          , UPD_USR_ID
                          , UPD_DT 
                          )
                VALUES ( 
                           @[rep_trd_cd]
                          ,@[rep_sub_trd_cd]
                          ,@[rlane_cd]
                          ,@[vvd_cd]
                          ,@[irr_port_cd]
                          ,@[irr_yd_cd]
                          ,@[dir_cd]
                          ,@[crr_cd]
                          ,NVL(@[port_skp_tp_cd],'X')
                          ,@[skd_cng_sts_cd]
                          ,DECODE(@[skd_cng_sts_cd], 'O', @[skd_cng_rsn_cd])
                          ,DECODE(@[skd_cng_sts_cd], 'S', @[skd_cng_rsn_cd])
                          ,@[ts_rmk]
                          ,@[usr_rmk]
                          ,'AUTO'
                          ,sysdate
                          ,@[upd_usr_id]
                          ,sysdate 
                        )

/*
UPDATE SPC_TS_PLN_GID_MN
SET 
      USR_RMK            = [usr_rmk]
    , UPD_USR_ID         = [upd_usr_id]
    , UPD_DT             = sysdate 
WHERE REP_TRD_CD     = [rep_trd_cd]
AND   REP_SUB_TRD_CD = [rep_sub_trd_cd]
AND   RLANE_CD       = [rlane_cd]
AND   VVD_CD         = [vvd_cd]
AND   IRR_PORT_CD    = [irr_port_cd]
AND   IRR_YD_CD      = [irr_yd_cd]
*/			]]></sql>
			<params>
				<param name="rep_trd_cd" type="12" value="" out="N"/>
				<param name="rep_sub_trd_cd" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
				<param name="vvd_cd" type="12" value="" out="N"/>
				<param name="irr_port_cd" type="12" value="" out="N"/>
				<param name="irr_yd_cd" type="12" value="" out="N"/>
				<param name="usr_rmk" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="dir_cd" type="12" value="" out="N"/>
				<param name="crr_cd" type="12" value="" out="N"/>
				<param name="port_skp_tp_cd" type="12" value="" out="N"/>
				<param name="skd_cng_sts_cd" type="12" value="" out="N"/>
				<param name="skd_cng_rsn_cd" type="12" value="" out="N"/>
				<param name="ts_rmk" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
