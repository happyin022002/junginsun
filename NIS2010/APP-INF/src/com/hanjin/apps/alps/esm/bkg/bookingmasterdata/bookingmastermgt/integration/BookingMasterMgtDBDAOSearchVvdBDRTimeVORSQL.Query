<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingMasterMgtDBDAOSearchVvdBDRTimeVORSQL">
			<desc><![CDATA[BDR TIME 등록화면 Vvd조회]]></desc>
			<sql><![CDATA[
SELECT 
	VSL_CD
,	SKD_VOY_NO
,	SKD_DIR_CD
,	POL_CD
,	POD_CD
,	POD_CLPT_IND_SEQ
,	SLAN_CD
,	SLAN_TP_CD
,	CASE WHEN TRNK_BDR_FLG = 'Y' OR TRNK_AUTO_BDR_FLG = 'Y' OR TRNK_MNL_BDR_FLG = 'Y' THEN 'Y' ELSE 'N' END  TRNK_BDR_FLG
,	TO_CHAR(TRNK_ESTM_BDR_DT,'YYYY-MM-DD') TRNK_ESTM_BDR_DT

, 	DECODE(TRNK_AUTO_BDR_FLG,'Y','A',Decode(TRNK_MNL_BDR_FLG,'Y','M', DECODE(TRNK_BDR_CRE_USR_ID, NULL, '', 'M'))) TRNK_AUTO_BDR_FLG

,	TO_CHAR(TRNK_AUTO_BDR_DT,'YYYY-MM-DD') TRNK_AUTO_BDR_DT
,	TRNK_MNL_BDR_FLG
,	TO_CHAR(TRNK_MNL_BDR_DT,'YYYY-MM-DD') TRNK_MNL_BDR_DT
,	TRNK_BDR_CRE_USR_ID
,	CASE WHEN FDR_BDR_FLG = 'Y' OR FDR_AUTO_BDR_FLG = 'Y' OR FDR_MNL_BDR_FLG = 'Y' THEN 'Y' ELSE 'N' END FDR_BDR_FLG
,	TO_CHAR(FDR_ESTM_BDR_DT,'YYYY-MM-DD') FDR_ESTM_BDR_DT
, 	DECODE(FDR_AUTO_BDR_FLG,'Y','A',Decode(FDR_MNL_BDR_FLG,'Y','M', DECODE(FDR_BDR_CRE_USR_ID, NULL, '', 'M'))) FDR_AUTO_BDR_FLG
,	TO_CHAR(FDR_AUTO_BDR_DT,'YYYY-MM-DD') FDR_AUTO_BDR_DT
,	FDR_MNL_BDR_FLG
,	TO_CHAR(FDR_MNL_BDR_DT,'YYYY-MM-DD') FDR_MNL_BDR_DT
,	FDR_BDR_CRE_USR_ID
,	TO_CHAR(FDR_BDR_UPD_DT,'YYYY-MM-DD HH24:MI') FDR_BDR_UPD_DT
,	BDR_VSL_CHK_FLG
,	CRE_USR_ID
,	CRE_DT
,	UPD_USR_ID
,	TO_CHAR(UPD_DT,'YYYY-MM-DD HH24:MI') UPD_DT
,	'' VVD
,	'' OPT_SEL_BDR
,	'' OPT_SEL_TIME
FROM BKG_VVD_BDR_LOG
WHERE	1=1
#if (${vvd} != '') 
AND   VSL_CD = SUBSTR(@[vvd],1,4)
AND   SKD_VOY_NO = SUBSTR(@[vvd],5,4)
AND   SKD_DIR_CD = SUBSTR(@[vvd],9,1)
#end

#if (${pol_cd} != '') 
AND	POL_CD = @[pol_cd]
#end

#if (${pod_cd} != '') 
AND	POD_CD = @[pod_cd]
#end			]]></sql>
			<params>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
