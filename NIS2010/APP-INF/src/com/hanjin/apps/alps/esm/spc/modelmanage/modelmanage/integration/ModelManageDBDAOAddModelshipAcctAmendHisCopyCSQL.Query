<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ModelManageDBDAOAddModelshipAcctAmendHisCopyCSQL">
			<desc><![CDATA[신규 버전 생성시 최신버전의 Amend 된 account 정보를 그대로 insert합니다.
2014.03.06 [CHM-20142960] SMP/Allocation control보완 요청 - Amend 기능 추가]]></desc>
			<sql><![CDATA[
INSERT INTO SPC_MDL_CUST_CTRL_HIS
    (
       TRD_CD
     , COST_YRWK
     , VER_SEQ
     , MODI_SEQ
     , CUST_CNT_CD
     , CUST_SEQ
     , CUST_GRP_ID
     , SC_NO
     , RFA_NO
     , CUST_CTRL_CD
     , WK_MQC_QTY
     , CNG_ITM_NM
     , OLD_CUST_GRP_ID
     , OLD_CUST_CNT_CD
     , OLD_CUST_SEQ
     , OLD_SC_NO
     , OLD_RFA_NO
     , OLD_WK_MQC_QTY
     , OLD_CUST_CTRL_CD
     , DELT_FLG
     , MODI_USR_ID
     , MODI_GDT
     , CRE_USR_ID
     , CRE_DT
     , UPD_USR_ID
     , UPD_DT
     , SUB_TRD_CD
     , PRE_SC_NO
     , PRE_RFA_NO
    )
SELECT /*+ INDEX (XPKSPC_MDL_CUST_CTRL_HIS) */
       TRD_CD
     , COST_YRWK
     , @[ver_seq] AS VER_SEQ
     , ROWNUM AS MODI_SEQ
     , CUST_CNT_CD
     , CUST_SEQ
     , CUST_GRP_ID
     , SC_NO
     , RFA_NO
     , CUST_CTRL_CD
     , WK_MQC_QTY
     , CNG_ITM_NM
     , OLD_CUST_GRP_ID
     , OLD_CUST_CNT_CD
     , OLD_CUST_SEQ
     , OLD_SC_NO
     , OLD_RFA_NO
     , OLD_WK_MQC_QTY
     , OLD_CUST_CTRL_CD
     , DELT_FLG
     , MODI_USR_ID
     , MODI_GDT
     , @[cre_usr_id]
     , SYSDATE
     , @[cre_usr_id]
     , SYSDATE
     , SUB_TRD_CD
     , PRE_SC_NO
     , PRE_RFA_NO
  FROM SPC_MDL_CUST_CTRL_HIS
 WHERE TRD_CD      = @[trade]
   AND COST_YRWK   = @[cost_yrwk]
   AND VER_SEQ     = TO_NUMBER(@[ver_seq]) - 1
   AND CNG_ITM_NM IN ('RFA UPDATE', 'S/C UPDATE')			]]></sql>
			<params>
				<param name="ver_seq" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="trade" type="12" value="" out="N"/>
				<param name="cost_yrwk" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
