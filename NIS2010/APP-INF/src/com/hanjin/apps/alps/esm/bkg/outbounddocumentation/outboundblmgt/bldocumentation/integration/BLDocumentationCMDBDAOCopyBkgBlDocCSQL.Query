<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationCMDBDAOCopyBkgBlDocCSQL">
			<desc><![CDATA[sourceBkg의 bkg_bl_doc을 targetBkg로 복사한다.]]></desc>
			<sql><![CDATA[
INSERT INTO bkg_bl_doc
        (bkg_no 
        , act_wgt 
        , wgt_ut_cd
        , bl_mv_tp_NM
        , vsl_nm
        , pre_vsl_nm
        , por_cd
        , por_nm
        , pol_cd
        , pol_nm
        , pod_cd
        , pod_nm
        , del_cd
        , del_nm
        , fnl_dest_nm
	    , TTL_PCK_DESC
        , cre_usr_id
        , cre_dt
        , upd_usr_id
        , upd_dt)
select   @[target_bkg_no]
        , bl.act_wgt 
        , bl.wgt_ut_cd
        , bl.bl_mv_tp_NM
        , (select mdm.vsl_eng_nm || ' ' || bk.skd_voy_no || bk.skd_dir_cd from mdm_vsl_cntr mdm where mdm.vsl_cd = bk.vsl_cd)  vsl_nm
        , (select mdm.vsl_eng_nm || ' ' || bk.skd_voy_no || bk.skd_dir_cd from mdm_vsl_cntr mdm where mdm.vsl_cd = vvd.vsl_cd) pre_vsl_nm
        , bl.por_cd
        , bl.por_nm
        , bl.pol_cd
        , bl.pol_nm
        , bl.pod_cd
        , bl.pod_nm
        , bl.del_cd
        , bl.del_nm
        , bl.fnl_dest_nm
	    , bl.TTL_PCK_DESC
        , @[usr_id]
        , sysdate
        , @[usr_id]
        , sysdate
  from bkg_bl_doc bl, bkg_booking bk, bkg_vvd vvd
 where bk.bkg_no = @[source_bkg_no]
   and bk.bkg_no = bl.bkg_no
   and bk.bkg_no = vvd.bkg_no(+)
   and 'S'       = vvd.vsl_pre_pst_cd(+)
   and 1         = vvd.vsl_seq(+)			]]></sql>
			<params>
				<param name="target_bkg_no" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="source_bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
