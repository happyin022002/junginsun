<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingSearchDBDAOSearchZoneCodeRSQL">
			<desc><![CDATA[GeneralBookingSearchDBDAOSearchZoneCode]]></desc>
			<sql><![CDATA[
SELECT  LC.LOC_CD
       ,LC.LOC_NM
       ,ZN.ZN_CD
       ,ZN.ZN_NM
       ,PT.PST_CD
       ,ZD.DSTR_NM
       ,LC.EQ_CTRL_OFC_CD
FROM    MDM_ZONE ZN
       ,MDM_LOCATION LC
       ,BKG_POSTAL PT
       ,MDM_ZN_DTL ZD
WHERE   ZN.LOC_CD = LC.LOC_CD  
#if (${postal_cd} == 'P')    
AND     ZN.LOC_CD = PT.LOC_CD(+)
AND     ZN.ZN_CD = ZD.ZN_CD(+)
#else
AND     ZN.LOC_CD = PT.LOC_CD(+)
AND     ZN.ZN_CD = ZD.ZN_CD
AND     ZD.DSTR_NM IS NOT NULL
#end
#if (${country_cd} != '')    
AND     LC.CNT_CD = @[country_cd]
#end
#if (${loc_cd} != '')    
#if (${loc_cd2}!= '') 
AND     ZN.ZN_CD LIKE @[loc_cd]||'%'||@[loc_cd2]
#else
AND     ZN.LOC_CD LIKE @[loc_cd]||'%'
#end
#else
#if (${loc_cd2}!= '') 
AND     ZN.ZN_CD LIKE '%'||@[loc_cd2]
#end
#end
#if (${eq_ctrl_ofc_cd}!= '') 
AND     LC.EQ_CTRL_OFC_CD = @[eq_ctrl_ofc_cd]
#end			]]></sql>
			<params>
				<param name="country_cd" type="12" value="" out="N"/>
				<param name="loc_cd" type="12" value="" out="N"/>
				<param name="loc_cd2" type="12" value="" out="N"/>
				<param name="eq_ctrl_ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
