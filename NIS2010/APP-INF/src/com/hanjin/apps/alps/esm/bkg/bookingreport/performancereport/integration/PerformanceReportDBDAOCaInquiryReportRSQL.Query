<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PerformanceReportDBDAOCaInquiryReportRSQL">
			<desc><![CDATA[search]]></desc>
			<sql><![CDATA[
SELECT BKG.BKG_NO
      ,COR.CORR_NO 
      ,BKG_JOIN_FNC(CURSOR(SELECT CORR_NO FROM BKG_CORRECTION WHERE BKG_NO = BKG.BKG_NO)) CORR_NOS
      ,REF.CUST_REF_NO_CTNT
      ,BKG.BKG_CGO_TP_CD
	  --,NVL((SELECT CR_FLG FROM BKG_OUTSTANDING WHERE  CLT_BL_NO = BKG.BL_NO  AND  OFC_CD = RATE.CLT_OFC_CD),'N') FRT_TERM_CD /* Freight */
      ,DECODE(NVL((SELECT CR_FLG FROM BKG_OUTSTANDING WHERE  CLT_BL_NO = BKG.BL_NO  AND  OFC_CD = RATE.CLT_OFC_CD),'N'),'N',
             (DECODE((SELECT (SUM(BAL_FRT_OFC_CURR_AMT) + SUM(BAL_WFG_OFC_CURR_AMT) + SUM(BAL_CTT_OFC_CURR_AMT) + SUM(BAL_TAX_OFC_CURR_AMT) + SUM(BAL_RSV_OFC_CURR_AMT) +
                              SUM(BAL_FRT_USD_AMT) + SUM(BAL_WFG_USD_AMT) + SUM(BAL_CTT_USD_AMT) + SUM(BAL_TAX_USD_AMT) + SUM(BAL_RSV_USD_AMT))
                        FROM BKG_OTS_DTL
                       WHERE CLT_BL_NO = BKG.BL_NO),0,'Y','N')),'Y')  FRT_TERM_CD /* Freight */
      ,ISS.OBL_ISS_FLG
      ,BKG.VSL_CD || BKG.SKD_VOY_NO || BKG.SKD_DIR_CD  VVD
      ,(SELECT VSL_ENG_NM FROM MDM_VSL_CNTR WHERE VSL_CD = BKG.VSL_CD) VSL_ENG_NM
      ,BKG.POL_CD
      ,BKG.POR_CD
      ,BKG.POD_CD
      ,BKG.DEL_CD
      ,TO_CHAR((select  VPS_ETA_DT from vsk_vsl_port_skd  
				where  (VSL_CD,SKD_VOY_NO,SKD_DIR_CD,VPS_PORT_CD) = 
					   (select VVD.VSL_CD,VVD.SKD_VOY_NO,VVD.SKD_DIR_CD,VVD.POD_CD 
						from bkg_vvd vvd , bkg_booking bk 
						where  bk.bkg_no = BKG.BKG_NO
						and    bk.bkg_no = vvd.bkg_no
						and    bk.pod_cd = vvd.pod_cd)), 'YYYY-MM-DD HH:MI') ETA
      ,QUA.OP_CNTR_QTY
      ,DOC.PCK_QTY
      ,DOC.PCK_TP_CD
      ,ROUND(DOC.ACT_WGT,2) ACT_WGT
      ,DOC.WGT_UT_CD
      ,ROUND(DOC.MEAS_QTY,2) MEAS_QTY
      ,DOC.MEAS_UT_CD
      ,MK.MK_DESC
	  ,(SELECT CNTR_MF_GDS_DESC 
        FROM BKG_CNTR_MF_DESC
        WHERE BKG_NO = BKG.BKG_NO
		  AND ROWNUM = 1
          AND CNTR_MF_SEQ = (SELECT MAX(CNTR_MF_SEQ)
							 FROM BKG_CNTR_MF_DESC
							 WHERE BKG_NO = BKG.BKG_NO)
       ) CMDT_DESC  
      ,BKG_GET_CSTMS_REF_NO_FNC(BKG.BL_NO) CUST_REF_NO
      ,'' BKG_CUST_TP_CD
      ,'' CUST_CNT_CD 
	  ,'' CUST_SEQ    
      ,'' CUST_NM     
      ,'' CUST_ADDR   
      ,'' CUST_FAX_NO          
      ,'' MK_SEQ
      ,'' LOC_TS
      ,'' CNTR_NO
      ,'' CNTR_TPSZ_CD
      ,'' CNTR_SEAL_NO
      ,'' CNTR_PRT_FLG
      ,'' RCV_TERM_CD
      ,'' DE_TERM_CD
      ,'' DIFF_RMK
  FROM BKG_BOOKING      BKG
      ,BKG_CORRECTION   COR
      ,BKG_REFERENCE    REF
      ,BKG_BL_ISS       ISS
      ,BKG_QUANTITY     QUA
      ,BKG_BL_DOC       DOC
      ,BKG_BL_MK_DESC   MK
	  ,BKG_RATE         RATE      
 WHERE BKG.BKG_NO = COR.BKG_NO(+)
   AND BKG.BKG_NO = REF.BKG_NO(+)
   AND BKG.BKG_NO = ISS.BKG_NO(+)
   AND BKG.BKG_NO = QUA.BKG_NO(+)
   AND BKG.BKG_NO = DOC.BKG_NO(+)
   AND BKG.BKG_NO = MK .BKG_NO(+)
   AND BKG.BKG_NO = RATE.BKG_NO(+)
   AND COR.CORR_NO <> '0000000001'
   AND COR.CORR_CXL_FLG = 'N'
   AND BKG.BL_NO = @[bl_no]			]]></sql>
			<params>
				<param name="bl_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
