<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOsearchVGMUploadAckRSQL">
			<desc><![CDATA[searchVGMUploadAckRSQL]]></desc>
			<sql><![CDATA[
select
'IVC_NO:' || rqst.XTER_VGM_RQST_NO
||CHR(10)||'IVC_FUNCCD:' || NVL(RQST.VGM_EDI_TP_CD, '4')
||CHR(10)||'IVC_DATE:' || to_char(sysdate,'CCYYMMDDHHMM')
||CHR(10)||'IVC_BKGNO:' || rqst.BKG_NO
||CHR(10)||'IVC_CNTRNO:' || rqst.CNTR_NO
||CHR(10)||'IVC_RES_CD:' || DECODE(rqst.VGM_UPLD_STS_CD,'F','AP','R','RE','')
||CHR(10)||'IVC_RESPONSE:' || rqst.RJCT_RSN_RMK
||CHR(10)||'IVC_BKG_REFNO:' || rqst.XTER_BKG_RQST_REF_NO
||CHR(10)||'IVC_SI_REFNO:' || rqst.XTER_SI_REF_NO
||CHR(10)||'{IVC_CNTR_CUST'
||CHR(10)||'IVCC_CD:' || pty.VGM_PTY_TP_CD
||CHR(10)||'IVCC_NM:' || pty.VGM_PTY_ID
||CHR(10)||'IVCC_ADDR:' || pty.VGM_PTY_ADDR
||CHR(10)||'IVCC_PERSON_NM:' || pty.AUTH_PSON_NM
||CHR(10)||'IVCC_TEL:' || pty.VGM_PTY_CNTC_PHN_NO
||CHR(10)||'IVCC_EML:' || pty.VGM_PTY_EML
||CHR(10)||'IVCC_FAX:' || pty.VGM_PTY_FAX_NO
||CHR(10)||'}IVC_CNTR_CUST' as FLAT_FILE
FROM BKG_XTER_VRFD_WGT_RQST RQST,
	 BKG_XTER_VRFD_WGT_PTY PTY
WHERE RQST.XTER_SNDR_ID = PTY.XTER_SNDR_ID
  AND RQST.XTER_VGM_RQST_NO = PTY.XTER_VGM_RQST_NO
  AND RQST.XTER_VGM_SEQ = PTY.XTER_VGM_SEQ
  AND RQST.CNTR_NO = PTY.CNTR_NO
  AND RQST.XTER_SNDR_ID = @[xter_sndr_id]
  AND RQST.XTER_VGM_RQST_NO = @[xter_vgm_rqst_no]
  AND RQST.XTER_VGM_SEQ = @[xter_vgm_seq]
  AND RQST.CNTR_NO = @[cntr_no]			]]></sql>
			<params>
				<param name="xter_sndr_id" type="12" value="" out="N"/>
				<param name="xter_vgm_rqst_no" type="12" value="" out="N"/>
				<param name="xter_vgm_seq" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
