<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WeeklyCMDBDAOCoaInterOwnTmlCostVOUSQL">
			<desc><![CDATA[ESM_COA_118 TML 단가 수정]]></desc>
			<sql><![CDATA[
MERGE INTO COA_INTER_OWN_TML_COST A
     USING (SELECT @[cost_yrmon] COST_YRMON
                  ,@[tml_cd] TML_CD
                  ,@[tml_trf_itm_cd] TML_TRF_ITM_CD
                  ,@[tml_trf_dtl_cd] TML_TRF_DTL_CD   
                  ,@[cntr_tpsz_cd] CNTR_TPSZ_CD
                  ,@[coa_cost_src_cd] COA_COST_SRC_CD
                  ,@[tml_ut_cd] TML_UT_CD
                  ,@[locl_curr_cd] LOCL_CURR_CD
                  ,TO_NUMBER(@[tml_qty]) TML_QTY
                  ,TO_NUMBER(@[locl_tml_amt]) LOCL_TML_AMT
                  ,TO_NUMBER(@[tml_usd_amt]) TML_USD_AMT
                  ,TO_NUMBER(@[tml_uc_amt]) TML_UC_AMT
                  ,@[cre_usr_id] CRE_USR_ID
                  ,SYSDATE CRE_DT
                  ,@[upd_usr_id] UPD_USR_ID
                  ,SYSDATE UPD_DT
                  ,@[uc_slan_cd] UC_SLAN_CD
              FROM DUAL) B
    ON (A.COST_YRMON = B.COST_YRMON
        AND A.TML_CD = B.TML_CD
        AND A.TML_TRF_ITM_CD = B.TML_TRF_ITM_CD
        AND A.TML_TRF_DTL_CD = B.TML_TRF_DTL_CD
        AND A.CNTR_TPSZ_CD = B.CNTR_TPSZ_CD
        AND A.UC_SLAN_CD = B.UC_SLAN_CD)
    WHEN NOT MATCHED THEN
        INSERT (COST_YRMON, TML_CD, TML_TRF_ITM_CD, TML_TRF_DTL_CD, CNTR_TPSZ_CD, COA_COST_SRC_CD
			   ,TML_UT_CD ,LOCL_CURR_CD, TML_QTY, LOCL_TML_AMT, TML_USD_AMT, TML_UC_AMT, CRE_USR_ID
               ,CRE_DT, UPD_USR_ID, UPD_DT, UC_SLAN_CD)
        VALUES (B.COST_YRMON, B.TML_CD, B.TML_TRF_ITM_CD, B.TML_TRF_DTL_CD, B.CNTR_TPSZ_CD, B.COA_COST_SRC_CD
               ,B.TML_UT_CD, B.LOCL_CURR_CD, B.TML_QTY, B.LOCL_TML_AMT,B.TML_USD_AMT, B.TML_UC_AMT, B.CRE_USR_ID
			   ,B.CRE_DT, B.UPD_USR_ID, B.UPD_DT, B.UC_SLAN_CD)
    WHEN MATCHED THEN
        UPDATE
           SET A.COA_COST_SRC_CD = B.COA_COST_SRC_CD, A.TML_UT_CD = B.TML_UT_CD, A.LOCL_CURR_CD = B.LOCL_CURR_CD
              ,A.TML_QTY = B.TML_QTY ,A.LOCL_TML_AMT = B.LOCL_TML_AMT, A.TML_USD_AMT = B.TML_USD_AMT
			  , A.TML_UC_AMT = B.TML_UC_AMT ,A.UPD_USR_ID = B.UPD_USR_ID, A.UPD_DT = B.UPD_DT			]]></sql>
			<params>
				<param name="cost_yrmon" type="12" value="" out="N"/>
				<param name="tml_cd" type="12" value="" out="N"/>
				<param name="tml_trf_itm_cd" type="12" value="" out="N"/>
				<param name="tml_trf_dtl_cd" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
				<param name="coa_cost_src_cd" type="12" value="" out="N"/>
				<param name="tml_ut_cd" type="12" value="" out="N"/>
				<param name="locl_curr_cd" type="12" value="" out="N"/>
				<param name="tml_qty" type="12" value="" out="N"/>
				<param name="locl_tml_amt" type="12" value="" out="N"/>
				<param name="tml_usd_amt" type="12" value="" out="N"/>
				<param name="tml_uc_amt" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="uc_slan_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
