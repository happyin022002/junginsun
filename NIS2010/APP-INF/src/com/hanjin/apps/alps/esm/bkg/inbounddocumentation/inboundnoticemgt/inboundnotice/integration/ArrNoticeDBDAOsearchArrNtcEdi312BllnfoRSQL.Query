<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ArrNoticeDBDAOsearchArrNtcEdi312BllnfoRSQL">
			<desc><![CDATA[searchArrNtcEdi312Bllnfo]]></desc>
			<sql><![CDATA[
SELECT 'BL_NO:'          || BKGM.BL_NO 						                                || CHR(10) || 
       'BKG_NO:'         || BKGM.BKG_NO								                || CHR(10) || 
       'FUNC_CODE:'      || ''                                                                                  || CHR(10) ||
       'GROUP_ID:'       || (SELECT  decode(seq, 'A', id, id||lPAD(seq, 5, '0'))
			      FROM    (SELECT substr(esvc_grp_cd, 1, 3) id
			                    , min(trim(substr(nvl(esvc_grp_cd, 'A'), 4, 7))) seq
			                FROM    bkg_edi_grp eg
			                WHERE   eg.cust_trd_prnr_id = @[rcv_id]
			                and     eg.esvc_grp_delt_flg = 'N'
			                GROUP BY substr(esvc_grp_cd, 1, 3)
			                ORDER BY substr(esvc_grp_cd, 1, 3)
			               ) 
			     WHERE   rownum  = 1)                                                                || CHR(10) ||
       'SR_NO:'          || ''                                                                                   || CHR(10) ||
       'LC_NO:'          || ''                                                                                   || CHR(10) ||
       'VSL_CD:'         || BVVD.VSL_CD                                                                          || CHR(10) ||
       'LLOYD:'          || VSL.LLOYD_NO                                                                         || CHR(10) ||
       'CALL_SIGN:'      || VSL.CALL_SGN_NO                                                                      || CHR(10) ||
       'VSL_FLAG:'       || VSL.VSL_RGST_CNT_CD                                                                  || CHR(10) ||
       'VSL_NAME:'       || VSL.VSL_ENG_NM                                                                       || CHR(10) ||
       'TOVOY:'          || BVVD.SKD_VOY_NO                                                                      || CHR(10) ||
       'TODIR:'          || BVVD.SKD_DIR_CD                                                                      || CHR(10) ||
       'BLDATE:'         || TO_CHAR( BISS.OBL_ISS_DT , 'YYYYMMDDHH24MISS')                                       || CHR(10) ||
       'BLPLACE:'        || BISS.OBL_ISS_OFC_CD                                                                  || CHR(10) ||
       'VSL_ETB:'        || TO_CHAR( VSK.VPS_ETB_DT , 'YYYYMMDDHH24MISS')                                        || CHR(10) ||
       'VSL_ETD:'        || TO_CHAR( VSK.VPS_ETD_DT , 'YYYYMMDDHH24MISS')        				 || CHR(10) ||
       'VSL_ETA:'        || TO_CHAR( VSK.VPS_ETA_DT , 'YYYYMMDDHH24MISS')        				 || CHR(10) ||
       'BLPOR:'          || BKGM.POR_CD                                                                          || CHR(10) ||
       'POR_NAME:'       || NVL(POR.LOC_NM,' ')                                                                  || CHR(10) ||
       'POR_COUN:'       || POR.CNT_CD                                                                           || CHR(10) ||
       'POR_ETA:'        || ''                                                                                   || CHR(10) ||
       'POR_ETD:'        || ''                                                                                   || CHR(10) ||
       'POR_AMSQUAL:'    || DECODE(LENGTH(POR.LOC_AMS_PORT_CD), 4, 'D', 5, 'K', ' ')                             || CHR(10) ||
       'POR_AMSPORT:'    || POR.LOC_AMS_PORT_CD                                                                  || CHR(10) ||
       'BLPOL:'          || BKGM.POL_CD                                                                          || CHR(10) ||
       'POL_NAME:'       || NVL(POL.LOC_NM,' ')                                                                  || CHR(10) ||
       'POL_COUN:'       || POL.CNT_CD                                                                           || CHR(10) ||
       'POL_ETA:'        || ''                                                                                   || CHR(10) ||
       'POL_ETD:'        || ''                                                                                   || CHR(10) ||
       'POL_AMSQUAL:'    || DECODE(LENGTH(POL.LOC_AMS_PORT_CD), 4, 'D', 5, 'K', ' ')                             || CHR(10) ||
       'POL_AMSPORT:'    || POL.LOC_AMS_PORT_CD                                                                  || CHR(10) ||
       'BLPOD:'          || BKGM.POD_CD                                                                          || CHR(10) ||
       'POD_NAME:'       || NVL(POD.LOC_NM,' ')                                                                  || CHR(10) ||
       'POD_COUN:'       || POD.CNT_CD                                                                           || CHR(10) ||
       'POD_ETA:'        || ''                                                                                   || CHR(10) ||
       'POD_ETD:'        || ''                                                                                   || CHR(10) ||
       'POD_AMSQUAL:'   || DECODE(LENGTH(POD.LOC_AMS_PORT_CD), 4, 'D', 5, 'K', ' ')                             || CHR(10) ||
       'POD_AMSPORT:'   || POD.LOC_AMS_PORT_CD                                                                  || CHR(10) ||
       'BLDEL:'          || BKGM.DEL_CD                                                                          || CHR(10) ||
       'DEL_NAME:'       || NVL(DEL.LOC_NM,' ')                                                                  || CHR(10) ||
       'DEL_COUN:'       || DEL.CNT_CD                                                                           || CHR(10) ||
       'DEL_ETA:'        || ''                                                                                   || CHR(10) ||
       'DEL_ETD:'        || ''                                                                                   || CHR(10) ||
       'DEL_AMSQUAL:'    || DECODE(LENGTH(DEL.LOC_AMS_PORT_CD), 4, 'D', 5, 'K', ' ')                             || CHR(10) ||
       'DEL_AMSPORT:'    || DEL.LOC_AMS_PORT_CD                                                                  || CHR(10) ||
       'WUNIT:'          || 'G'                                                                                  || CHR(10) ||
       'TOT_WGT:'        || BDOC.ACT_WGT                                       									 || CHR(10) ||
       'MUNIT:'          || SUBSTR(BDOC.MEAS_UT_CD, 3, 1)                                                        || CHR(10) ||
       'TOT_MEAS:'       || BDOC.MEAS_QTY									                                     || CHR(10) ||
       'PUNIT:'          || BDOC.PCK_TP_CD                                                                       || CHR(10) ||
       'TOT_PKG:'        || BDOC.PCK_QTY							                                             || CHR(10) ||
       'RDTYP:'          || BKGM.RCV_TERM_CD ||BKGM.DE_TERM_CD                                                   || CHR(10) ||
       'SCAC:'           || 'SMLM'                                                                           	 || CHR(10) ||
       'SMOD:'           || BKGM.DEST_TRNS_SVC_MOD_CD                                                            || CHR(10) ||
       'SMANC:'          || BKGM.OB_SREP_CD                                                                      || CHR(10) ||
       'REMARK:'         || BKGM.INTER_RMK                                                                       || CHR(10) ||
       'SMANN:'          || SREP.SREP_NM                                                                         || CHR(10) ||
       'CMD:'            || NVL(CMDT.CMDT_CD, RCMDT.REP_CMDT_CD)                                                 || CHR(10) ||
       'CMDD:'           || NVL(CMDT.CMDT_NM, RCMDT.REP_CMDT_NM)                                                 || CHR(10) ||
       'CANCEL_BIT:'     || BKGM.BKG_STS_CD                                                                      || CHR(10) ||
       'SALES_OFC:'      || BKGM.OB_SLS_OFC_CD                                                                   || CHR(10) ||
       'CARGOTYPE:'      || BKGM.BKG_CGO_TP_CD                                                                   || CHR(10) ||
       'DR_IND:'         || DECODE(BKGM.DCGO_FLG,'Y','1','0')                                                    || CHR(10) ||
       'RF_IND:'         || DECODE(BKGM.RC_FLG,'Y','1','0')                                                      || CHR(10) ||
       'AK_IND:'         || DECODE(BKGM.AWK_CGO_FLG,'Y','1','0')                                                 || CHR(10) ||
       'BN_POD_DT:'      || TO_CHAR(ANTC.POD_ARR_DT , 'YYYYMMDDHH24MISS')                                        || CHR(10) ||
       'BN_DEL_DT:'      || TO_CHAR(ANTC.DEL_ARR_DT , 'YYYYMMDDHH24MISS')         				 || CHR(10) ||
       'BN_AVAIL_DT:'    || TO_CHAR(ANTC.PKUP_AVAL_DT , 'YYYYMMDDHH24MISS')      				 || CHR(10) ||
       'BN_FREE_DT:'     || TO_CHAR(ANTC.PKUP_FREE_DT , 'YYYYMMDDHH24MISS')       				 || CHR(10) ||
       'GEN_OR_DT:'      || TO_CHAR(ANTC.PKUP_FREE_DT + 15 , 'YYYYMMDDHH24MISS')  				 || CHR(10) ||
       'BLINFO_FRTIND:' || DECODE(NVL(RATE.FRT_TERM_CD,''), 'C','CC','P','PP','')                             || CHR(10) ||
       'ANDATE:'         || TO_CHAR(SYSDATE , 'YYYYMMDDHH24MISS')                                                || CHR(10) ||
       'SAILDATE:'       || TO_CHAR(ANTC.POD_ARR_DT , 'YYYYMMDDHH24MISS')  || CHR(10)       
 FROM BKG_BOOKING        BKGM                                                                                     
    , BKG_VVD            BVVD
    , MDM_VSL_CNTR       VSL
    , BKG_BL_ISS         BISS
    , VSK_VSL_PORT_SKD   VSK
    , MDM_LOCATION       POR
    , MDM_LOCATION       POL
    , MDM_LOCATION       POD
    , MDM_LOCATION       DEL
    , BKG_BL_DOC         BDOC
    , MDM_COMMODITY      CMDT
    , MDM_REP_CMDT       RCMDT
    , MDM_SLS_REP        SREP   
    , BKG_ARR_NTC        ANTC
    , BKG_RATE           RATE   
WHERE BKGM.BKG_NO          = @[bkg_no]
AND   BVVD.BKG_NO(+)       = BKGM.BKG_NO  
AND   BVVD.POD_CD(+)       = BKGM.POD_CD                          
AND   VSL.VSL_CD(+)        = BVVD.VSL_CD                         
AND   BISS.BKG_NO(+)       = BKGM.BKG_NO                         
AND   VSK.VSL_CD           = BVVD.VSL_CD
AND   VSK.SKD_VOY_NO       = BVVD.SKD_VOY_NO
AND   VSK.SKD_DIR_CD       = BVVD.SKD_DIR_CD
AND   VSK.VPS_PORT_CD      = BVVD.POD_CD
AND   VSK.CLPT_IND_SEQ     = BVVD.POD_CLPT_IND_SEQ                         
AND   POR.LOC_CD           = BKGM.POR_CD
AND   POL.LOC_CD           = BKGM.POL_CD
AND   POD.LOC_CD           = BKGM.POD_CD
AND   DEL.LOC_CD           = BKGM.DEL_CD                         
AND   BDOC.BKG_NO          = BKGM.BKG_NO
AND   CMDT.CMDT_CD(+)      = BKGM.CMDT_CD  
AND   RCMDT.REP_CMDT_CD(+) = BKGM.REP_CMDT_CD
AND   SREP.SREP_CD(+)      = BKGM.OB_SREP_CD
AND   ANTC.BKG_NO          = BKGM.BKG_NO
--AND   BCGO.BL_NO(+)        = BKGM.BL_NO
AND   RATE.BKG_NO(+)       = BKGM.BKG_NO 			]]></sql>
			<params>
				<param name="rcv_id" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
