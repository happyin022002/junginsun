<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ModelManageDBDAOAddSpaceManagementPlanHOCSQL">
			<desc><![CDATA[HO Space Management Plan 정보를 저장합니다.
[CHM-201322502-01] SPC 프로젝트 - 성수기 선복운영 개선을 위한 T/F추진
2014.02.04 [CHM-201428383-01] RFA 로직 추가]]></desc>
			<sql><![CDATA[
INSERT INTO SPC_MDL_CUST_REV_LANE M(
    M.COST_YRWK       
  , M.VER_SEQ         
  , M.TRD_CD          
  , M.SUB_TRD_CD      
  , M.RLANE_CD        
  , M.SLS_RGN_OFC_CD  
  , M.CUST_CNT_CD     
  , M.CUST_SEQ        
  , M.DTL_SEQ
  , M.SC_NO
  , M.RFA_NO
  , M.CUST_CTRL_CD    
  , M.SLS_RHQ_CD      
  , M.SLS_AQ_CD
  , M.CTRT_OFC_CD     
  , M.CUST_BKG_QTY    
  , M.SUB_TRD_BKG_QTY 
  , M.CUST_ADJ_QTY    
  , M.SUB_TRD_ADJ_QTY 
  , M.SUB_TRD_CMPB_AMT
  , M.DELT_FLG
  , M.CRE_USR_ID      
  , M.CRE_DT          
  , M.UPD_USR_ID      
  , M.UPD_DT
#if (${spc_ctrl_mdl_mnl_cd} == 'O') 
  , M.SPC_CTRL_MDL_MNL_CD
  , M.SPC_CTRL_MDL_MNL_RMK
#end
  , M.RHQ_UPD_USR_ID
  , M.RHQ_UPD_DT
  , M.OFC_UPD_USR_ID
  , M.OFC_UPD_DT
) VALUES (
    @[cost_yrwk]       
  , @[ver_seq]         
  , @[trd_cd]          
  , @[sub_trd_cd]      
  , NVL(@[rlane_cd], (SELECT RLANE_CD
                       FROM MDM_DTL_REV_LANE
                      WHERE TRD_CD = @[trd_cd] 
                        AND SUB_TRD_CD = @[sub_trd_cd]
                        AND DELT_FLG = 'N'
                        AND ROWNUM = 1))
  , @[sls_rgn_ofc_cd]  
  , @[cust_cnt_cd]     
  , @[cust_seq]        
  , (SELECT NVL(MAX(DTL_SEQ),0)+1
       FROM SPC_MDL_CUST_REV_LANE M
      WHERE M.COST_YRWK      = @[cost_yrwk]     
        AND M.VER_SEQ        = @[ver_seq]       
        AND M.TRD_CD         = @[trd_cd]        
        AND M.SUB_TRD_CD     = @[sub_trd_cd]    
        AND M.RLANE_CD       = NVL(@[rlane_cd], M.RLANE_CD)
   		AND M.SLS_RHQ_CD     = @[sls_rhq_cd]
   		AND M.SLS_RGN_OFC_CD = @[sls_rgn_ofc_cd]
   		AND M.CTRT_OFC_CD    = @[ctrt_ofc_cd]
        AND M.CUST_CNT_CD    = @[cust_cnt_cd]   
        AND M.CUST_SEQ       = @[cust_seq]      
    )
  , @[sc_no]
  , @[rfa_no]
  , @[cust_ctrl_cd]    
  , @[sls_rhq_cd]      
  , (SELECT N3RD_PRNT_OFC_CD
       FROM SPC_OFC_LVL
      WHERE OFC_CD = @[sls_rgn_ofc_cd]
        AND (SELECT COST_YR||COST_WK FROM MAS_WK_PRD WHERE TO_CHAR(SYSDATE,'YYYYMMDD') BETWEEN SLS_FM_DT AND SLS_TO_DT) BETWEEN OFC_APLY_FM_YRWK AND OFC_APLY_TO_YRWK
        AND DELT_FLG = 'N'
    )
  , @[ctrt_ofc_cd]     
  , TO_NUMBER(@[cust_qty]) * DECODE(@[unit], 'T', 1, 2)
  , TO_NUMBER(@[strd_qty]) * DECODE(@[unit], 'T', 1, 2)
  , TO_NUMBER(@[cust_adj_qty]) * DECODE(@[unit], 'T', 1, 2) 
  , TO_NUMBER(@[strd_adj_qty]) * DECODE(@[unit], 'T', 1, 2)
  , TO_NUMBER(@[strd_cmpb]) * DECODE(@[unit], 'T', 1, 2)
  , NVL(@[delt_flg], 'N')
  , @[usr_id]
  , SYSDATE
  , @[usr_id]
  , SYSDATE
#if (${spc_ctrl_mdl_mnl_cd} == 'O') 
  , @[spc_ctrl_mdl_mnl_cd]
  , '['||TO_CHAR(SYSDATE,'YYYYMMDD')||'|'||@[usr_id]||'|OFC ADD]'
#end
  , DECODE(@[spc_ctrl_mdl_mnl_cd], 'O', DECODE(@[g1_cng_usr], 'USER', DECODE(@[ho_flg], 'Y', @[usr_id], 'INIT'), 'INIT'), 'INIT')
  , SYSDATE
  , DECODE(@[spc_ctrl_mdl_mnl_cd], 'O', DECODE(@[g2_cng_usr], 'USER', DECODE(@[ho_flg], 'Y', @[usr_id], 'INIT'), 'INIT'), 'INIT')
  , SYSDATE
)			]]></sql>
			<params>
				<param name="cost_yrwk" type="12" value="" out="N"/>
				<param name="ver_seq" type="12" value="" out="N"/>
				<param name="trd_cd" type="12" value="" out="N"/>
				<param name="sub_trd_cd" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
				<param name="sls_rgn_ofc_cd" type="12" value="" out="N"/>
				<param name="cust_cnt_cd" type="12" value="" out="N"/>
				<param name="cust_seq" type="12" value="" out="N"/>
				<param name="sls_rhq_cd" type="12" value="" out="N"/>
				<param name="ctrt_ofc_cd" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="rfa_no" type="12" value="" out="N"/>
				<param name="cust_ctrl_cd" type="12" value="" out="N"/>
				<param name="cust_qty" type="12" value="" out="N"/>
				<param name="unit" type="12" value="" out="N"/>
				<param name="strd_qty" type="12" value="" out="N"/>
				<param name="cust_adj_qty" type="12" value="" out="N"/>
				<param name="strd_adj_qty" type="12" value="" out="N"/>
				<param name="strd_cmpb" type="12" value="" out="N"/>
				<param name="delt_flg" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="spc_ctrl_mdl_mnl_cd" type="12" value="" out="N"/>
				<param name="g1_cng_usr" type="12" value="" out="N"/>
				<param name="ho_flg" type="12" value="" out="N"/>
				<param name="g2_cng_usr" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
