<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="NetworkCostDBDAOSearchAverageUCListRSQL">
			<desc><![CDATA[History------------------------------
2010.11.15 이행지 [CHM-201006375-01] [COA] Trunk IPC와 Ocean간 내부거래 신규 추가로 인해서
                                                        기존로직에서 제외하도록 수정]]></desc>
			<sql><![CDATA[
SELECT
      '' 									 IBFLAG 
    , '' 									 F_COST_YRMON  /* 저장시 사용위해*/	
    , TRIM(B.TRD_CD)  						 TRD_CD  	 
    , TRIM(B.RLANE_CD) 						 RLANE_CD 	
    , (SELECT MGRP_COST_CD_DESC    	    		
 	     FROM COA_MN_GRP_COST    	    	
 	     WHERE MGRP_COST_CD =A.MGRP_COST_CD) SUB_GROUP 	
 	, A.STND_COST_CD 						 STND_COST_CD 	
 	, A.STND_COST_NM 						 STND_COST_NM 	
 	, B.OP_COST_AMT 					     OP_COST_AMT  	
 	, B.BSA_CAPA 							 BSA_CAPA 	
 	, ROUND(DECODE(B.BSA_CAPA, 0, 0, B.OP_COST_AMT/B.BSA_CAPA),3) 	 BSA_CAPA_CAL 	
 	, B.OP_UC_AMT 				             OP_UC_AMT
	, (CASE WHEN B.OP_LANE_TP_CD = 'T' THEN 'VESSEL POOL' 
     		WHEN B.OP_LANE_TP_CD = 'S' THEN 'SUB TRADE AVG U/C' 
     		WHEN B.OP_LANE_TP_CD IN ('L', 'LA') THEN 'LANE AVG U/C' 
     		ELSE 'SUB TRADE AVG U/C: '||B.OP_LANE_TP_CD
     		END)  						   AS VVD_RMK

  FROM COA_OP_AVG_UT_COST B , COA_STND_ACCT A  
 WHERE B.COST_YRMON= @[f_cost_yrmon]	
   AND B.COST_USE_TP_CD	= @[f_cost_use_tp_cd]   
 #if (${f_trd_cd} != '')  	  
   AND B.TRD_CD	    = @[f_trd_cd] 
 #end
 #if (${f_rlane_cd} != '') 
   AND B.RLANE_CD     = @[f_rlane_cd] 
 #end 	  

 /*GROUP*/
 #if (${f_avg_grp_cd} != '') 
   AND B.OP_LANE_TP_CD= @[f_avg_grp_cd] 
 #end 

 /*SUB GROUP*/
 #if (${f_avg_suvgrp} != '') 
   AND A.MGRP_COST_CD = @[f_avg_suvgrp]
 #end 

 /*COA CODE*/
 #if (${f_coa_cd} != '') 
   AND A.STND_COST_CD = @[f_coa_cd]
 #end
   AND (a.mgrp_cost_cd in ('OV','OF') or a.stnd_cost_cd = '43102011')   
   AND A.STND_COST_CD <> '54600000'
   AND A.STND_COST_CD = B.STND_COST_CD  
 
 ORDER BY B.TRD_CD,  B.RLANE_CD, B.STND_COST_CD			]]></sql>
			<params>
				<param name="f_cost_yrmon" type="12" value="201112" out="N"/>
				<param name="f_cost_use_tp_cd" type="12" value="" out="N"/>
				<param name="f_trd_cd" type="12" value="" out="N"/>
				<param name="f_rlane_cd" type="12" value="" out="N"/>
				<param name="f_avg_grp_cd" type="12" value="" out="N"/>
				<param name="f_avg_suvgrp" type="12" value="" out="N"/>
				<param name="f_coa_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
