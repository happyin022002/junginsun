<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationCMDBDAOSearchBdrFlgForNewRouteRSQL">
			<desc><![CDATA[BKG No.로 BDR이 걸렸는지 check]]></desc>
			<sql><![CDATA[
SELECT 'Y' FLG
FROM BKG_VVD_HIS A, BKG_VVD_BDR_LOG B
WHERE A.VSL_CD = B.VSL_CD 
  AND A.SKD_VOY_NO = B.SKD_VOY_NO
  AND A.SKD_DIR_CD = B.SKD_DIR_CD
  AND A.POL_CD = B.POL_CD
  AND A.POL_CLPT_IND_SEQ = B.POL_CLPT_IND_SEQ
  AND A.POD_CD = B.POD_CD
  AND A.POD_CLPT_IND_SEQ = B.POD_CLPT_IND_SEQ
  
  AND 'Y' = CASE WHEN A.VSL_PRE_PST_CD = 'S' AND FDR_MNL_BDR_FLG  = 'Y' THEN 'Y'
                 WHEN A.VSL_PRE_PST_CD = 'S' AND FDR_AUTO_BDR_FLG = 'Y' THEN 'Y'
                 WHEN A.VSL_PRE_PST_CD = 'S' AND FDR_BDR_FLG      = 'Y' THEN 'Y'
                             
                 WHEN A.VSL_PRE_PST_CD = 'T' AND TRNK_MNL_BDR_FLG  = 'Y' THEN 'Y'
                 WHEN A.VSL_PRE_PST_CD = 'T' AND TRNK_AUTO_BDR_FLG = 'Y' THEN 'Y'
                 WHEN A.VSL_PRE_PST_CD = 'T' AND TRNK_BDR_FLG      = 'Y' THEN 'Y'
			ELSE 'N' END

  AND A.BKG_NO = @[bkg_no]
  AND A.CORR_NO = 'TMP0000001'			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
