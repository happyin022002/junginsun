<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOSearchRepCustFlagRSQL">
			<desc><![CDATA[SearchRepCustFlag]]></desc>
			<sql><![CDATA[
SELECT CASE WHEN CO_BIZ_FLG = 'N' AND REP_CUST_FLG = 'Y' THEN 'Y'
            ELSE 'N'
       END AS MIN_FLAG
  FROM (SELECT DECODE(RT_BL_TP_CD, 'B', 'Y', 'N') AS CO_BIZ_FLG
#if (${ca_flg}== 'Y')
          FROM BKG_RT_HIS
         WHERE @[bkg_no] = BKG_NO
           AND CORR_NO = 'TMP0000001' 
#else
          FROM BKG_RATE
         WHERE @[bkg_no] = BKG_NO
#end
       ) COBIZ
      ,(SELECT MAX(REP_CUST_FLG) AS REP_CUST_FLG 
          FROM (SELECT DECODE(COUNT(1), 0, 'N', 'Y') AS REP_CUST_FLG
                  FROM MDM_ORGANIZATION
                 WHERE @[cn_cust_cnt_cd] = REP_CUST_CNT_CD
                   AND @[cn_cust_seq] = REP_CUST_SEQ
                 UNION ALL
                SELECT DECODE(COUNT(1), 0, 'N', 'Y')
                  FROM MDM_ORGANIZATION
                 WHERE @[nf_cust_cnt_cd] = REP_CUST_CNT_CD
                   AND @[nf_cust_seq] = REP_CUST_SEQ
               )
       ) REP			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cn_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="cn_cust_seq" type="12" value="" out="N"/>
				<param name="nf_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="nf_cust_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
