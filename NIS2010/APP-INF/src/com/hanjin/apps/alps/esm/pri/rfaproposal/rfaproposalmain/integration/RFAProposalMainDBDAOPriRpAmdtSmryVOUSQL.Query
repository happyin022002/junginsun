<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="RFAProposalMainDBDAOPriRpAmdtSmryVOUSQL">
			<desc><![CDATA[RFAProposalMainDBDAOPriRpAmdtSmryVOUSQL]]></desc>
			<sql><![CDATA[
UPDATE PRI_RP_AMDT_SMRY UPD
SET 
    ( AMDT_FLG  ,ACPT_FLG ) = 
        (
            select 
				DECODE(count(SRC.AMDT_SEQ),0,'N','','N','Y'), 
				DECODE(MAX(SRC.PRC_PROG_STS_CD),'A','Y','N')
            from 
#if(${prop_term_tp_cd} == "01") 
				PRI_RP_DUR SRC, 
#elseif(${prop_term_tp_cd} == "05") 
				PRI_RP_AFIL SRC,
#elseif(${prop_term_tp_cd} == "08") 
				PRI_RP_DMDT SRC,
#end
				PRI_RP_MN MN
            WHERE 
				SRC.PROP_NO 		= UPD.PROP_NO
            AND SRC.AMDT_SEQ 		= UPD.AMDT_SEQ
            AND SRC.PROP_NO 		= MN.PROP_NO
            AND SRC.AMDT_SEQ 		= MN.AMDT_SEQ
			and src.N1ST_CMNC_AMDT_SEQ 	= mn.amdt_seq            
        )
WHERE
    PROP_NO    = @[prop_no]
AND AMDT_SEQ   = @[amdt_seq]
AND PROP_TERM_TP_CD = @[prop_term_tp_cd]			]]></sql>
			<params>
				<param name="prop_no" type="12" value="" out="N"/>
				<param name="amdt_seq" type="12" value="" out="N"/>
				<param name="prop_term_tp_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
