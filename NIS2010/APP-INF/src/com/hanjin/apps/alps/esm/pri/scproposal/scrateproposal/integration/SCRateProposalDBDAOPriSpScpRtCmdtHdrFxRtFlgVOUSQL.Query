<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SCRateProposalDBDAOPriSpScpRtCmdtHdrFxRtFlgVOUSQL">
			<desc><![CDATA[PRI_SP_SCP_RT_CMDT_ROUT 의 FX_RT_FLG 구성에 따라 PRI_SP_SCP_RT_CMDT_HDR 의 FX_RT_FLG 를 변경
CMDT_ROUT.FX_RT_FLG Y Count > 0 -> CMDT_HDR.FX_RT_FLG = 'Y'
CMDT_ROUT.FX_RT_FLG Y Count = 0 -> CMDT_HDR.FX_RT_FLG = 'N']]></desc>
			<sql><![CDATA[
UPDATE  PRI_SP_SCP_RT_CMDT_HDR
SET     FX_RT_FLG = DECODE ( SIGN ( ( SELECT  COUNT(1) 
                                      FROM    PRI_SP_SCP_RT_CMDT_ROUT
                                      WHERE   PROP_NO = @[prop_no]
                                      AND     AMDT_SEQ = @[amdt_seq]
                                      AND     SVC_SCP_CD = @[svc_scp_cd]
                                      AND     GEN_SPCL_RT_TP_CD = @[gen_spcl_rt_tp_cd]
                                      AND     CMDT_HDR_SEQ = @[cmdt_hdr_seq] 
                                      AND     FX_RT_FLG = 'Y' ) ) , 1, 'Y', 0, 'N' )
	,	UPD_DT = SYSDATE
	,	UPD_USR_ID = @[upd_usr_id]
WHERE   PROP_NO = @[prop_no]
AND     AMDT_SEQ = @[amdt_seq]
AND     SVC_SCP_CD = @[svc_scp_cd]
AND     GEN_SPCL_RT_TP_CD = @[gen_spcl_rt_tp_cd]
AND     CMDT_HDR_SEQ = @[cmdt_hdr_seq]			]]></sql>
			<params>
				<param name="prop_no" type="12" value="" out="N"/>
				<param name="amdt_seq" type="12" value="" out="N"/>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="gen_spcl_rt_tp_cd" type="12" value="" out="N"/>
				<param name="cmdt_hdr_seq" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
