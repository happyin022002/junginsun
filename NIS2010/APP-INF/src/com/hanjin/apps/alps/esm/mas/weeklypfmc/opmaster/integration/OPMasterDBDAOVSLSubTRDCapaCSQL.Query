<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OPMasterDBDAOVSLSubTRDCapaCSQL">
			<desc><![CDATA[2016.03.03 Create Lane Table, Create Vessel Table history 자동 관리]]></desc>
			<sql><![CDATA[
#if (${update_flg} == 'Y')
update MAS_VSL_SUB_TRD_CAPA
set SUB_TRD_CAPA = @[sub_trd_capa]
, UPD_USR_ID = @[upd_usr_id]
, UPD_DT = SYSDATE
where VSL_CD = @[vsl_cd]
and VSL_SEQ = @[vsl_seq]
and SUB_TRD_CD = @[sub_trd_cd]
#else
INSERT INTO MAS_VSL_SUB_TRD_CAPA (
	  VSL_CD
	, VSL_SEQ
	, SUB_TRD_CD
	, SUB_TRD_CAPA
	, CRE_USR_ID
	, CRE_DT
	, UPD_USR_ID
	, UPD_DT
	, LST_FLG
)VALUES(
	  @[vsl_cd]
,CASE WHEN @[auto_flg] = 'Y' THEN (SELECT NVL(MAX(VSL_SEQ),0) seq FROM MAS_VSL_RGST WHERE VSL_CD = @[vsl_cd]) -- 이 쿼리전에 MAS_VSL_RGST에 먼저 INSERT되므로 +1 안해주는게 맞음.
      ELSE TO_NUMBER(@[vsl_seq])
      END
    , @[sub_trd_cd]
    , @[sub_trd_capa]
    , @[cre_usr_id]
    , SYSDATE
    , @[upd_usr_id]
    , SYSDATE
    , 'Y'
)
#end			]]></sql>
			<params>
				<param name="sub_trd_capa" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="vsl_seq" type="12" value="" out="N"/>
				<param name="sub_trd_cd" type="12" value="" out="N"/>
				<param name="auto_flg" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
