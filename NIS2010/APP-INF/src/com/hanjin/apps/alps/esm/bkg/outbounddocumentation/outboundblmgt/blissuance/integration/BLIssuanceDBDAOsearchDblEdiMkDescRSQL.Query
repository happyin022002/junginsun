<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLIssuanceDBDAOsearchDblEdiMkDescRSQL">
			<desc><![CDATA[select]]></desc>
			<sql><![CDATA[
SELECT 'BL_DESC:' || REPLACE(REPLACE(CMDT_DESC, CHR(13),''), CHR(10), CHR(10)||'BL_DESC:') || CHR(10)
      ,'MARKNO:' || REPLACE(REPLACE(MK_DESC, CHR(13),''), CHR(10), CHR(10)||'MARKNO:') || CHR(10)
FROM (
      SELECT CASE 
              WHEN SUBSTR(@[edi_receive_id], 1, 6) = 'SDIXML' THEN
                REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(CMDT_DESC, '&', CHR(38)||'amp'||CHR(59)), '<', CHR(38)||'lt'||CHR(59)), '>', CHR(38)||'gt'||CHR(59)), '"', CHR(38)||'quot'||CHR(59)), CHR(39), CHR(38)||'apos'||CHR(59))
              WHEN SUBSTR(@[edi_receive_id], 1, 6) = 'LEHXML' OR SUBSTR(@[edi_receive_id], 1, 6) = 'PKEXML' OR  
                   SUBSTR(@[edi_receive_id], 1, 6) = 'PKCXML' OR SUBSTR(@[edi_receive_id], 1, 6) = 'LGEXML' OR
                   SUBSTR(@[edi_receive_id], 1, 8) = 'CNLGEXML' OR SUBSTR(@[edi_receive_id], 1, 5) = 'EIXML' OR
                   SUBSTR(@[edi_receive_id], 1, 6) = 'EIXMLC' THEN
                CMDT_DESC
              ELSE
                REPLACE(REPLACE(REPLACE(CMDT_DESC, '*', '-'), ':', '-'), '~', '-')
             END CMDT_DESC
      ,      CASE 
              WHEN SUBSTR(@[edi_receive_id], 1, 6) = 'SDIXML' THEN
                REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(MK_DESC, '&', CHR(38)||'amp'||CHR(59)), '<', CHR(38)||'lt'||CHR(59)), '>', CHR(38)||'gt'||CHR(59)), '"', CHR(38)||'quot'||CHR(59)), CHR(39), CHR(38)||'apos'||CHR(59))
              WHEN SUBSTR(@[edi_receive_id], 1, 6) = 'LEHXML' OR SUBSTR(@[edi_receive_id], 1, 6) = 'PKEXML' OR  
                   SUBSTR(@[edi_receive_id], 1, 6) = 'PKCXML' OR SUBSTR(@[edi_receive_id], 1, 6) = 'LGEXML' OR
                   SUBSTR(@[edi_receive_id], 1, 8) = 'CNLGEXML' OR SUBSTR(@[edi_receive_id], 1, 5) = 'EIXML' OR
                   SUBSTR(@[edi_receive_id], 1, 6) = 'EIXMLC' THEN
                MK_DESC
              ELSE
                REPLACE(REPLACE(REPLACE(MK_DESC, '*', '-'), ':', '-'), '~', '-')
             END MK_DESC 
      FROM (
             SELECT DECODE(A1.PCK_CMDT_DESC,'','',
                           CASE WHEN INSTR(A1.PCK_CMDT_DESC, ' ', 1) < 8 AND INSTR(A1.PCK_CMDT_DESC, ' ', 1) > 0 THEN 
                                RPAD(' ',8 - INSTR(A1.PCK_CMDT_DESC, ' ', 1), ' ') 
                           END || A1.PCK_CMDT_DESC || CHR(10)) 
                    || DECODE(A1.CNTR_CMDT_DESC,'','',
                          CASE WHEN INSTR(A1.CNTR_CMDT_DESC, ' ', 1) < 8 AND INSTR(A1.CNTR_CMDT_DESC, ' ', 1) > 0 THEN 
                                RPAD(' ',8 - INSTR(A1.CNTR_CMDT_DESC, ' ', 1), ' ') 
                           END || A1.CNTR_CMDT_DESC || CHR(10))
                    || A2.CMDT_DESC AS CMDT_DESC
                   ,A2.MK_DESC                
             FROM   BKG_BL_DOC A1
                   ,BKG_BL_MK_DESC A2     
             WHERE  A1.BKG_NO = @[bkg_no]
             AND    A1.BKG_NO = A2.BKG_NO
             AND    A2.MK_SEQ = 1
           )
)			]]></sql>
			<params>
				<param name="edi_receive_id" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
