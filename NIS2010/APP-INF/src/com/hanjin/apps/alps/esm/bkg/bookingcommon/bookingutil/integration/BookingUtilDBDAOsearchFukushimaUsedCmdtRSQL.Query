<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingUtilDBDAOsearchFukushimaUsedCmdtRSQL">
			<desc><![CDATA[후쿠시마에서 Used Commodity가 특정 pod로 가는지 확인한다]]></desc>
			<sql><![CDATA[
SELECT 'Y' RESULT
#if (${ca_flg} != 'Y')
      FROM BKG_BOOKING BK
         , BKG_VVD POL
         , BKG_VVD POD
#else
      FROM BKG_BKG_HIS BK
         , BKG_VVD_HIS POL
         , BKG_VVD_HIS POD
#end
         , (SELECT ATTR_CTNT1 POL_CD
                 , ATTR_CTNT2 POD_CD
              FROM BKG_HRD_CDG_CTNT
             WHERE HRD_CDG_ID = 'FUKUSHIMA_USED_POD') A
     WHERE BK.BKG_NO = @[bkg_no]
       AND BK.BKG_NO = POL.BKG_NO
       AND BK.BKG_NO = POD.BKG_NO
#if (${ca_flg} == 'Y')
	   AND BK.CORR_NO = 'TMP0000001'
	   AND POL.CORR_NO = 'TMP0000001'
	   AND POD.CORR_NO = 'TMP0000001'
#end
       AND (BK.POR_CD = A.POL_CD OR POL.POL_CD = A.POL_CD)
       AND POD.POD_CD = A.POD_CD
       AND BK.BKG_STS_CD <> 'X'
       AND BK.BKG_CGO_TP_CD = 'F'       
#if (${cstms_desc} == '')
       AND NVL(@[cmdt_cd], BK.CMDT_CD) IN (SELECT ATTR_CTNT1 CMDT_CD
	                                         FROM BKG_HRD_CDG_CTNT
                                            WHERE HRD_CDG_ID = 'FUKUSHIMA_USED_CMDT')
#else
	   AND UPPER(@[cstms_desc]) like '%USED%'
#end			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cmdt_cd" type="12" value="" out="N"/>
				<param name="cstms_desc" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
