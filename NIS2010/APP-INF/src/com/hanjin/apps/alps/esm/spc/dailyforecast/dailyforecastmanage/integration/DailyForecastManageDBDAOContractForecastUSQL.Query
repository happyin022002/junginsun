<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DailyForecastManageDBDAOContractForecastUSQL">
			<desc><![CDATA[[CHM-201322502-01] SPC 프로젝트 - 성수기 선복운영 개선을 위한 T/F추진
2014.02.04 [CHM-201428383-01] RFA 로직 추가
2014.05.22 [선반영] AES-SC관련 로직 추가]]></desc>
			<sql><![CDATA[
UPDATE SPC_CTRT_FCAST_CUST C
   SET FCAST_TTL_QTY     = DECODE(@[view_type], 'FEU', TO_NUMBER(@[fcast_ttl_qty]) * 2, TO_NUMBER(@[fcast_ttl_qty]))   ,
       FCAST_20FT_QTY    = TO_NUMBER(@[fcast_20ft_qty])   ,
       FCAST_40FT_QTY    = TO_NUMBER(@[fcast_40ft_qty])   ,         
       FCAST_40FT_HC_QTY = TO_NUMBER(@[fcast_40ft_hc_qty]),
       FCAST_45FT_HC_QTY = TO_NUMBER(@[fcast_45ft_hc_qty]),
       FCAST_53FT_QTY    = TO_NUMBER(@[fcast_53ft_qty])   ,
       FCAST_RF_QTY      = TO_NUMBER(@[fcast_rf_qty])     ,
       FCAST_TTL_WGT     = TO_NUMBER(@[fcast_ttl_wgt])    ,
       CUST_CTRL_CD      = @[cust_ctrl_cd],
       MODI_GDT          = CAST(SYS_EXTRACT_UTC(TO_TIMESTAMP(@[modi_gdt], 'YYYY/MM/DD HH24:MI:SS')) AS DATE) ,
       FCAST_RMK         = @[fcast_rmk],
       UPD_USR_ID        = @[upd_usr_id],
       UPD_DT            = SYSDATE
 WHERE TRD_CD         = @[trd_cd]
   AND RLANE_CD       = @[rlane_cd]
   AND IOC_TS_CD      = @[ioc_ts_cd]
   AND SREP_USR_ID    = @[srep_usr_id]
   AND CTRT_OFC_CD    = @[ctrt_ofc_cd]
   AND VSL_CD         = @[vsl_cd]
   AND SKD_VOY_NO     = @[skd_voy_no]
   AND SKD_DIR_CD     = @[skd_dir_cd]
   AND CUST_CNT_CD    = NVL(@[cust_cnt_cd], '00')
   AND CUST_SEQ       = NVL(@[cust_seq]   , 0)
   AND FCAST_SEQ      = @[fcast_seq]
   AND NVL(C.SC_NO,NVL(C.RFA_NO,'X')) = NVL(@[sc_no],NVL(DECODE(@[sc_flg],'S','',@[rfa_no]), 'X'))
   --AND DECODE(C.TRD_CD, 'AES', NVL(C.RFA_NO,'X'), NVL(C.SC_NO,'X')) = DECODE(C.TRD_CD, 'AES', NVL (--[rfa_no], 'X'), COALESCE (--[sc_no], C.SC_NO, 'X'))
   AND SLS_RGN_OFC_CD = @[sls_rgn_ofc_cd]
   AND POL_YD_CD      = NVL(@[pol_yd_cd], '0000000')			]]></sql>
			<params>
				<param name="view_type" type="12" value="" out="N"/>
				<param name="fcast_ttl_qty" type="12" value="" out="N"/>
				<param name="fcast_20ft_qty" type="12" value="" out="N"/>
				<param name="fcast_40ft_qty" type="12" value="" out="N"/>
				<param name="fcast_40ft_hc_qty" type="12" value="" out="N"/>
				<param name="fcast_45ft_hc_qty" type="12" value="" out="N"/>
				<param name="fcast_53ft_qty" type="12" value="" out="N"/>
				<param name="fcast_rf_qty" type="12" value="" out="N"/>
				<param name="fcast_ttl_wgt" type="12" value="" out="N"/>
				<param name="cust_ctrl_cd" type="12" value="" out="N"/>
				<param name="modi_gdt" type="12" value="" out="N"/>
				<param name="fcast_rmk" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="trd_cd" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
				<param name="ioc_ts_cd" type="12" value="" out="N"/>
				<param name="srep_usr_id" type="12" value="" out="N"/>
				<param name="ctrt_ofc_cd" type="12" value="" out="N"/>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="cust_cnt_cd" type="12" value="" out="N"/>
				<param name="cust_seq" type="12" value="" out="N"/>
				<param name="fcast_seq" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="sc_flg" type="12" value="" out="N"/>
				<param name="rfa_no" type="12" value="" out="N"/>
				<param name="sls_rgn_ofc_cd" type="12" value="" out="N"/>
				<param name="pol_yd_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
