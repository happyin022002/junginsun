<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOmodifyBkgVvdForAssignUSQL">
			<desc><![CDATA[bkg_vdd테이블 갱신한다.]]></desc>
			<sql><![CDATA[
update bkg_vvd
   set vsl_cd     = substr(@[new_vvd], 1, 4)
     , skd_voy_no = substr(@[new_vvd], 5, 4)
     , skd_dir_cd = substr(@[new_vvd], 9, 1)
	 , slan_cd    = (select VSL_SLAN_CD 
					   from vsk_vsl_skd 
					  where vsl_cd     = substr(@[new_vvd], 1, 4)
					    and skd_voy_no = substr(@[new_vvd], 5, 4)
					    and skd_dir_cd = substr(@[new_vvd], 9, 1))
     , upd_dt     = sysdate
     , upd_usr_id = @[usr_id]
 where bkg_no     = @[bkg_no]
   and NVL(vsl_cd    ,'X') = NVL(substr(@[old_vvd], 1, 4),'X')
   and NVL(skd_voy_no,'X') = NVL(substr(@[old_vvd], 5, 4),'X')
   and NVL(skd_dir_cd,'X') = NVL(substr(@[old_vvd], 9, 1),'X')			]]></sql>
			<params>
				<param name="new_vvd" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="old_vvd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
