<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="DailyForecastManageDBDAOSearchLoadOfficeMappingListRSQL">
			<desc><![CDATA[[CHM-201322502-01] SPC 프로젝트 - 성수기 선복운영 개선을 위한 T/F추진
2014.02.04 [CHM-201428383-01] RFA 로직 추가
2014.05.22 [선반영] AES-SC관련 로직 추가]]></desc>
			<sql><![CDATA[
SELECT DISTINCT
         C.CUST_CNT_CD||C.CUST_SEQ AS CUST_CODE,
         MC.CUST_LGL_ENG_NM        AS CUST_NM  ,
         NVL(C.SC_NO, ' ')         AS SC_NO    ,
         NVL(C.SC_NO, NVL2(@[rfa_no], NVL(C.RFA_NO, ' '), ' ')) AS RFA_NO,
         --DECODE(C.TRD_CD, 'AES', NVL2(--[rfa_no], NVL(C.RFA_NO, ' '), ' '), NVL(C.RFA_NO, ' ')) AS RFA_NO,
         C.TRD_CD        ,
         C.SUB_TRD_CD    ,
         C.IOC_TS_CD     ,
         C.SLS_RGN_OFC_CD,
         C.RLANE_CD      ,
         'R' AS FLAG
    FROM SPC_CTRT_FCAST_OFC_MAPG C ,
         MDM_CUSTOMER            MC
   WHERE C.TRD_CD              = @[trade]
#if (${subTrade} != '')
     AND C.SUB_TRD_CD          = @[subTrade]
#end
#if (${rlane_cd} != '')
     AND C.RLANE_CD           IN ( ${rlane_cd} )
#end
     AND C.IOC_TS_CD           = @[ioc]
     AND C.CTRT_OFC_CD         = @[ofc_cd]
     AND C.CUST_CNT_CD         = @[custcntcd]
     AND C.CUST_SEQ            = @[custseq]
     AND NVL(C.SC_NO, NVL(C.RFA_NO, 'X')) = NVL(@[sc_no], NVL(@[rfa_no], 'X'))
     --AND DECODE(C.TRD_CD, 'AES', NVL(C.RFA_NO, 'X'), NVL(C.SC_NO, 'X')) = DECODE(C.TRD_CD, 'AES', NVL (--[rfa_no], 'X'), COALESCE (--[sc_no], C.SC_NO, 'X'))
     AND MC.CUST_CNT_CD        = C.CUST_CNT_CD
     AND MC.CUST_SEQ           = C.CUST_SEQ
ORDER BY C.SLS_RGN_OFC_CD,
         C.RLANE_CD			]]></sql>
			<params>
				<param name="rfa_no" type="12" value="" out="N"/>
				<param name="trade" type="12" value="" out="N"/>
				<param name="subTrade" type="12" value="" out="N"/>
				<param name="ioc" type="12" value="" out="N"/>
				<param name="ofc_cd" type="12" value="" out="N"/>
				<param name="custcntcd" type="12" value="" out="N"/>
				<param name="custseq" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
