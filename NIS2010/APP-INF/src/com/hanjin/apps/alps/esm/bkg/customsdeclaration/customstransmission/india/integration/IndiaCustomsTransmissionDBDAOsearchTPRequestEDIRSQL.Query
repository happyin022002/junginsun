<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="IndiaCustomsTransmissionDBDAOsearchTPRequestEDIRSQL">
			<desc><![CDATA[container list대상 조회하는 오퍼레이션]]></desc>
			<sql><![CDATA[
SELECT 
    BCIV.IDA_AGN_ID
    ,BCIV.IDA_DECL_VSL_NO
    ,BCIV.VSL_DECL_DT
    ,BCIV.IDA_LINE_NO 
    ,'0' TMP0  
    ,BCIV.OTR_DCHG_YD_ID OTR_DCHG_CD
    ,BCIB.IDA_TRSP_CD
    ,BC.PCK_QTY
    ,BC.CNTR_WGT
    ,BC.WGT_UT_CD
    ,'' TMP1
    ,'' TMP2
    ,'' TMP3
    ,'' TMP4
    ,'' TMP5
    ,BCIV.IBD_NO
    ,@[tp_fee] TP_FEE
    ,BCIV.TRNS_OPR_ID AS CRR_AGN_CD
FROM    
        BKG_CSTMS_IDA_VSL BCIV        
        ,BKG_CSTMS_IDA_BL BCIB       
        ,BKG_CSTMS_IDA_CNTR BCIC    
        ,BKG_CONTAINER  BC      
        ,BKG_BOOKING  BB        
WHERE   1=1
AND     BCIV.VSL_CD                   = BCIC.VSL_CD
AND     BCIV.SKD_VOY_NO               = BCIC.SKD_VOY_NO
AND     BCIV.SKD_DIR_CD               = BCIC.SKD_DIR_CD
AND     BCIV.POD_CD                   =   BCIC.POD_CD

AND     BCIC.CNTR_NO                  =   BC.CNTR_NO

AND     BCIC.BL_NO                 	  =   BB.BL_NO

AND     BCIC.VSL_CD                   = BCIB.VSL_CD
AND     BCIC.SKD_VOY_NO               = BCIB.SKD_VOY_NO
AND     BCIC.SKD_DIR_CD               = BCIB.SKD_DIR_CD


AND     BCIC.POD_CD                	  =   BCIB.POD_CD
AND     BCIC.BL_NO                    =   BCIB.BL_NO

AND     BB.BKG_NO                	  =   BC.BKG_NO
AND		BB.BKG_STS_CD				  <>  'X'

#if (${empty_check} != 'on') 
AND     BB.BKG_CGO_TP_CD        	  <> 'P'
#end


AND     BCIB.BL_DECL_TP_CD       	  =   'TI'


AND BCIC.VSL_CD          = SUBSTR(@[vvd_cd], 1, 4)
AND BCIC.SKD_VOY_NO      = SUBSTR(@[vvd_cd], 5, 4)
AND BCIC.SKD_DIR_CD      = SUBSTR(@[vvd_cd], 9, 1)

AND	BCIC.POD_CD			=	@[pod_cd]
AND	BCIC.POL_CD			LIKE	NVL(@[pol_cd], '') || '%'

ORDER BY TO_NUMBER(BCIB.IDA_LINE_NO)			]]></sql>
			<params>
				<param name="tp_fee" type="12" value="" out="N"/>
				<param name="vvd_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
				<param name="pol_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
