<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BangladeshManifestListDownloadDBDAOsearchManifestObDlListRSQL">
			<desc><![CDATA[방글라데시 Manifest Outbound D/L(DownLoad한) List 조회]]></desc>
			<sql><![CDATA[
SELECT 	BL_LINE_NO SL_NO,
  		TZ_DESC TR_NO,
		to_char(to_date(TZ_DT, 'YYYY-MM-DD'), 'YYYY-MM-DD') TR_DATE,
  		BIL_RMK SBILL_NO,
		to_char(to_date(BIL_DT, 'YYYY-MM-DD'), 'YYYY-MM-DD') SB_DATE,
  		XPT_DESC EXP_NO,
		to_char(to_date(XPT_DT, 'YYYY-MM-DD'), 'YYYY-MM-DD') EXP_DATE,
 	 	POD_NM POD_NM,
  		MK_DESC MARK_NO,
  		NVL(BKG_CNTR_QTY,0) PACK_NO,
  		PCK_DESC PACK_NAT,
  		CSTMS_DESC GOODS_DESC,
  		TRIM(TO_CHAR(NVL(CNTR_WGT,0),'999999999.99'))||' '||WGT_UT_CD GROSS_WGT,
  		CNTR_NO CNTR_NO,
  		MLT_CNTR_SEAL_NO_DESC SEAL,
  		CNTR_SZ_DESC CNTR_SIZE,
  		DECODE(SUBSTR(CNTR_TPSZ_CD, 1, 1), 'D', 'DRY', 'F', 'FLAT', 'O', 'OPEN', 'P', 'PLATFORM', 'R', 'REFFER', 'T', 'TANK', 'Z', 'OTHER', 'Q', 'DEAD', 'S', 'SLIDING', 'A', 'ADJUST', ' ') CNTR_TYPE,
  		DECODE(SUBSTR(CNTR_TPSZ_CD, 2, 1), '2', '8.6', '4', '9.6', '5', '9.6', '9', '9.6', ' ') HEIGHT,
        ( SELECT DECODE(NVL(S.TARE_WGT, 0), 0
              ,     DECODE(NVL(MDM.CNTR_TPSZ_TARE_WGT, 0), 0
              ,         DECODE(M.CNTR_TPSZ_CD, 'T2', 3600, 'T4', 5200, 0) 
              ,            MDM.CNTR_TPSZ_TARE_WGT)
              ,         S.TARE_WGT  ) TARE_WGT
           FROM MST_CONTAINER M, MST_CNTR_SPEC S, MDM_CNTR_TP_SZ MDM
          WHERE M.CNTR_NO           =   CNTR.CNTR_NO
            AND M.CNTR_SPEC_NO      =   S.CNTR_SPEC_NO(+)
            AND M.CNTR_TPSZ_CD      =   MDM.CNTR_TPSZ_CD ) WEIGHT,
  		BD_CNTR_CGO_TP_CD STATUS,
  		IMO_DESC IMCO,
 		IMDG_UN_DESC UN,
  		VAT_DESC VAT,
  		CMDT_DESC CMDT_CD,
  		FDCK_DESC OFF_DOCK,
  		PRSB_CD PERISH_CD,
  		SHPR_RMK SHIPPER_NM,
  		CNEE_RMK CNEE_NM,
  		BL_NO ORG_BL_NO,
  		CNTR_TPSZ_CD CNTR_TZ,
  		POL_CD POL_CD,
  		POD_CD POD_CD,
  		TRIM(to_char(NVL(CNTR_WGT,'0'), '99999999.99')) CNTR_WGT,
  		WGT_UT_CD CNTR_UT_CD,
  		BKG_CGO_TP_CD BKG_CGO_TP_CD,
  		VSL_NM VSL_NM,
  		DECODE(SUBSTR(SKD_VOY_NO,1,2),'00', SUBSTR(SKD_VOY_NO,2,3), SKD_VOY_NO) VOY_NO,
		VSL_CD||SKD_VOY_NO||SKD_DIR_CD VVD
FROM BKG_CSTMS_BD_CNTR CNTR
WHERE VSL_CD 								= SUBSTR(@[vvd],1,4)
  	AND SKD_VOY_NO 							= SUBSTR(@[vvd],5,4)
  	AND SKD_DIR_CD 							= SUBSTR(@[vvd],9,1)
 	AND POL_CD 								= @[pol_code]
  	AND BD_CSTMS_BND_CD 					= 'O'
#if (${pod_code} != '') 
    AND POD_CD      						like @[pod_code]||'%'
#end
#if (${bl_no} != '') 
	AND BL_NO							  	like @[bl_no]||'%'
#end
#if (${bkg_cgo_tp_code} != 'A') 
	AND DECODE(BKG_CGO_TP_CD,'P','P','F') 	= @[bkg_cgo_tp_code]
#end
ORDER BY BL_LINE_NO			]]></sql>
			<params>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="pol_code" type="12" value="" out="N"/>
				<param name="pod_code" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="bkg_cgo_tp_code" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
