<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AdjustmentDBDAOSearchKpiCreationEditNewOfcHisRSQL">
			<desc><![CDATA[SearchKpiCreationEditNewOfcHis]]></desc>
			<sql><![CDATA[
SELECT DISTINCT 
       A1.TRD_CD
      ,A1.DIR_CD
      ,A1.CONV_DIR_CD
      ,A1.RLANE_CD
      ,A1.RHQ_CD
      ,A1.RGN_OFC_CD
      ,A1.SRC_RHQ_CD
      ,A1.SRC_RGN_OFC_CD
      ,NVL2(A2.RGN_OFC_CD,'Y','N') QTA_FLAG
  FROM SQM_SPCL_NEW_OFC A1
      ,SQM_SPCL_CFM_QTA A2
 WHERE 1=1
   AND A1.BSE_TP_CD   = A2.BSE_TP_CD(+)
   AND A1.BSE_YR      = A2.BSE_YR(+)
   AND A1.BSE_QTR_CD  = A2.BSE_QTR_CD(+)
   AND A1.TRD_CD      = A2.TRD_CD(+)
   AND A1.RLANE_CD    = A2.RLANE_CD(+)
   AND A1.DIR_CD      = A2.DIR_CD(+)
   AND A1.RGN_OFC_CD  = A2.RGN_OFC_CD(+)
   AND A1.BSE_TP_CD   = @[f_bse_tp_cd] 
   AND A1.BSE_YR      = @[f_bse_yr]
#if(${f_bse_tp_cd} == 'Q')
   AND A1.BSE_QTR_CD  = @[f_bse_qtr_cd]
#end
   AND A1.SPCL_TGT_CD = @[f_spcl_tgt_cd]
ORDER BY QTA_FLAG DESC, TRD_CD, DIR_CD, RLANE_CD, RHQ_CD, RGN_OFC_CD, SRC_RHQ_CD, SRC_RGN_OFC_CD			]]></sql>
			<params>
				<param name="f_bse_tp_cd" type="12" value="" out="N"/>
				<param name="f_bse_yr" type="12" value="" out="N"/>
				<param name="f_bse_qtr_cd" type="12" value="" out="N"/>
				<param name="f_spcl_tgt_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
