<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOSearchPartialCntrBkgListRSQL">
			<desc><![CDATA[해당 Booking에 속한 Container가 다른 Booking에 속해잇는지 조회한다.]]></desc>
			<sql><![CDATA[
select distinct bk2.bkg_no
  from bkg_booking bk1, bkg_container cntr1
        , bkg_booking bk2, bkg_container cntr2
 where bk1.bkg_no = cntr1.bkg_no 
   and bk2.bkg_no = cntr2.bkg_no
   and bk1.bkg_sts_cd    <> 'X'
   and bk2.bkg_sts_cd    <> 'X'
   and bk1.bkg_cgo_tp_cd = bk2.bkg_cgo_tp_Cd
   and bk1.pol_cd        = bk2.pol_cd
   and bk1.pod_cd        = bk2.pod_cd
   and bk1.vsl_cd        = bk2.vsl_cd
   and bk1.skd_voy_no    = bk2.skd_voy_no
   and bk1.skd_dir_cd    = bk2.skd_dir_cd
   and cntr1.cntr_prt_flg= 'Y'
   and cntr2.cntr_prt_flg= 'Y'
   and cntr1.cntr_no     = cntr2.cntr_no
   and bk1.bkg_no  in (select distinct bk2.bkg_no
                         from bkg_booking bk1, bkg_container cntr1
                                , bkg_booking bk2, bkg_container cntr2
                        where bk1.bkg_no = cntr1.bkg_no 
                          and bk2.bkg_no = cntr2.bkg_no
                          and bk1.bkg_cgo_tp_cd = bk2.bkg_cgo_tp_Cd
                          and bk1.pol_cd        = bk2.pol_cd
                          and bk1.pod_cd        = bk2.pod_cd
                          and bk1.vsl_cd        = bk2.vsl_cd
                          and bk1.skd_voy_no    = bk2.skd_voy_no
                          and bk1.skd_dir_cd    = bk2.skd_dir_cd
                          and cntr1.cntr_prt_flg= 'Y'
                          and cntr2.cntr_prt_flg= 'Y'
                          and cntr1.cntr_no     = cntr2.cntr_no
                          and bk1.bkg_no        = @[bkg_no]
                      )			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
