<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OPMasterDBDAOMultiHistoryLaneSeeIfUpdateOrInsertRSQL">
			<desc><![CDATA[2016.03.03 Create Lane Table, Create Vessel Table history 자동 관리]]></desc>
			<sql><![CDATA[
SELECT * 
FROM MAS_LANE_TP_HIS B
, ( SELECT TRD_CD, RLANE_CD, DIR_CD, LANE_APLY_FM_DT
    FROM MAS_LANE_TP_HIS 
    WHERE TRD_CD = @[trd_cd]
    AND RLANE_CD = @[rlane_cd]
    AND DIR_CD = @[dir_cd]
    AND LANE_SEQ = (SELECT MAX(LANE_SEQ) 
                    FROM MAS_LANE_TP_HIS 
                    WHERE TRD_CD = @[trd_cd]
                    AND RLANE_CD = @[rlane_cd]
                    AND DIR_CD = @[dir_cd] )
    ) A
WHERE A.TRD_CD = B.TRD_CD
AND A.RLANE_CD = B.RLANE_CD
AND A.DIR_CD = B.DIR_CD
AND B.LANE_SEQ = (SELECT MAX(LANE_SEQ) 
                    FROM MAS_LANE_TP_HIS 
                    WHERE TRD_CD = @[trd_cd]
                    AND RLANE_CD = @[rlane_cd]
                    AND DIR_CD = @[dir_cd] )
AND A.TRD_CD = @[trd_cd]
AND A.RLANE_CD = @[rlane_cd]
AND A.DIR_CD = @[dir_cd]
AND A.LANE_APLY_FM_DT = TO_CHAR(SYSDATE, 'YYYYMMDD')			]]></sql>
			<params>
				<param name="trd_cd" type="12" value="" out="N"/>
				<param name="rlane_cd" type="12" value="" out="N"/>
				<param name="dir_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
