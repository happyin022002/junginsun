<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CargoReleaseOrderDBDAOcheckOBLRlseByLclRSQL">
			<desc><![CDATA[해당 B/L이 LCL일 경우 관련 B/L들에 대한 전체 O/BL Staus를 확인 한다.]]></desc>
			<sql><![CDATA[
SELECT COUNT(*) FROM BKG_BL_ISS
 WHERE OBL_RDEM_FLG = 'N'
   AND BKG_NO IN ( SELECT BKG2.BKG_NO
                     FROM BKG_CONTAINER CNTR1,
                      BKG_BOOKING BKG1, 
                      BKG_BOOKING BKG2, 
                      BKG_CONTAINER CNTR2
                    WHERE CNTR1.BKG_NO    = @[bkg_no]      -- cntr1 
                      AND CNTR1.CNTR_PRT_FLG = 'Y'
                      AND CNTR1.BKG_NO    = BKG1.BKG_NO    -- bkg1
                      AND BKG1.BKG_STS_CD <> 'X'
                      AND BKG1.VSL_CD = BKG2.VSL_CD        -- bkg2
                      AND BKG1.SKD_VOY_NO = BKG2.SKD_VOY_NO
                      AND BKG1.SKD_DIR_CD = BKG2.SKD_DIR_CD
                      AND BKG1.POL_CD     = BKG2.POL_CD
                      AND BKG1.BKG_NO     <> BKG2.BKG_NO  
                      AND BKG2.BKG_STS_CD <> 'X'
                      AND CNTR2.BKG_NO    = BKG2.BKG_NO    -- cntr2
                      AND CNTR2.CNTR_NO   = CNTR1.CNTR_NO
                      AND CNTR2.CNTR_PRT_FLG='Y' )			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
