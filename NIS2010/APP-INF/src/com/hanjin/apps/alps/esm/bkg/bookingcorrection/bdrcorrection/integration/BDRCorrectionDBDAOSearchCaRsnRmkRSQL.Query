<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BDRCorrectionDBDAOSearchCaRsnRmkRSQL">
			<desc><![CDATA[BDRCorrectionDBDAOSearchCaRsnRmkRSQL]]></desc>
			<sql><![CDATA[
SELECT BC.CA_RSN_CD                      AS CA_RSN_CD,
       BC.BKG_CORR_RMK                   AS BKG_CORR_RMK,
       NVL(BC.RDN_NO,   BRDN.RDN_NO)     AS RDN_NO,
       NVL(BC.RVIS_SEQ, BRDN.RVIS_SEQ)   AS RVIS_SEQ,
       NVL(BC.RDN_ACPT_FLG, 'N')         AS RDN_ACPT_FLG,     
       BRDN.UMCH_TP_CD                   AS UMCH_TP_CD,        
       NVL(BC.UMCH_SUB_TP_CD, BRDN.UMCH_SUB_TP_CD) AS UMCH_SUB_TP_CD_HID,    
       BC.UMCH_SUB_TP_CD                 AS UMCH_SUB_TP_CD,
       NVL(( SELECT INTG_CD_VAL_DP_DESC 
               FROM COM_INTG_CD_DTL
              WHERE INTG_CD_VAL_CTNT = NVL(BRDN.RDN_STS_CD,' ') 
         		AND INTG_CD_ID = 'CD01568'    
                AND APLY_ST_DT  <= TO_CHAR(SYSDATE, 'YYYYMMDD') 
                AND APLY_END_DT >= TO_CHAR(SYSDATE, 'YYYYMMDD')), 'NOT ISSUED') AS INTG_CD_VAL_DP_DESC
     , BRDN.RDN_STS_CD
  FROM BKG_BOOKING    BKG,  
       BKG_CORRECTION BC, 
       ( SELECT R.BKG_NO, 
                R.RDN_NO, 
                R.RVIS_SEQ, 
                R.RDN_STS_CD,
                T.UMCH_TP_DESC AS UMCH_TP_CD,
                R.UMCH_SUB_TP_CD
           FROM BKG_REV_DR_NOTE R, BKG_REV_UMCH_TP T
          WHERE R.BKG_NO = @[bkg_no]
            AND R.RDN_KND_CD = 'C'
            AND R.RDN_STS_CD IN ( 'RV','IS' ) 
            AND R.UMCH_TP_CD = T.UMCH_TP_CD) BRDN 
 WHERE BKG.BKG_NO    = BRDN.BKG_NO(+)
   AND BKG.BKG_NO    = BC.BKG_NO(+)
   AND BC.CORR_NO(+) = 'TMP0000001' 
   AND BKG.BKG_NO    = @[bkg_no]			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
