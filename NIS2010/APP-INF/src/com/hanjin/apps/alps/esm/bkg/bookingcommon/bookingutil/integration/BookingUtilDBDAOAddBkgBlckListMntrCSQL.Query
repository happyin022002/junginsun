<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BookingUtilDBDAOAddBkgBlckListMntrCSQL">
			<desc><![CDATA[BKG에서 warning 메시지가 떴을 때, 확인을 누르고 진행했던 BKG의 데이터들을 인터페이스한다.
BKG_BLCK_KW_LIST 테이블의 keyword 참고]]></desc>
			<sql><![CDATA[
INSERT 
  INTO BKG_BLCK_LIST_MNTR
(
         BLCK_KW_TP_CD
        ,BLCK_KW_TP_SEQ
        ,BKG_NO
        ,BLCK_KW_NM
        ,BL_NO
        ,OB_SLS_OFC_CD
        ,CTRT_OFC_CD
        ,OP_CNTR_QTY
        ,SHPR_CNT_CD
        ,SHPR_SEQ
        ,SHPR_KW_NM
        ,FWRD_CNT_CD
        ,FWRD_SEQ
        ,FWRD_KW_NM
        ,CNEE_CNT_CD
        ,CNEE_SEQ
        ,CNEE_KW_NM
        ,POR_CD
        ,POL_CD
        ,POD_CD
        ,DEL_CD
        ,CMDT_CD
        ,INTER_XTER_RMK_KW_NM
        ,CNTR_MF_GDS_DESC_KW_NM
        ,CMDT_DESC_KW_NM
        ,CSTMS_DESC_KW_NM
        ,CUST_DESC_KW_NM
        ,CRE_USR_ID
        ,CRE_DT
        ,UPD_USR_ID
	    ,UPD_DT
)
SELECT @[blck_kw_tp_cd]
       ,NVL((select max(BLCK_KW_TP_SEQ) from BKG_BLCK_LIST_MNTR WHERE BLCK_KW_TP_CD = @[blck_kw_tp_cd] ),0)+1
       ,@[bkg_no]
       ,@[blck_kw_nm]
       ,BL_NO
       ,OB_SLS_OFC_CD
       ,CTRT_OFC_CD
       ,(select sum(OP_CNTR_QTY) from bkg_quantity where bkg_no = @[bkg_no] and CNTR_TPSZ_CD not like 'Q%' and rownum=1)
       ,(select CUST_CNT_CD from bkg_customer where bkg_no = @[bkg_no] and BKG_CUST_TP_CD = 'S' and rownum =1)
       ,(select CUST_SEQ from bkg_customer where bkg_no = @[bkg_no] and BKG_CUST_TP_CD = 'S' and rownum =1)
       ,(select CUST_NM from bkg_customer where bkg_no = @[bkg_no] and BKG_CUST_TP_CD = 'S' and rownum =1)
       ,(select CUST_CNT_CD from bkg_customer where bkg_no = @[bkg_no] and BKG_CUST_TP_CD = 'F' and rownum =1)
       ,(select CUST_SEQ from bkg_customer where bkg_no = @[bkg_no] and BKG_CUST_TP_CD = 'F' and rownum =1)
       ,(select CUST_NM from bkg_customer where bkg_no = @[bkg_no] and BKG_CUST_TP_CD = 'F' and rownum =1)
	   ,(select CUST_CNT_CD from bkg_customer where bkg_no = @[bkg_no] and BKG_CUST_TP_CD = 'C' and rownum =1)
       ,(select CUST_SEQ from bkg_customer where bkg_no = @[bkg_no] and BKG_CUST_TP_CD = 'C' and rownum =1)
       ,(select CUST_NM from bkg_customer where bkg_no = @[bkg_no] and BKG_CUST_TP_CD = 'C' and rownum =1)
	   ,POR_CD
       ,POL_CD
       ,POD_CD
       ,DEL_CD
       ,CMDT_CD
       ,@[inter_xter_rmk_kw_nm]
	   ,@[cntr_mf_gds_desc_kw_nm]
	   ,@[cmdt_desc_kw_nm]
	   ,@[cstms_desc_kw_nm]
	   ,@[cust_desc_kw_nm]
	   ,@[cre_usr_id]
	   ,sysdate
	   ,@[upd_usr_id]
	   ,sysdate
  FROM BKG_BOOKING
  WHERE BKG_NO = @[bkg_no]			]]></sql>
			<params>
				<param name="blck_kw_tp_cd" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="blck_kw_nm" type="12" value="" out="N"/>
				<param name="inter_xter_rmk_kw_nm" type="12" value="" out="N"/>
				<param name="cntr_mf_gds_desc_kw_nm" type="12" value="" out="N"/>
				<param name="cmdt_desc_kw_nm" type="12" value="" out="N"/>
				<param name="cstms_desc_kw_nm" type="12" value="" out="N"/>
				<param name="cust_desc_kw_nm" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
