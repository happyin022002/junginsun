<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="UsWharfageDecMgtDBDAOsearchUsWhfPortRtListOAKRSQL">
			<desc><![CDATA[searchUsWhfPortRtListOAK]]></desc>
			<sql><![CDATA[
SELECT TB.*, @[port] PORT, @[bound] BOUND, @[eff_dt] EFF_DT
      ,'' AS LOCAL_PRC
      ,'' AS RAIL_PRC
      ,'' AS TS_PRC
      ,'N' USA_WHF_EXPT_FLG
      ,'' USA_WHF_RAT_UT_CD
      ,'' WHF_DC_RT
  FROM (
SELECT '1' AS SEQ
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '20F', WHF_UT_PRC)) AS ft20
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '40F', WHF_UT_PRC)) AS ft40
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '45F', WHF_UT_PRC)) AS ft45
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, 'CON', WHF_UT_PRC)) AS cont
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, 'TEU', WHF_UT_PRC)) AS teus
      ,'F' FULL_MTY_CD
      ,'L' USA_WHF_TRSP_TP_CD
  FROM BKG_USA_WHF_RT_DTL RT_DTL
 WHERE PORT_CD = @[port]
   AND RT_DTL.IO_BND_CD = @[bound]
   AND RT_DTL.EFF_DT = TO_DATE(@[eff_dt],'YYYYMMDD')
   AND FULL_MTY_CD = 'F'
   AND USA_WHF_TRSP_TP_CD = 'L'
UNION ALL
SELECT '2' AS SEQ
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '20F', WHF_UT_PRC)) AS ft20
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '40F', WHF_UT_PRC)) AS ft40
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '45F', WHF_UT_PRC)) AS ft45
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, 'CON', WHF_UT_PRC)) AS cont
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, 'TEU', WHF_UT_PRC)) AS teus
      ,'M' FULL_MTY_CD
      ,'L' USA_WHF_TRSP_TP_CD
  FROM BKG_USA_WHF_RT_DTL RT_DTL
 WHERE PORT_CD = @[port]
   AND RT_DTL.IO_BND_CD = @[bound]
   AND RT_DTL.EFF_DT = TO_DATE(@[eff_dt],'YYYYMMDD')
   AND FULL_MTY_CD = 'M'
   AND USA_WHF_TRSP_TP_CD = 'L'
UNION ALL
SELECT '3' AS SEQ
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '20F', WHF_UT_PRC)) AS ft20
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '40F', WHF_UT_PRC)) AS ft40
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '45F', WHF_UT_PRC)) AS ft45
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, 'CON', WHF_UT_PRC)) AS cont
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, 'TEU', WHF_UT_PRC)) AS teus
      ,'F' FULL_MTY_CD
      ,'I' USA_WHF_TRSP_TP_CD
  FROM BKG_USA_WHF_RT_DTL RT_DTL
 WHERE PORT_CD = @[port]
   AND RT_DTL.IO_BND_CD = @[bound]
   AND RT_DTL.EFF_DT = TO_DATE(@[eff_dt],'YYYYMMDD')
   AND FULL_MTY_CD = 'F'
   AND USA_WHF_TRSP_TP_CD = 'I'
UNION ALL
SELECT '4' AS SEQ
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '20F', WHF_UT_PRC)) AS ft20
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '40F', WHF_UT_PRC)) AS ft40
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, '45F', WHF_UT_PRC)) AS ft45
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, 'CON', WHF_UT_PRC)) AS cont
      ,MAX(DECODE(RT_DTL.USA_WHF_RAT_UT_CD, 'TEU', WHF_UT_PRC)) AS teus
      ,'M' FULL_MTY_CD
      ,'I' USA_WHF_TRSP_TP_CD
  FROM BKG_USA_WHF_RT_DTL RT_DTL
 WHERE PORT_CD = @[port]
   AND RT_DTL.IO_BND_CD = @[bound]
   AND RT_DTL.EFF_DT = TO_DATE(@[eff_dt],'YYYYMMDD')
   AND FULL_MTY_CD = 'M'
   AND USA_WHF_TRSP_TP_CD = 'I'
) TB
ORDER BY SEQ			]]></sql>
			<params>
				<param name="port" type="12" value="" out="N"/>
				<param name="bound" type="12" value="" out="N"/>
				<param name="eff_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
