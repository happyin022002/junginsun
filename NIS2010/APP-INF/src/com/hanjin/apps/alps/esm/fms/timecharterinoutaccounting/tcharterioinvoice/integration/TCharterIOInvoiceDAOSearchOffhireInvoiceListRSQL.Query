<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TCharterIOInvoiceDAOSearchOffhireInvoiceListRSQL">
			<desc><![CDATA[TCharterIOInvoiceDAOSearchOffhireInvoiceListRSQL]]></desc>
			<sql><![CDATA[
select fa.acct_itm_nm, 
       fd.acct_cd, 
       fd.acct_itm_seq, 
       decode(fd.flet_curr_chk_cd,'F',fd.curr_cd,null) curr_cd, 
       decode(fd.flet_curr_chk_cd,'F',TO_CHAR(fd.inv_amt,'999,999,999,999,999,990.00'),null) inv_amt,
       decode(fd.flet_curr_chk_cd,'F',TO_CHAR(fd.inv_amt,'999,999,999,999,999,990.00'),null) ori_inv_amt,
       decode(fd.flet_curr_chk_cd,'F',TO_CHAR(fd.inv_amt,'999,999,999,999,999,990.00'),null) fir_inv_amt,
       decode(fd.flet_curr_chk_cd,'S',fd.curr_cd,null) curr_cd2, 
       decode(fd.flet_curr_chk_cd,'S',TO_CHAR(fd.inv_amt,'999,999,999,999,999,990.00'),null) inv_amt2,
       decode(fd.flet_curr_chk_cd,'S',TO_CHAR(fd.inv_amt,'999,999,999,999,999,990.00'),null) ori_inv_amt2,
       decode(fd.flet_curr_chk_cd,'S',TO_CHAR(fd.inv_amt,'999,999,999,999,999,990.00'),null) fir_inv_amt2,
       decode(fd.slp_tp_cd, null, 'N', 'Y') slp_tp_cd, 
       fd.inv_desc,
       fd.flet_ctrt_no,
       fd.flet_iss_tp_cd,
       fd.inv_seq,
       fd.inv_dtl_seq,
	   fd.MODI_VNOR_ITM_UT_CD AS VNOR_ITM_UT_CD, 
       fd.MODI_VNOR_ITM_VAL AS VNOR_ITM_VAL, 
       fd.MODI_VNOR_ITM_PRC AS VNOR_ITM_PRC, 
       fd.VSL_CD, 
       fd.VNOR_SEQ, 
       fd.VNOR_ITM_SEQ
  from fms_invoice fi, fms_inv_dtl fd, fms_acct_itm fa
 where fi.flet_ctrt_no = fd.flet_ctrt_no
   and fi.flet_ctrt_no = @[flet_ctrt_no]
   and fi.inv_seq = decode(@[inv_seq],NULL,(select max(inv_seq) from fms_invoice where flet_ctrt_no = @[flet_ctrt_no] and flet_iss_tp_cd = 'OFF'),@[inv_seq])
   and fi.flet_iss_tp_cd = 'OFF'
   and fi.inv_seq = fd.inv_seq
   and fi.flet_iss_tp_cd = fd.flet_iss_tp_cd
   and fd.acct_cd = fa.acct_cd
   and fd.acct_itm_seq = fa.acct_itm_seq
 order by fd.inv_dtl_seq, fd.acct_cd			]]></sql>
			<params>
				<param name="flet_ctrt_no" type="12" value="" out="N"/>
				<param name="inv_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
