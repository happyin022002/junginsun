<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOModifyStowageForSamsungMexicoToCanadaUSQL">
			<desc><![CDATA[아래 조건에 해당될 경우 Stowage를 OBSS로 자동 지정
1.SC No : AEF180101, AEF180202, AEF180303
2.POD이 CAVAN 인 경우

Trans Mode가 Rail/Truck 일때

* Hard Coding ID : STWG_OBSS 참고

]]></desc>
			<sql><![CDATA[
#if (${ca_flg} == 'Y')
UPDATE BKG_BKG_HIS
#else
UPDATE BKG_BOOKING
#end
SET 
 STWG_CD = 'OBSS'
, BLCK_STWG_CD = CASE WHEN POD_CD = 'CAVAN' THEN 'VAX'
                        ELSE BLCK_STWG_CD 
                        END
WHERE BKG_NO = @[bkg_no]
#if (${ca_flg} == 'Y')
AND   CORR_NO = 'TMP0000001'
#end
AND SC_NO IN (SELECT ATTR_CTNT2
                FROM BKG_HRD_CDG_CTNT
                WHERE HRD_CDG_ID = 'STWG_OBSS'
                AND ATTR_CTNT1 = 'SC_NO')
AND (		SELECT COUNT(1)
             FROM BKG_QUANTITY 
             WHERE BKG_NO = @[bkg_no]
               AND CNTR_TPSZ_CD NOT IN ('D2','D4','D5')) = 0
AND (       SELECT COUNT(1)
            FROM BKG_BOOKING
            WHERE BKG_NO = @[bkg_no]
              AND DCGO_FLG = 'Y'
     ) = 0
AND AWK_CGO_FLG = 'N'
AND BB_CGO_FLG  = 'N'
AND POD_CD LIKE 'CA%'			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
