<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChinaCustomsTransmissionDBDAOsearchVslInfoRSQL">
			<desc><![CDATA[ChinaVslInfoVO]]></desc>
			<sql><![CDATA[
SELECT	SKD.VPS_PORT_CD  AS FST_PORT,
    	LOC.LOC_NM       AS FST_PORT_NM,
    	TO_CHAR(SKD.VPS_ETB_DT,'YYYYMMDDHH24MI') AS FST_ARR_DT,
    	VSL.NATION_CD
FROM	VSK_VSL_PORT_SKD SKD, 
	    MDM_LOCATION LOC,
     	(SELECT NVL(VSL_RGST_CNT_CD, ' ') NATION_CD
         FROM	MDM_VSL_CNTR
         WHERE	VSL_CD = SUBSTR(@[vvd],1,4)) VSL
WHERE	SKD.VPS_PORT_CD		=       LOC.LOC_CD
AND	    SKD.VSL_CD			=       SUBSTR(@[vvd],1,4)
AND	    SKD.SKD_VOY_NO	    =       SUBSTR(@[vvd],5,4)
AND	    SKD.SKD_DIR_CD		=       SUBSTR(@[vvd],9,1)
AND	    LOC.CNT_CD			=       'CN'
AND     LOC.LOC_CD          <>      'CNHKG'
AND     SKD.VPS_ETB_DT = ( SELECT MIN(VPS_ETB_DT)
                           FROM VSK_VSL_PORT_SKD
                           WHERE VSL_CD          = SUBSTR(@[vvd], 1, 4)
                           AND   SKD_VOY_NO      = SUBSTR(@[vvd], 5, 4)
                           AND   SKD_DIR_CD      = SUBSTR(@[vvd], 9, 1)
                           AND   VPS_PORT_CD     <> 'CNHKG'
                           AND   VPS_PORT_CD     like 'CN%' )			]]></sql>
			<params>
				<param name="vvd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
