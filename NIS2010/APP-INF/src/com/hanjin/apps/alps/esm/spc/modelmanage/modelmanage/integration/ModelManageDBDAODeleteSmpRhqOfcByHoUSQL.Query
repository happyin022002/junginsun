<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ModelManageDBDAODeleteSmpRhqOfcByHoUSQL">
			<desc><![CDATA[SMP화면 내 HO탭에서 RHQ, OFC delete시 해당 office로 생성되어 있는 정보들의 delt_flg을 Y로, RLANE_ADJ_QTY을 0으로 수정한다.
[CHM-201322502-01] SPC 프로젝트 - 성수기 선복운영 개선을 위한 T/F추진
2014.02.04 [CHM-201428383-01] RFA 로직 추가
2014.05.16 [CHM-201430353] SMP / AES 보완요청 - SC 입력 기능 추가]]></desc>
			<sql><![CDATA[
UPDATE SPC_MDL_CUST_REV_LANE
SET CUST_BKG_QTY    = 0
  , SUB_TRD_BKG_QTY = 0
  , RLANE_BKG_QTY   = 0
  , RLANE_ADJ_QTY   = 0
  , DELT_FLG        = @[delt_flg]
  , SPC_CTRL_MDL_MNL_RMK = CASE WHEN @[delt_flg] = 'Y' THEN SPC_CTRL_MDL_MNL_RMK||'['||TO_CHAR(SYSDATE,'YYYYMMDD')||'|'||@[usr_id]||'|OFC DEL]'
                                ELSE SPC_CTRL_MDL_MNL_RMK
                            END
  , UPD_USR_ID = @[usr_id]
  , UPD_DT = SYSDATE
  , RHQ_UPD_USR_ID  = DECODE(@[g1_cng_usr], 'USER', DECODE(@[ho_flg],'Y',@[usr_id],RHQ_UPD_USR_ID) , RHQ_UPD_USR_ID)
  , RHQ_UPD_DT      = DECODE(@[g1_cng_usr], 'USER', DECODE(@[ho_flg],'Y',SYSDATE  ,RHQ_UPD_DT)     , RHQ_UPD_DT)
  , OFC_UPD_USR_ID  = DECODE(@[g2_cng_usr], 'USER', DECODE(@[ho_flg],'Y',@[usr_id],OFC_UPD_USR_ID) , OFC_UPD_USR_ID)
  , OFC_UPD_DT      = DECODE(@[g2_cng_usr], 'USER', DECODE(@[ho_flg],'Y',SYSDATE  ,OFC_UPD_DT)     , OFC_UPD_DT)
  , LANE_UPD_USR_ID = DECODE(@[g2_cng_usr], 'USER', DECODE(@[ho_flg],'Y',@[usr_id],LANE_UPD_USR_ID), LANE_UPD_USR_ID)
  , LANE_UPD_DT     = DECODE(@[g2_cng_usr], 'USER', DECODE(@[ho_flg],'Y',SYSDATE  ,LANE_UPD_DT)    , LANE_UPD_DT)
WHERE COST_YRWK        = @[cost_yrwk]
  AND VER_SEQ          = @[ver_seq]
  AND TRD_CD           = @[trd_cd]
  AND SUB_TRD_CD       = @[sub_trd_cd]
  AND SLS_RHQ_CD       = @[sls_rhq_cd]
  AND SLS_RGN_OFC_CD   = @[sls_rgn_ofc_cd]
  AND CTRT_OFC_CD      = @[ctrt_ofc_cd]
  AND CUST_CNT_CD      = @[cust_cnt_cd]
  AND CUST_SEQ         = @[cust_seq]
  AND NVL(SC_NO , 'X') = NVL(@[sc_no] , NVL(SC_NO, 'X'))
  AND NVL(RFA_NO, 'X') = NVL(@[rfa_no], 'X')			]]></sql>
			<params>
				<param name="delt_flg" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="g1_cng_usr" type="12" value="" out="N"/>
				<param name="ho_flg" type="12" value="" out="N"/>
				<param name="g2_cng_usr" type="12" value="" out="N"/>
				<param name="cost_yrwk" type="12" value="" out="N"/>
				<param name="ver_seq" type="12" value="" out="N"/>
				<param name="trd_cd" type="12" value="" out="N"/>
				<param name="sub_trd_cd" type="12" value="" out="N"/>
				<param name="sls_rhq_cd" type="12" value="" out="N"/>
				<param name="sls_rgn_ofc_cd" type="12" value="" out="N"/>
				<param name="ctrt_ofc_cd" type="12" value="" out="N"/>
				<param name="cust_cnt_cd" type="12" value="" out="N"/>
				<param name="cust_seq" type="12" value="" out="N"/>
				<param name="sc_no" type="12" value="" out="N"/>
				<param name="rfa_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
