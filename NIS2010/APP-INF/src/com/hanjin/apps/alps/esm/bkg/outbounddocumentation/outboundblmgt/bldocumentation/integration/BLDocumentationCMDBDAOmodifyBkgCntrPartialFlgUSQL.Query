<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationCMDBDAOmodifyBkgCntrPartialFlgUSQL">
			<desc><![CDATA[bkg, cntr 별로 partial flag를 'Y'로 update한다.]]></desc>
			<sql><![CDATA[
UPDATE BKG_CONTAINER
   SET CNTR_PRT_FLG = 'Y'
		, CNTR_VOL_QTY = CASE WHEN @[target_bkg] <> @[source_bkg] THEN TRUNC(CNTR_VOL_QTY / @[partial_count], 2)
						      WHEN @[target_bkg] =  @[source_bkg] THEN CNTR_VOL_QTY - (TRUNC(CNTR_VOL_QTY / @[partial_count], 2) * (@[partial_count] - 1)) END
		, CNTR_WGT     = CASE WHEN @[target_bkg] <> @[source_bkg] THEN TRUNC(CNTR_WGT / @[partial_count], 2)
						      WHEN @[target_bkg] =  @[source_bkg] THEN CNTR_WGT - (TRUNC(CNTR_WGT / @[partial_count], 2) * (@[partial_count] - 1)) END

		, UPD_USR_ID = @[usr_id]
		, UPD_DT = SYSDATE
 WHERE BKG_NO = @[target_bkg]
   AND CNTR_NO = @[cntr_no]			]]></sql>
			<params>
				<param name="target_bkg" type="12" value="" out="N"/>
				<param name="source_bkg" type="12" value="" out="N"/>
				<param name="partial_count" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
