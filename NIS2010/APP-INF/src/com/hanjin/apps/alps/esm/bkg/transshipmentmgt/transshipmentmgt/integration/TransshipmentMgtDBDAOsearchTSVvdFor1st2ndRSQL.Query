<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TransshipmentMgtDBDAOsearchTSVvdFor1st2ndRSQL">
			<desc><![CDATA[esm_bkg_495 화면에서 vvd를 drop down으로 조회한다.]]></desc>
			<sql><![CDATA[
select DISTINCT skd.vsl_cd||skd.skd_voy_no||skd.skd_dir_cd val
       ,skd.vsl_cd||skd.skd_voy_no||skd.skd_dir_cd name
  from vsk_vsl_port_skd skd

#if(${loc_cd} !='')
 where skd.vps_port_cd = @[loc_cd]
#end

#if(${loc_cd} !='' && ${loc_yd_cd} !='')
   and skd.yd_cd       = @[loc_cd]||@[loc_yd_cd]
#end

#if(${vps_dt_flag} =='A')
	#if(${vps_etd_dt} !='')
   		and skd.vps_eta_dt  > to_date(@[vps_etd_dt],'yyyy-mm-dd')
   		and skd.vps_eta_dt  < to_date(@[vps_etd_dt],'yyyy-mm-dd') + 1
	#end
#else  
	#if(${vps_etd_dt} !='')
   		and skd.vps_etd_dt  > to_date(@[vps_etd_dt],'yyyy-mm-dd')
   		and skd.vps_etd_dt  < to_date(@[vps_etd_dt],'yyyy-mm-dd') + 1
	#end
#end			]]></sql>
			<params>
				<param name="loc_cd" type="12" value="" out="N"/>
				<param name="loc_yd_cd" type="12" value="" out="N"/>
				<param name="vps_etd_dt" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
