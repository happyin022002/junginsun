<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CODCorrectionDBDAOsearchRehandlingVvdRSQL">
			<desc><![CDATA[opf에서 호출시 해당 request 건의 rehandling vvd를 조회한다.]]></desc>
			<sql><![CDATA[
select cod.vsl_cd||cod.skd_voy_no||cod.skd_dir_cd vvd
     , new_vvd.pod_yd_cd new_pod_yd_cd
     , old_vvd.pod_yd_cd old_pod_yd_cd
     , cod.COD_RHND_PORT_YD_CD
  from bkg_cod_vvd old_vvd
     , bkg_cod_vvd new_vvd
     , (select distinct 
               cod.bkg_no
             , cod.cod_rqst_seq
             , vvd.vsl_cd, vvd.skd_voy_no, vvd.skd_dir_cd   
             , cod.COD_RHND_PORT_YD_CD 
          from bkg_cod cod, bkg_cod_vvd vvd
         where cod.bkg_no       = vvd.bkg_no
           and cod.cod_rqst_seq = vvd.cod_rqst_seq
           and cod.bkg_no       = @[bkg_no]
           and cod.cod_rqst_seq = @[cod_rqst_seq]
           and cod.COD_RHND_PORT_YD_CD = vvd.pod_yd_cd) cod
 where old_vvd.bkg_no       = cod.bkg_no
   and old_vvd.cod_rqst_seq = cod.cod_rqst_seq
   and old_vvd.vsl_cd       = cod.vsl_cd
   and old_vvd.skd_voy_no   = cod.skd_voy_no
   and old_vvd.skd_dir_cd   = cod.skd_dir_cd
   and old_vvd.vvd_op_cd    = 'O'
   and new_vvd.bkg_no       = cod.bkg_no
   and new_vvd.cod_rqst_seq = cod.cod_rqst_seq
   and new_vvd.vsl_cd       = cod.vsl_cd
   and new_vvd.skd_voy_no   = cod.skd_voy_no
   and new_vvd.skd_dir_cd   = cod.skd_dir_cd
   and new_vvd.vvd_op_cd    = 'N'			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="SHAYSB25689" out="N"/>
				<param name="cod_rqst_seq" type="2" value="1" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
