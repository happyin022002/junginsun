<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="BLDocumentationCMDBDAOcopyBkgCntrSealByBKGCSQL">
			<desc><![CDATA[insert]]></desc>
			<sql><![CDATA[
insert into bkg_cntr_seal_no(BKG_NO 
,CNTR_NO 
,CNTR_SEAL_SEQ 
,CNTR_SEAL_NO 
,SEAL_PTY_NM 
,SEAL_KND_CD
,PRN_FLG 
,CRE_USR_ID 
,CRE_DT 
,UPD_USR_ID 
,UPD_DT
)
select @[to_bkg] BKG_NO 
		,CNTR_NO 
		,(select /*+index_desc ( bkg_cntr_seal_no XPKBKG_CNTR_SEAL_NO)*/ 
					nvl(sum(CNTR_SEAL_SEQ ),0)+ seal.cntr_seal_seq
					from bkg_cntr_seal_no
					where CNTR_SEAL_SEQ   >= 0 
					and rownum <= 1 
					and bkg_no = @[to_bkg] 
				    and cntr_no = @[cntr_no]) CNTR_SEAL_SEQ 
		,CNTR_SEAL_NO
		,SEAL_PTY_NM 
		,SEAL_KND_CD
		,PRN_FLG 
		,@[usr_id] CRE_USR_ID 
		,sysdate CRE_DT 
		,@[usr_id] UPD_USR_ID 
		,sysdate UPD_DT
	from bkg_cntr_seal_no seal
	where bkg_no = @[from_bkg]
    and cntr_no =@[cntr_no]
    and cntr_seal_no not in (select seal2.cntr_seal_no 
 							   from bkg_cntr_seal_no seal2
							  where seal2.bkg_no = @[to_bkg]
                                and seal2.cntr_no = @[cntr_no])			]]></sql>
			<params>
				<param name="to_bkg" type="12" value="" out="N"/>
				<param name="cntr_no" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="from_bkg" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
