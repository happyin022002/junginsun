<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CMPBGuidelineDBDAOPriDestCmpbGlineRoutViaVORSQL">
			<desc><![CDATA[via dest select]]></desc>
			<sql><![CDATA[
SELECT 
	A.GLINE_SEQ
,	A.PRS_CUST_TP_CD
,	A.BSE_SEQ
,	A.ORG_DEST_TP_CD
,	A.ROUT_VIA_SEQ
,	A.ROUT_VIA_PORT_TP_CD
,	A.ROUT_VIA_PORT_DEF_CD
,	A.CRE_USR_ID
,	A.CRE_DT
,	A.UPD_USR_ID
,	A.UPD_DT
,	A.SVC_SCP_CD
,	A.CRE_OFC_CD
,	DECODE(A.ROUT_VIA_PORT_TP_CD,
              'G',                                                --GROUP LOCATION
              (SELECT PRC_GRP_LOC_DESC
                 FROM PRI_CMPB_GRP_LOC
                WHERE SVC_SCP_CD = A.SVC_SCP_CD
                  AND GLINE_SEQ = A.GLINE_SEQ
                  AND PRC_GRP_LOC_CD = A.ROUT_VIA_PORT_DEF_CD
                  AND ROWNUM = 1),
              'R',
              (SELECT RGN_NM                                      --REGION
                 FROM MDM_REGION
                WHERE RGN_CD = A.ROUT_VIA_PORT_DEF_CD
                  AND ROWNUM = 1),
              'C',                                                --COUNTRY
              (SELECT CNT_NM
                 FROM MDM_COUNTRY
                WHERE CNT_CD = A.ROUT_VIA_PORT_DEF_CD
                  AND ROWNUM = 1),
               'L',                                               --LOCATION    
              (SELECT LOC_NM
                 FROM MDM_LOCATION
                WHERE LOC_CD = A.ROUT_VIA_PORT_DEF_CD
                  AND ROWNUM = 1)) AS ROUT_VIA_PORT_DEF_NM
FROM PRI_CMPB_GLINE_ROUT_VIA A
WHERE	A.GLINE_SEQ = @[gline_seq]
AND	A.PRS_CUST_TP_CD = @[prs_cust_tp_cd]
AND	A.BSE_SEQ = @[bse_seq]
AND	A.SVC_SCP_CD = @[svc_scp_cd]
AND	A.CRE_OFC_CD = @[cre_ofc_cd]
AND A.ORG_DEST_TP_CD = 'D'
ORDER BY DECODE(A.ROUT_VIA_PORT_TP_CD, 'C', '1', 'R', '2', 'G', '3', 'L', '4'), A.ROUT_VIA_PORT_DEF_CD			]]></sql>
			<params>
				<param name="gline_seq" type="12" value="" out="N"/>
				<param name="prs_cust_tp_cd" type="12" value="" out="N"/>
				<param name="bse_seq" type="12" value="" out="N"/>
				<param name="svc_scp_cd" type="12" value="" out="N"/>
				<param name="cre_ofc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
