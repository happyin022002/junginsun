<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="UsWharfageDecMgtDBDAOsearchUsWhfBlListRSQL">
			<desc><![CDATA[searchUsWhfBlList]]></desc>
			<sql><![CDATA[
SELECT  TB.*
       ,DECODE(BC.CNTR_VOL_QTY, 1, 'D', 'P') AS PARTIAL
  FROM  (
SELECT  B.BL_NO
       ,B.IO_BND_CD
       ,C.CNTR_NO
       ,C.FULL_MTY_CD
       ,B.CSTMS_DESC
       ,C.USA_WHF_EXPT_FLG
       ,B.ORG_DEST_LOC_CD
#if (${type_rail} != '')
       ,C.USA_WHF_TRSP_TP_CD
#else
       ,DECODE(C.USA_WHF_TRSP_TP_CD, 'R', 'L', C.USA_WHF_TRSP_TP_CD) AS USA_WHF_TRSP_TP_CD
#end
       ,DECODE(@[bound], 'I', C.DE_TERM_CD, C.RCV_TERM_CD) AS TERM
       ,DECODE(C.USA_WHF_RAT_UT_CD, '20F', C.CNTR_VOL_QTY) FT20
       ,DECODE(C.USA_WHF_RAT_UT_CD, '40F', C.CNTR_VOL_QTY) FT40
       ,DECODE(C.USA_WHF_RAT_UT_CD, '45F', C.CNTR_VOL_QTY) FT45
       ,B.VSL_CD
       ,B.SKD_VOY_NO
       ,B.SKD_DIR_CD
       ,B.PORT_CD
       ,C.CNTR_TPSZ_CD
       ,C.USA_WHF_RAT_UT_CD
       ,C.RAT_AS_QTY
       ,C.WHF_UT_PRC
       ,C.CRE_USR_ID
       ,M.STE_CD
       ,MC.CRR_CD
       ,BKG.BKG_NO
  FROM  BKG_USA_WHF_BL B
       ,BKG_USA_WHF_CNTR C
       ,MDM_LOCATION M
       ,MDM_VSL_CNTR MC
       ,BKG_BOOKING BKG
 WHERE  B.VSL_CD = C.VSL_CD
   AND  B.SKD_VOY_NO = C.SKD_VOY_NO
   AND  B.SKD_DIR_CD = C.SKD_DIR_CD
   AND  B.PORT_CD = C.PORT_CD
   AND  B.IO_BND_CD = C.IO_BND_CD
   AND  B.BL_NO = C.BL_NO
   AND  B.ORG_DEST_LOC_CD = M.LOC_CD(+)
   AND  B.VSL_CD = MC.VSL_CD(+)
   AND  B.BL_NO = BKG.BL_NO(+)
   AND  B.VSL_CD = SUBSTR(@[vvd], 1,4)
   AND  B.SKD_VOY_NO = SUBSTR(@[vvd], 5,4)
   AND  B.SKD_DIR_CD = SUBSTR(@[vvd], 9,1)
   AND  B.IO_BND_CD = @[bound]
   AND  B.PORT_CD = @[port]
        ) TB
       ,BKG_CONTAINER BC
  WHERE TB.BKG_NO = BC.BKG_NO(+)
    AND TB.CNTR_NO = BC.CNTR_NO(+)
ORDER BY TB.BL_NO, TB.CNTR_NO			]]></sql>
			<params>
				<param name="bound" type="12" value="" out="N"/>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="port" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
