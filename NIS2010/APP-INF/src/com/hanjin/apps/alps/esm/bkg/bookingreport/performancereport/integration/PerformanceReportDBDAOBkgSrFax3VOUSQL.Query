<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PerformanceReportDBDAOBkgSrFax3VOUSQL">
			<desc><![CDATA[update]]></desc>
			<sql><![CDATA[
UPDATE BKG_SR_FAX SET 

#if (${sr_mtch_sts_cd} == 'DEL') 
	SR_MTCH_STS_CD = DECODE((SELECT COUNT(1) FROM BKG_SR_CRNT_RQST RQ WHERE RQ.SR_KND_CD = 'F' AND RQ.SR_NO = @[sr_no]),0,'W','P')
,   SR_TRNS_USR_ID = CASE WHEN (SELECT COUNT(1) FROM BKG_SR_CRNT_RQST RQ WHERE RQ.SR_KND_CD = 'F' AND RQ.SR_NO = @[sr_no]) > 0 THEN @[mtch_usr_id] ELSE '' END
,   SR_TRNS_DT =  GLOBALDATE_PKG.TIME_LOCAL_FNC('MYPKG')
,   FNT_OFC_EML =''
#else 
	SR_MTCH_STS_CD = @[sr_mtch_sts_cd]
,	SR_TRNS_USR_ID  = @[mtch_usr_id]
,	SR_TRNS_DT = GLOBALDATE_PKG.TIME_LOCAL_FNC('MYPKG')
,   FNT_OFC_EML = @[fnt_ofc_eml]
#end
	
,    UPD_USR_ID = @[usr_id]
,    UPD_DT = SYSDATE
WHERE	SR_NO = @[sr_no]
AND	SR_KND_CD = @[sr_knd_cd]
AND	FAX_LOG_REF_NO = @[fax_log_ref_no]
#if (${sr_mtch_sts_cd} == 'W') 
--AND	SR_MTCH_STS_CD = 'P'
#end			]]></sql>
			<params>
				<param name="sr_no" type="12" value="" out="N"/>
				<param name="mtch_usr_id" type="12" value="" out="N"/>
				<param name="sr_mtch_sts_cd" type="12" value="" out="N"/>
				<param name="fnt_ofc_eml" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="sr_knd_cd" type="12" value="" out="N"/>
				<param name="fax_log_ref_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
