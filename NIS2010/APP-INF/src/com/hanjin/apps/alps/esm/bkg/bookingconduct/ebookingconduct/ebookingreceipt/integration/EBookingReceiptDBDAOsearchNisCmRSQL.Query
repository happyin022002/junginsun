<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOsearchNisCmRSQL">
			<desc><![CDATA[searchNisCm]]></desc>
			<sql><![CDATA[
SELECT  CM.CNTR_NO
      , CM.PCK_QTY
      , CM.PCK_TP_CD
      , CM.CNTR_MF_WGT
      , CM.WGT_UT_CD
      , CM.MEAS_QTY
      , CM.MEAS_UT_CD
      , CM.CNTR_MF_SEQ CNTR_MF_SEQ
      , NVL(CM.HAMO_TRF_CD, ' ') HAMO_TRF_CD
      , NVL(CM.NCM_NO, '  ') NCM_NO
      , NVL(REF.CUST_REF_NO_CTNT, '   ') PO_NO
      , '  ' CNTR_MF_DTL_DESC
      , CNTR_MF_GDS_DESC
      , CNTR_MF_MK_DESC
	  , CM.CNTR_MF_NO
	  , CM.DCGO_SEQ
	  , NVL(CM.CMDT_HS_CD, ' ') CMDT_HS_CD
      , ( SELECT CNTR_TPSZ_CD FROM BKG_CONTAINER C WHERE C.BKG_NO = CM.BKG_NO AND C.CNTR_NO = CM.CNTR_NO AND ROWNUM <= 1 ) CNTR_TPSZ_CD
      , NVL(BKG_JOIN_FNC(CURSOR( SELECT  DTL.NCM_NO
                                 FROM    BKG_CNTR_MF_DESC_DTL DTL
                                 WHERE   DTL.BKG_NO = CM.BKG_NO
                                 AND     DTL.CNTR_NO = CM.CNTR_NO
                                 AND     DTL.CNTR_MF_SEQ = CM.CNTR_MF_SEQ
                               )
                        ),CM.NCM_NO    ) NCM_MULTI_NO
	  , WPM_TRT_CD
FROM    BKG_CNTR_MF_DESC CM, BKG_REFERENCE REF
WHERE   CM.BKG_NO        = REF.BKG_NO        (+)
AND     CM.CNTR_MF_SEQ   = REF.CNTR_MF_SEQ   (+)
AND     'CMPO'           = REF.BKG_REF_TP_CD (+)
AND     CM.BKG_NO = @[bkg_no]
ORDER BY 
        CM.CNTR_NO
      , CM.CNTR_MF_SEQ
      , CM.PCK_QTY
      , CM.CNTR_MF_WGT
      , CM.MEAS_QTY
      , CM.CNTR_MF_MK_DESC
      , CM.CNTR_MF_GDS_DESC			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
