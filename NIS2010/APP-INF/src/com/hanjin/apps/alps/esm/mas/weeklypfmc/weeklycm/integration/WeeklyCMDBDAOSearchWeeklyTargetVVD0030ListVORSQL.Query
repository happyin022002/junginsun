<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="WeeklyCMDBDAOSearchWeeklyTargetVVD0030ListVORSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
SELECT DECODE(NVL(A.BSA_ZR_FLG,'N'),'N', '0', '1') BSA_ZR_FLG
      , A.COST_YRMON
      , A.SLS_YRMON
      , A.COST_WK
      , A.TRD_CD
      , A.SUB_TRD_CD
      , B.SLAN_CD
      , A.RLANE_CD
      , B.VSL_LANE_TP_CD
      , A.VSL_CD
      , A.SKD_VOY_NO
      , A.DIR_CD
      , A.IOC_CD
      , A.LST_LODG_PORT_CD
      , TO_CHAR( A.LST_LODG_PORT_ETD_DT, 'YYYY-MM-DD HH24:MI:SS') LST_LODG_PORT_ETD_DT 
      , TO_CHAR(A.N1ST_LODG_PORT_ETD_DT, 'YYYY-MM-DD HH24:MI:SS') N1ST_LODG_PORT_ETD_DT
      , DECODE(A.WKY_TGT_FLG, 'N', 'NO', 'YES') WKY_TGT_FLG, A.WKY_MNL_FLG
      , DECODE(A.MON_TGT_FLG, 'N', 'NO', 'YES') MON_TGT_FLG, A.DELT_FLG   
  FROM MAS_MON_VVD A, MAS_LANE_RGST B  
 WHERE A.TRD_CD   = B.TRD_CD  
   AND A.RLANE_CD = B.RLANE_CD  
   AND A.IOC_CD   = B.IOC_CD  
   AND A.DIR_CD   = B.DIR_CD 

   #if (${f_del} == '') 
   AND NVL(A.DELT_FLG,'N') = 'N'
   #else 
   AND NVL(A.DELT_FLG,'N') = 'Y'
   #end

   AND NVL(B.DELT_FLG,'N') = 'N' 

   #if (${f_trd_cd} != '') 
   AND A.TRD_CD     = @[f_trd_cd]
   #end

   #if (${f_rlane_cd} != '') 
   AND A.RLANE_CD   = @[f_rlane_cd]
   #end

   #if (${f_dir_cd} != '') 
   AND A.DIR_CD     = @[f_dir_cd]
   #end

   #if (${f_ioc_cd} != '') 
   AND A.IOC_CD     = @[f_ioc_cd]
   #end

   #if (${f_slan_cd} != '') 
   AND A.SLAN_CD    = @[f_slan_cd]
   #end

   #if (${f_vsl_cd} != '') 
   AND A.VSL_CD     = @[f_vsl_cd]
   #end

   #if (${f_skd_voy_no} != '') 
   AND A.SKD_VOY_NO = @[f_skd_voy_no] 
   #end

   #if (${f_skd_dir_cd} != '') 
   AND A.DIR_CD     = @[f_skd_dir_cd]
   #end

   #if (${f_chkprd} == 'M') 
      #if (${f_fm_mon} != '') 
      AND A.COST_YRMON BETWEEN @[f_year] || @[f_fm_mon] AND @[f_year] || @[f_to_mon]
      #else 
      AND A.COST_YRMON LIKE @[f_year] || '%'
      #end
   #elseif (${f_chkprd} == 'W') 
   AND A.SLS_YRMON LIKE @[f_year] || '%'  
      #if (${f_fm_wk} != '') 
      AND A.COST_WK BETWEEN @[f_fm_wk] AND @[f_to_wk]
      #end
   #end
ORDER BY A.COST_YRMON, A.COST_WK, A.TRD_CD, B.SUB_TRD_CD, B.SLAN_CD			]]></sql>
			<params>
				<param name="f_trd_cd" type="12" value="" out="N"/>
				<param name="f_rlane_cd" type="12" value="" out="N"/>
				<param name="f_dir_cd" type="12" value="" out="N"/>
				<param name="f_ioc_cd" type="12" value="" out="N"/>
				<param name="f_slan_cd" type="12" value="" out="N"/>
				<param name="f_vsl_cd" type="12" value="" out="N"/>
				<param name="f_skd_voy_no" type="12" value="" out="N"/>
				<param name="f_skd_dir_cd" type="12" value="" out="N"/>
				<param name="f_year" type="12" value="" out="N"/>
				<param name="f_fm_mon" type="12" value="" out="N"/>
				<param name="f_to_mon" type="12" value="" out="N"/>
				<param name="f_fm_wk" type="12" value="" out="N"/>
				<param name="f_to_wk" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
