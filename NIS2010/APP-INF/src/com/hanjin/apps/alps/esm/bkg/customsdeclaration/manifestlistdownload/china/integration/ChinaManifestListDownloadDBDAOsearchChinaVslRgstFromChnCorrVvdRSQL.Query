<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ChinaManifestListDownloadDBDAOsearchChinaVslRgstFromChnCorrVvdRSQL">
			<desc><![CDATA[]]></desc>
			<sql><![CDATA[
SELECT VSL_CD||SKD_VOY_NO||SKD_DIR_CD AS VVD,
       PORT_CD,
       IB_VSL_NM AS COMM_VSL_NM ,
       IB_SKD_VOY_NO,
       IB_SKD_DIR_NM,
       OB_SKD_VOY_NO,
       OB_SKD_DIR_NM,
       TO_CHAR(ETA_DT, 'YYYY-MM-DD') AS ETA_DT,
       TO_CHAR(ETD_DT, 'YYYY-MM-DD') AS ETD_DT

  FROM BKG_CSTMS_CHN_CORR_VVD

 WHERE (VSL_CD, SKD_VOY_NO, SKD_DIR_CD, PORT_CD) IN (SELECT DISTINCT
                                                            VSL_CD,
                                                            SKD_VOY_NO,
                                                            SKD_DIR_CD,
                                                            VPS_PORT_CD

                                                       FROM VSK_VSL_PORT_SKD

                                                      WHERE VPS_PORT_CD = @[port_cd]
                                                        AND VPS_ETB_DT BETWEEN TO_DATE(@[date_fm], 'YYYY-MM-DD') AND TO_DATE(@[date_to], 'YYYY-MM-DD') + 0.99999
                                                     #if (${vvd} != '')
                                                        AND VSL_CD = SUBSTR(@[vvd], 1, 4)
                                                        AND SKD_VOY_NO = SUBSTR(@[vvd], 5, 4)
                                                        AND SKD_DIR_CD = SUBSTR(@[vvd], 9, 1)
                                                     #end
                                                    )			]]></sql>
			<params>
				<param name="port_cd" type="12" value="" out="N"/>
				<param name="date_fm" type="12" value="" out="N"/>
				<param name="date_to" type="12" value="" out="N"/>
				<param name="vvd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
