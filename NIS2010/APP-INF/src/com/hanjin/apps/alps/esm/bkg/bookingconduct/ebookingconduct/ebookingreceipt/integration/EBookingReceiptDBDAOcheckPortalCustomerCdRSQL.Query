<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOcheckPortalCustomerCdRSQL">
			<desc><![CDATA[checkPortalCustomerCd]]></desc>
			<sql><![CDATA[
select DECODE(count(1)  , 0, 'N', 'Y') is_exists
FROM
                (SELECT GRP.ESVC_GRP_CD           GROUP_EDI_ID
                         , GRP.CUST_TRD_PRNR_ID     EDI_RECEIVE_ID
                         , GRP_CUST.CNT_CD   
                         , GRP_CUST.CUST_SEQ
                         , GRP_CUST.BKG_CUST_TP_DESC 
                         , GRP_CUST.ULTI_NEW_ASIA_CUST_FLG
                         , GRP_CUST.ULTI_TRNS_CUST_FLG
                   FROM BKG_EDI_GRP_CUST GRP_CUST, BKG_EDI_GRP GRP
                  WHERE GRP.ESVC_GRP_CD         = GRP_CUST.ESVC_GRP_CD
                    AND GRP.CO_CD               = GRP_CUST.CO_CD
                    AND GRP.CO_CD               = 'H'
                    AND GRP.ESVC_GRP_DELT_FLG   = 'N'
                    AND GRP_CUST.CNT_CD         > ' '
                    AND GRP_CUST.CUST_SEQ       > 0
                    AND GRP_CUST.DELT_FLG       = 'N'
                    AND GRP_CUST.BKG_CFM_FLG    = 'Y'
                    ) EDI_BY_CUST               
                , (SELECT 'S' RCV_TP, '1SH' RANK FROM DUAL 
                   UNION SELECT 'C' RCV_TP, '2CN' RANK FROM DUAL 
                   UNION SELECT 'N' RCV_TP, '3NF' RANK FROM DUAL 
                   UNION SELECT 'F' RCV_TP, '4FF' RANK FROM DUAL 
                   UNION SELECT 'A' RCV_TP, '5AN' RANK FROM DUAL 
                   UNION SELECT 'E' RCV_TP, '6EX' RANK FROM DUAL) TP_RANK
         WHERE @[cust_tp_cd]   = TP_RANK.RCV_TP
           and cnt_cd || lpad(cust_seq, 6, 0) = @[cust_cd]
           #if( ${xter_sndr_id} != '' )
			and edi_receive_id = @[xter_sndr_id]
		   #end
           AND DECODE(BKG_CUST_TP_DESC,'ALL','ALL', @[cust_tp_cd] )
                               IN (SELECT COLUMN_VALUE
                                     FROM TABLE(BKG_SPLIT_FNC(BKG_CUST_TP_DESC,',')))			]]></sql>
			<params>
				<param name="cust_tp_cd" type="12" value="" out="N"/>
				<param name="cust_cd" type="12" value="" out="N"/>
				<param name="xter_sndr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
