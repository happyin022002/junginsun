<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingReceiptDBDAOSearchBlockBkgMalaysiaToEuRSQL">
			<desc><![CDATA[GeneralBookingReceiptDBDAOSearchBlockBkgMalaysiaToEuRSQL]]></desc>
			<sql><![CDATA[
SELECT PCTL_NO, 
    CASE WHEN (B.POR_CD IN (SELECT ATTR_CTNT1 FROM BKG_HRD_CDG_CTNT
                       WHERE HRD_CDG_ID = 'EUSANCTION_ROUT_BLCK')
               OR
               B.POL_CD IN (SELECT ATTR_CTNT1 FROM BKG_HRD_CDG_CTNT
                       WHERE HRD_CDG_ID = 'EUSANCTION_ROUT_BLCK')
               )
          AND ('E' = (SELECT CONTI_CD FROM MDM_LOCATION WHERE LOC_CD=B.POD_CD)
               OR
               'E' = (SELECT CONTI_CD FROM MDM_LOCATION WHERE LOC_CD=B.DEL_CD)
              )
          THEN 'Y'
          WHEN (B.POD_CD IN (SELECT ATTR_CTNT1 FROM BKG_HRD_CDG_CTNT
                       WHERE HRD_CDG_ID = 'EUSANCTION_ROUT_BLCK')
               OR
               B.DEL_CD IN (SELECT ATTR_CTNT1 FROM BKG_HRD_CDG_CTNT
                       WHERE HRD_CDG_ID = 'EUSANCTION_ROUT_BLCK')
               )
          AND ('E' = (SELECT CONTI_CD FROM MDM_LOCATION WHERE LOC_CD=B.POR_CD)
               OR
               'E' = (SELECT CONTI_CD FROM MDM_LOCATION WHERE LOC_CD=B.POL_CD)
              )
          THEN 'Y'          
          ELSE 'N'
    END BLOCK_FLG  ,    
    CASE WHEN B.POL_CD IN (SELECT ATTR_CTNT1 FROM BKG_HRD_CDG_CTNT
                       WHERE HRD_CDG_ID = 'EUSANCTION_ROUT_BLCK') THEN B.POL_CD
		 WHEN B.POR_CD IN (SELECT ATTR_CTNT1 FROM BKG_HRD_CDG_CTNT
                       WHERE HRD_CDG_ID = 'EUSANCTION_ROUT_BLCK') THEN B.POR_CD
         WHEN B.POD_CD IN (SELECT ATTR_CTNT1 FROM BKG_HRD_CDG_CTNT
                       WHERE HRD_CDG_ID = 'EUSANCTION_ROUT_BLCK') THEN B.POD_CD
         WHEN B.DEL_CD IN (SELECT ATTR_CTNT1 FROM BKG_HRD_CDG_CTNT
                       WHERE HRD_CDG_ID = 'EUSANCTION_ROUT_BLCK') THEN B.DEL_CD
         ELSE 'NOT'
    END BLOCK_LOC,
    CASE WHEN ('E' = (SELECT CONTI_CD FROM MDM_LOCATION WHERE LOC_CD=B.POD_CD)
               OR
               'E' = (SELECT CONTI_CD FROM MDM_LOCATION WHERE LOC_CD=B.DEL_CD)
              )
          THEN 'TO'
          WHEN ('E' = (SELECT CONTI_CD FROM MDM_LOCATION WHERE LOC_CD=B.POR_CD)
               OR
               'E' = (SELECT CONTI_CD FROM MDM_LOCATION WHERE LOC_CD=B.POL_CD)
              )
          THEN 'FROM'          
          ELSE 'NOT'
    END BLOCK_EU             
FROM PRD_PROD_CTL_MST B 
WHERE B.PCTL_NO= @[pctl_no] --'ATL200739100'			]]></sql>
			<params>
				<param name="pctl_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
