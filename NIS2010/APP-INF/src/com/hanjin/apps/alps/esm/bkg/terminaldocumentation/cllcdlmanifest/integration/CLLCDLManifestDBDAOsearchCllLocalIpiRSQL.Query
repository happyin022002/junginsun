<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CLLCDLManifestDBDAOsearchCllLocalIpiRSQL">
			<desc><![CDATA[searchCllLocalIpi]]></desc>
			<sql><![CDATA[
SELECT	
	DISTINCT DECODE(L1.SCC_CD, L2.SCC_CD, DECODE(SUBSTR(C.POD_CD,1,2), SUBSTR(C.DEL_CD,1,2), 'L', 'I'), 'I') LOCAL_IPI
FROM	BKG_CSTMS_TML_CLL C, MDM_LOCATION L1, MDM_LOCATION L2
WHERE	C.VSL_CD		= SUBSTR(@[in_vvd_cd],1,4)
AND	C.SKD_VOY_NO		= SUBSTR(@[in_vvd_cd],5,4)
AND	C.SKD_DIR_CD		= SUBSTR(@[in_vvd_cd],9,1)
AND	C.PORT_CD		= @[in_pol_cd]
#if (${in_pol_split_no} != '')
AND NVL(C.CLPT_IND_SEQ, '1')= @[in_pol_split_no]
#end
AND	C.BKG_NO		= @[bkg_no]
AND	C.POD_CD		= L1.LOC_CD(+)
AND	C.DEL_CD		= L2.LOC_CD(+)			]]></sql>
			<params>
				<param name="in_vvd_cd" type="12" value="" out="N"/>
				<param name="in_pol_cd" type="12" value="" out="N"/>
				<param name="in_pol_split_no" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
