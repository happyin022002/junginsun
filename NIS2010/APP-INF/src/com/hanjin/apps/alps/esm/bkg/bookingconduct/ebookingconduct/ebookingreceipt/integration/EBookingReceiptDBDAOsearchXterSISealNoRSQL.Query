<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="EBookingReceiptDBDAOsearchXterSISealNoRSQL">
			<desc><![CDATA[RSQL]]></desc>
			<sql><![CDATA[
SELECT X.BKG_NO
,      NVL(X.CNTR_NO,B.CNTR_NO) CNTR_NO
,      NVL(X.CNTR_SEAL_SEQ, B.CNTR_SEAL_SEQ) CNTR_SEAL_SEQ
,      NVL(X.XTER_CNTR_SEAL_NO, B.CNTR_SEAL_NO)  CNTR_SEAL_NO
,      NVL(X.SEAL_PTY_NM, B.SEAL_PTY_NM) SEAL_PTY_NM
,      B.SEAL_PTY_TP_CD
,      NVL(X.SEAL_KND_CD, B.SEAL_KND_CD) SEAL_KND_CD
,      B.PRN_FLG
,      B.CNTR_NO AS OLD_CNTR_NO
,	   DECODE(NVL(B.CNTR_SEAL_NO,'N'),'N','I','U') IBFLAG
FROM   BKG_CNTR_SEAL_NO B, 
        (SELECT CNTR_NO
         , BKG_GET_ENTER_CONV_FNC(XTER_CNTR_SEAL_NO) AS XTER_CNTR_SEAL_NO
         , SEAL_KND_CD
         , SEAL_PTY_NM
         , M.BKG_NO
         , CNTR_SEAL_SEQ 
      FROM BKG_XTER_CNTR_SEAL_NO S, BKG_XTER_RQST_MST M
     WHERE S.XTER_SNDR_ID =  M.XTER_SNDR_ID
       AND S.XTER_RQST_NO =  M.XTER_RQST_NO
       AND S.XTER_RQST_SEQ=  M.XTER_RQST_SEQ           
       AND M.XTER_SNDR_ID = @[xter_sndr_id]
       AND M.XTER_RQST_NO = @[xter_rqst_no]
       AND M.XTER_RQST_SEQ= @[xter_rqst_seq]) X
WHERE  X.BKG_NO = B.BKG_NO(+)
  AND  X.CNTR_NO = B.CNTR_NO(+)
  AND  X.XTER_CNTR_SEAL_NO = B.CNTR_SEAL_NO(+)
ORDER BY X.CNTR_NO, X.CNTR_SEAL_SEQ			]]></sql>
			<params>
				<param name="xter_sndr_id" type="12" value="" out="N"/>
				<param name="xter_rqst_no" type="12" value="" out="N"/>
				<param name="xter_rqst_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
