<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PerformanceReportDBDAOSearchBkgSrProcHisListRSQL">
			<desc><![CDATA[PerformanceReportDBDAOSearchBkgSrProcHisListRSQL]]></desc>
			<sql><![CDATA[
SELECT 
    SR_NO,
    FAX_LOG_REF_NO, 
    SR_PROC_SEQ, 
   ( SELECT INTG_CD_VAL_DP_DESC
   	   FROM COM_INTG_CD_DTL
   	  WHERE INTG_CD_ID = 'CD02898'
        AND INTG_CD_VAL_CTNT =SR_PROC_TP_CD ) SR_PROC_TP_CD, 
    EVNT_DT, 
    EVNT_GDT, 
    EVNT_USR_ID, 
    HIS_CATE_NM, 
    PRE_CTNT, 
    CRNT_CTNT, 
    CRE_USR_ID, 
    CRE_DT
FROM BKG_SR_PROC_HIS  
WHERE (SR_NO,FAX_LOG_REF_NO)  =
       (select FM_FAX_SR_NO ,FM_FAX_LOG_REF_NO from bkg_sr_fax where SR_NO =@[sr_no]
  AND FAX_LOG_REF_NO =@[fax_log_ref_no])
union   

SELECT 
    SR_NO,
    FAX_LOG_REF_NO, 
    SR_PROC_SEQ, 
   ( SELECT INTG_CD_VAL_DP_DESC
   	   FROM COM_INTG_CD_DTL
   	  WHERE INTG_CD_ID = 'CD02898'
        AND INTG_CD_VAL_CTNT =SR_PROC_TP_CD ) SR_PROC_TP_CD, 
    EVNT_DT, 
    EVNT_GDT, 
    EVNT_USR_ID, 
    HIS_CATE_NM, 
    PRE_CTNT, 
    CRNT_CTNT, 
    CRE_USR_ID, 
    CRE_DT
FROM BKG_SR_PROC_HIS  
WHERE SR_NO =@[sr_no]
  AND FAX_LOG_REF_NO =@[fax_log_ref_no]			]]></sql>
			<params>
				<param name="sr_no" type="12" value="" out="N"/>
				<param name="fax_log_ref_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
