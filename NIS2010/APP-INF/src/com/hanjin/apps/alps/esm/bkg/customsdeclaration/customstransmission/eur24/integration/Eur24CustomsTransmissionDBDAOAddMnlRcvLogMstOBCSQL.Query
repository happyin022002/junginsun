<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="Eur24CustomsTransmissionDBDAOAddMnlRcvLogMstOBCSQL">
			<desc><![CDATA[EXS B/L Inquiry 화면에서 Status 가 Hold(Doc) / Hold(Phys) 인 경우, 그 값을 Hold Release 로 변경 저장]]></desc>
			<sql><![CDATA[
INSERT INTO BKG_CSTMS_EUR_IO_RCV
(
    BND_TP_CD,          EDI_RCV_DT,     EDI_RCV_SEQ
  , EUR_EDI_MSG_TP_ID,  MSG_RCV_NO
  , ACK_KND_ID,         ACK_RCV_STS_CD, EUR_CSTMS_ACK_CD
  , MVMT_REF_NO,        RCV_TMS
  , CRE_USR_ID,         CRE_DT,         UPD_USR_ID,      UPD_DT
    
)
SELECT 'O',  @[edi_rcv_dt],	@[edi_rcv_seq]
     , eur_edi_msg_tp_id,	msg_rcv_no
     , ack_knd_id,          @[ack_rcv_sts_cd],	eur_cstms_ack_cd
     , mvmt_ref_no,			CURRENT_TIMESTAMP
     , @[cre_usr_id],       SYSDATE,	@[upd_usr_id],		SYSDATE
FROM BKG_CSTMS_EUR_IO_RCV
WHERE MSG_RCV_NO LIKE @[bl_no]||'%'
AND RCV_TMS =( SELECT MAX(RCV_TMS)
                 FROM BKG_CSTMS_EUR_IO_RCV
                WHERE MSG_RCV_NO LIKE @[bl_no]||'%'
                  AND BND_TP_CD = 'O' 
                  AND EDI_RCV_DT > ' '
                  AND EDI_RCV_SEQ > 0
             )
AND BND_TP_CD = 'O' 
AND EDI_RCV_DT > ' '
AND EDI_RCV_SEQ > 0			]]></sql>
			<params>
				<param name="edi_rcv_dt" type="12" value="" out="N"/>
				<param name="edi_rcv_seq" type="12" value="" out="N"/>
				<param name="ack_rcv_sts_cd" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
