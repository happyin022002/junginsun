<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralBookingSearchDBDAOsearchSimpleSiHblCntrInfoListRSQL">
			<desc><![CDATA[searchSimpleSiHblCntrInfoList]]></desc>
			<sql><![CDATA[
-- HBL CNTR 
SELECT A.CNTR_NO||'|'||
       A.IBCNTR_SEAL_NO||'|'||
       A.IBCNTR_SEAL_NO2||'|'||
       A.IBCNTR_SEAL_NO3||'|'||
       DECODE(B.PCK_QTY,0,'',RTRIM(TO_CHAR(B.PCK_QTY,'FM999,999,990.999'),'.'))||'|'||
       (SELECT PCK_NM
        FROM MDM_PCK_TP
        WHERE PCK_CD = B.PCK_TP_CD)||'|'||
       DECODE(B.CNTR_MF_WGT,0,'',TO_CHAR(B.CNTR_MF_WGT,'FM999,999,999,999,990.999'))||'|'||
       B.WGT_UT_CD||'|'||
       DECODE(B.MEAS_QTY,0,'',TO_CHAR(B.MEAS_QTY,'FM999,999,990.999'))||'|'||
       B.MEAS_UT_CD ATTR_CTNT2
FROM BKG_CNTR_MF_DESC B, 
(
    SELECT A.BKG_NO,
           A.CNTR_NO,
           MIN(CASE WHEN A.CNTR_SEAL_SEQ = 1 THEN A.CNTR_SEAL_NO END) AS IBCNTR_SEAL_NO,
           MIN(CASE WHEN A.CNTR_SEAL_SEQ = 2 THEN A.CNTR_SEAL_NO END) AS IBCNTR_SEAL_NO2,
           MIN(CASE WHEN A.CNTR_SEAL_SEQ = 3 THEN A.CNTR_SEAL_NO END) AS IBCNTR_SEAL_NO3,
           MIN(A.CNTR_MF_NO) CNTR_MF_NO
    FROM 
            (SELECT SEAL.BKG_NO, SEAL.CNTR_NO, CNTR_SEAL_NO, CNTR_SEAL_SEQ, CNTR_MF_NO
            FROM BKG_CNTR_SEAL_NO SEAL,
            (   SELECT B.BKG_NO, B.CNTR_NO, B.CNTR_MF_NO
                FROM BKG_HBL A, 
                     BKG_CNTR_MF_DESC B
                WHERE A.BKG_NO = @[bkg_no]
                  AND A.BKG_NO = B.BKG_NO
                  AND A.CNTR_MF_NO = B.CNTR_MF_NO
                  AND A.HBL_SEQ = 1
            ) A
            WHERE SEAL.BKG_NO(+) = A.BKG_NO
              AND SEAL.CNTR_NO(+) = A.CNTR_NO) A
    GROUP BY A.BKG_NO, A.CNTR_NO, A.CNTR_MF_NO
) A
WHERE B.BKG_NO = A.BKG_NO
  AND B.CNTR_NO = A.CNTR_NO
  AND B.CNTR_MF_NO = A.CNTR_MF_NO
			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
