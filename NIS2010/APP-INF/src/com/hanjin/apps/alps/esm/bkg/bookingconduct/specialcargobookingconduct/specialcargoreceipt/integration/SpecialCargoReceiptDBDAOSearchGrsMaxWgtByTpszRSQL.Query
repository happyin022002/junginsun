<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpecialCargoReceiptDBDAOSearchGrsMaxWgtByTpszRSQL">
			<desc><![CDATA[cntr_no 없는 경우의 wgt_pass 판정]]></desc>
			<sql><![CDATA[
SELECT  CASE WHEN SUM(K.GRS_MAX_WGT) = 0 THEN 'X'     
          WHEN SUM(K.GRS_MAX_WGT) >
           @[grs_wgt] + SUM(NVL(MDM_CNTR_TP_SZ.CNTR_TPSZ_TARE_WGT,0)) 
          THEN 'Y' ELSE 'N' END WGT_PASS,
		CASE WHEN MAX(CNTR_TPSZ_CD) IN ('F2','F4','F5','A2','A4','O2','O4','P2','P4','S2','S4','A5') THEN
#if (${wgt_ut_cd}=='LBS')
             CASE WHEN @[grs_wgt] * 0.453599 <=
#else
             CASE WHEN @[grs_wgt] <=
#end
			SUM(NVL(MDM_CNTR_TP_SZ.CNTR_TPSZ_LODG_WGT, 0))
          	THEN 'Y' ELSE 'N' END
		ELSE 'Y' END CNTR_TP_SZ_WGT_PASS,
		SUM(NVL(MDM_CNTR_TP_SZ.CNTR_TPSZ_LODG_WGT, 0)) CNTR_TP_SZ_WGT
FROM 	MDM_CNTR_TP_SZ,
       (    SELECT  MIN(NVL(GRS_MAX_WGT,0) * 1000) GRS_MAX_WGT
			FROM    BKG_VVD A, 
					VSK_PORT_GNTR_CRN B
			WHERE   A.POD_YD_CD = B.YD_CD(+)
			AND     A.BKG_NO 	= @[bkg_no]) K
WHERE 	MDM_CNTR_TP_SZ.CNTR_TPSZ_CD = @[cntr_tpsz_cd]			]]></sql>
			<params>
				<param name="grs_wgt" type="12" value="" out="N"/>
				<param name="bkg_no" type="12" value="" out="N"/>
				<param name="cntr_tpsz_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
