<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="KorCustomsTransmissionDBDAOmakeCUSMODBlFlatFileRSQL">
			<desc><![CDATA[CUSMOD FLATFILE]]></desc>
			<sql><![CDATA[
SELECT	MAX(
		TO_CHAR(@[cstms_ofc_cty_cd],'FM000')	||'~'||		/*	Customs Office		*/
		TO_CHAR(@[kr_cstms_dept_cd],'FM00')		||'~'||		/*	Customs Department	*/
		@[sub_no]								||'~'||		/*	Submit No.			*/
		@[kr_cstms_corr_id]						||'~'||		/*	Correction Code		*/
		@[bl_no]								||'~'||		/*	B/L No				*/
		@[kr_cstms_bl_tp_cd]					||'~'||		/*	B/L Type			*/
		
		@[cstms_decl_tp_cd]						||'~'||		/*	Trans. Indicator	*/
		@[pod_cd]								||'~'||		/*	Booking POD			*/
		(SELECT DEL_CD FROM BKG_BOOKING WHERE BL_NO=@[bl_no])		||'~'||		/*  Booking DEL         */ 
		@[pck_qty]								||'~'||		/*	Package Count		*/
		@[pck_tp_cd]							||'~'||		/*	Package Code		*/
		@[corr_rsn]								||'~'||		/*	Correction Reason	*/
		BKG_SPCLCHAR_CONV_FNC(@[cgo_desc1],'Y')	||'~'||		/*	Cargo Desc			*/
		TRIM(TO_CHAR(REPLACE(@[cntr_ttl_wgt],',',''),'999,999,999,999,999.999'))||'~'||		/*	Weight				*/
		@[wgt_ut_cd]							||'~'||		/*	Weight Unit			*/
		@[meas_qty]								||'~'||		/*	Measure				*/
		(SELECT COUNT(*) FROM BKG_HBL WHERE BKG_NO = @[bl_no])      ||'~'||		/*	House B/L Count		*/
		@[cntr_cnt]								||'~'||		/*	CNTR Count			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[s_cust_nm],1,35),'Y')    	||'~'||		/*	Shipper Name1		*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[s_cust_nm],36,35),'Y')    	||'~'||		/*	Shipper Name2		*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[s_cust_nm],71,35),'Y')    	||'~'||		/*	Shipper Name3		*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[s_cust_addr],1,35),'Y')  	||'~'||		/*	Shipper Addr 1		*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[s_cust_addr],36,35),'Y') 	||'~'||		/*	Shipper Addr 2		*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[s_cust_addr],71,35),'Y') 	||'~'||		/*	Shipper Addr 3		*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[s_cust_addr],106,35),'Y') 	||'~'||		/*	Shipper Addr 4		*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[s_cust_addr],141,35),'Y') 	||'~'||		/*	Shipper Addr 5		*/
		(SELECT NVL(L.UN_LOC_CD, L.LOC_CD)
         FROM MDM_CUSTOMER C, MDM_LOCATION L
         WHERE C.CUST_CNT_CD = @[s_cust_cnt_cd]
         AND C.CUST_SEQ = @[s_cust_seq]
         AND C.LOC_CD = L.LOC_CD)||'~'||     /*  Shipper City (UN Loc)*/
        @[s_cust_cnt_cd]                          ||'~'||     /*  Shipper Country Code*/
        ''                            		  						||'~'||		/*	Shipper Tel			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[c_cust_nm],1,35),'Y')    	||'~'||		/*	CNEE Name 1			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[c_cust_nm],36,35),'Y')    	||'~'||		/*	CNEE Name 2			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[c_cust_nm],71,35),'Y')    	||'~'||		/*	CNEE Name 3			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[c_cust_addr],1,35),'Y')  	||'~'||		/*	CNEE Addr 1			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[c_cust_addr],36,35),'Y') 	||'~'||		/*	CNEE Addr 2			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[c_cust_addr],71,35),'Y') 	||'~'||		/*	CNEE Addr 3			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[c_cust_addr],106,35),'Y') 	||'~'||		/*	CNEE Addr 4			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[c_cust_addr],141,35),'Y') 	||'~'||		/*	CNEE Addr 5			*/
		(SELECT NVL(L.UN_LOC_CD, L.LOC_CD)
         FROM MDM_CUSTOMER C, MDM_LOCATION L
         WHERE C.CUST_CNT_CD = @[c_cust_cnt_cd]
         AND C.CUST_SEQ = @[c_cust_seq]
         AND C.LOC_CD = L.LOC_CD)||'~'||     /*  CNEE City (UN Loc)*/
        @[c_cust_cnt_cd]                          ||'~'||     /*  CNEE Country Code*/
        ''             	               		  						||'~'||		/*  CNEE TEL			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[n_cust_nm],1,35),'Y')    	||'~'||		/*	NTFY Name 1			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[n_cust_nm],36,35),'Y')    	||'~'||		/*	NTFY Name 2			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[n_cust_nm],71,35),'Y')    	||'~'||		/*	NTFY Name 3			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[n_cust_addr],1,35),'Y')  	||'~'||		/*	NTFY Addr1			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[n_cust_addr],36,35),'Y') 	||'~'||		/*	NTFY Addr2			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[n_cust_addr],71,35),'Y') 	||'~'||		/*	NTFY Addr3			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[n_cust_addr],106,35),'Y') 	||'~'||		/*	NTFY Addr4			*/
		BKG_SPCLCHAR_CONV_FNC(SUBSTR(@[n_cust_addr],141,35),'Y') 	||'~'||		/*	NTFY Addr5			*/
		(SELECT NVL(L.UN_LOC_CD, L.LOC_CD)
         FROM MDM_CUSTOMER C, MDM_LOCATION L
         WHERE C.CUST_CNT_CD = @[n_cust_cnt_cd]
         AND C.CUST_SEQ = @[n_cust_seq]
         AND C.LOC_CD = L.LOC_CD)||'~'||     /*  NTFY City (UN Loc)*/
        @[n_cust_cnt_cd]                          ||'~'||     /*  NTFY Country Code*/
        ''                            		  						||'~'||		/*	NTFY TEL			*/
		''									  						||'~'||		/*	화물운송주선업자	*/
		@[bd_area_cd]												||'~'||		/*	장치장코드			*/
		''																		/*  UCR NO              */
		)
   FROM	DUAL			]]></sql>
			<params>
				<param name="cstms_ofc_cty_cd" type="12" value="" out="N"/>
				<param name="kr_cstms_dept_cd" type="12" value="" out="N"/>
				<param name="sub_no" type="12" value="" out="N"/>
				<param name="kr_cstms_corr_id" type="12" value="" out="N"/>
				<param name="bl_no" type="12" value="" out="N"/>
				<param name="kr_cstms_bl_tp_cd" type="12" value="" out="N"/>
				<param name="cstms_decl_tp_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
				<param name="pck_qty" type="12" value="" out="N"/>
				<param name="pck_tp_cd" type="12" value="" out="N"/>
				<param name="corr_rsn" type="12" value="" out="N"/>
				<param name="cgo_desc1" type="12" value="" out="N"/>
				<param name="cntr_ttl_wgt" type="12" value="" out="N"/>
				<param name="wgt_ut_cd" type="12" value="" out="N"/>
				<param name="meas_qty" type="12" value="" out="N"/>
				<param name="cntr_cnt" type="12" value="" out="N"/>
				<param name="s_cust_nm" type="12" value="" out="N"/>
				<param name="s_cust_addr" type="12" value="" out="N"/>
				<param name="s_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="s_cust_seq" type="12" value="" out="N"/>
				<param name="c_cust_nm" type="12" value="" out="N"/>
				<param name="c_cust_addr" type="12" value="" out="N"/>
				<param name="c_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="c_cust_seq" type="12" value="" out="N"/>
				<param name="n_cust_nm" type="12" value="" out="N"/>
				<param name="n_cust_addr" type="12" value="" out="N"/>
				<param name="n_cust_cnt_cd" type="12" value="" out="N"/>
				<param name="n_cust_seq" type="12" value="" out="N"/>
				<param name="bd_area_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
