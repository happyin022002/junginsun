<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="FmsFileUploadDBDAOFileUploadListRSQL">
			<desc><![CDATA[FmsFileUploadDBDAOFileUploadListRSQL]]></desc>
			<sql><![CDATA[
#if(${vnor_itm_seq} != '')
    SELECT /*+INDEX_DESC(F XPKFMS_ATCH_FILE) */
           F.ATCH_FILE_LNK_ID
          ,F.ATCH_FILE_LNK_SEQ
          ,F.FILE_SAV_ID
          ,C.FILE_PATH_URL 
          ,C.FILE_UPLD_NM
          ,TO_CHAR (F.UPD_DT, 'YYYY-MM-DD') UPD_DT  
          ,F.UPD_USR_ID
    	  ,'0' AS FILE_DOWNLOAD
      FROM FMS_VNOR_ITM D, FMS_ATCH_FILE F, COM_UPLD_FILE C
     WHERE 1=1
     AND D.VSL_CD = @[vsl_cd]
     AND D.VNOR_SEQ = @[vnor_seq]
     AND D.VNOR_ITM_SEQ = @[vnor_itm_seq]
     AND D.ATCH_FILE_FLET_LNK_ID = F.ATCH_FILE_LNK_ID
     AND F.FILE_SAV_ID  = C.FILE_SAV_ID
#else
    SELECT /*+INDEX_DESC(F XPKFMS_ATCH_FILE) */
           F.ATCH_FILE_LNK_ID
          ,F.ATCH_FILE_LNK_SEQ
          ,F.FILE_SAV_ID
          ,C.FILE_PATH_URL 
          ,C.FILE_UPLD_NM
          ,TO_CHAR (F.UPD_DT, 'YYYY-MM-DD') UPD_DT  
          ,F.UPD_USR_ID
    	  ,'0' AS FILE_DOWNLOAD
      FROM FMS_BUNKER D, FMS_ATCH_FILE F, COM_UPLD_FILE C
     WHERE 1=1
     AND D.FLET_CTRT_NO = @[vsl_cd]
     AND D.BNK_SEQ = @[vnor_seq]
     AND D.ATCH_FILE_FLET_LNK_ID = F.ATCH_FILE_LNK_ID
     AND F.FILE_SAV_ID  = C.FILE_SAV_ID
#end			]]></sql>
			<params>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="vnor_seq" type="12" value="" out="N"/>
				<param name="vnor_itm_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
