<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TransferOrderIssueDBDAOSearchTroIfResultListRSQL">
			<desc><![CDATA[BkgTroXterIfVO CustomVO 사용
2010.10.19 신자영 [CHM-201006495-01] TRO (KOR) Status 변경 (User ID 및 정렬 순서)]]></desc>
			<sql><![CDATA[
SELECT BK.BKG_NO
     , TRO.TRO_SEQ
     , TROIF.ORD_NO 
     , TO_CHAR(TROIF.IF_DT, 'YYYY-MM-DD HH24:MI') IF_DT 
     , DECODE(NVL(TROIF.ACK_STS_CD, 'N'), 'N', 'NO', 'YES') ACK_STS_CD
     , VVD.VSL_CD||VVD.SKD_VOY_NO||VVD.SKD_DIR_CD VVD
     , TRIM(TROIF.RQST_ORD_MSG) RQST_ORD_MSG
--     , TRO.RQST_USR_ID DOC_USR_ID
     , DECODE(TROIF.CRE_USR_ID, 'MIG_USER', TRO.RQST_USR_ID, TROIF.CRE_USR_ID) DOC_USR_ID
--     , USR.USR_NM
     , DECODE(TROIF.CRE_USR_ID, 'MIG_USER', USR1.USR_NM, USR2.USR_NM) USR_NM
     , DECODE(BK.BKG_STS_CD, 'X', 'CANCEL', 'F', 'FIRM', 'W', 'WAIT', '') BKG_STS_CD 
  FROM BKG_BOOKING BK 
     , BKG_VVD VVD
     , BKG_TRO TRO
     , BKG_TRO_XTER_IF TROIF
     , COM_USER USR1 
     , COM_USER USR2
 WHERE BK.BKG_NO        = TRO.BKG_NO
   AND BK.BKG_NO        = VVD.BKG_NO
   AND BK.POL_CD        = VVD.POL_CD   
   AND VVD.VSL_PRE_PST_CD in ('S', 'T') 
   AND TRO.BKG_NO       = TROIF.BKG_NO(+)
   AND TRO.IO_BND_CD    = TROIF.IO_BND_CD(+)
   AND TRO.RTN_TRO_FLG  = TROIF.RTN_TRO_FLG(+)
   AND TRO.TRO_SEQ      = TROIF.TRO_SEQ(+)
   AND TRO.RQST_USR_ID  = USR1.USR_ID
   AND TROIF.CRE_USR_ID = USR2.USR_ID(+)
   AND BK.BKG_NO        = @[bkg_no]
   AND TRO.IO_BND_CD    = 'O'
   ORDER BY TROIF.IF_SEQ DESC			]]></sql>
			<params>
				<param name="bkg_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
