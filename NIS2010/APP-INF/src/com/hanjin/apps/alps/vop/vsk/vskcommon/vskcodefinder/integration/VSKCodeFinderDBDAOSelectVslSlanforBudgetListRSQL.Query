<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="VSKCodeFinderDBDAOSelectVslSlanforBudgetListRSQL">
			<desc><![CDATA[Budget에 사용된 Vessel Service Lane Code 목록조회]]></desc>
			<sql><![CDATA[
#if (${chk_use} == 'Y')  -- :: Searching Budget Vessel Service Lance :: --

SELECT    DISTINCT
          X.PF_SKD_TP_CD		AS PF_SVC_TP_CD
       ,  Y.VSL_SLAN_CD
       ,  Y.VSL_SLAN_NM
       ,  Y.VSL_SVC_TP_CD
       ,  Y.VSL_TP_CD
       ,  Y.ST_EFF_DT
       ,  Y.END_EFF_DT
       ,  Y.VSL_SLAN_SKD_TP_CD
       ,  Y.OFC_CD
       ,  Y.CO_CD
       ,  Y.FDR_DIV_CD
       ,  Y.CRE_USR_ID
       ,  Y.CRE_DT
       ,  Y.UPD_USR_ID
       ,  Y.UPD_DT
       ,  Y.DELT_FLG
       ,  Y.EAI_EVNT_DT
       ,  Y.CNL_AGN_VNDR_SEQ
       ,  Y.VSKD_FLET_GRP_CD
       ,  Y.SPCL_CGO_RQST_TGT_LANE_FLG
       ,  Y.TML_PROD_RPT_FLG
       ,  Y.PNDLM_FLG
FROM      VSK_BUD_VSL_SKD  	X
      ,   MDM_VSL_SVC_LANE 	Y
WHERE     1 = 1
AND       X.VSL_SLAN_CD    	= Y.VSL_SLAN_CD

#if (${fm_dt} != '')
AND       X.N1ST_PORT_BRTH_DT >= TO_DATE(@[fm_dt],'YYYY-MM-DD')
#end

#if (${to_dt} != '')
AND       X.N1ST_PORT_BRTH_DT <= TO_DATE(@[to_dt],'YYYY-MM-DD')+0.99999
#end

#if (${vsl_slan_cd} != '') 
AND 	  Y.VSL_SLAN_CD LIKE UPPER(@[vsl_slan_cd]) ||'%'
#end
#if (${vsl_slan_nm} != '') 
AND UPPER(Y.VSL_SLAN_NM) LIKE '%' || UPPER(@[vsl_slan_nm]) || '%'
#end
#if (${vsl_svc_tp_cd} == 'TRUNK')
AND 	  Y.VSL_SVC_TP_CD != 'O'
#elseif (${vsl_svc_tp_cd} != '')
AND 	  Y.VSL_SVC_TP_CD = DECODE(@[vsl_svc_tp_cd], 'A', Y.VSL_SVC_TP_CD, @[vsl_svc_tp_cd])
#end
#if (${fdr_div_cd} != '') 
AND 	  Y.FDR_DIV_CD = DECODE(@[fdr_div_cd], 'A', Y.FDR_DIV_CD, @[fdr_div_cd])
#end
AND 	  Y.VSL_TP_CD 		= 'C' /*컨테이너선*/
AND 	  Y.DELT_FLG 		= 'N'
ORDER BY  Y.VSL_SLAN_CD		ASC


#else     -- :: Searching NORAML Vessel Service Lance :: --

SELECT 
	VSL_SLAN_CD,
	VSL_SLAN_NM,
	VSL_SVC_TP_CD,
	VSL_TP_CD,
	ST_EFF_DT,
	END_EFF_DT,
	VSL_SLAN_SKD_TP_CD,
	OFC_CD,
	CO_CD,
	FDR_DIV_CD,
	CRE_USR_ID,
	CRE_DT,
	UPD_USR_ID,
	UPD_DT,
	DELT_FLG,
	EAI_EVNT_DT,
	CNL_AGN_VNDR_SEQ,
	VSKD_FLET_GRP_CD,
	SPCL_CGO_RQST_TGT_LANE_FLG,
	TML_PROD_RPT_FLG,
	PNDLM_FLG
FROM MDM_VSL_SVC_LANE
WHERE 1 = 1
#if (${vsl_slan_cd} != '') 
AND VSL_SLAN_CD LIKE UPPER(@[vsl_slan_cd]) ||'%'
#end
#if (${vsl_slan_nm} != '') 
AND UPPER(VSL_SLAN_NM) LIKE '%' || UPPER(@[vsl_slan_nm]) || '%'
#end
#if (${vsl_svc_tp_cd} == 'TRUNK')
AND VSL_SVC_TP_CD != 'O'
#elseif (${vsl_svc_tp_cd} != '')
AND VSL_SVC_TP_CD = DECODE(@[vsl_svc_tp_cd], 'A', VSL_SVC_TP_CD, @[vsl_svc_tp_cd])
#end
#if (${fdr_div_cd} != '') 
AND FDR_DIV_CD = DECODE(@[fdr_div_cd], 'A', FDR_DIV_CD, @[fdr_div_cd])
#end
AND VSL_TP_CD = 'C' /*컨테이너선*/
AND DELT_FLG = 'N'
ORDER BY VSL_SLAN_CD	ASC

#end			]]></sql>
			<params>
				<param name="fm_dt" type="12" value="" out="N"/>
				<param name="to_dt" type="12" value="" out="N"/>
				<param name="vsl_slan_cd" type="12" value="" out="N"/>
				<param name="vsl_slan_nm" type="12" value="" out="N"/>
				<param name="vsl_svc_tp_cd" type="12" value="" out="N"/>
				<param name="fdr_div_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
