<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PortTimePerformanceMgtDBDAOSearchPortTimeAcitvityListRSQL">
			<desc><![CDATA[VVD Port별 Activity Time 정보을 조회 한다.
History------------------------------------------------------------------------------------
2012.02.20 김민아 [CHM-201215901-01] Port Time Reduction project 개발 (2차)]]></desc>
			<sql><![CDATA[
SELECT  CD.PORT_ACT_GRP_DESC
       ,CD.PORT_ACT_DESC
       ,DECODE(CD.PORT_ACT_CTNT, 'PTA0022', SKD2.BFR_BRTH_ANK_DRP_DT, 'PTA0023', SKD2.BFR_BRTH_ANK_OFF_DT, ACT.WRK_PERF_DT) WRK_PERF_DT
       ,ACT.CNTR_HNDL_KNT
       ,ACT.OP_STPG_CTNT
       ,DECODE(CD.PORT_ACT_CTNT, 'PTA0022',NVL2(SKD2.BFR_BRTH_ANK_DRP_DT,'VMS',''), 'PTA0023',NVL2(SKD2.BFR_BRTH_ANK_OFF_DT,'VMS',''), ACT.SRC_SVR_NM) SRC_SVR_NM
       ,DECODE(CD.PORT_ACT_CTNT, 'PTA0022',SKD2.DIFF_RMK, 'PTA0023',SKD2.DIFF_RMK, ACT.DIFF_RMK) DIFF_RMK
       ,ACT.CRE_USR_ID
       ,ACT.CRE_DT
       ,ACT.UPD_USR_ID
       ,ACT.UPD_DT
       ,CD.PORT_ACT_CTNT
       ,NVL(ACT.VSL_CD       ,@[vsl_cd]      ) AS VSL_CD
       ,NVL(ACT.SKD_VOY_NO   ,@[skd_voy_no]  ) AS SKD_VOY_NO
       ,NVL(ACT.SKD_DIR_CD   ,@[skd_dir_cd]  ) AS SKD_DIR_CD
       ,NVL(ACT.VPS_PORT_CD  ,@[vps_port_cd] ) AS VPS_PORT_CD
       ,NVL(ACT.CLPT_IND_SEQ ,@[clpt_ind_seq]) AS CLPT_IND_SEQ
       ,'' AS ACT_GEN_CD_ID
  FROM  OPF_PORT_TM_ACT ACT
       ,(
        SELECT  (
                SELECT  S.ACT_GEN_CD_VAL_DESC
                FROM    OPF_GEN_CD_DTL S
                WHERE   S.ACT_GEN_CD_ID       = 'CD00004'
                AND     S.ACT_GEN_CD_VAL_CTNT = T.ACT_GEN_CD_GRP_ID
                )                   AS PORT_ACT_GRP_DESC
              , ACT_GEN_CD_VAL_CTNT AS PORT_ACT_CTNT
              , ACT_GEN_CD_VAL_DESC AS PORT_ACT_DESC
        FROM    OPF_GEN_CD_DTL T
        WHERE   ACT_GEN_CD_ID   = @[act_gen_cd_id]
        ORDER BY DP_SEQ
        ) CD
       ,VSK_ACT_PORT_SKD  SKD
	   ,VSK_ACT_PORT_SKD  SKD2
 WHERE  1 = 1
   AND  CD.PORT_ACT_CTNT = ACT.PORT_ACT_CTNT (+)
   AND  ACT.VSL_CD      (+) = @[vsl_cd]
   AND  ACT.SKD_VOY_NO  (+) = @[skd_voy_no]
   AND  ACT.SKD_DIR_CD  (+) = @[skd_dir_cd]
   AND  ACT.VPS_PORT_CD (+) = @[vps_port_cd]
   AND  ACT.CLPT_IND_SEQ(+) = @[clpt_ind_seq]
   AND  SKD2.VSL_CD      (+) = @[vsl_cd]
   AND  SKD2.SKD_VOY_NO  (+) = @[skd_voy_no]
   AND  SKD2.SKD_DIR_CD  (+) = @[skd_dir_cd]
   AND  SKD2.VPS_PORT_CD (+) = @[vps_port_cd]
   AND  SKD2.CLPT_IND_SEQ(+) = @[clpt_ind_seq]
   AND  SKD.VSL_CD      (+) = ACT.VSL_CD
   AND  SKD.SKD_VOY_NO  (+) = ACT.SKD_VOY_NO
   AND  SKD.SKD_DIR_CD  (+) = ACT.SKD_DIR_CD
   AND  SKD.VPS_PORT_CD (+) = ACT.VPS_PORT_CD
   AND  SKD.CLPT_IND_SEQ(+) = ACT.CLPT_IND_SEQ			]]></sql>
			<params>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="vps_port_cd" type="12" value="" out="N"/>
				<param name="clpt_ind_seq" type="12" value="" out="N"/>
				<param name="act_gen_cd_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
