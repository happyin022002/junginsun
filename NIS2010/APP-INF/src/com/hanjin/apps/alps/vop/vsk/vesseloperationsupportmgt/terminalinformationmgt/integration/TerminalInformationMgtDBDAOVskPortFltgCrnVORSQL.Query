<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TerminalInformationMgtDBDAOVskPortFltgCrnVORSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
SELECT 
	A.LOC_CD
,	CRN_SEQ
,	MAX_HNDL_CGO_WGT
,	MAX_HNDL_CGO_HGT
,	MAX_RCH_LEN
,	HNDL_COST_RMK
,	FLTG_RMK
,	CRE_USR_ID
,	CRE_DT
,	UPD_USR_ID
,	TO_CHAR(a.UPD_DT, 'YYYY-MM-DD HH24:MI') as UPD_DT
FROM VSK_PORT_FLTG_CRN	A,
	(
		SELECT LOC_CD, 'HAMRU' POR_RHQ
		FROM   MDM_LOCATION
		WHERE  DECODE(CONTI_CD, 'F', 'E', CONTI_CD) = 'E'
		AND    NVL(DELT_FLG, 'N') = 'N'
		AND    CALL_PORT_FLG = 'Y'
		AND    LOC_CD <> 'RUVVO'
		UNION ALL
		SELECT LOC_CD, 'PHXRA' POR_RHQ
		FROM   MDM_LOCATION
		WHERE  CONTI_CD  = 'M'
		AND    NVL(DELT_FLG, 'N') = 'N'
		AND    CALL_PORT_FLG = 'Y'
		UNION ALL

        SELECT LOC_CD, DECODE(SCONTI_CD, 'AF', 'SHARC', 'SINRS') POR_RHQ
        FROM   MDM_LOCATION                                             
        WHERE  CONTI_CD  = 'A'                                          
        AND    NVL(DELT_FLG, 'N') = 'N' 
        AND    LOC_CD        NOT LIKE 'KR%' 
        AND    LOC_CD        NOT LIKE 'JP%'                                
        AND    CALL_PORT_FLG = 'Y'      
        
        UNION ALL                                                       
        SELECT LOC_CD, 'SELSC' POR_RHQ
        FROM   MDM_LOCATION                                             
        WHERE  CONTI_CD  = 'A'                                          
        AND    NVL(DELT_FLG, 'N') = 'N'  
        AND    LOC_CD        LIKE 'KR%'                                        
        AND    CALL_PORT_FLG = 'Y'   
        UNION ALL                                                       
        SELECT LOC_CD, 'TYOSC' POR_RHQ
        FROM   MDM_LOCATION                                             
        WHERE  CONTI_CD  = 'A'                                          
        AND    NVL(DELT_FLG, 'N') = 'N'   
        AND    LOC_CD        LIKE 'JP%'                                       
        AND    CALL_PORT_FLG = 'Y' 
		UNION ALL
		SELECT LOC_CD, 'VVOIA' POR_RHQ
		FROM   MDM_LOCATION
		WHERE  LOC_CD = 'RUVVO'
		AND    NVL(DELT_FLG, 'N') = 'N'
 		AND    CALL_PORT_FLG = 'Y'
	)B
WHERE A.LOC_CD = B.LOC_CD
AND B.POR_RHQ LIKE @[por_rhq]
#if (${loc_cd} != '') 
AND	A.LOC_CD = @[loc_cd]
#end
ORDER BY A.LOC_CD,	A.CRN_SEQ			]]></sql>
			<params>
				<param name="por_rhq" type="12" value="" out="N"/>
				<param name="loc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
