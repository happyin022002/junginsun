<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TerminalDepartureReportDBDAOTdrHeaderSkdVORSQL">
			<desc><![CDATA[DESC Enter..]]></desc>
			<sql><![CDATA[
SELECT		H.VSL_CD
		,	H.VOY_NO
		,	H.DIR_CD
		,	H.PORT_CD
		,	H.CALL_IND
		,	TML_CD
		,	TDR_DATE
		,	TDR_USER
		,	NIS_DATE
		,	TO_CHAR(COMMENCE, 'YYYYMMDDHH24MI') AS COMMENCE
		,	TO_CHAR(COMPLETE, 'YYYYMMDDHH24MI') AS COMPLETE
		,	GROSS_WORK
		,	NET_WORK
		,	LOSE_HR
		,	GROSS_GANG
		,	NET_GANG
		,	MVS
		,	NET_TML
		,	GROSS_TML
		,	NET_GC
		,	GROSS_GC
		,	REMARK
		,	HATCH
		,	CON
		,	TO_CHAR(PILOT_ARR, 'YYYYMMDDHH24MI') AS PILOT_ARR
		,	TO_CHAR(PILOT_DEP, 'YYYYMMDDHH24MI') AS PILOT_DEP
		,	TO_CHAR(ANCHOR_ARR, 'YYYYMMDDHH24MI') AS ANCHOR_ARR
		,	TO_CHAR(ANCHOR_DEP, 'YYYYMMDDHH24MI') AS ANCHOR_DEP
		,	TO_CHAR(BERTH, 'YYYYMMDDHH24MI') AS BERTH
		,	TO_CHAR(UNBERTH, 'YYYYMMDDHH24MI') AS UNBERTH
		,	DRAFT_FWD_ARR
		,	DRAFT_FWD_DEP
		,	DRAFT_AFT_ARR
		,	DRAFT_AFT_DEP
		,	BALLAST_ARR
		,	BALLAST_DEP
		,	ROB_FO_ARR
		,	ROB_FO_DEP
		,	ROB_DO_ARR
		,	ROB_DO_DEP
		,	ROB_FW_ARR
		,	ROB_FW_DEP
		,	BUNKER_FO_ARR
		,	BUNKER_FO_DEP
		,	BUNKER_DO_ARR
		,	BUNKER_DO_DEP
		,	BUNKER_FW_ARR
		,	BUNKER_FW_DEP
		,	DWT_ARR
		,	DWT_DEP
		,	DISPL_ARR
		,	DISPL_DEP
		,	GM_ARR
		,	GM_DEP
		,	TUG_ARR
		,	TUG_DEP
		,	SULPHUR_FO_ARR
		,	SULPHUR_FO_DEP
		,	SULPHUR_DO_ARR
		,	SULPHUR_DO_DEP
		,	SUPPLY_SULPHUR_FO
		,	SUPPLY_SULPHUR_DO
		,	TO_CHAR(ETA, 'YYYYMMDDHH24MI') AS ETA
		,	TO_CHAR(ETA_CANAL, 'YYYYMMDDHH24MI') AS ETA_CANAL
		,	INFO
		,	UPDATE_USER
		,	UPDATE_TIME
		,	UPDATE_SYS
        , 	NEXT_PORT
        ,   NEXT_CANAL
       ,   (   SELECT	CASE WHEN NVL(COUNT(VSL_CD), 0) > 0 THEN 'Y' ELSE 'N' END
        		FROM	OPF_TML_DEP_RPT_DTL
            	WHERE   VSL_CD      	=	V.VSL_CD      	  
            	AND     SKD_VOY_NO      =	V.SKD_VOY_NO      
            	AND     SKD_DIR_CD      =	V.SKD_DIR_CD      
            	AND     CLPT_CD         =	V.VPS_PORT_CD         
            	AND     CLPT_IND_SEQ    =	V.CLPT_IND_SEQ    
         	)  AS EXISTS_TML_DEP_RPT_DTL
FROM	VSK_VSL_PORT_SKD V, TDR_HEADER H
WHERE	V.VSL_CD       = H.VSL_CD  
AND     V.SKD_VOY_NO   = H.VOY_NO  
AND     V.SKD_DIR_CD   = H.DIR_CD  
AND     V.VPS_PORT_CD  = H.PORT_CD 
AND     V.CLPT_IND_SEQ = H.CALL_IND
AND     V.VSL_CD       =	@[vsl_cd]
AND		V.SKD_VOY_NO   =	@[voy_no]
AND		V.SKD_DIR_CD   =	@[dir_cd]
AND		V.YD_CD        =	@[yd_cd]
AND     V.CLPT_IND_SEQ =    @[clpt_ind_seq]			]]></sql>
			<params>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="voy_no" type="12" value="" out="N"/>
				<param name="dir_cd" type="12" value="" out="N"/>
				<param name="yd_cd" type="12" value="" out="N"/>
				<param name="clpt_ind_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
