<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SCGInternalFinderDBDAOSearchUNNumberRSQL">
			<desc><![CDATA[DESC Enter..]]></desc>
			<sql><![CDATA[
SELECT  ''iPage,S.IMDG_UN_NO                        ,
                S.IMDG_UN_NO_SEQ                    ,
                S.PRP_SHP_NM                        ,
                S.IMDG_CLSS_CD                      ,
                S.IMDG_COMP_GRP_CD                  ,
                S.IMDG_SUBS_RSK_LBL_RMK             ,
                S.IMDG_MRN_POLUT_CD                 ,
                S.IMDG_PCK_GRP_CD                   ,
                S.IMDG_LMT_QTY                      ,
                S.IMDG_LMT_QTY_MEAS_UT_CD           ,
                S.IMDG_EXPT_QTY_CD                  ,
                S.IMDG_EMER_NO                      ,
                S.IMDG_STWG_CATE_CD                 ,
                S.FLSH_PNT_TEMP_CTNT                ,
                S.EMER_RSPN_GID_NO                  ,
                S.EMER_RSPN_GID_CHR_NO              ,
                S.PSA_NO                            ,
                S.N1ST_BOM_PORT_TRST_NO             ,
                S.N2ND_BOM_PORT_TRST_NO             ,
                S.N3RD_BOM_PORT_TRST_NO             ,
                S.N4TH_BOM_PORT_TRST_NO             ,
                S.PKG_AUTH_NO                       ,
                S.LK_PORT_AUTH_NO                   ,
                S.IMDG_SBST_PPT_DESC                ,
                S.CFR_RPT_QTY                       ,
                S.CFR_PSN_INH_ZN_CD                 ,
                S.CFR_TOXC_CD                       ,
                S.CFR_DG_WET_CD                     ,
                S.CFR_RSTR_PORT_NM                  ,
                S.CFR_RSTR_OPR_NM                   ,
                S.CFR_XTD_CLSS_CD                   ,
                S.HCDG_FLG                          ,
                S.HCDG_DPND_QTY_FLG                 ,
                S.HCDG_RMK                          ,
                S.N1ST_IMDG_PCK_INSTR_CD            ,
                S.N2ND_IMDG_PCK_INSTR_CD            ,
                S.N3RD_IMDG_PCK_INSTR_CD            ,
                S.N1ST_IMDG_PCK_PROVI_CD            ,
                S.N2ND_IMDG_PCK_PROVI_CD            ,
                S.N3RD_IMDG_PCK_PROVI_CD            ,
                S.N4TH_IMDG_PCK_PROVI_CD            ,
                S.N5TH_IMDG_PCK_PROVI_CD            ,
                S.N1ST_IMDG_IBC_INSTR_CD            ,
                S.N2ND_IMDG_IBC_INSTR_CD            ,
                S.N3RD_IMDG_IBC_INSTR_CD            ,
                S.N4TH_IMDG_IBC_INSTR_CD            ,
                S.N5TH_IMDG_IBC_INSTR_CD            ,
                S.N1ST_IMDG_IBC_PROVI_CD            ,
                S.N2ND_IMDG_IBC_PROVI_CD            ,
                S.N3RD_IMDG_IBC_PROVI_CD            ,
                S.N4TH_IMDG_IBC_PROVI_CD            ,
                S.N5TH_IMDG_IBC_PROVI_CD            ,
                S.N1ST_IMDG_UN_TNK_INSTR_CD         ,
                S.N2ND_IMDG_UN_TNK_INSTR_CD         ,
                S.N1ST_IMDG_TNK_INSTR_PROVI_CD      ,
                S.N2ND_IMDG_TNK_INSTR_PROVI_CD      ,
                S.N3RD_IMDG_TNK_INSTR_PROVI_CD      ,
                S.N4TH_IMDG_TNK_INSTR_PROVI_CD      ,
                S.N5TH_IMDG_TNK_INSTR_PROVI_CD      ,
                S.HCDG_PCK_RSTR_DESC                ,
                S.HCDG_INTMD_BC_RSTR_DESC           ,
                S.HCDG_TNK_RSTR_DESC                ,
                S.SEGR_DESC                         ,
                S.CLR_LIV_QTR_STWG_FLG              ,
                S.IMDG_FD_STUF_STWG_CD              ,
                S.IMDG_HT_SRC_STWG_CD               ,
                S.SEGR_AS_FOR_IMDG_CLSS_FLG         ,
                S.SEGR_AS_FOR_IMDG_CLSS_CD          ,
                S.AWAY_FM_IMDG_CLSS_FLG             ,
                S.SPRT_FM_IMDG_CLSS_FLG             ,
                S.AWAY_FM_IMDG_SEGR_GRP_FLG         ,
                S.SPRT_FM_IMDG_SEGR_GRP_FLG         ,
                S.IMDG_TBL_NO                       ,
                S.IMDG_UN_NO_HLD_FLG                ,
                S.IMDG_LMT_QTY_DESC                 ,
                S.IMDG_EXPT_QTY_DESC                ,
                S.CRE_USR_ID                        ,
                S.CRE_DT                            ,
                S.UPD_USR_ID                        ,
                S.UPD_DT							,
				S.IMDG_TEC_NM						,
                S.IMDG_CRR_RSTR_EXPT_CD				,
                S.IMDG_CRR_RSTR_EXPT_NM				,
				S.IMDG_CLSS_CD_DESC,
		        NVL(MAX(CASE  WHEN S.RN = 1 THEN S.IMDG_SUBS_RSK_LBL_CD  END),'')||
        		NVL(MAX(CASE  WHEN S.RN = 2 THEN '/'||S.IMDG_SUBS_RSK_LBL_CD  END),'')||
		        NVL(MAX(CASE  WHEN S.RN = 3 THEN '/'||S.IMDG_SUBS_RSK_LBL_CD  END),'')||
        		NVL(MAX(CASE  WHEN S.RN = 4 THEN '/'||S.IMDG_SUBS_RSK_LBL_CD  END),'')  IMDG_SUBS_RSK_LBL_CD        
  FROM  (
        SELECT    
                A.IMDG_UN_NO                        ,
                A.IMDG_UN_NO_SEQ                    ,
                A.PRP_SHP_NM                        ,
                A.IMDG_CLSS_CD                      ,
                A.IMDG_COMP_GRP_CD                  ,
                A.IMDG_SUBS_RSK_LBL_RMK             ,
                A.IMDG_MRN_POLUT_CD                 ,
				CASE WHEN A.IMDG_PCK_GRP_CD='1' THEN  'I' 
				     WHEN A.IMDG_PCK_GRP_CD='2' THEN  'II'
					 WHEN A.IMDG_PCK_GRP_CD='3' THEN  'III'  END IMDG_PCK_GRP_CD,
                A.IMDG_LMT_QTY                      ,
                A.IMDG_LMT_QTY_MEAS_UT_CD           ,
                A.IMDG_EXPT_QTY_CD                  ,
                A.IMDG_EMER_NO                      ,
                A.IMDG_STWG_CATE_CD                 ,
                A.FLSH_PNT_TEMP_CTNT                ,
                A.EMER_RSPN_GID_NO                  ,
                A.EMER_RSPN_GID_CHR_NO              ,
                A.PSA_NO                            ,
                A.N1ST_BOM_PORT_TRST_NO             ,
                A.N2ND_BOM_PORT_TRST_NO             ,
                A.N3RD_BOM_PORT_TRST_NO             ,
                A.N4TH_BOM_PORT_TRST_NO             ,
                A.PKG_AUTH_NO                       ,
                A.LK_PORT_AUTH_NO                   ,
                A.IMDG_SBST_PPT_DESC                ,
                A.CFR_RPT_QTY                       ,
                A.CFR_PSN_INH_ZN_CD                 ,
                A.CFR_TOXC_CD                       ,
                A.CFR_DG_WET_CD                     ,
                A.CFR_RSTR_PORT_NM                  ,
                A.CFR_RSTR_OPR_NM                   ,
                A.CFR_XTD_CLSS_CD                   ,
                A.HCDG_FLG                          ,
                A.HCDG_DPND_QTY_FLG                 ,
                A.HCDG_RMK                          ,
                A.N1ST_IMDG_PCK_INSTR_CD            ,
                A.N2ND_IMDG_PCK_INSTR_CD            ,
                A.N3RD_IMDG_PCK_INSTR_CD            ,
                A.N1ST_IMDG_PCK_PROVI_CD            ,
                A.N2ND_IMDG_PCK_PROVI_CD            ,
                A.N3RD_IMDG_PCK_PROVI_CD            ,
                A.N4TH_IMDG_PCK_PROVI_CD            ,
                A.N5TH_IMDG_PCK_PROVI_CD            ,
                A.N1ST_IMDG_IBC_INSTR_CD            ,
                A.N2ND_IMDG_IBC_INSTR_CD            ,
                A.N3RD_IMDG_IBC_INSTR_CD            ,
                A.N4TH_IMDG_IBC_INSTR_CD            ,
                A.N5TH_IMDG_IBC_INSTR_CD            ,
                A.N1ST_IMDG_IBC_PROVI_CD            ,
                A.N2ND_IMDG_IBC_PROVI_CD            ,
                A.N3RD_IMDG_IBC_PROVI_CD            ,
                A.N4TH_IMDG_IBC_PROVI_CD            ,
                A.N5TH_IMDG_IBC_PROVI_CD            ,
                A.N1ST_IMDG_UN_TNK_INSTR_CD         ,
                A.N2ND_IMDG_UN_TNK_INSTR_CD         ,
                A.N1ST_IMDG_TNK_INSTR_PROVI_CD      ,
                A.N2ND_IMDG_TNK_INSTR_PROVI_CD      ,
                A.N3RD_IMDG_TNK_INSTR_PROVI_CD      ,
                A.N4TH_IMDG_TNK_INSTR_PROVI_CD      ,
                A.N5TH_IMDG_TNK_INSTR_PROVI_CD      ,
                A.HCDG_PCK_RSTR_DESC                ,
                A.HCDG_INTMD_BC_RSTR_DESC           ,
                A.HCDG_TNK_RSTR_DESC                ,
                A.SEGR_DESC                         ,
                A.CLR_LIV_QTR_STWG_FLG              ,
                A.IMDG_FD_STUF_STWG_CD              ,
                A.IMDG_HT_SRC_STWG_CD               ,
                A.SEGR_AS_FOR_IMDG_CLSS_FLG         ,
                A.SEGR_AS_FOR_IMDG_CLSS_CD          ,
                A.AWAY_FM_IMDG_CLSS_FLG             ,
                A.SPRT_FM_IMDG_CLSS_FLG             ,
                A.AWAY_FM_IMDG_SEGR_GRP_FLG         ,
                A.SPRT_FM_IMDG_SEGR_GRP_FLG         ,
                A.IMDG_TBL_NO                       ,
                A.IMDG_UN_NO_HLD_FLG                ,
                A.IMDG_LMT_QTY_DESC                 ,
                A.IMDG_EXPT_QTY_DESC                ,
                A.CRE_USR_ID                        ,
                A.CRE_DT                            ,
                A.UPD_USR_ID                        ,
                A.UPD_DT     						,
	        (	SELECT  B.IMDG_TEC_NM  
				FROM 	SCG_IMDG_UN_NO_ORG_RACT B 
          		WHERE   A.IMDG_UN_NO_SEQ   = B.IMDG_UN_NO_SEQ
            	AND   	A.IMDG_UN_NO       = B.IMDG_UN_NO ) IMDG_TEC_NM,
				C.IMDG_CRR_RSTR_EXPT_CD				,
				C.IMDG_CRR_RSTR_EXPT_NM				,
        	(	SELECT  B.IMDG_CLSS_CD_DESC  
				FROM 	SCG_IMDG_CLSS_CD B 
          		WHERE   A.IMDG_CLSS_CD = B.IMDG_CLSS_CD ) IMDG_CLSS_CD_DESC,
		        ROW_NUMBER()OVER(PARTITION BY A.IMDG_UN_NO,A.IMDG_UN_NO_SEQ ORDER BY  IMDG_SUBS_RSK_LBL_CD) RN,
				B.IMDG_SUBS_RSK_LBL_CD				,
				ROW_NUMBER() OVER (ORDER BY A.IMDG_UN_NO, A.IMDG_UN_NO_SEQ )  no 
        FROM  SCG_IMDG_UN_NO A, SCG_IMDG_SUBS_RSK_LBL B,
		(	SELECT 	IMDG_UN_NO
				, 	IMDG_UN_NO_SEQ
				,	SUBSTR(XMLAGG(XMLELEMENT(X, ', ' || IMDG_CRR_RSTR_EXPT_CD) ORDER BY IMDG_CRR_RSTR_EXPT_CD).EXTRACT('//text()'), 2) AS IMDG_CRR_RSTR_EXPT_CD
				,	SUBSTR(XMLAGG(XMLELEMENT(X, ', ' || DECODE(IMDG_CRR_RSTR_EXPT_CD,	'P','Prohibited',
																						'R','Restricted',
																						'C','Excepted fm Class Prohibition',
																						'T','T/S Prohibited',
																						'L','Prohibited on '||SLAN_CD||' Lane') ) 
								  ORDER BY IMDG_CRR_RSTR_EXPT_CD).EXTRACT('//text()'), 2) AS IMDG_CRR_RSTR_EXPT_NM
			FROM SCG_IMDG_CRR_RSTR 
			WHERE VSL_OPR_TP_CD = 'SML'
			GROUP BY IMDG_UN_NO, IMDG_UN_NO_SEQ) C
        WHERE 	1 = 1
        AND   	A.IMDG_UN_NO     = B.IMDG_UN_NO(+)
        AND   	A.IMDG_UN_NO_SEQ = B.IMDG_UN_NO_SEQ(+)
		AND		A.IMDG_UN_NO 	 = C.IMDG_UN_NO(+)
		AND 	A.IMDG_UN_NO_SEQ = C.IMDG_UN_NO_SEQ(+)
        #if (${imdg_un_no} != '') 
           AND   A.IMDG_UN_NO       = @[imdg_un_no]
        #end
        #if (${imdg_un_no_seq} != '')
              AND   A.IMDG_UN_NO_SEQ   = @[imdg_un_no_seq]
        #end

       )S
 WHERE   1 = 1
#if (${startpart} != '')
      AND no BETWEEN @[startpart] AND @[endpart]
#end        
GROUP BY        S.IMDG_UN_NO                        ,
                S.IMDG_UN_NO_SEQ                    ,
                S.PRP_SHP_NM                        ,
                S.IMDG_CLSS_CD                      ,
                S.IMDG_COMP_GRP_CD                  ,
                S.IMDG_SUBS_RSK_LBL_RMK             ,
                S.IMDG_MRN_POLUT_CD                 ,
                S.IMDG_PCK_GRP_CD                   ,
                S.IMDG_LMT_QTY                      ,
                S.IMDG_LMT_QTY_MEAS_UT_CD           ,
                S.IMDG_EXPT_QTY_CD                  ,
                S.IMDG_EMER_NO                      ,
                S.IMDG_STWG_CATE_CD                 ,
                S.FLSH_PNT_TEMP_CTNT                ,
                S.EMER_RSPN_GID_NO                  ,
                S.EMER_RSPN_GID_CHR_NO              ,
                S.PSA_NO                            ,
                S.N1ST_BOM_PORT_TRST_NO             ,
                S.N2ND_BOM_PORT_TRST_NO             ,
                S.N3RD_BOM_PORT_TRST_NO             ,
                S.N4TH_BOM_PORT_TRST_NO             ,
                S.PKG_AUTH_NO                       ,
                S.LK_PORT_AUTH_NO                   ,
                S.IMDG_SBST_PPT_DESC                ,
                S.CFR_RPT_QTY                       ,
                S.CFR_PSN_INH_ZN_CD                 ,
                S.CFR_TOXC_CD                       ,
                S.CFR_DG_WET_CD                     ,
                S.CFR_RSTR_PORT_NM                  ,
                S.CFR_RSTR_OPR_NM                   ,
                S.CFR_XTD_CLSS_CD                   ,
                S.HCDG_FLG                          ,
                S.HCDG_DPND_QTY_FLG                 ,
                S.HCDG_RMK                          ,
                S.N1ST_IMDG_PCK_INSTR_CD            ,
                S.N2ND_IMDG_PCK_INSTR_CD            ,
                S.N3RD_IMDG_PCK_INSTR_CD            ,
                S.N1ST_IMDG_PCK_PROVI_CD            ,
                S.N2ND_IMDG_PCK_PROVI_CD            ,
                S.N3RD_IMDG_PCK_PROVI_CD            ,
                S.N4TH_IMDG_PCK_PROVI_CD            ,
                S.N5TH_IMDG_PCK_PROVI_CD            ,
                S.N1ST_IMDG_IBC_INSTR_CD            ,
                S.N2ND_IMDG_IBC_INSTR_CD            ,
                S.N3RD_IMDG_IBC_INSTR_CD            ,
                S.N4TH_IMDG_IBC_INSTR_CD            ,
                S.N5TH_IMDG_IBC_INSTR_CD            ,
                S.N1ST_IMDG_IBC_PROVI_CD            ,
                S.N2ND_IMDG_IBC_PROVI_CD            ,
                S.N3RD_IMDG_IBC_PROVI_CD            ,
                S.N4TH_IMDG_IBC_PROVI_CD            ,
                S.N5TH_IMDG_IBC_PROVI_CD            ,
                S.N1ST_IMDG_UN_TNK_INSTR_CD         ,
                S.N2ND_IMDG_UN_TNK_INSTR_CD         ,
                S.N1ST_IMDG_TNK_INSTR_PROVI_CD      ,
                S.N2ND_IMDG_TNK_INSTR_PROVI_CD      ,
                S.N3RD_IMDG_TNK_INSTR_PROVI_CD      ,
                S.N4TH_IMDG_TNK_INSTR_PROVI_CD      ,
                S.N5TH_IMDG_TNK_INSTR_PROVI_CD      ,
                S.HCDG_PCK_RSTR_DESC                ,
                S.HCDG_INTMD_BC_RSTR_DESC           ,
                S.HCDG_TNK_RSTR_DESC                ,
                S.SEGR_DESC                         ,
                S.CLR_LIV_QTR_STWG_FLG              ,
                S.IMDG_FD_STUF_STWG_CD              ,
                S.IMDG_HT_SRC_STWG_CD               ,
                S.SEGR_AS_FOR_IMDG_CLSS_FLG         ,
                S.SEGR_AS_FOR_IMDG_CLSS_CD          ,
                S.AWAY_FM_IMDG_CLSS_FLG             ,
                S.SPRT_FM_IMDG_CLSS_FLG             ,
                S.AWAY_FM_IMDG_SEGR_GRP_FLG         ,
                S.SPRT_FM_IMDG_SEGR_GRP_FLG         ,
                S.IMDG_TBL_NO                       ,
                S.IMDG_UN_NO_HLD_FLG                ,
                S.IMDG_LMT_QTY_DESC                 ,
                S.IMDG_EXPT_QTY_DESC                ,
                S.CRE_USR_ID                        ,
                S.CRE_DT                            ,
                S.UPD_USR_ID                        ,
                S.UPD_DT							,
				S.IMDG_TEC_NM						,
                S.IMDG_CRR_RSTR_EXPT_CD				,
				S.IMDG_CRR_RSTR_EXPT_NM				,
				S.IMDG_CLSS_CD_DESC     
         ORDER BY  S.IMDG_UN_NO,S.IMDG_UN_NO_SEQ			]]></sql>
			<params>
				<param name="imdg_un_no" type="12" value="" out="N"/>
				<param name="imdg_un_no_seq" type="12" value="" out="N"/>
				<param name="startpart" type="12" value="" out="N"/>
				<param name="endpart" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
