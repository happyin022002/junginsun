<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="StevedoreDamageMgtDBDAOCheckInsertClaimHandlingUserRSQL">
			<desc><![CDATA[생성할 Stevedore Damage Claim Handling User 정보를 조회 합니다.
-------------------------------------------------------------------------------------------
2011.10.21 김민아 [CHM-201113609-01] SDMS 신속 처리를 위한 Auto mailing 기능 추가
2011.11.21 김민아 [CHM-201114254-01] [VOP-OPF/SDMS] Repaur VVD 및 Port 설정 기능 변경
2011.12.20 김민아 [CHM-201215700-01] [VOP-OPF] SDMS내 메일 기능 추가 요청 : CLM_HNDL_USR_NM 추가]]></desc>
			<sql><![CDATA[
SELECT  A.STV_DMG_NO
       ,A.STV_DMG_PROC_CD
       ,A.CLM_HNDL_USR_ID
       ,A.CLM_HNDL_OFC_NM
       ,A.CLM_HNDL_USR_EML
       ,@[cre_usr_id] AS CRE_USR_ID
       ,@[upd_usr_id] AS UPD_USR_ID
       ,A.CLM_HNDL_USR_NM
  FROM  (
        #foreach( ${obj} in ${list_obj} )
            #if( $velocityCount != 1 )
        UNION ALL
            #end
        SELECT  DECODE('$obj.getStvDmgNo()', NULL, 'NULL', '$obj.getStvDmgNo()') AS STV_DMG_NO
               ,DECODE('$obj.getStvDmgProcCd()', NULL, 'NULL', '$obj.getStvDmgProcCd()') AS STV_DMG_PROC_CD
               ,DECODE('$obj.getClmHndlUsrId()', NULL, 'NULL', '$obj.getClmHndlUsrId()') AS CLM_HNDL_USR_ID
               ,DECODE('$obj.getClmHndlOfcNm()', NULL, 'NULL', '$obj.getClmHndlOfcNm()') AS CLM_HNDL_OFC_NM
               ,DECODE('$obj.getClmHndlUsrEml()', NULL, 'NULL', '$obj.getClmHndlUsrEml()') AS CLM_HNDL_USR_EML
               ,DECODE('$obj.getClmHndlUsrNm()', NULL, 'NULL', '$obj.getClmHndlUsrNm()') AS CLM_HNDL_USR_NM
          FROM  DUAL
        #end
        ) A,
        ((
        #foreach( ${obj} in ${list_obj} )
            #if( $velocityCount != 1 )
        UNION ALL
            #end				
        SELECT  DECODE('$obj.getStvDmgNo()', NULL, 'NULL', '$obj.getStvDmgNo()') AS STV_DMG_NO
               ,DECODE('$obj.getStvDmgProcCd()', NULL, 'NULL', '$obj.getStvDmgProcCd()') AS STV_DMG_PROC_CD
               ,DECODE('$obj.getClmHndlUsrId()', NULL, 'NULL', '$obj.getClmHndlUsrId()') AS CLM_HNDL_USR_ID  
          FROM  DUAL
        #end
        )
        MINUS
        SELECT  STV_DMG_NO
               ,STV_DMG_PROC_CD
               ,CLM_HNDL_USR_ID
          FROM  OPF_STV_DMG_EML_SND_HIS A
         WHERE  1 = 1
           AND  STV_DMG_NO = @[stv_dmg_no]
           AND  STV_DMG_PROC_CD = @[stv_dmg_proc_cd]) B
 WHERE  1 = 1
   AND  A.STV_DMG_NO = B.STV_DMG_NO
   AND  A.STV_DMG_PROC_CD = B.STV_DMG_PROC_CD
   AND  A.CLM_HNDL_USR_ID = B.CLM_HNDL_USR_ID			]]></sql>
			<params>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="stv_dmg_no" type="12" value="" out="N"/>
				<param name="stv_dmg_proc_cd" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
