<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OwnContainerBookingForecastMgtDBDAOCBFModifyWgtGroupSummaryUSQL">
			<desc><![CDATA[weight group의 수량 변경]]></desc>
			<sql><![CDATA[
MERGE INTO OPF_CGO_BKG_FCAST_WGT_GRP_SMRY A
      USING DUAL
      ON (      A.VSL_CD     = substr(@[vvd],1,4)
                                      AND A.SKD_VOY_NO = substr(@[vvd],5,4)
                                      AND A.SKD_DIR_CD = substr(@[vvd],9,1)
                                      AND A.YD_CD||POL_CLPT_IND_SEQ = @[yd_cd]
                                      AND A.CRR_CD       = @[crr_cd]
                                      AND A.POD_CD       = @[pod_cd]
                                      AND A.BLCK_STWG_CD = @[blck_stwg_cd]
                                      AND A.CNTR_WGT_GRP_CD = DECODE(@[seq],'1','X','2','H','3','M','4','L','5','E','6','E')
                                      #if (${col} == '1') 
                                      AND A.CNTR_SZ_CD    = '2'
                                      #end
                                      #if (${col} == '2') 
                                      AND A.CNTR_SZ_CD    = '4'
                                      #end
                                      #if (${col} == '3') 
                                      AND A.CNTR_SZ_CD    = '5'
                                      #end
                                      #if (${col} == '4') 
                                      AND A.CNTR_SZ_CD    = '6'
                                      #end
                                      AND A.FULL_MTY_CD     = DECODE(@[seq],'6','E','F')  )
      WHEN MATCHED THEN
          UPDATE  SET       
                                          #if (${col} == '1') 
                                          CNTR_QTY = @[f_20_qty]
                                          #end
                                          #if (${col} == '2') 
                                          CNTR_QTY = @[f_40_qty]
                                          #end
                                          #if (${col} == '3') 
                                          CNTR_QTY = @[f_40h_qty]
                                          #end
                                          #if (${col} == '4') 
                                          CNTR_QTY = @[f_45_qty]
                                          #end ,
                    UPD_USR_ID   =  @[cre_usr_id] ,
                    UPD_DT       = SYSDATE
      WHEN NOT MATCHED THEN
         INSERT ( VSL_CD ,          SKD_VOY_NO , SKD_DIR_CD ,       YD_CD,
                  POL_CLPT_IND_SEQ, CRR_CD,      POD_CD,            BLCK_STWG_CD,
                  CNTR_SZ_CD,       FULL_MTY_CD, CNTR_WGT_GRP_CD,   CNTR_QTY,
                  CRE_USR_ID,       CRE_DT,      UPD_USR_ID,        UPD_DT)
         VALUES (substr(@[vvd],1,4),substr(@[vvd],5,4),substr(@[vvd],9,1), SUBSTR(@[yd_cd],1,7),
                 SUBSTR(@[yd_cd],8,1),@[crr_cd], @[pod_cd],       @[blck_stwg_cd],
                 #if (${col} == '1') '2' #end
                 #if (${col} == '2') '4' #end
                 #if (${col} == '3') '5' #end
                 #if (${col} == '4') '6' #end , DECODE(@[seq],'6','E','F'),
                 DECODE(@[seq],'1','X','2','H','3','M','4','L','5','E','6','E'),
                 #if (${col} == '1')  @[f_20_qty]  #end
                 #if (${col} == '2')  @[f_40_qty]  #end
                 #if (${col} == '3')  @[f_40h_qty] #end
                 #if (${col} == '4')  @[f_45_qty]  #end ,
                 @[cre_usr_id],  SYSDATE, @[cre_usr_id], SYSDATE )			]]></sql>
			<params>
				<param name="vvd" type="12" value="" out="N"/>
				<param name="yd_cd" type="12" value="" out="N"/>
				<param name="crr_cd" type="12" value="" out="N"/>
				<param name="pod_cd" type="12" value="" out="N"/>
				<param name="blck_stwg_cd" type="12" value="" out="N"/>
				<param name="seq" type="12" value="" out="N"/>
				<param name="f_20_qty" type="12" value="" out="N"/>
				<param name="f_40_qty" type="12" value="" out="N"/>
				<param name="f_40h_qty" type="12" value="" out="N"/>
				<param name="f_45_qty" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
