<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SCGExternalFinderDBDAOSearchCheckUserRoleRSQL">
			<desc><![CDATA[SearchCheckUserRole]]></desc>
			<sql><![CDATA[
SELECT  CASE WHEN @[pgm_no] = 'VOP_SCG_0080' THEN
            CASE 
            WHEN USR_ROLE_CD LIKE '%SCG01%' THEN 'ALL'
            WHEN USR_ROLE_CD LIKE '%SCG02%' THEN 'ALL'
            WHEN USR_ROLE_CD LIKE '%SCG99%' THEN 'RET'
            END
        ELSE 
            'XXX'
        END AS        USR_ROLE_CD
FROM    (
        SELECT  XMLAGG(XMLELEMENT(x,T1.USR_ROLE_CD) ORDER BY T1.USR_ROLE_CD).EXTRACT('//text()').GETSTRINGVAL() AS USR_ROLE_CD
        FROM 	COM_USR_ROLE_MTCH T1
        	,	COM_PGM_ROLE      T2
        WHERE	T1.USR_ID      = @[usr_id]
        AND	    T1.USR_ROLE_CD = T2.USR_ROLE_CD
        AND     T2.PGM_NO      = @[pgm_no]
        )
WHERE   1=1			]]></sql>
			<params>
				<param name="pgm_no" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
