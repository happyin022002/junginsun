<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PortTariffMgtBCDBDAOSearchObjectsByFormulaRSQL">
			<desc><![CDATA[Formula에 속한 Object List 구하기]]></desc>
			<sql><![CDATA[
SELECT P.OBJ_LIST_NO
      ,Q.OBJ_LIST_NM 
FROM   (
        SELECT DISTINCT DECODE(Y.RNUM, 1, X.OBJ_LIST_NO, X.RT_OBJ_LIST_NO) OBJ_LIST_NO
        FROM   (
                SELECT BB.OBJ_LIST_NO
                      ,BB.RT_OBJ_LIST_NO 
                FROM   PSO_FORMULA   B
                      ,PSO_FOML_DTL  BB
                WHERE  1=1      
                AND    B.FOML_NO = BB.FOML_NO
                AND    BB.OBJ_LIST_NO IS NOT NULL
                AND    B.FOML_NO = ${foml_no}
               ) X
              ,(SELECT LEVEL RNUM
                FROM   DUAL
                CONNECT BY LEVEL <= 2
               ) Y
        WHERE  DECODE(Y.RNUM, 1, X.OBJ_LIST_NO, X.RT_OBJ_LIST_NO) IS NOT NULL  
       ) P
      ,PSO_OBJ_LIST Q
WHERE  P.OBJ_LIST_NO = Q.OBJ_LIST_NO 
ORDER BY P.OBJ_LIST_NO			]]></sql>
			<params>
			</params>
		</query>
	</querys>
</sqls>
