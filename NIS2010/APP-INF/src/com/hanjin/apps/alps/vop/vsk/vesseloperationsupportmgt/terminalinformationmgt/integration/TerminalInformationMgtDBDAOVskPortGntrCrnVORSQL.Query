<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="TerminalInformationMgtDBDAOVskPortGntrCrnVORSQL">
			<desc><![CDATA[   ]]></desc>
			<sql><![CDATA[
SELECT      A.YD_CD                                          																																																																														 																																								                  
		,	B.YD_NM                                          																																																																														 																																								                  
		,	A.GRS_MAX_WGT                                    																																																																														 																																								                  
		,	A.NET_MAX_WGT                                    																																																																														 																																								                  
		,	A.CLR_BTWN_LEG_WDT                               																																																																														 																																								                  
		,	A.CRN_RCH_ROW_KNT                                																																																																														 																																								                  
		,	A.CNTR_TR_KNT                                    																																																																														 																																								                  
		,	A.TTL_GNTR_CRN_QTY                               																																																																														 																																								                  
		,	A.VSL_GNTR_CRN_MAX_QTY                           																																																																														 																																								                  
		,	A.GNTR_RMK                                       																																																																														 																																								                  
		,	A.CRE_USR_ID                                     																																																																																												 																																								                  
		,	A.UPD_USR_ID                                     																																																																																												 																																								                  
		,	TO_CHAR(A.UPD_DT, 'YYYY-MM-DD HH24:MI') AS UPD_DT	
    	, 	H.SPCL_CGO_HNDL_RMK		
		,   (SELECT COUNT(F.ATCH_FILE_SEQ) FROM VSK_PORT_GNTR_HNDL_FILE F WHERE F.LOC_CD = @[loc_cd])	AS ATCH_FILE_KNT																																																																																									 																																								                  
FROM 		VSK_PORT_GNTR_CRN		A
		,	MDM_YARD 				B
		,	(                                                                   
				SELECT LOC_CD, 'HAMRU' POR_RHQ                                  
				FROM   MDM_LOCATION                                             
				WHERE  DECODE(CONTI_CD, 'F', 'E', CONTI_CD) = 'E'               
				AND    NVL(DELT_FLG, 'N') = 'N'                                 
				AND    CALL_PORT_FLG = 'Y'                                      
				AND    LOC_CD <> 'RUVVO'
				UNION ALL                                                       
				SELECT LOC_CD, 'PHXRA' POR_RHQ                                  
				FROM   MDM_LOCATION                                             
				WHERE  CONTI_CD  = 'M'                                          
				AND    NVL(DELT_FLG, 'N') = 'N'                                 
				AND    CALL_PORT_FLG = 'Y'                                      
				
				UNION ALL

        SELECT LOC_CD, DECODE(SCONTI_CD, 'AF', 'SHARC', 'SINRS') POR_RHQ
        FROM   MDM_LOCATION                                             
        WHERE  CONTI_CD  = 'A'                                          
        AND    NVL(DELT_FLG, 'N') = 'N' 
        AND    LOC_CD        NOT LIKE 'KR%' 
        AND    LOC_CD        NOT LIKE 'JP%'                                
        AND    CALL_PORT_FLG = 'Y'      
        
        UNION ALL                                                       
        SELECT LOC_CD, 'SELSC' POR_RHQ
        FROM   MDM_LOCATION                                             
        WHERE  CONTI_CD  = 'A'                                          
        AND    NVL(DELT_FLG, 'N') = 'N'  
        AND    LOC_CD        LIKE 'KR%'                                        
        AND    CALL_PORT_FLG = 'Y'   
        UNION ALL                                                       
        SELECT LOC_CD, 'TYOSC' POR_RHQ
        FROM   MDM_LOCATION                                             
        WHERE  CONTI_CD  = 'A'                                          
        AND    NVL(DELT_FLG, 'N') = 'N'   
        AND    LOC_CD        LIKE 'JP%'                                       
        AND    CALL_PORT_FLG = 'Y'   
		UNION ALL
		SELECT LOC_CD, 'VVOIA' POR_RHQ
		FROM   MDM_LOCATION
		WHERE  LOC_CD = 'RUVVO'
		AND    NVL(DELT_FLG, 'N') = 'N'
 		AND    CALL_PORT_FLG = 'Y'
			)						C 
    	,   VSK_PORT_GNTR_HNDL_INFO H                                                               
WHERE 		1 = 1
AND       	A.YD_CD 				= B.YD_CD                                                 
AND  		B.LOC_CD 				= C.LOC_CD
AND     	B.LOC_CD  				= H.LOC_CD  (+)
                                                
#if (${loc_cd} != '')                                                   
AND			B.LOC_CD 				= @[loc_cd]                                                
#end                                                                    
#if (${por_rhq} != '')                                                  
AND			C.POR_RHQ 				= @[por_rhq]                                              
#end        
                                                            
ORDER BY 	A.YD_CD			]]></sql>
			<params>
				<param name="loc_cd" type="12" value="" out="N"/>
				<param name="por_rhq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
