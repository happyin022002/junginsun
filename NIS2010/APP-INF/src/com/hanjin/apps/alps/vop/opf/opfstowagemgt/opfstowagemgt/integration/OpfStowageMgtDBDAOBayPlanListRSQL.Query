<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OpfStowageMgtDBDAOBayPlanListRSQL">
			<desc><![CDATA[OpfStowageMgtDBDAOBayPlanList]]></desc>
			<sql><![CDATA[
SELECT  --DECODE(TR_NM,'99','','00','',TR_NM) AS TR_NM
		#if (${dh_tp} == 'D')   -- On Deck
        	TR_NM AS ON_TR_NM_F
        	, TR_NM AS ON_TR_NM_B
        	, NVL(MAX(ROW_0),'') AS ON_ROW_0
        	, NVL(MAX(ROW_1),'') AS ON_ROW_1
        	, NVL(MAX(ROW_2),'') AS ON_ROW_2
        	, NVL(MAX(ROW_3),'') AS ON_ROW_3
        	, NVL(MAX(ROW_4),'') AS ON_ROW_4
        	, NVL(MAX(ROW_5),'') AS ON_ROW_5
        	, NVL(MAX(ROW_6),'') AS ON_ROW_6
        	, NVL(MAX(ROW_7),'') AS ON_ROW_7
        	, NVL(MAX(ROW_8),'') AS ON_ROW_8
        	, NVL(MAX(ROW_9),'') AS ON_ROW_9
        	, NVL(MAX(ROW_10),'') AS ON_ROW_10
        	, NVL(MAX(ROW_11),'') AS ON_ROW_11
        	, NVL(MAX(ROW_12),'') AS ON_ROW_12
        	, NVL(MAX(ROW_13),'') AS ON_ROW_13
        	, NVL(MAX(ROW_14),'') AS ON_ROW_14
        	, NVL(MAX(ROW_15),'') AS ON_ROW_15
        	, NVL(MAX(ROW_16),'') AS ON_ROW_16
        	, NVL(MAX(ROW_17),'') AS ON_ROW_17
        	, NVL(MAX(ROW_18),'') AS ON_ROW_18
		#else   -- Under Deck
        	TR_NM AS UNDER_TR_NM_F
        	, TR_NM AS UNDER_TR_NM_B
        	, NVL(MAX(ROW_0),'') AS UNDER_ROW_0
        	, NVL(MAX(ROW_1),'') AS UNDER_ROW_1
        	, NVL(MAX(ROW_2),'') AS UNDER_ROW_2
        	, NVL(MAX(ROW_3),'') AS UNDER_ROW_3
        	, NVL(MAX(ROW_4),'') AS UNDER_ROW_4
        	, NVL(MAX(ROW_5),'') AS UNDER_ROW_5
        	, NVL(MAX(ROW_6),'') AS UNDER_ROW_6
        	, NVL(MAX(ROW_7),'') AS UNDER_ROW_7
        	, NVL(MAX(ROW_8),'') AS UNDER_ROW_8
        	, NVL(MAX(ROW_9),'') AS UNDER_ROW_9
        	, NVL(MAX(ROW_10),'') AS UNDER_ROW_10
        	, NVL(MAX(ROW_11),'') AS UNDER_ROW_11
        	, NVL(MAX(ROW_12),'') AS UNDER_ROW_12
        	, NVL(MAX(ROW_13),'') AS UNDER_ROW_13
        	, NVL(MAX(ROW_14),'') AS UNDER_ROW_14
        	, NVL(MAX(ROW_15),'') AS UNDER_ROW_15
        	, NVL(MAX(ROW_16),'') AS UNDER_ROW_16
        	, NVL(MAX(ROW_17),'') AS UNDER_ROW_17
        	, NVL(MAX(ROW_18),'') AS UNDER_ROW_18
		#end
FROM    (SELECT  TR_NM
                , DECODE(ROW_IDX,'0',MAX(ID)) AS ROW_0
                , DECODE(ROW_IDX,'1',MAX(ID)) AS ROW_1
                , DECODE(ROW_IDX,'2',MAX(ID)) AS ROW_2
                , DECODE(ROW_IDX,'3',MAX(ID)) AS ROW_3
                , DECODE(ROW_IDX,'4',MAX(ID)) AS ROW_4
                , DECODE(ROW_IDX,'5',MAX(ID)) AS ROW_5
                , DECODE(ROW_IDX,'6',MAX(ID)) AS ROW_6
                , DECODE(ROW_IDX,'7',MAX(ID)) AS ROW_7
                , DECODE(ROW_IDX,'8',MAX(ID)) AS ROW_8
                , DECODE(ROW_IDX,'9',MAX(ID)) AS ROW_9
                , DECODE(ROW_IDX,'10',MAX(ID)) AS ROW_10
                , DECODE(ROW_IDX,'11',MAX(ID)) AS ROW_11
                , DECODE(ROW_IDX,'12',MAX(ID)) AS ROW_12
                , DECODE(ROW_IDX,'13',MAX(ID)) AS ROW_13
                , DECODE(ROW_IDX,'14',MAX(ID)) AS ROW_14
                , DECODE(ROW_IDX,'15',MAX(ID)) AS ROW_15
                , DECODE(ROW_IDX,'16',MAX(ID)) AS ROW_16
                , DECODE(ROW_IDX,'17',MAX(ID)) AS ROW_17
                , DECODE(ROW_IDX,'18',MAX(ID)) AS ROW_18
        FROM    (SELECT  MAIN.VSL, 
                        MAIN.BAY_IDX, MAIN.BAY_NM, 
                        MAIN.ROW_IDX, MAIN.ROW_NM, 
                        MAIN.TR_IDX, MAIN.TR_NM,
                        MAIN.VSL_CD,
                        MAIN.VOY_NO,
                        MAIN.DIR_CD,
                        --MAIN.ID,
                        DECODE(TRIM(MAIN.ID),'X'
                                         ,(CASE WHEN (SELECT COUNT(ID) AS CNT
                                                        FROM BAY_PLAN A
                                                        WHERE 1=1
                                                        AND VSL_CD = @[vsl_cd]
                                                        AND VOY_NO = @[skd_voy_no]
                                                        AND DIR_CD = @[skd_dir_cd]
                                                        AND PORT_CD = @[port_cd]
                                                        AND CALL_IND = @[call_ind]
                                                        AND BAY IN (SELECT BAY_NM
                                                                    FROM TPL_VSL_STWG_BAY
                                                                    WHERE 1=1
                                                                    AND VSL_CD = @[vsl_cd]
                                                                    AND HTCH_IDX = (SELECT HTCH_IDX
                                                                                    FROM TPL_VSL_STWG_BAY
                                                                                    WHERE 1=1
                                                                                    AND VSL_CD = @[vsl_cd]
                                                                                    AND BAY_NM = MAIN.BAY_NM
                                                                                    )
                                                                    AND BAY_NM != MAIN.BAY_NM
                                                                    )
                                                        AND ROWW = MAIN.ROW_NM
                                                        AND TIER = MAIN.TR_NM
                                                        ) > 0 THEN ID ELSE 
                                                                        CASE WHEN ((AKBB.OVH_BAY_NM=MAIN.BAY_NM) AND 
																					((AKBB.OVH_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM1=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM2=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM3=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM4=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM5=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM6=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM7=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM8=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM9=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM1=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM2=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM3=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM4=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM5=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM6=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM7=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM8=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM9=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM1=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM2=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM3=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM4=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM5=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM6=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM7=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM8=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM9=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM1=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM2=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM3=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM4=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM5=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM6=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM7=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM8=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM9=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM1=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM2=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM3=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM4=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM5=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM6=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM7=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM8=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM9=MAIN.TR_NM))
                                                                                  )
                                                                                THEN '▣'
                                                                              WHEN ((AKBB.OVH_BAY_NM!=MAIN.BAY_NM) AND 
																					((AKBB.OVH_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM1=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM2=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM3=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM4=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM5=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM6=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM7=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM8=MAIN.TR_NM)
																					OR (AKBB.OVH_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVH_SLOT_TR_NM9=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM1=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM2=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM3=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM4=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM5=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM6=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM7=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM8=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVP_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVP_SLOT_TR_NM9=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM1=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM2=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM3=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM4=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM5=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM6=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM7=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM8=MAIN.TR_NM)
                                                                                    OR (AKBB.OVH_SLOT_OVS_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVH_SLOT_OVS_SLOT_TR_NM9=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM1=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM2=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM3=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM4=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM5=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM6=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM7=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM8=MAIN.TR_NM)
                                                                                    OR (AKBB.OVP_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVP_SLOT_TR_NM9=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM1=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM1=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM2=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM2=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM3=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM3=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM4=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM4=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM5=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM5=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM6=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM6=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM7=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM7=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM8=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM8=MAIN.TR_NM)
                                                                                    OR (AKBB.OVS_SLOT_ROW_NM9=MAIN.ROW_NM AND AKBB.OVS_SLOT_TR_NM9=MAIN.TR_NM))
                                                                                  )
                                                                                THEN 'X'
                                                                             ELSE '.'
                                                                         END
                                                                      END)
                                         ,MAIN.ID) AS ID,
                        MAIN.CALL_IND,
                        MAIN.PORT_CNT,
                        MAIN.MAX_ROW_IDX,
                        MAIN.MAX_TR_IDX
                FROM    (SELECT  CELL.VSL, 
                                CELL.BAY_IDX, CELL.BAY_NM, 
                                CELL.ROW_IDX, CELL.ROW_NM, 
                                CELL.TR_IDX, CELL.TR_NM,
                                PLAN.VSL_CD,
                                PLAN.VOY_NO,
                                PLAN.DIR_CD,
                                --NVL(PLAN.ID,'X') AS ID,
                                --DECODE(PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.ID,'____','X',PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.ID) AS ID,
                                --DECODE(PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.SZTP||'_'||DECODE(PLAN.ID,[cntr_id],PLAN.ID||'_CNTR',PLAN.ID),'_____','X','______CNTR','X',PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.SZTP||'_'||DECODE(PLAN.ID,[cntr_id],PLAN.ID||'_CNTR',PLAN.ID)) AS ID,
                                --DECODE(PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.SZTP||'_'||DECODE(PLAN.ID,[cntr_id],PLAN.ID||'_0_0_255_CNTR',PLAN.ID||'_'||COLOR.BG_COLR_R||'_'||COLOR.BG_COLR_G||'_'||COLOR.BG_COLR_B),'________','X','______0_0_255_CNTR','X',PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.SZTP||'_'||DECODE(PLAN.ID,[cntr_id],PLAN.ID||'_0_0_255_CNTR',PLAN.ID||'_'||COLOR.BG_COLR_R||'_'||COLOR.BG_COLR_G||'_'||COLOR.BG_COLR_B)) AS ID,
								--DECODE(PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.SZTP||'_'||DECODE(PLAN.ID,[cntr_id],PLAN.ID||'_53_53_53_'||PLAN.CARGO_TYPE||'_CNTR',PLAN.ID||'_'||COLOR.BG_COLR_R||'_'||COLOR.BG_COLR_G||'_'||COLOR.BG_COLR_B||'_'||PLAN.CARGO_TYPE),'_________','X','______53_53_53_'||PLAN.CARGO_TYPE||'_CNTR','X',PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.SZTP||'_'||DECODE(PLAN.ID,[cntr_id],PLAN.ID||'_53_53_53_'||PLAN.CARGO_TYPE||'_CNTR',PLAN.ID||'_'||COLOR.BG_COLR_R||'_'||COLOR.BG_COLR_G||'_'||COLOR.BG_COLR_B||'_'||PLAN.CARGO_TYPE)) AS ID,
								--DECODE(PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.SZTP||'_'||DECODE(PLAN.ID,[cntr_id],PLAN.ID||'_53_53_53_'||PLAN.CARGO_TYPE||'_'||CELL.BAY_NM||'-'||CELL.ROW_NM||'-'||CELL.TR_NM||'_CNTR',PLAN.ID||'_'||COLOR.BG_COLR_R||'_'||COLOR.BG_COLR_G||'_'||COLOR.BG_COLR_B||'_'||PLAN.CARGO_TYPE)||'_'||CELL.BAY_NM||'-'||CELL.ROW_NM||'-'||CELL.TR_NM,'__________'||CELL.BAY_NM||'-'||CELL.ROW_NM||'-'||CELL.TR_NM,'X','______53_53_53_'||PLAN.CARGO_TYPE||'_'||CELL.BAY_NM||'-'||CELL.ROW_NM||'-'||CELL.TR_NM||'_CNTR','X',PLAN.POL||'_'||PLAN.POD||'_'||PLAN.OPR_CD||'_'||PLAN.WEIGHT||'_'||PLAN.SZTP||'_'||DECODE(PLAN.ID,[cntr_id],PLAN.ID||'_53_53_53_'||PLAN.CARGO_TYPE||'_'||CELL.BAY_NM||'-'||CELL.ROW_NM||'-'||CELL.TR_NM||'_CNTR',PLAN.ID||'_'||COLOR.BG_COLR_R||'_'||COLOR.BG_COLR_G||'_'||COLOR.BG_COLR_B||'_'||PLAN.CARGO_TYPE||'_'||CELL.BAY_NM||'-'||CELL.ROW_NM||'-'||CELL.TR_NM)) AS ID,
                                ' '||DECODE(CARGO_TYPE,'N','  ','EM','  ',CARGO_TYPE)||'      '||DECODE(DECODE(PLAN.ID,@[cntr_id],'_'||PLAN.ID||'_53_53_53_CNTR'
                                                                                                                       ,'_'||PLAN.ID||'_'||COLOR.BG_COLR_R||'_'||COLOR.BG_COLR_G||'_'||COLOR.BG_COLR_B)
                                                                                                ,'____','X'
                                                                                                ,'__53_53_53__CNTR','X'
                                                                                                ,DECODE(PLAN.ID,@[cntr_id],'_'||PLAN.ID||'_53_53_53_CNTR'
                                                                                                                          ,'_'||PLAN.ID||'_'||COLOR.BG_COLR_R||'_'||COLOR.BG_COLR_G||'_'||COLOR.BG_COLR_B)
                                                                                        ) AS ID,
                                

                                PLAN.CALL_IND,
                                COUNT(PLAN.PORT_CD) AS PORT_CNT,
                                MAX(ROW_IDX) AS MAX_ROW_IDX,
                                MAX(TR_IDX) AS MAX_TR_IDX
                        FROM CDV_VESSEL VESSEL --2
                            , TPL_VSL_STWG_BAY BAY --3
                            , TPL_VSL_STWG_CELL CELL --4
                            --, BAY_PLAN PLAN --5
                            , (SELECT *
                                FROM BAY_PLAN 
                                WHERE 1=1
                                AND (VSL_CD, VOY_NO, DIR_CD, PORT_CD, ID, CALL_IND, PLAN_TYPE) IN (SELECT VSL_CD, VOY_NO, DIR_CD, PORT_CD, ID, CALL_IND
                                                                                                           , CASE WHEN COUNT(PLAN_TYPE) > 1 THEN 'E' ELSE 'F' END AS PLAN_TYPE
                                                                                                    FROM BAY_PLAN A
                                                                                                    WHERE 1=1
                                                                                                    AND VSL_CD = @[vsl_cd]
                                                                                                    AND VOY_NO = @[skd_voy_no]
                                                                                                    AND DIR_CD = @[skd_dir_cd]
                                                                                                    AND PORT_CD = @[port_cd]
                                                                                                    AND CALL_IND = @[call_ind]
                                                                                                    GROUP BY VSL_CD, VOY_NO, DIR_CD, PORT_CD, ID, CALL_IND
                                                                                                    )
                            ) PLAN
                        , (SELECT FAVORITE_CD AS PORT_CD,
                                  REGEXP_SUBSTR(SUBSTR(FRGRND_COLR_CTNT, 2, LENGTH(FRGRND_COLR_CTNT)-2), '[^,]+', 1, 1) FR_COLR_R,
                                  REGEXP_SUBSTR(SUBSTR(FRGRND_COLR_CTNT, 2, LENGTH(FRGRND_COLR_CTNT)-2), '[^,]+', 1, 2) FR_COLR_G,
                                  REGEXP_SUBSTR(SUBSTR(FRGRND_COLR_CTNT, 2, LENGTH(FRGRND_COLR_CTNT)-2), '[^,]+', 1, 3) FR_COLR_B,
                                  REGEXP_SUBSTR(SUBSTR(BG_COLR_CTNT, 2, LENGTH(BG_COLR_CTNT)-2), '[^,]+', 1, 1) BG_COLR_R,
                                  REGEXP_SUBSTR(SUBSTR(BG_COLR_CTNT, 2, LENGTH(BG_COLR_CTNT)-2), '[^,]+', 1, 2) BG_COLR_G,
                                  REGEXP_SUBSTR(SUBSTR(BG_COLR_CTNT, 2, LENGTH(BG_COLR_CTNT)-2), '[^,]+', 1, 3) BG_COLR_B
                                FROM STO_CD_LANE_FVRT
                                WHERE LANE_CD = 'NE3' --LANE CODE
                                  AND CATE_CD = 'PORT'
                                UNION ALL
                                SELECT PORT_CD,
                                  REGEXP_SUBSTR(SUBSTR(PORT_FRGRND_COLR_CTNT, 2, LENGTH(PORT_FRGRND_COLR_CTNT)-2), '[^,]+', 1, 1) FR_COLR_R,
                                  REGEXP_SUBSTR(SUBSTR(PORT_FRGRND_COLR_CTNT, 2, LENGTH(PORT_FRGRND_COLR_CTNT)-2), '[^,]+', 1, 2) FR_COLR_G,
                                  REGEXP_SUBSTR(SUBSTR(PORT_FRGRND_COLR_CTNT, 2, LENGTH(PORT_FRGRND_COLR_CTNT)-2), '[^,]+', 1, 3) FR_COLR_B,
                                  REGEXP_SUBSTR(SUBSTR(PORT_BG_COLR_CTNT, 2, LENGTH(PORT_BG_COLR_CTNT)-2), '[^,]+', 1, 1) BG_COLR_R,
                                  REGEXP_SUBSTR(SUBSTR(PORT_BG_COLR_CTNT, 2, LENGTH(PORT_BG_COLR_CTNT)-2), '[^,]+', 1, 2) BG_COLR_G,
                                  REGEXP_SUBSTR(SUBSTR(PORT_BG_COLR_CTNT, 2, LENGTH(PORT_BG_COLR_CTNT)-2), '[^,]+', 1, 3) BG_COLR_B
                                FROM STO_CD_PORT
                                WHERE NOT EXISTS (
                                    SELECT *
                                    FROM STO_CD_LANE_FVRT
                                    WHERE LANE_CD = 'NE3' --LANE CODE
                                      AND CATE_CD = 'PORT'
                                      AND PORT_CD = FAVORITE_CD)
                        ) COLOR                            
                        WHERE 1=1
                        AND VESSEL.CDV_VSL_CODE = @[vsl_cd]
                        AND VESSEL.CDV_VSL_CODE = BAY.VSL_CD
                        AND BAY.VSL_CD = CELL.VSL
                        AND BAY.BAY_IDX = CELL.BAY_IDX
                        --AND BAY.BAY_IDX = [bay_idx]
                        AND BAY.BAY_NM = @[bay_idx]
                        AND CELL.DH_TP = @[dh_tp]
                        --                AND CELL.DH_TP = 'D'
                        AND CELL.TR_IDX != -1
                        /*AND CELL.VSL = PLAN.VSL_CD(+)*/
                        AND CELL.BAY_NM = PLAN.BAY(+)
                        AND CELL.ROW_NM = PLAN.ROWW(+)
                        AND CELL.TR_NM = PLAN.TIER(+)
                        AND PLAN.POD = COLOR.PORT_CD(+)
                        --AND PLAN.VSL_CD = ''
                        /*AND PLAN.VOY_NO(+) = [skd_voy_no]*/
                        /*AND PLAN.DIR_CD(+) = [skd_dir_cd]*/
                        GROUP BY CELL.VSL, 
                                CELL.BAY_IDX, CELL.BAY_NM, 
                                CELL.ROW_IDX, CELL.ROW_NM, 
                                CELL.TR_IDX, CELL.TR_NM,
                                PLAN.VSL_CD,
                                PLAN.VOY_NO,
                                PLAN.DIR_CD,
                                PLAN.ID,
                                PLAN.CALL_IND,
                                PLAN.POL,
                                PLAN.POD,
                                PLAN.OPR_CD,
                                PLAN.WEIGHT,
                                PLAN.SZTP,
								PLAN.CARGO_TYPE,
        						COLOR.BG_COLR_R,
        						COLOR.BG_COLR_G,
        						COLOR.BG_COLR_B
                        ORDER BY TR_IDX, ROW_IDX
                        ) MAIN
                        ,(SELECT  /***********************************************[1-S]*/
                                CELL.BAY_NM AS OVH_BAY_NM,
                                -- 1-1.[세로:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 0
                                                THEN CELL.ROW_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_ROW_NM1,
                                -- 1-1.[세로:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 0
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-1
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_TR_NM1,
                                -- 1-2.[세로:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 1
                                                THEN CELL.ROW_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_ROW_NM2,
                                -- 1-2.[세로:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 1
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-2
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_TR_NM2,
                                -- 1-3.[세로:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 2
                                                THEN CELL.ROW_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_ROW_NM3,
                                -- 1-3.[세로:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 2
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-3
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_TR_NM3,
                                -- 1-4.[세로:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 3
                                                THEN CELL.ROW_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_ROW_NM4,
                                -- 1-4.[세로:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 3
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-4
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_TR_NM4,
                                -- 1-5.[세로:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 4
                                                THEN CELL.ROW_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_ROW_NM5,
                                -- 1-5.[세로:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 4
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-5
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_TR_NM5,
                                -- 1-6.[세로:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 5
                                                THEN CELL.ROW_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_ROW_NM6,
                                -- 1-6.[세로:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 5
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-6
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_TR_NM6,
                                -- 1-7.[세로:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 6
                                                THEN CELL.ROW_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_ROW_NM7,
                                -- 1-7.[세로:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 6
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-7
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_TR_NM7,
                                -- 1-8.[세로:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 7
                                                THEN CELL.ROW_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_ROW_NM8,
                                -- 1-8.[세로:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 7
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-8
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_TR_NM8,
                                -- 1-9.[세로:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 8
                                                THEN CELL.ROW_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_ROW_NM9,
                                -- 1-9.[세로:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 8
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-9
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_TR_NM9,
                                /***********************************************[1-E]*/
                                /***********************************************[2-S]*/
                                -- 2-1.[세로:ROW:왼쪽] : 1~9까지 같음
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVP_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_ROW_NM1,
                                -- 2-1.[세로:TIER:왼쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 0
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-1
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_TR_NM1,
                                -- 2-2.[세로:ROW:왼쪽] : 1~9까지 같음 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVP_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_ROW_NM2,
                                -- 2-2.[세로:TIER:왼쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 1
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-2
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_TR_NM2,
                                -- 2-3.[세로:ROW:왼쪽] : 1~9까지 같음 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVP_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_ROW_NM3,
                                -- 2-3.[세로:TIER:왼쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 2
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-3
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_TR_NM3,
                                -- 2-4.[세로:ROW:왼쪽]  : 1~9까지 같음
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVP_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_ROW_NM4,
                                -- 2-4.[세로:TIER:왼쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 3
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-4
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_TR_NM4,
                                -- 2-5.[세로:ROW:왼쪽] : 1~9까지 같음 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVP_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_ROW_NM5,
                                -- 2-5.[세로:TIER:왼쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 4
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-5
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_TR_NM5,
                                -- 2-6.[세로:ROW:왼쪽] : 1~9까지 같음 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVP_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_ROW_NM6,
                                -- 2-6.[세로:TIER:왼쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 5
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-6
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_TR_NM6,
                                -- 2-7.[세로:ROW:왼쪽] : 1~9까지 같음 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVP_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_ROW_NM7,
                                -- 2-7.[세로:TIER:왼쪽]
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 6
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-7
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_TR_NM7,
                                -- 2-8.[세로:ROW:왼쪽] : 1~9까지 같음  
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVP_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_ROW_NM8,
                                -- 2-8.[세로:TIER:왼쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 7
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-8
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_TR_NM8,
                                -- 2-9.[세로:ROW:왼쪽] : 1~9까지 같음  
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVP_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_ROW_NM9,
                                -- 2-9.[세로:TIER:왼쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 8
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-9
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVP_SLOT_TR_NM9,
                                /***********************************************[2-E]*/
                                /***********************************************[3-S]*/
                                -- 3-1.[세로:ROW:오른쪽] : 1~9까지 같음   
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVS_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_ROW_NM1,
                                -- 3-1.[세로:TIER:오른쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 0
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-1
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_TR_NM1,
                                -- 3-2.[세로:ROW:오른쪽] : 1~9까지 같음   
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVS_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_ROW_NM2,
                                -- 3-2.[세로:TIER:오른쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 1
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-2
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_TR_NM2,
                                -- 3-3.[세로:ROW:오른쪽] : 1~9까지 같음   
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVS_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_ROW_NM3,
                                -- 3-3.[세로:TIER:오른쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 2
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-3
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_TR_NM3,
                                -- 3-4.[세로:ROW:오른쪽] : 1~9까지 같음   
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVS_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_ROW_NM4,
                                -- 3-4.[세로:TIER:오른쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 3
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-4
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_TR_NM4,
                                -- 3-5.[세로:ROW:오른쪽] : 1~9까지 같음   
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVS_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_ROW_NM5,
                                -- 3-5.[세로:TIER:오른쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 4
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-5
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_TR_NM5,
                                -- 3-6.[세로:ROW:오른쪽] : 1~9까지 같음   
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVS_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_ROW_NM6,
                                -- 3-6.[세로:TIER:오른쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 5
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-6
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_TR_NM6,
                                -- 3-7.[세로:ROW:오른쪽] : 1~9까지 같음   
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVS_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_ROW_NM7,
                                -- 3-7.[세로:TIER:오른쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 6
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-7
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_TR_NM7,
                                -- 3-8.[세로:ROW:오른쪽] : 1~9까지 같음   
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVS_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_ROW_NM8,
                                -- 3-8.[세로:TIER:오른쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 7
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-8
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_TR_NM8,
                                -- 3-9.[세로:ROW:오른쪽] : 1~9까지 같음   
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN (MAX(OVH_SLOT) > 0 AND MAX(OVS_SLOT) > 0)
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_ROW_NM9,
                                -- 3-9.[세로:TIER:오른쪽] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVH_SLOT) > 8
                                                THEN (SELECT TR_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX
                                                        AND TR_IDX = CELL.TR_IDX-9
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVH_SLOT_OVS_SLOT_TR_NM9,
                                /***********************************************[3-E]*/
                                /***********************************************[4-S]*/
                                -- 4-1.[가로:왼쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_ROW_NM1,
                                -- 4-1.[가로:왼쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_TR_NM1,
                                -- 4-2.[가로:왼쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 1
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-2
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_ROW_NM2,
                                -- 4-2.[가로:왼쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_TR_NM2,
                                -- 4-3.[가로:왼쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 2
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-3
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_ROW_NM3,
                                -- 4-3.[가로:왼쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_TR_NM3,
                                -- 4-4.[가로:왼쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 3
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-4
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_ROW_NM4,
                                -- 4-4.[가로:왼쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_TR_NM4,
                                -- 4-5.[가로:왼쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 4
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-5
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_ROW_NM5,
                                -- 4-5.[가로:왼쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_TR_NM5,
                                -- 4-6.[가로:왼쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 5
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-6
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_ROW_NM6,
                                -- 4-6.[가로:왼쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_TR_NM6,
                                -- 4-7.[가로:왼쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 6
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-7
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_ROW_NM7,
                                -- 4-7.[가로:왼쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_TR_NM7,
                                -- 4-8.[가로:왼쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 7
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-8
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_ROW_NM8,
                                -- 4-8.[가로:왼쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_TR_NM8,
                                -- 4-9.[가로:왼쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 8
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX-9
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_ROW_NM9,
                                -- 4-9.[가로:왼쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVP_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVP_SLOT_TR_NM9,
                                /***********************************************[4-E]*/
                                /***********************************************[5-S]*/
                                -- 5-1.[가로:오른쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+1
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_ROW_NM1,
                                -- 5-1.[가로:오른쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_TR_NM1,
                                -- 5-2.[가로:오른쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 1
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+2
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_ROW_NM2,
                                -- 5-2.[가로:오른쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_TR_NM2,
                                -- 5-3.[가로:오른쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 2
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+3
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_ROW_NM3,
                                -- 5-3.[가로:오른쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_TR_NM3,
                                -- 5-4.[가로:오른쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 3
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+4
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_ROW_NM4,
                                -- 5-4.[가로:오른쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_TR_NM4,
                                -- 5-5.[가로:오른쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 4
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+5
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_ROW_NM5,
                                -- 5-5.[가로:오른쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_TR_NM5,
                                -- 5-6.[가로:오른쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 5
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+6
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_ROW_NM6,
                                -- 5-6.[가로:오른쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_TR_NM6,
                                -- 5-7.[가로:오른쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 6
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+7
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_ROW_NM7,
                                -- 5-7.[가로:오른쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_TR_NM7,
                                -- 5-8.[가로:오른쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 7
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+8
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_ROW_NM8,
                                -- 5-8.[가로:오른쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_TR_NM8,
                                -- 5-9.[가로:오른쪽:ROW] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 8
                                                THEN (SELECT ROW_NM
                                                        FROM TPL_VSL_STWG_CELL
                                                        WHERE 1=1
                                                        AND VSL= CELL.VSL
                                                        AND BAY_IDX = CELL.BAY_IDX
                                                        AND ROW_IDX = CELL.ROW_IDX+9
                                                        AND TR_IDX = CELL.TR_IDX
                                                    )
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_ROW_NM9,
                                -- 5-9.[가로:오른쪽:TIER] 
                                CASE WHEN (MAX(PLAN.CARGO_TYPE)='AK' OR MAX(PLAN.CARGO_TYPE)='BB') 
                                        THEN
                                            CASE WHEN MAX(OVS_SLOT) > 0
                                                THEN CELL.TR_NM
                                            ELSE '0' END                        
                                    ELSE '0'
                                END AS OVS_SLOT_TR_NM9
                                /***********************************************[5-E]*/
                        FROM CDV_VESSEL VESSEL --2
                            , TPL_VSL_STWG_BAY BAY --3
                            , TPL_VSL_STWG_CELL CELL --4
                            , (SELECT *
                                FROM BAY_PLAN 
                                WHERE 1=1
                                AND (VSL_CD, VOY_NO, DIR_CD, PORT_CD, ID, CALL_IND, PLAN_TYPE) IN (SELECT VSL_CD, VOY_NO, DIR_CD, PORT_CD, ID, CALL_IND
                                                                                                           , CASE WHEN COUNT(PLAN_TYPE) > 1 THEN 'E' ELSE 'F' END AS PLAN_TYPE
                                                                                                    FROM BAY_PLAN A
                                                                                                    WHERE 1=1
                                                                                                    AND VSL_CD = @[vsl_cd]
                                                                                                    AND VOY_NO = @[skd_voy_no]
                                                                                                    AND DIR_CD = @[skd_dir_cd]
                                                                                                    AND PORT_CD = @[port_cd]
                                                                                                    AND CALL_IND = @[call_ind]
                                                                                                    GROUP BY VSL_CD, VOY_NO, DIR_CD, PORT_CD, ID, CALL_IND
                                                                                                    )
                            ) PLAN
                        WHERE 1=1
                        AND VESSEL.CDV_VSL_CODE = @[vsl_cd]
                        AND VESSEL.CDV_VSL_CODE = BAY.VSL_CD
                        AND BAY.VSL_CD = CELL.VSL
                        AND BAY.BAY_IDX = CELL.BAY_IDX
                        --AND BAY.BAY_NM = [bay_idx]
                        AND BAY.BAY_NM IN (SELECT BAY_NM
                                            FROM TPL_VSL_STWG_BAY
                                            WHERE 1=1
                                            AND (VSL_CD, HTCH_IDX) IN (SELECT VSL_CD, HTCH_IDX
                                                                        FROM TPL_VSL_STWG_BAY
                                                                        WHERE 1=1
                                                                        AND VSL_CD = @[vsl_cd]
                                                                        and BAY_NM = @[bay_idx]
                                                                        )
                                            )

                        AND CELL.DH_TP = @[dh_tp]
                        AND CELL.TR_IDX != -1
                        AND CELL.BAY_NM = PLAN.BAY(+)
                        AND CELL.ROW_NM = PLAN.ROWW(+)
                        AND CELL.TR_NM = PLAN.TIER(+)
                        AND PLAN.CARGO_TYPE IN ('AK','BB')
                        GROUP BY CELL.VSL, 
                                CELL.BAY_IDX, CELL.BAY_NM, 
                                CELL.ROW_IDX, CELL.ROW_NM, 
                                CELL.TR_IDX, CELL.TR_NM,
                                PLAN.VSL_CD,
                                PLAN.VOY_NO,
                                PLAN.DIR_CD,
                                PLAN.ID,
                                PLAN.CALL_IND,
                                PLAN.POL,
                                PLAN.POD,
                                PLAN.OPR_CD,
                                PLAN.WEIGHT,
                                PLAN.SZTP
                        --ORDER BY TR_IDX, ROW_IDX
                        UNION ALL
                        SELECT '0' AS OVH_BAY_NM
                                , '0' AS OVH_SLOT_ROW_NM1
                                , '0' AS OVH_SLOT_TR_NM1
                                , '0' AS OVH_SLOT_ROW_NM2
                                , '0' AS OVH_SLOT_TR_NM2
                                , '0' AS OVH_SLOT_ROW_NM3
                                , '0' AS OVH_SLOT_TR_NM3
                                , '0' AS OVH_SLOT_ROW_NM4
                                , '0' AS OVH_SLOT_TR_NM4
                                , '0' AS OVH_SLOT_ROW_NM5
                                , '0' AS OVH_SLOT_TR_NM5
                                , '0' AS OVH_SLOT_ROW_NM6
                                , '0' AS OVH_SLOT_TR_NM6
                                , '0' AS OVH_SLOT_ROW_NM7
                                , '0' AS OVH_SLOT_TR_NM7
                                , '0' AS OVH_SLOT_ROW_NM8
                                , '0' AS OVH_SLOT_TR_NM8
                                , '0' AS OVH_SLOT_ROW_NM9
                                , '0' AS OVH_SLOT_TR_NM9
                                , '0' AS OVH_SLOT_OVP_SLOT_ROW_NM1
                                , '0' AS OVH_SLOT_OVP_SLOT_TR_NM1
                                , '0' AS OVH_SLOT_OVP_SLOT_ROW_NM2
                                , '0' AS OVH_SLOT_OVP_SLOT_TR_NM2
                                , '0' AS OVH_SLOT_OVP_SLOT_ROW_NM3
                                , '0' AS OVH_SLOT_OVP_SLOT_TR_NM3
                                , '0' AS OVH_SLOT_OVP_SLOT_ROW_NM4
                                , '0' AS OVH_SLOT_OVP_SLOT_TR_NM4
                                , '0' AS OVH_SLOT_OVP_SLOT_ROW_NM5
                                , '0' AS OVH_SLOT_OVP_SLOT_TR_NM5
                                , '0' AS OVH_SLOT_OVP_SLOT_ROW_NM6
                                , '0' AS OVH_SLOT_OVP_SLOT_TR_NM6
                                , '0' AS OVH_SLOT_OVP_SLOT_ROW_NM7
                                , '0' AS OVH_SLOT_OVP_SLOT_TR_NM7
                                , '0' AS OVH_SLOT_OVP_SLOT_ROW_NM8
                                , '0' AS OVH_SLOT_OVP_SLOT_TR_NM8
                                , '0' AS OVH_SLOT_OVP_SLOT_ROW_NM9
                                , '0' AS OVH_SLOT_OVP_SLOT_TR_NM9
                                , '0' AS OVH_SLOT_OVS_SLOT_ROW_NM1
                                , '0' AS OVH_SLOT_OVS_SLOT_TR_NM1
                                , '0' AS OVH_SLOT_OVS_SLOT_ROW_NM2
                                , '0' AS OVH_SLOT_OVS_SLOT_TR_NM2
                                , '0' AS OVH_SLOT_OVS_SLOT_ROW_NM3
                                , '0' AS OVH_SLOT_OVS_SLOT_TR_NM3
                                , '0' AS OVH_SLOT_OVS_SLOT_ROW_NM4
                                , '0' AS OVH_SLOT_OVS_SLOT_TR_NM4
                                , '0' AS OVH_SLOT_OVS_SLOT_ROW_NM5
                                , '0' AS OVH_SLOT_OVS_SLOT_TR_NM5
                                , '0' AS OVH_SLOT_OVS_SLOT_ROW_NM6
                                , '0' AS OVH_SLOT_OVS_SLOT_TR_NM6
                                , '0' AS OVH_SLOT_OVS_SLOT_ROW_NM7
                                , '0' AS OVH_SLOT_OVS_SLOT_TR_NM7
                                , '0' AS OVH_SLOT_OVS_SLOT_ROW_NM8
                                , '0' AS OVH_SLOT_OVS_SLOT_TR_NM8
                                , '0' AS OVH_SLOT_OVS_SLOT_ROW_NM9
                                , '0' AS OVH_SLOT_OVS_SLOT_TR_NM9
                                , '0' AS OVP_SLOT_ROW_NM1
                                , '0' AS OVP_SLOT_TR_NM1
                                , '0' AS OVP_SLOT_ROW_NM2
                                , '0' AS OVP_SLOT_TR_NM2
                                , '0' AS OVP_SLOT_ROW_NM3
                                , '0' AS OVP_SLOT_TR_NM3
                                , '0' AS OVP_SLOT_ROW_NM4
                                , '0' AS OVP_SLOT_TR_NM4
                                , '0' AS OVP_SLOT_ROW_NM5
                                , '0' AS OVP_SLOT_TR_NM5
                                , '0' AS OVP_SLOT_ROW_NM6
                                , '0' AS OVP_SLOT_TR_NM6
                                , '0' AS OVP_SLOT_ROW_NM7
                                , '0' AS OVP_SLOT_TR_NM7
                                , '0' AS OVP_SLOT_ROW_NM8
                                , '0' AS OVP_SLOT_TR_NM8
                                , '0' AS OVP_SLOT_ROW_NM9
                                , '0' AS OVP_SLOT_TR_NM9
                                , '0' AS OVS_SLOT_ROW_NM1
                                , '0' AS OVS_SLOT_TR_NM1
                                , '0' AS OVS_SLOT_ROW_NM2
                                , '0' AS OVS_SLOT_TR_NM2
                                , '0' AS OVS_SLOT_ROW_NM3
                                , '0' AS OVS_SLOT_TR_NM3
                                , '0' AS OVS_SLOT_ROW_NM4
                                , '0' AS OVS_SLOT_TR_NM4
                                , '0' AS OVS_SLOT_ROW_NM5
                                , '0' AS OVS_SLOT_TR_NM5
                                , '0' AS OVS_SLOT_ROW_NM6
                                , '0' AS OVS_SLOT_TR_NM6
                                , '0' AS OVS_SLOT_ROW_NM7
                                , '0' AS OVS_SLOT_TR_NM7
                                , '0' AS OVS_SLOT_ROW_NM8
                                , '0' AS OVS_SLOT_TR_NM8
                                , '0' AS OVS_SLOT_ROW_NM9
                                , '0' AS OVS_SLOT_TR_NM9
                        FROM DUAL                        
                        ) AKBB                        
                )
        GROUP BY TR_NM, ROW_IDX        
        
        UNION ALL
		#if (${dh_tp} == 'D')   -- On Deck
            SELECT '99' AS TR_NM 
                            , DECODE(ROW_IDX,'0',MAX(CELL.ROW_NM)) AS ROW_0
                            , DECODE(ROW_IDX,'1',MAX(CELL.ROW_NM)) AS ROW_1
                            , DECODE(ROW_IDX,'2',MAX(CELL.ROW_NM)) AS ROW_2
                            , DECODE(ROW_IDX,'3',MAX(CELL.ROW_NM)) AS ROW_3
                            , DECODE(ROW_IDX,'4',MAX(CELL.ROW_NM)) AS ROW_4
                            , DECODE(ROW_IDX,'5',MAX(CELL.ROW_NM)) AS ROW_5
                            , DECODE(ROW_IDX,'6',MAX(CELL.ROW_NM)) AS ROW_6
                            , DECODE(ROW_IDX,'7',MAX(CELL.ROW_NM)) AS ROW_7
                            , DECODE(ROW_IDX,'8',MAX(CELL.ROW_NM)) AS ROW_8
                            , DECODE(ROW_IDX,'9',MAX(CELL.ROW_NM)) AS ROW_9
                            , DECODE(ROW_IDX,'10',MAX(CELL.ROW_NM)) AS ROW_10
                            , DECODE(ROW_IDX,'11',MAX(CELL.ROW_NM)) AS ROW_11
                            , DECODE(ROW_IDX,'12',MAX(CELL.ROW_NM)) AS ROW_12
                            , DECODE(ROW_IDX,'13',MAX(CELL.ROW_NM)) AS ROW_13
                            , DECODE(ROW_IDX,'14',MAX(CELL.ROW_NM)) AS ROW_14
                            , DECODE(ROW_IDX,'15',MAX(CELL.ROW_NM)) AS ROW_15
                            , DECODE(ROW_IDX,'16',MAX(CELL.ROW_NM)) AS ROW_16
                            , DECODE(ROW_IDX,'17',MAX(CELL.ROW_NM)) AS ROW_17
                            , DECODE(ROW_IDX,'18',MAX(CELL.ROW_NM)) AS ROW_18

            FROM CDV_VESSEL VESSEL --2
                , TPL_VSL_STWG_BAY BAY --3
                , TPL_VSL_STWG_CELL CELL --4
            WHERE 1=1
            AND VESSEL.CDV_VSL_CODE = @[vsl_cd]
            AND VESSEL.CDV_VSL_CODE = BAY.VSL_CD
            AND BAY.VSL_CD = CELL.VSL
            AND BAY.BAY_IDX = CELL.BAY_IDX
            AND BAY.BAY_NM = @[bay_idx]
            AND CELL.DH_TP = @[dh_tp]
            AND CELL.TR_IDX != -1
            GROUP BY CELL.ROW_IDX
                    , CELL.ROW_NM
		#else   -- Under Deck
            SELECT '0' AS TR_NM 
                            , DECODE(ROW_IDX,'0',MAX(CELL.ROW_NM)) AS ROW_0
                            , DECODE(ROW_IDX,'1',MAX(CELL.ROW_NM)) AS ROW_1
                            , DECODE(ROW_IDX,'2',MAX(CELL.ROW_NM)) AS ROW_2
                            , DECODE(ROW_IDX,'3',MAX(CELL.ROW_NM)) AS ROW_3
                            , DECODE(ROW_IDX,'4',MAX(CELL.ROW_NM)) AS ROW_4
                            , DECODE(ROW_IDX,'5',MAX(CELL.ROW_NM)) AS ROW_5
                            , DECODE(ROW_IDX,'6',MAX(CELL.ROW_NM)) AS ROW_6
                            , DECODE(ROW_IDX,'7',MAX(CELL.ROW_NM)) AS ROW_7
                            , DECODE(ROW_IDX,'8',MAX(CELL.ROW_NM)) AS ROW_8
                            , DECODE(ROW_IDX,'9',MAX(CELL.ROW_NM)) AS ROW_9
                            , DECODE(ROW_IDX,'10',MAX(CELL.ROW_NM)) AS ROW_10
                            , DECODE(ROW_IDX,'11',MAX(CELL.ROW_NM)) AS ROW_11
                            , DECODE(ROW_IDX,'12',MAX(CELL.ROW_NM)) AS ROW_12
                            , DECODE(ROW_IDX,'13',MAX(CELL.ROW_NM)) AS ROW_13
                            , DECODE(ROW_IDX,'14',MAX(CELL.ROW_NM)) AS ROW_14
                            , DECODE(ROW_IDX,'15',MAX(CELL.ROW_NM)) AS ROW_15
                            , DECODE(ROW_IDX,'16',MAX(CELL.ROW_NM)) AS ROW_16
                            , DECODE(ROW_IDX,'17',MAX(CELL.ROW_NM)) AS ROW_17
                            , DECODE(ROW_IDX,'18',MAX(CELL.ROW_NM)) AS ROW_18

            FROM CDV_VESSEL VESSEL --2
                , TPL_VSL_STWG_BAY BAY --3
                , TPL_VSL_STWG_CELL CELL --4
            WHERE 1=1
            AND VESSEL.CDV_VSL_CODE = @[vsl_cd]
            AND VESSEL.CDV_VSL_CODE = BAY.VSL_CD
            AND BAY.VSL_CD = CELL.VSL
            AND BAY.BAY_IDX = CELL.BAY_IDX
            AND BAY.BAY_NM = @[bay_idx]
            AND CELL.DH_TP = @[dh_tp]
            AND CELL.TR_IDX != -1
            GROUP BY CELL.ROW_IDX
                    , CELL.ROW_NM
		#end
        )
GROUP BY TR_NM
ORDER BY TR_NM DESC
-- ORDER BY TR_IDX			]]></sql>
			<params>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="port_cd" type="12" value="" out="N"/>
				<param name="call_ind" type="12" value="" out="N"/>
				<param name="cntr_id" type="12" value="" out="N"/>
				<param name="bay_idx" type="12" value="" out="N"/>
				<param name="dh_tp" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
