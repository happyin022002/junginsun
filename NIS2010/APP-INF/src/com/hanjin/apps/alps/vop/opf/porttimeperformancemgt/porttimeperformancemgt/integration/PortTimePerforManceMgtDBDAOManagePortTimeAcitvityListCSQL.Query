<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="PortTimePerforManceMgtDBDAOManagePortTimeAcitvityListCSQL">
			<desc><![CDATA[VVD Port별 Activity Time 정보을 생성 및 변경한다.
History------------------------------------------------------------------------------------
2012.02.20 김민아 [CHM-201215901-01] Port Time Reduction project 개발 (2차)]]></desc>
			<sql><![CDATA[
MERGE INTO OPF_PORT_TM_ACT T
USING   (
        SELECT    @[vsl_cd]        AS VSL_CD
                , @[skd_voy_no]    AS SKD_VOY_NO
                , @[skd_dir_cd]    AS SKD_DIR_CD
                , @[vps_port_cd]   AS VPS_PORT_CD
                , @[clpt_ind_seq]  AS CLPT_IND_SEQ
                , @[port_act_ctnt] AS PORT_ACT_CTNT
        FROM    DUAL
        ) S
ON
(           T.VSL_CD        = S.VSL_CD
    AND     T.SKD_VOY_NO    = S.SKD_VOY_NO
    AND     T.SKD_DIR_CD    = S.SKD_DIR_CD
    AND     T.VPS_PORT_CD   = S.VPS_PORT_CD
    AND     T.CLPT_IND_SEQ  = S.CLPT_IND_SEQ
    AND     T.PORT_ACT_CTNT = S.PORT_ACT_CTNT
)
WHEN MATCHED THEN

UPDATE SET
        WRK_PERF_DT     = TO_DATE(@[wrk_perf_dt], 'YYYYMMDDHH24MISS')
      , CNTR_HNDL_KNT   = NVL(@[cntr_hndl_knt], 0)          
      , OP_STPG_CTNT    = @[op_stpg_ctnt]
      , SRC_SVR_NM      = @[src_svr_nm]
      , DIFF_RMK        = @[diff_rmk]
      , UPD_USR_ID      = @[cre_usr_id]
      , UPD_DT          = SYSDATE
WHERE   T.VSL_CD        = S.VSL_CD
AND     T.SKD_VOY_NO    = S.SKD_VOY_NO
AND     T.SKD_DIR_CD    = S.SKD_DIR_CD
AND     T.VPS_PORT_CD   = S.VPS_PORT_CD
AND     T.CLPT_IND_SEQ  = S.CLPT_IND_SEQ
AND     T.PORT_ACT_CTNT = S.PORT_ACT_CTNT

WHEN NOT MATCHED THEN

INSERT
(
          VSL_CD                       
        , SKD_VOY_NO                   
        , SKD_DIR_CD                   
        , VPS_PORT_CD                  
        , CLPT_IND_SEQ             --05
        , PORT_ACT_CTNT                
        , WRK_PERF_DT                  
        , CNTR_HNDL_KNT                
        , OP_STPG_CTNT                 
        , SRC_SVR_NM               --10
        , DIFF_RMK                     
        , CRE_USR_ID                   
        , CRE_DT                       
        , UPD_USR_ID                   
        , UPD_DT                   --15
)
VALUES
(
          @[vsl_cd]                     
        , @[skd_voy_no]                 
        , @[skd_dir_cd]                 
        , @[vps_port_cd]                
        , @[clpt_ind_seq]          --05 
        , @[port_act_ctnt]              
        , TO_DATE(@[wrk_perf_dt], 'YYYYMMDDHH24MISS')
        , NVL(@[cntr_hndl_knt], 0)      
        , @[op_stpg_ctnt]               
        , @[src_svr_nm]            --10 
        , @[diff_rmk]                   
        , @[cre_usr_id]                 
        , SYSDATE                       
        , @[upd_usr_id]                 
        , SYSDATE                  --15 
)			]]></sql>
			<params>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="vps_port_cd" type="12" value="" out="N"/>
				<param name="clpt_ind_seq" type="12" value="" out="N"/>
				<param name="port_act_ctnt" type="12" value="" out="N"/>
				<param name="wrk_perf_dt" type="12" value="" out="N"/>
				<param name="cntr_hndl_knt" type="12" value="" out="N"/>
				<param name="op_stpg_ctnt" type="12" value="" out="N"/>
				<param name="src_svr_nm" type="12" value="" out="N"/>
				<param name="diff_rmk" type="12" value="" out="N"/>
				<param name="cre_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
