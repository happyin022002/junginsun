<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="OptimizeddistancemgtDBDAOAddOptimizedDistanceUSQLCSQL">
			<desc><![CDATA[입력된 데이터를 저장한다.]]></desc>
			<sql><![CDATA[
MERGE INTO VSK_PORT_OPMZ_DIST H
USING 
      (    
        SELECT   @[sheet_fm_port_cd]  AS FM_YD_CD
               , @[sheet_fm_yd_grp_cd] AS FM_YD_GRP_ID
               , @[sheet_to_port_cd]  AS TO_YD_CD
               , @[sheet_to_yd_grp_cd] AS TO_YD_GRP_ID 
        FROM     DUAL
      )   X
ON    (
        H.FM_YD_CD        = X.FM_YD_CD
AND     H.TO_YD_CD        = X.TO_YD_CD
AND     H.FM_YD_GRP_ID    = X.FM_YD_GRP_ID
AND     H.TO_YD_GRP_ID    = X.TO_YD_GRP_ID
       )
    
WHEN MATCHED THEN 
  UPDATE SET 
    
	  OPMZ_DIST    = @[opmz_dist]
	, RNG_MIN_DIST = @[rng_min_dist]
    , RNG_MAX_DIST = @[rng_max_dist]
    , UPD_USR_ID   = @[usr_id]  
    , UPD_DT       = sysdate
    
WHEN NOT MATCHED THEN
  INSERT
  (
      FM_YD_CD
    , TO_YD_CD
    , OPMZ_DIST
    , RNG_MIN_DIST
    , RNG_MAX_DIST
    , CRE_USR_ID
    , CRE_DT
    , UPD_USR_ID
    , UPD_DT
    , FM_YD_GRP_ID 
    , TO_YD_GRP_ID 
    , FILE_NM
	, FILE_SAV_ID
  )
  VALUES
  (
	  @[sheet_fm_port_cd]
	, @[sheet_to_port_cd]
	, @[opmz_dist]
	, @[rng_min_dist]
	, @[rng_max_dist]
	, @[usr_id]
    , sysdate
	, @[usr_id]
    , sysdate
	, @[sheet_fm_yd_grp_cd]
	, @[sheet_to_yd_grp_cd]
	, @[file_nm]
    , @[file_sav_id]

  )			]]></sql>
			<params>
				<param name="sheet_fm_port_cd" type="12" value="" out="N"/>
				<param name="sheet_fm_yd_grp_cd" type="12" value="" out="N"/>
				<param name="sheet_to_port_cd" type="12" value="" out="N"/>
				<param name="sheet_to_yd_grp_cd" type="12" value="" out="N"/>
				<param name="opmz_dist" type="12" value="" out="N"/>
				<param name="rng_min_dist" type="12" value="" out="N"/>
				<param name="rng_max_dist" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
				<param name="file_nm" type="12" value="" out="N"/>
				<param name="file_sav_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
