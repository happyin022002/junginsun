<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="GeneralInvoiceAuditDBDAOgetTrfRtAmtRSQL">
			<desc><![CDATA[getTrfRtAmt]]></desc>
			<sql><![CDATA[
select nvl(sum(rt_val)||'', '0/*no-rate-found*/') rtval from 
(
SELECT
T1.TRF_RT_AMT/(DECODE(t2.pso_rt_tp_cd, 'R', 100, 1)) rt_val
FROM PSO_TRF_DTL T1, PSO_TARIFF T2
WHERE T1.PORT_TRF_NO = @[port_trf_no]
AND T1.PORT_TRF_NO = T2.PORT_TRF_NO
AND @[flag] = '2'
UNION ALL
SELECT
T1.TRF_RT_AMT
FROM PSO_TRF_DTL T1, PSO_TARIFF T2
WHERE T1.PORT_TRF_NO = @[port_trf_no]
AND T1.PORT_TRF_NO = T2.PORT_TRF_NO
AND @[obj_val] between T1.FM_VAL and T1.TO_VAL
AND @[flag] = '1'
)			]]></sql>
			<params>
				<param name="port_trf_no" type="12" value="" out="N"/>
				<param name="flag" type="12" value="" out="N"/>
				<param name="obj_val" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
