<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ActualScheduleMgtDBDAOModifyVskActPortSkdUSQL">
			<desc><![CDATA[Actual Port Schedule 정보를 변경합니다.
-----------------------------------------------------------------------------------------
2010.12.20 진마리아 [CHM-201007578-01] INP_DT, INP_USR_ID 컬럼 입력 조건 변경하였습니다.
2011.10.04 김민아 [CHM-201112983-01] Actual SKD Creation 및 Inquiry 화면 및 로직 변경. ATA,ATB,ATD 별 Remark 칼럼 추가]]></desc>
			<sql><![CDATA[
/******************************************************************************/
/* java파일 생성 후 java파일에서 '.NUMERIC, .FLOAT' 을 '.VARCHAR' 로 치환하여야 함. */
/******************************************************************************/
UPDATE VSK_ACT_PORT_SKD
SET    PORT_SKD_STS_CD          = CASE WHEN @[act_arr_dt] IS NOT NULL AND @[act_brth_dt] IS NULL AND @[act_dep_dt] IS NULL THEN 'A'
									   WHEN @[act_arr_dt] IS NOT NULL AND @[act_brth_dt] IS NOT NULL AND @[act_dep_dt] IS NULL THEN 'B'
									   WHEN @[act_arr_dt] IS NOT NULL AND @[act_brth_dt] IS NOT NULL AND @[act_dep_dt] IS NOT NULL THEN 'D'
							      END
       , LST_ETA_DT             = TO_DATE(@[lst_eta_dt] , 'YYYYMMDDHH24MI')
       , ACT_ARR_DT             = TO_DATE(@[act_arr_dt] , 'YYYYMMDDHH24MI')
       , VSL_ARR_DLAY_RSN_CD    = @[vsl_arr_dlay_rsn_cd]
       , ACT_ATA_INP_DT         = CASE WHEN ACT_ATA_INP_DT IS NULL THEN 
                                       CASE WHEN @[act_arr_dt] IS NULL THEN NULL 
                                            ELSE CASE WHEN @[act_ata_inp_dt] IS NULL THEN SYSDATE
                                                      ELSE TO_DATE(@[act_ata_inp_dt], 'YYYYMMDDHH24MISS')
                                                      END
                                            END
                                  ELSE ACT_ATA_INP_DT
                                  END
       , ACT_ATA_INP_USR_ID     = CASE WHEN ACT_ATA_INP_USR_ID IS NULL THEN 
                                       CASE WHEN @[act_arr_dt] IS NULL THEN NULL 
                                            ELSE CASE WHEN @[act_ata_inp_usr_id] IS NULL THEN @[upd_usr_id]
                                                      ELSE @[act_ata_inp_usr_id]
                                                      END
                                            END
                                  ELSE ACT_ATA_INP_USR_ID
                                  END
       , LST_ETB_DT             = TO_DATE(@[lst_etb_dt]  , 'YYYYMMDDHH24MI')
       , ACT_BRTH_DT            = TO_DATE(@[act_brth_dt] , 'YYYYMMDDHH24MI')
       , VSL_BRTH_DLAY_RSN_CD   = @[vsl_brth_dlay_rsn_cd]
       , ACT_ATB_INP_DT         = CASE WHEN ACT_ATB_INP_DT IS NULL THEN 
                                       CASE WHEN @[act_brth_dt] IS NULL THEN NULL 
                                            ELSE CASE WHEN @[act_atb_inp_dt] IS NULL THEN SYSDATE
                                                      ELSE TO_DATE(@[act_atb_inp_dt], 'YYYYMMDDHH24MISS')
                                                      END
                                            END
                                  ELSE ACT_ATB_INP_DT
                                  END
       , ACT_ATB_INP_USR_ID     = CASE WHEN ACT_ATB_INP_USR_ID IS NULL THEN 
                                       CASE WHEN @[act_brth_dt] IS NULL THEN NULL 
                                            ELSE CASE WHEN @[act_atb_inp_usr_id] IS NULL THEN @[upd_usr_id]
                                                      ELSE @[act_atb_inp_usr_id]
                                                      END
                                            END
                                  ELSE ACT_ATB_INP_USR_ID
                                  END
       , LST_ETD_DT             = TO_DATE(@[lst_etd_dt],'YYYYMMDDHH24MI')
       , ACT_DEP_DT             = TO_DATE(@[act_dep_dt],'YYYYMMDDHH24MI')
       , VSL_DEP_DLAY_RSN_CD    = @[vsl_dep_dlay_rsn_cd]
       , ACT_ATD_INP_DT         = CASE WHEN ACT_ATD_INP_DT IS NULL THEN 
                                       CASE WHEN @[act_dep_dt] IS NULL THEN NULL 
                                            ELSE CASE WHEN @[act_atd_inp_dt] IS NULL THEN SYSDATE
                                                      ELSE TO_DATE(@[act_atd_inp_dt], 'YYYYMMDDHH24MISS')
                                                      END
                                            END
                                  ELSE ACT_ATD_INP_DT
                                  END
       , ACT_ATD_INP_USR_ID     = CASE WHEN ACT_ATD_INP_USR_ID IS NULL THEN 
                                       CASE WHEN @[act_dep_dt] IS NULL THEN NULL 
                                            ELSE CASE WHEN @[act_atd_inp_usr_id] IS NULL THEN @[upd_usr_id]
                                                      ELSE @[act_atd_inp_usr_id]
                                                      END
                                            END
                                  ELSE ACT_ATD_INP_USR_ID
                                  END
       , ARR_FOIL_WGT           = TO_NUMBER(NVL(@[arr_foil_wgt]          , 0))
       , ARR_LOW_SULP_FOIL_WGT  = TO_NUMBER(NVL(@[arr_low_sulp_foil_wgt] , 0))
       , ARR_DOIL_WGT           = TO_NUMBER(NVL(@[arr_doil_wgt]          , 0))
       , ARR_LOW_SULP_DOIL_WGT  = TO_NUMBER(NVL(@[arr_low_sulp_doil_wgt] , 0))
       , ARR_FRSH_WTR_WGT       = TO_NUMBER(NVL(@[arr_frsh_wtr_wgt]      , 0))
       , ARR_BLST_WGT           = TO_NUMBER(NVL(@[arr_blst_wgt]          , 0))
       , ARR_FWDDR_HGT          = TO_NUMBER(NVL(@[arr_fwddr_hgt]         , 0))
       , ARR_AFTDR_HGT          = TO_NUMBER(NVL(@[arr_aftdr_hgt]         , 0))
       , ARR_GM_HGT             = TO_NUMBER(NVL(@[arr_gm_hgt]            , 0))
       , ARR_TUG_BOT_KNT        = TO_NUMBER(NVL(@[arr_tug_bot_knt]       , 0))    
       , SPL_FOIL_WGT           = TO_NUMBER(NVL(@[spl_foil_wgt]          , 0))
       , SPL_LOW_SULP_FOIL_WGT  = TO_NUMBER(NVL(@[spl_low_sulp_foil_wgt] , 0))
       , SPL_DOIL_WGT           = TO_NUMBER(NVL(@[spl_doil_wgt]          , 0))
       , SPL_LOW_SULP_DOIL_WGT  = TO_NUMBER(NVL(@[spl_low_sulp_doil_wgt] , 0))
       , SPL_FRSH_WTR_WGT       = TO_NUMBER(NVL(@[spl_frsh_wtr_wgt]      , 0))
       , DEP_LOW_SULP_FOIL_WGT  = TO_NUMBER(NVL(@[dep_low_sulp_foil_wgt] , 0))
       , DEP_FOIL_WGT           = TO_NUMBER(NVL(@[dep_foil_wgt]          , 0))
       , DEP_LOW_SULP_DOIL_WGT  = TO_NUMBER(NVL(@[dep_low_sulp_doil_wgt] , 0))
       , DEP_DOIL_WGT           = TO_NUMBER(NVL(@[dep_doil_wgt]          , 0))
       , DEP_FRSH_WTR_WGT       = TO_NUMBER(NVL(@[dep_frsh_wtr_wgt]      , 0))
       , DEP_BLST_WGT           = TO_NUMBER(NVL(@[dep_blst_wgt]          , 0))
       , DEP_FWDDR_HGT          = TO_NUMBER(NVL(@[dep_fwddr_hgt]         , 0))
       , DEP_AFTDR_HGT          = TO_NUMBER(NVL(@[dep_aftdr_hgt]         , 0))
       , DEP_GM_HGT             = TO_NUMBER(NVL(@[dep_gm_hgt]            , 0))
       , DEP_TUG_BOT_KNT        = TO_NUMBER(NVL(@[dep_tug_bot_knt]       , 0))
       , TTL_SLG_WGT            = TO_NUMBER(NVL(@[ttl_slg_wgt]           , 0))
       , TTL_GBG_QTY            = TO_NUMBER(NVL(@[ttl_gbg_qty]           , 0))
       , PLT_LST_UNLD_DT        = TO_DATE(@[plt_lst_unld_dt]             , 'YYYYMMDDHH24MI') 
       , BFR_BRTH_ANK_DRP_DT    = TO_DATE(@[bfr_brth_ank_drp_dt]         , 'YYYYMMDDHH24MI') 
       , BFR_BRTH_ANK_OFF_DT    = TO_DATE(@[bfr_brth_ank_off_dt]         , 'YYYYMMDDHH24MI') 
       , AFT_UNBRTH_ANK_DRP_DT  = TO_DATE(@[aft_unbrth_ank_drp_dt]       , 'YYYYMMDDHH24MI') 
       , AFT_UNBRTH_ANK_OFF_DT  = TO_DATE(@[aft_unbrth_ank_off_dt]       , 'YYYYMMDDHH24MI')
       , DIFF_RMK               = @[diff_rmk]
       , ACT_ARR_RMK            = @[act_arr_rmk]
       , ACT_BRTH_RMK           = @[act_brth_rmk]
       , ACT_DEP_RMK            = @[act_dep_rmk]
       , UPD_USR_ID             = @[upd_usr_id]                             
       , UPD_DT                 = SYSDATE                                   
WHERE  VSL_CD       = @[vsl_cd]
AND    SKD_VOY_NO   = @[skd_voy_no]
AND    SKD_DIR_CD   = @[skd_dir_cd]
AND    VPS_PORT_CD  = @[vps_port_cd]
AND    CLPT_IND_SEQ = @[clpt_ind_seq]			]]></sql>
			<params>
				<param name="act_arr_dt" type="12" value="" out="N"/>
				<param name="act_brth_dt" type="12" value="" out="N"/>
				<param name="act_dep_dt" type="12" value="" out="N"/>
				<param name="lst_eta_dt" type="12" value="" out="N"/>
				<param name="vsl_arr_dlay_rsn_cd" type="12" value="" out="N"/>
				<param name="act_ata_inp_dt" type="12" value="" out="N"/>
				<param name="act_ata_inp_usr_id" type="12" value="" out="N"/>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="lst_etb_dt" type="12" value="" out="N"/>
				<param name="vsl_brth_dlay_rsn_cd" type="12" value="" out="N"/>
				<param name="act_atb_inp_dt" type="12" value="" out="N"/>
				<param name="act_atb_inp_usr_id" type="12" value="" out="N"/>
				<param name="lst_etd_dt" type="12" value="" out="N"/>
				<param name="vsl_dep_dlay_rsn_cd" type="12" value="" out="N"/>
				<param name="act_atd_inp_dt" type="12" value="" out="N"/>
				<param name="act_atd_inp_usr_id" type="12" value="" out="N"/>
				<param name="arr_foil_wgt" type="6" value="" out="N"/>
				<param name="arr_low_sulp_foil_wgt" type="6" value="" out="N"/>
				<param name="arr_doil_wgt" type="6" value="" out="N"/>
				<param name="arr_low_sulp_doil_wgt" type="6" value="" out="N"/>
				<param name="arr_frsh_wtr_wgt" type="6" value="" out="N"/>
				<param name="arr_blst_wgt" type="6" value="" out="N"/>
				<param name="arr_fwddr_hgt" type="6" value="" out="N"/>
				<param name="arr_aftdr_hgt" type="6" value="" out="N"/>
				<param name="arr_gm_hgt" type="6" value="" out="N"/>
				<param name="arr_tug_bot_knt" type="2" value="" out="N"/>
				<param name="spl_foil_wgt" type="6" value="" out="N"/>
				<param name="spl_low_sulp_foil_wgt" type="6" value="" out="N"/>
				<param name="spl_doil_wgt" type="6" value="" out="N"/>
				<param name="spl_low_sulp_doil_wgt" type="6" value="" out="N"/>
				<param name="spl_frsh_wtr_wgt" type="6" value="" out="N"/>
				<param name="dep_low_sulp_foil_wgt" type="6" value="" out="N"/>
				<param name="dep_foil_wgt" type="6" value="" out="N"/>
				<param name="dep_low_sulp_doil_wgt" type="6" value="" out="N"/>
				<param name="dep_doil_wgt" type="6" value="" out="N"/>
				<param name="dep_frsh_wtr_wgt" type="6" value="" out="N"/>
				<param name="dep_blst_wgt" type="6" value="" out="N"/>
				<param name="dep_fwddr_hgt" type="6" value="" out="N"/>
				<param name="dep_aftdr_hgt" type="6" value="" out="N"/>
				<param name="dep_gm_hgt" type="6" value="" out="N"/>
				<param name="dep_tug_bot_knt" type="2" value="" out="N"/>
				<param name="ttl_slg_wgt" type="12" value="" out="N"/>
				<param name="ttl_gbg_qty" type="12" value="" out="N"/>
				<param name="plt_lst_unld_dt" type="12" value="" out="N"/>
				<param name="bfr_brth_ank_drp_dt" type="12" value="" out="N"/>
				<param name="bfr_brth_ank_off_dt" type="12" value="" out="N"/>
				<param name="aft_unbrth_ank_drp_dt" type="12" value="" out="N"/>
				<param name="aft_unbrth_ank_off_dt" type="12" value="" out="N"/>
				<param name="diff_rmk" type="12" value="" out="N"/>
				<param name="act_arr_rmk" type="12" value="" out="N"/>
				<param name="act_brth_rmk" type="12" value="" out="N"/>
				<param name="act_dep_rmk" type="12" value="" out="N"/>
				<param name="vsl_cd" type="12" value="" out="N"/>
				<param name="skd_voy_no" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="vps_port_cd" type="12" value="" out="N"/>
				<param name="clpt_ind_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
