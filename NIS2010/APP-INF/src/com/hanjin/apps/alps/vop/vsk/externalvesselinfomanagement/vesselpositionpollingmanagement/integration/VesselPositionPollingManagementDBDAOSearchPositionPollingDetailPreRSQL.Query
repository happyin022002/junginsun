<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="VesselPositionPollingManagementDBDAOSearchPositionPollingDetailPreRSQL">
			<desc><![CDATA[SearchPositionPollingDetailPre]]></desc>
			<sql><![CDATA[
SELECT      XX.RCV_DT
        ,   XX.DLY_RCV_SEQ
        ,   XX.IF_RCV_SEQ
        ,   XX.PLNG_GEN_GDT                     AS PRE_PLNG_GEN_GDT
        ,   XX.PLNG_GEN_DIFF                    AS PLNG_GEN_DIFF_HRS
        ,   XX.VSL_LAT                          AS VSL_PRE_LAT
        ,   XX.VSL_LON                          AS VSL_PRE_LON
        ,   XX.VSL_SPD                          AS VSL_PRE_SPD
        ,   XX.VSL_PROG_DIR_CTNT                AS VSL_PRE_PROG_DIR_CTNT
        ,   XX.CUR_VSL_LAT
        ,   XX.CUR_VSL_LON
        ,   XX.CUR_VSL_SPD
        ,   XX.CUR_VSL_PROG_DIR_CTNT 
FROM        (
            --==================================================
            SELECT      ROUND((X.PLNG_GEN_GDT-D.PLNG_GEN_GDT)*24,4)   AS PLNG_GEN_DIFF
                    ,   X.VSL_LAT                       AS CUR_VSL_LAT
                    ,   X.VSL_LON                       AS CUR_VSL_LON
                    ,   X.VSL_SPD                       AS CUR_VSL_SPD
                    ,   X.VSL_PROG_DIR_CTNT             AS CUR_VSL_PROG_DIR_CTNT
                    ,   D.*
            FROM        VSK_VSL_PSN_PLNG_DTL    X
                    ,   VSK_VSL_PSN_PLNG_DTL    D
            WHERE       1 = 1
            AND         X.RCV_DT                = @[rcv_dt]
            AND         X.DLY_RCV_SEQ           = @[dly_rcv_seq]
            AND         X.IF_RCV_SEQ            = @[if_rcv_seq]
            AND         X.VSL_CD                = D.VSL_CD
            AND         X.VSL_LAT               <> D.VSL_LAT
            AND         X.VSL_LON               <> D.VSL_LON        
            AND         X.PLNG_GEN_GDT          > D.PLNG_GEN_GDT
            ORDER BY    D.PLNG_GEN_GDT          DESC
            --==================================================
            ) XX
WHERE       ROWNUM      = 1			]]></sql>
			<params>
				<param name="rcv_dt" type="12" value="" out="N"/>
				<param name="dly_rcv_seq" type="12" value="" out="N"/>
				<param name="if_rcv_seq" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
