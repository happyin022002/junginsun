<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ScheduleNotificationManagementDBDAOCreateVslSkdCngNotificationSetupListCSQL">
			<desc><![CDATA[사용자별 Vessel Schedule Notification 대상기본 Setup 데이터 생성]]></desc>
			<sql><![CDATA[
MERGE INTO   VSK_VSL_SKD_NTFC_STUP   X                          
USING        (SELECT    NVL(@[upd_usr_id],@[login_usr_id]) AS LOGIN_USR_ID            
                     ,  @[vsl_slan_cd]          AS VSL_SLAN_CD             
                     ,  @[vps_port_cd]          AS VPS_PORT_CD             
                     ,  @[skd_dir_cd]           AS SKD_DIR_CD              
              FROM       DUAL                                   
             ) Y                                                
ON           (                                                  
             X.USR_ID                = Y.LOGIN_USR_ID           
AND          X.VSL_SLAN_CD           = Y.VSL_SLAN_CD            
AND          X.SKD_DIR_CD            = Y.SKD_DIR_CD             
AND          X.VPS_PORT_CD           = Y.VPS_PORT_CD            
             )                                                  
WHEN NOT MATCHED THEN                                           
             INSERT                                         
                       (    USR_ID                                                 
                        ,   VSL_SLAN_CD        
                        ,   VPS_PORT_CD        
                        ,   SKD_DIR_CD         
                        ,   ETA_DLAY_FM_HRS    
                        ,   ETA_DLAY_TO_HRS    
                        ,   ETB_DLAY_FM_HRS    
                        ,   ETB_DLAY_TO_HRS    
                        ,   ETD_DLAY_FM_HRS    
                        ,   ETD_DLAY_TO_HRS    
                        ,   SKP_CLPT_TGT_FLG     
                        ,   RVS_CLPT_TGT_FLG     
                        ,   APLY_FLG                                                 
                        ,   CRE_USR_ID                                             
                        ,   CRE_DT             
                        ,   UPD_USR_ID     
                        ,   UPD_DT 
                        )        
             VALUES    (    NVL(@[upd_usr_id],@[login_usr_id]) /* USR_ID            */                                       
                        ,   @[vsl_slan_cd]       /* VSL_SLAN_CD      */  
                        ,   @[vps_port_cd]       /* VPS_PORT_CD      */  
                        ,   @[skd_dir_cd]        /* SKD_DIR_CD       */  
                        ,   @[eta_dlay_fm_hrs]   /* ETA_DLAY_FM_HRS  */  
                        ,   @[eta_dlay_to_hrs]   /* ETA_DLAY_TO_HRS  */  
                        ,   @[etb_dlay_fm_hrs]   /* ETB_DLAY_FM_HRS  */  
                        ,   @[etb_dlay_to_hrs]   /* ETB_DLAY_TO_HRS  */  
                        ,   @[etd_dlay_fm_hrs]   /* ETD_DLAY_FM_HRS  */  
                        ,   @[etd_dlay_to_hrs]   /* ETD_DLAY_TO_HRS  */  
                        ,   DECODE(@[skp_clpt_tgt_flg],'1','Y','N')  /* SKP_CLPT_TGT_FLG */    
                        ,   DECODE(@[rvs_clpt_tgt_flg],'1','Y','N')  /* RVS_CLPT_TGT_FLG */    
                        ,   DECODE(@[aply_flg],'1','Y','N')          /* APLY_FLG         */                                        
                        ,   @[login_usr_id]      /* CRE_USR_ID       */                                      
                        ,   SYSDATE              /* CRE_DT           */  
                        ,   @[login_usr_id]      /* UPD_USR_ID       */
                        ,   SYSDATE              /* UPD_DT           */   
                       )                                        
WHEN MATCHED THEN                                               
             UPDATE                                             
             SET       X.ETA_DLAY_FM_HRS  = @[eta_dlay_fm_hrs]                    
                   ,   X.ETA_DLAY_TO_HRS  = @[eta_dlay_to_hrs]                    
                   ,   X.ETB_DLAY_FM_HRS  = @[etb_dlay_fm_hrs]                    
                   ,   X.ETB_DLAY_TO_HRS  = @[etb_dlay_to_hrs]                    
                   ,   X.ETD_DLAY_FM_HRS  = @[etd_dlay_fm_hrs]                    
                   ,   X.ETD_DLAY_TO_HRS  = @[etd_dlay_to_hrs]                    
                   ,   X.SKP_CLPT_TGT_FLG = DECODE(@[skp_clpt_tgt_flg],'1','Y','N')                    
                   ,   X.RVS_CLPT_TGT_FLG = DECODE(@[rvs_clpt_tgt_flg],'1','Y','N')                    
                   ,   X.APLY_FLG         = DECODE(@[aply_flg],'1','Y','N')                    
                   ,   X.UPD_USR_ID       = NVL(@[upd_usr_id],@[login_usr_id])                    
                   ,   X.UPD_DT           = SYSDATE			]]></sql>
			<params>
				<param name="upd_usr_id" type="12" value="" out="N"/>
				<param name="login_usr_id" type="12" value="" out="N"/>
				<param name="vsl_slan_cd" type="12" value="" out="N"/>
				<param name="vps_port_cd" type="12" value="" out="N"/>
				<param name="skd_dir_cd" type="12" value="" out="N"/>
				<param name="eta_dlay_fm_hrs" type="12" value="" out="N"/>
				<param name="eta_dlay_to_hrs" type="12" value="" out="N"/>
				<param name="etb_dlay_fm_hrs" type="12" value="" out="N"/>
				<param name="etb_dlay_to_hrs" type="12" value="" out="N"/>
				<param name="etd_dlay_fm_hrs" type="12" value="" out="N"/>
				<param name="etd_dlay_to_hrs" type="12" value="" out="N"/>
				<param name="skp_clpt_tgt_flg" type="12" value="" out="N"/>
				<param name="rvs_clpt_tgt_flg" type="12" value="" out="N"/>
				<param name="aply_flg" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
