<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="SpecialCargoMasterDataMgtDBDAOScgMailTampletVORSQL">
			<desc><![CDATA[Mail Preview 의 Tamplet 을 조회한다.]]></desc>
			<sql><![CDATA[
SELECT DECODE(NVL(TMP.EML_SND_USR_ID,''),'','I','U') ibflag
	 , NVL(TMP.EML_SND_USR_ID,USR.USR_ID) EML_SND_USR_ID
     , NVL(TMP.SPCL_CGO_CD,DUM.TP) SPCL_CGO_CD
     , NVL(TMP.HDR_CTNT,'') HDR_CTNT
     , NVL(TMP.FTR_CTNT,CONCAT(DUM.FTR_CTNT,
                        CONCAT(USR.USR_NM,
                        CONCAT(CHR(13)||USR.JB_ENG_NM,
                        CONCAT(CHR(13)||'Tel              : '||USR.MPHN_NO,
                        CONCAT(CHR(13)||'e-mail           : ',USR.USR_EML)))))) FTR_CTNT
     , NVL(TMP.AUTO_EML_FLG,DUM.AUTO_EML_FLG) AUTO_EML_FLG
     , TMP.CRE_USR_ID
     , TMP.CRE_DT
     , TMP.UPD_USR_ID
     , TMP.UPD_DT
  FROM COM_USER      USR
     , SCG_EML_TMPLT TMP
     , (SELECT LEVEL LVL
             , DECODE(LEVEL,1,'DG',2,'AK',3,'BB',4,'RF','') TP
             , CASE WHEN LEVEL=1 THEN 'Good day!'||CHR(13)||'Please your approval:'
                    WHEN LEVEL=2 THEN 'Good day!'||CHR(13)||'Thanks for reverting with acceptance and slot loss for the below awkward  request.'
                    WHEN LEVEL=3 THEN 'Good day!'||CHR(13)||'Thanks for reverting with acceptance and slot loss for the below break-bulk request.'
                    ELSE 'Good day!'||CHR(13)||'Please your approval:'
               END HDR_CTNT
             , 'Best Regards'||CHR(13) FTR_CTNT
             , 'Y' AUTO_EML_FLG
          FROM DUAL
        CONNECT BY LEVEL <= 4) DUM
 WHERE USR.USR_ID = @[eml_snd_usr_id]
   AND USR.USR_ID = TMP.EML_SND_USR_ID(+)
   AND NVL(TMP.SPCL_CGO_CD,DUM.TP) = DUM.TP
 ORDER BY DUM.LVL			]]></sql>
			<params>
				<param name="eml_snd_usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
