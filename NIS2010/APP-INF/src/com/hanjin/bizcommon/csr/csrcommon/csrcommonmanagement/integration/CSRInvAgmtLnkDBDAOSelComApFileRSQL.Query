<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CSRInvAgmtLnkDBDAOSelComApFileRSQL">
			<desc><![CDATA[COM_AP_FILE_UPLD SELECT]]></desc>
			<sql><![CDATA[
SELECT
       CASE
         WHEN F.CRE_USR_ID IS NOT NULL
   AND F.CRE_USR_ID = @[cre_usr_id] THEN 'Y'
         ELSE 'N'
       END EDITABLE_YN ,
       F.ATCH_FILE_ID,
       F.CRE_USR_ID,
       C.FILE_UPLD_NM AS FILE_NM,
       C.FILE_PATH_URL,
       F.FILE_RMK,
       U.USR_NM,
       U.OFC_CD,
       C.FILE_SAV_ID
  FROM COM_AP_FILE_UPLD F,
       AP_INV_HDR A,
       COM_UPLD_FILE C,
       COM_USER U
 WHERE 1=1
   AND F.AP_FILE_DIV_CD = 'C' --CSR유형
   AND F.CSR_NO = @[csr_no] --12SHAMBB14121600038
   AND F.CSR_NO = A.CSR_NO
   AND F.CSR_FILE_UPLD_TP_CD = @[csr_file_upld_tp_cd] -- FA : Agmt File / FU : 일반 FILE (화면의 TAB구분자)
   AND NVL(F.DELT_FLG, 'N') <> 'Y'
   AND F.FILE_SAV_ID = C.FILE_SAV_ID
   AND NVL(C.DELT_FLG, 'N') <> 'Y'
   AND F.CRE_USR_ID = U.USR_ID
   AND NVL(U.USE_FLG, 'N') = 'Y'			]]></sql>
			<params>
				<param name="cre_usr_id" type="12" value="1" out="N"/>
				<param name="csr_no" type="12" value="12SHAMBB14121600038" out="N"/>
				<param name="csr_file_upld_tp_cd" type="12" value="FA" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
