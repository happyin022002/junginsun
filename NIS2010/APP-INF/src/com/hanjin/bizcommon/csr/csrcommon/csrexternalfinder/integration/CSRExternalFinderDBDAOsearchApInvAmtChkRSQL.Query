<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="CSRExternalFinderDBDAOsearchApInvAmtChkRSQL">
			<desc><![CDATA[비교할 INV_AMT 와 Currency에따른 소수점 적용된 INV_AMT 비교 체크 - 결과값이 0 이아니면 CSR00081에러]]></desc>
			<sql><![CDATA[
SELECT ROUND((@[inv_net_amt] - A.INV_AMT), 2) AS AMTCHK, A.INV_NET_AMT, A.INV_AMT											  			  	
  FROM                                                                                                             	
      (                                                                                                            	
       SELECT DECODE(A.INV_CURR_CD, 'KRW', ROUND(NVL(A.INV_NET_AMT,0),0),                                          	
                                  'JPY', ROUND(NVL(A.INV_NET_AMT,0),0),ROUND(NVL(A.INV_NET_AMT,0),2)) AS INV_NET_AMT 
              ,DECODE(A.INV_CURR_CD, 'KRW', ROUND(NVL(SUM(B.INV_AMT),0),0),                                          
                                    'JPY', ROUND(NVL(SUM(B.INV_AMT),0),0),ROUND(NVL(SUM(B.INV_AMT),0),2)) AS INV_AMT 
         FROM AP_PAY_INV A                                                                                         	
              ,AP_PAY_INV_DTL B                                                                                    	
        WHERE A.INV_RGST_NO = B.INV_RGST_NO                                                                        	
          AND A.INV_RGST_NO = @[inv_rgst_no]                                                                    				  	
        GROUP BY DECODE(A.INV_CURR_CD, 'KRW', ROUND(NVL(A.INV_NET_AMT,0),0),                                         
                                  'JPY', ROUND(NVL(A.INV_NET_AMT,0),0),ROUND(NVL(A.INV_NET_AMT,0),2))                
				, A.INV_CURR_CD                  																	
      )A                 			]]></sql>
			<params>
				<param name="inv_net_amt" type="12" value="" out="N"/>
				<param name="inv_rgst_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
