<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="AuthorizationDBDAOcheckAuthDuplAproRSQL">
			<desc><![CDATA[Auth 동시 결재 Check]]></desc>
			<sql><![CDATA[
SELECT NVL((
    SELECT  
    CASE WHEN R.AUTH_APSTS_CD = 'C'
    THEN 'Y'
    ELSE 'N'
    END CHK_VAL
    FROM COM_AUTH_APRO_RQST Q, COM_AUTH_APRO_RQST_ROUT R
    WHERE 1=1
    AND Q.AUTH_APRO_RQST_NO = @[auth_apro_rqst_no]
    AND Q.AUTH_APRO_RQST_NO = R.AUTH_APRO_RQST_NO
    AND R.AUTH_APRO_USR_ID IN ( SELECT C.USR_ID FROM COM_USER C 
                                WHERE C.USR_ID = @[usr_id]
                                AND NVL(C.USE_FLG, 'N') = 'Y'
                                UNION
                                SELECT C.EP_ID FROM COM_USER C
                                WHERE C.USR_ID = @[usr_id]
                                AND NVL(C.USE_FLG, 'N') = 'Y' )
),'X') CHK_VAL 
FROM DUAL			]]></sql>
			<params>
				<param name="auth_apro_rqst_no" type="12" value="" out="N"/>
				<param name="usr_id" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
