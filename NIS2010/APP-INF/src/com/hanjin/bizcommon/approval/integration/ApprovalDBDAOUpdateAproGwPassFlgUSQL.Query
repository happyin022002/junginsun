<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ApprovalDBDAOUpdateAproGwPassFlgUSQL">
			<desc><![CDATA[update]]></desc>
			<sql><![CDATA[
UPDATE AP_INV_HDR A
SET A.CSR_GEN_EXPN_ACCT_FLG = 
    (SELECT 
        CASE
        WHEN COUNT(D.DTRB_COA_ACCT_CD) > 0
        THEN
            DECODE(SIGN(NVL(COUNT(D.DTRB_COA_ACCT_CD),0) -
                        NVL(
                        SUM(
                        CASE
                        WHEN D.DTRB_COA_ACCT_CD IN ('563761','573761')
                            OR D.DTRB_COA_ACCT_CD LIKE '5629%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5627%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5629%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5630%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5631%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5632%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5634%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5635%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5639%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5642%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5643%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5644%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5646%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5648%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5650%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5730%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5731%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5732%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5734%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5735%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5739%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5742%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5743%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5744%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5746%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5748%'
                            OR D.DTRB_COA_ACCT_CD LIKE '5750%'
                        THEN 1
                        ELSE 0
                        END),0)
                        ),0,'Y','N')
        ELSE 'N'
        END CHK
    FROM AP_INV_DTRB D
    WHERE D.CSR_NO = A.CSR_NO) 
WHERE CSR_NO = @[csr_no]
			]]></sql>
			<params>
				<param name="csr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
