<?xml version="1.0" encoding="UTF-8"?>
<sqls>
	<querys>
		<query name="ApprovalDBDAOSearchCheckApprovedCsrRSQL">
			<desc><![CDATA[Add버튼시 Appoved인 건은 결재라인 추가 못하도록 함.]]></desc>
			<sql><![CDATA[
SELECT CASE WHEN C.APSTS_CD IN ('R','C','D') THEN 'Y' --R: DISAPPROVAL, C:APPROVAL,D:PAID,X:CSR CANCEL
            WHEN NVL(A.IF_FLG,'N') = 'Y' THEN 'Y'
            ELSE NVL(A.IF_FLG,'N') 
        END AS IF_FLG
  FROM AP_INV_HDR A
      ,COM_APRO_CSR_DTL B
      ,COM_APRO_RQST_HDR C
 WHERE 1=1
   AND A.CSR_NO = B.CSR_NO
   AND B.APRO_RQST_NO = C.APRO_RQST_NO
   AND A.CSR_NO = @[csr_no]			]]></sql>
			<params>
				<param name="csr_no" type="12" value="" out="N"/>
			</params>
		</query>
	</querys>
</sqls>
