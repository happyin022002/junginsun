<%--/*=========================================================*Copyright(c) 2006 CyberLogitec*@FileName : ESD_TRS_0971.jsp*@FileTitle : request.getParameter를 XML 생성*Open Issues :*Change history :*@LastModifyDate : 2006-11-02*@LastModifier : poong_yeon*@LastVersion : 1.0* 2006-11-02 poong_yeon* 1.0 최초 생성=========================================================*/--%><%@ page contentType="text/xml; charset=UTF-8"%><%@ page autoFlush="true" buffer="1kb" %><%@ page import="com.hanjin.framework.component.util.JSPUtil"%><%@ page import="java.util.Enumeration"%><%@ page import="java.util.ArrayList"%><%try{	String prefix = request.getParameter("prefix");	if(prefix == null) prefix = "";	String n3pty_amt = null;	String scg_amt = null;	String inv_scg_amt = null;	String bill_case = null;	String biller_cd = null;	String cust_cnt_cd = null;	String cust_cnt_seq = null;	String n3pty_vndr_seq = null;	String n3pty_ofc_cd = null;		String bzc_n3pty_amt = null;	String bzc_bill_case = null;	String bzc_biller_cd = null;	String bzc_cust_cnt_cd = null;	String bzc_cust_cnt_seq = null;	String bzc_n3pty_vndr_seq = null;	String bzc_n3pty_ofc_cd = null;	String bzc_n3pty_desc = null;	String bzc_n3pty_tp_cd = null;	float scg_amt_ft = 0f;	float inv_scg_amt_ft = 0f;	float n3pty_bzc_amt = 0f;	String [] ibflag = request.getParameterValues(prefix+"ibflag");		String colOrder = null;	int tot_cnt = 0;		if(request.getParameter("sheet_arr_no").equals("1") && request.getParameter("open_mode").equals("modify")){		if(request.getParameter("n3pty_bzc_amt").equals("undefined")){			return;		}else{			if(request.getParameter("n3pty_bzc_amt").equals("") || request.getParameter("n3pty_bzc_amt").equals("0")){						bzc_n3pty_amt = JSPUtil.getNull(request.getParameter("po_basic_rt"));				n3pty_bzc_amt = Float.parseFloat(bzc_n3pty_amt);			}else{				bzc_n3pty_amt = JSPUtil.getNull(request.getParameter("n3pty_bzc_amt"));				n3pty_bzc_amt = Float.parseFloat(bzc_n3pty_amt);			}							bzc_n3pty_tp_cd = JSPUtil.getNull(request.getParameter("n3pty_bzc_tp_cd"));			bzc_cust_cnt_cd = JSPUtil.getNull(request.getParameter("n3pty_bzc_cust_cnt_cd"));			bzc_cust_cnt_seq = JSPUtil.getNull(request.getParameter("n3pty_bzc_cust_seq"));			bzc_n3pty_vndr_seq = JSPUtil.getNull(request.getParameter("n3pty_bzc_vndr_seq"));			bzc_n3pty_ofc_cd = JSPUtil.getNull(request.getParameter("n3pty_bzc_ofc_cd"));			bzc_n3pty_desc = JSPUtil.getNull(request.getParameter("n3pty_bzc_desc"));						if(!bzc_cust_cnt_cd.equals("")){				bzc_bill_case = "CS";				bzc_biller_cd = bzc_cust_cnt_cd+bzc_cust_cnt_seq;			}else if(!bzc_n3pty_vndr_seq.equals("")){				bzc_bill_case = "SP";				bzc_biller_cd = bzc_n3pty_vndr_seq;			}else if(!bzc_n3pty_ofc_cd.equals("")){				bzc_bill_case = "HJ";				bzc_biller_cd = bzc_n3pty_ofc_cd;			}else{				bzc_bill_case = "";				bzc_biller_cd = "";			}		}		}else{		if(request.getParameter("inv_bsz_n3pty_amt").equals("undefined")){			return;		}else{							bzc_n3pty_amt = JSPUtil.getNull(request.getParameter("inv_bsz_n3pty_amt"));			n3pty_bzc_amt = Float.parseFloat(bzc_n3pty_amt);						bzc_n3pty_tp_cd = JSPUtil.getNull(request.getParameter("inv_bsz_bill_case"));			bzc_cust_cnt_cd = JSPUtil.getNull(request.getParameter("inv_bsz_cust_cnt_cd"));			bzc_cust_cnt_seq = JSPUtil.getNull(request.getParameter("inv_bsz_cust_seq"));			bzc_n3pty_vndr_seq = JSPUtil.getNull(request.getParameter("inv_bsz_n3pty_vndr_seq"));			bzc_n3pty_ofc_cd = JSPUtil.getNull(request.getParameter("inv_bsz_n3pty_ofc_cd"));			bzc_n3pty_desc = JSPUtil.getNull(request.getParameter("inv_bsz_n3pty_desc"));						if(!bzc_cust_cnt_cd.equals("")){				bzc_bill_case = "CS";				bzc_biller_cd = bzc_cust_cnt_cd+bzc_cust_cnt_seq;			}else if(!bzc_n3pty_vndr_seq.equals("")){				bzc_bill_case = "SP";				bzc_biller_cd = bzc_n3pty_vndr_seq;			}else if(!bzc_n3pty_ofc_cd.equals("")){				bzc_bill_case = "HJ";				bzc_biller_cd = bzc_n3pty_ofc_cd;			}else{				bzc_bill_case = "";				bzc_biller_cd = "";			}								}	}		/* COLORDER 생성 */	colOrder = "lgs_cost_full_nm|bsz_bill_case|n3pty_amt|bill_case|biller_cd|n3pty_desc|lgs_cost_cd|unique_cd|cust_cnt_cd|cust_seq|n3pty_vndr_seq|n3pty_ofc_cd";	/* COLORDER 생성끝 */		if(ibflag == null){		tot_cnt = 0;	}else{		tot_cnt = ibflag.length;	}%><SHEET>	<DATA TOTAL="<%=tot_cnt%>" COLORDER="<%=colOrder%>"><%	for(int k=0; k<tot_cnt; k++) {%>	<TR>		<TD><![CDATA[<%=JSPUtil.getNull(request.getParameterValues(prefix+"lgs_cost_full_nm")[k]) %>]]></TD>		<TD></TD><%	n3pty_amt = JSPUtil.getNull(request.getParameterValues(prefix+"n3pty_amt")[k]);	cust_cnt_cd = JSPUtil.getNull(request.getParameterValues(prefix+"cust_cnt_cd")[k]);	cust_cnt_seq = JSPUtil.getNull(request.getParameterValues(prefix+"cust_seq")[k]);	n3pty_vndr_seq = JSPUtil.getNull(request.getParameterValues(prefix+"n3pty_vndr_seq")[k]);	n3pty_ofc_cd = JSPUtil.getNull(request.getParameterValues(prefix+"n3pty_ofc_cd")[k]);	scg_amt = JSPUtil.getNull(request.getParameterValues(prefix+"scg_amt")[k]);	inv_scg_amt = JSPUtil.getNull(request.getParameterValues(prefix+"inv_scg_amt")[k]);		if(scg_amt.equals("")) scg_amt = "0";	scg_amt_ft = Float.parseFloat(scg_amt);	if(inv_scg_amt.equals("")) inv_scg_amt = "0";	inv_scg_amt_ft = Float.parseFloat(inv_scg_amt);	if(!cust_cnt_cd.equals("")){		bill_case = "CS";		biller_cd = cust_cnt_cd+cust_cnt_seq;	}else if(!n3pty_vndr_seq.equals("")){		bill_case = "SP";		biller_cd = n3pty_vndr_seq;	}else if(!n3pty_ofc_cd.equals("")){		bill_case = "HJ";		biller_cd = n3pty_ofc_cd;	}else{		bill_case = "";		biller_cd = "";	}	if(!n3pty_amt.equals("") && !n3pty_amt.equals("0")){%>		<TD><![CDATA[<%=JSPUtil.getNull(request.getParameterValues(prefix+"n3pty_amt")[k]) %>]]></TD><%	}else{%>		<TD><![CDATA[<%= scg_amt_ft + inv_scg_amt_ft %>]]></TD><%	}	%>		<TD><![CDATA[<%=bill_case%>]]></TD>		<TD><![CDATA[<%=biller_cd%>]]></TD>			<TD><![CDATA[<%=JSPUtil.getNull(request.getParameterValues(prefix+"n3pty_desc")[k]) %>]]></TD>		<TD><![CDATA[<%=JSPUtil.getNull(request.getParameterValues(prefix+"lgs_cost_cd")[k]) %>]]></TD>		<TD><![CDATA[<%=JSPUtil.getNull(request.getParameterValues(prefix+"unique_cd")[k]) %>]]></TD>		<TD><![CDATA[<%=JSPUtil.getNull(request.getParameterValues(prefix+"cust_cnt_cd")[k]) %>]]></TD>		<TD><![CDATA[<%=JSPUtil.getNull(request.getParameterValues(prefix+"cust_seq")[k]) %>]]></TD>		<TD><![CDATA[<%=JSPUtil.getNull(request.getParameterValues(prefix+"n3pty_vndr_seq")[k]) %>]]></TD>		<TD><![CDATA[<%=JSPUtil.getNull(request.getParameterValues(prefix+"n3pty_ofc_cd")[k]) %>]]></TD>	</TR><%	}%>	<TR>		<TD><![CDATA[Basic Amount]]></TD>			<TD><![CDATA[<%= bzc_n3pty_tp_cd %>]]></TD>			<TD><![CDATA[<%= n3pty_bzc_amt %>]]></TD>				<TD><![CDATA[<%= bzc_bill_case %>]]></TD>		<TD><![CDATA[<%= bzc_biller_cd %>]]></TD>		<TD><![CDATA[<%= bzc_n3pty_desc %>]]></TD>		<TD></TD>		<TD></TD>		<TD><![CDATA[<%= bzc_cust_cnt_cd %>]]></TD>		<TD><![CDATA[<%= bzc_cust_cnt_seq %>]]></TD>		<TD><![CDATA[<%= bzc_n3pty_vndr_seq %>]]></TD>		<TD><![CDATA[<%= bzc_n3pty_ofc_cd %>]]></TD>	</TR>	</DATA></SHEET><%}catch(Exception e){%><ERROR>	<MESSAGE> <![CDATA[ <% out.println(e.getMessage()); %>]]> </MESSAGE></ERROR><%	throw new Exception(e.getMessage());}%>